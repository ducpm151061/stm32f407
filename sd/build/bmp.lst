ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"bmp.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.stdbmp_decode,"ax",%progbits
  18              		.align	1
  19              		.global	stdbmp_decode
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	stdbmp_decode:
  27              	.LVL0:
  28              	.LFB130:
  29              		.file 1 "Core/Src/bmp.c"
   1:Core/Src/bmp.c **** #include "piclib.h"
   2:Core/Src/bmp.c **** #include "bmp.h"
   3:Core/Src/bmp.c **** #include "string.h"
   4:Core/Src/bmp.c **** 
   5:Core/Src/bmp.c **** 
   6:Core/Src/bmp.c **** //不使用内存分配
   7:Core/Src/bmp.c **** #if BMP_USE_MALLOC == 0	
   8:Core/Src/bmp.c **** FIL f_bfile;
   9:Core/Src/bmp.c **** u8 bmpreadbuf[BMP_DBUF_SIZE];
  10:Core/Src/bmp.c **** #endif 				    
  11:Core/Src/bmp.c **** 
  12:Core/Src/bmp.c **** //标准的bmp解码,解码filename这个BMP文件	
  13:Core/Src/bmp.c **** //速度比较慢.主要	
  14:Core/Src/bmp.c **** //filename:包含路径的文件名	       	  			  
  15:Core/Src/bmp.c **** //返回值:0,成功;
  16:Core/Src/bmp.c **** //		 其他,错误码.
  17:Core/Src/bmp.c **** u8 stdbmp_decode(const u8 *filename) 
  18:Core/Src/bmp.c **** {
  30              		.loc 1 18 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 40
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 18 1 is_stmt 0 view .LVU1
  35 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 36
  38              		.cfi_offset 4, -36
  39              		.cfi_offset 5, -32
  40              		.cfi_offset 6, -28
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 2


  41              		.cfi_offset 7, -24
  42              		.cfi_offset 8, -20
  43              		.cfi_offset 9, -16
  44              		.cfi_offset 10, -12
  45              		.cfi_offset 11, -8
  46              		.cfi_offset 14, -4
  47 0004 8BB0     		sub	sp, sp, #44
  48              	.LCFI1:
  49              		.cfi_def_cfa_offset 80
  50 0006 0446     		mov	r4, r0
  19:Core/Src/bmp.c **** 	FIL* f_bmp;
  51              		.loc 1 19 2 is_stmt 1 view .LVU2
  20:Core/Src/bmp.c ****     u16 br;
  52              		.loc 1 20 5 view .LVU3
  21:Core/Src/bmp.c **** 
  22:Core/Src/bmp.c ****     u16 count;		    	   
  53              		.loc 1 22 5 view .LVU4
  23:Core/Src/bmp.c **** 	u8  rgb ,color_byte;
  54              		.loc 1 23 2 view .LVU5
  24:Core/Src/bmp.c **** 	u16 x ,y,color;	  
  55              		.loc 1 24 2 view .LVU6
  25:Core/Src/bmp.c **** 	u16 countpix=0;//记录像素 	 
  56              		.loc 1 25 2 view .LVU7
  57              	.LVL1:
  26:Core/Src/bmp.c **** 
  27:Core/Src/bmp.c **** 	//x,y的实际坐标	
  28:Core/Src/bmp.c **** 	u16  realx=0;
  58              		.loc 1 28 2 view .LVU8
  29:Core/Src/bmp.c **** 	u16 realy=0;
  59              		.loc 1 29 2 view .LVU9
  30:Core/Src/bmp.c **** 	u8  yok=1;  				   
  60              		.loc 1 30 2 view .LVU10
  31:Core/Src/bmp.c **** 	u8 res;
  61              		.loc 1 31 2 view .LVU11
  32:Core/Src/bmp.c **** 
  33:Core/Src/bmp.c **** 
  34:Core/Src/bmp.c **** 	u8 *databuf;    		//数据读取存放地址
  62              		.loc 1 34 2 view .LVU12
  35:Core/Src/bmp.c ****  	u16 readlen=BMP_DBUF_SIZE;//一次从SD卡读取的字节数长度
  63              		.loc 1 35 3 view .LVU13
  36:Core/Src/bmp.c **** 
  37:Core/Src/bmp.c **** 	u8 *bmpbuf;			  	//数据解码地址
  64              		.loc 1 37 2 view .LVU14
  38:Core/Src/bmp.c **** 	u8 biCompression=0;		//记录压缩方式
  65              		.loc 1 38 2 view .LVU15
  39:Core/Src/bmp.c **** 	
  40:Core/Src/bmp.c **** 	u16 rowlen;	  		 	//水平方向字节数  
  66              		.loc 1 40 2 view .LVU16
  41:Core/Src/bmp.c **** 	BITMAPINFO *pbmp;		//临时指针
  67              		.loc 1 41 2 view .LVU17
  42:Core/Src/bmp.c **** 	
  43:Core/Src/bmp.c **** #if BMP_USE_MALLOC == 1	//使用malloc	
  44:Core/Src/bmp.c **** 	databuf=(u8*)pic_memalloc(readlen);		//开辟readlen字节的内存区域
  68              		.loc 1 44 2 view .LVU18
  69              		.loc 1 44 15 is_stmt 0 view .LVU19
  70 0008 4FF40060 		mov	r0, #2048
  71              	.LVL2:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 3


  72              		.loc 1 44 15 view .LVU20
  73 000c FFF7FEFF 		bl	pic_memalloc
  74              	.LVL3:
  45:Core/Src/bmp.c **** 	if(databuf==NULL)return PIC_MEM_ERR;	//内存申请失败.
  75              		.loc 1 45 2 is_stmt 1 view .LVU21
  76              		.loc 1 45 4 is_stmt 0 view .LVU22
  77 0010 0028     		cmp	r0, #0
  78 0012 00F04381 		beq	.L26
  79 0016 8146     		mov	r9, r0
  46:Core/Src/bmp.c **** 	f_bmp=(FIL *)pic_memalloc(sizeof(FIL));	//开辟FIL字节的内存区域 
  80              		.loc 1 46 2 is_stmt 1 view .LVU23
  81              		.loc 1 46 15 is_stmt 0 view .LVU24
  82 0018 4FF40A70 		mov	r0, #552
  83              	.LVL4:
  84              		.loc 1 46 15 view .LVU25
  85 001c FFF7FEFF 		bl	pic_memalloc
  86              	.LVL5:
  47:Core/Src/bmp.c **** 	if(f_bmp==NULL)							//内存申请失败.
  87              		.loc 1 47 2 is_stmt 1 view .LVU26
  88              		.loc 1 47 4 is_stmt 0 view .LVU27
  89 0020 8246     		mov	r10, r0
  90 0022 78B1     		cbz	r0, .L31
  48:Core/Src/bmp.c **** 	{		 
  49:Core/Src/bmp.c **** 		pic_memfree(databuf);
  50:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
  51:Core/Src/bmp.c **** 	} 	 
  52:Core/Src/bmp.c **** #else				 	//不使用malloc
  53:Core/Src/bmp.c **** 	databuf=bmpreadbuf;
  54:Core/Src/bmp.c **** 	f_bmp=&f_bfile;
  55:Core/Src/bmp.c **** #endif
  56:Core/Src/bmp.c **** 	res=f_open(f_bmp,(const TCHAR*)filename,FA_READ);//打开文件	 						  
  91              		.loc 1 56 2 is_stmt 1 view .LVU28
  92              		.loc 1 56 6 is_stmt 0 view .LVU29
  93 0024 0122     		movs	r2, #1
  94 0026 2146     		mov	r1, r4
  95 0028 FFF7FEFF 		bl	f_open
  96              	.LVL6:
  57:Core/Src/bmp.c **** 	if(res==0)//打开成功.
  97              		.loc 1 57 2 is_stmt 1 view .LVU30
  98              		.loc 1 57 4 is_stmt 0 view .LVU31
  99 002c 0090     		str	r0, [sp]
 100 002e 78B1     		cbz	r0, .L32
 101              	.LVL7:
 102              	.L4:
  58:Core/Src/bmp.c **** 	{ 
  59:Core/Src/bmp.c **** 		f_read(f_bmp,databuf,readlen,(UINT*)&br);	//读出readlen个字节  
  60:Core/Src/bmp.c **** 		pbmp=(BITMAPINFO*)databuf;					//得到BMP的头部信息   
  61:Core/Src/bmp.c **** 		count=pbmp->bmfHeader.bfOffBits;        	//数据偏移,得到数据段的开始地址
  62:Core/Src/bmp.c **** 		color_byte=pbmp->bmiHeader.biBitCount/8;	//彩色位 16/24/32  
  63:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
  64:Core/Src/bmp.c **** 		picinfo.ImgHeight=pbmp->bmiHeader.biHeight;	//得到图片高度
  65:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度 
  66:Core/Src/bmp.c **** 		ai_draw_init();//初始化智能画图			
  67:Core/Src/bmp.c **** 		//水平像素必须是4的倍数!!
  68:Core/Src/bmp.c **** 		if((picinfo.ImgWidth*color_byte)%4)rowlen=((picinfo.ImgWidth*color_byte)/4+1)*4;
  69:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
  70:Core/Src/bmp.c **** 		//开始解码BMP   
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 4


  71:Core/Src/bmp.c **** 		color=0;//颜色清空	 													 
  72:Core/Src/bmp.c **** 		x=0 ;
  73:Core/Src/bmp.c **** 		y=picinfo.ImgHeight;
  74:Core/Src/bmp.c **** 		rgb=0;      
  75:Core/Src/bmp.c **** 		//对于尺寸小于等于设定尺寸的图片,进行快速解码
  76:Core/Src/bmp.c **** 		realy=(y*picinfo.Div_Fac)>>13;
  77:Core/Src/bmp.c **** 		bmpbuf=databuf;
  78:Core/Src/bmp.c **** 		while(1)
  79:Core/Src/bmp.c **** 		{				 
  80:Core/Src/bmp.c **** 			while(count<readlen)  //读取一簇1024扇区 (SectorsPerClust 每簇扇区数)
  81:Core/Src/bmp.c **** 		    {
  82:Core/Src/bmp.c **** 				if(color_byte==3)   //24位颜色图
  83:Core/Src/bmp.c **** 				{
  84:Core/Src/bmp.c **** 					switch (rgb) 
  85:Core/Src/bmp.c **** 					{
  86:Core/Src/bmp.c **** 						case 0:				  
  87:Core/Src/bmp.c **** 							color=bmpbuf[count]>>3; //B
  88:Core/Src/bmp.c **** 							break ;	   
  89:Core/Src/bmp.c **** 						case 1: 	 
  90:Core/Src/bmp.c **** 							color+=((u16)bmpbuf[count]<<3)&0X07E0;//G
  91:Core/Src/bmp.c **** 							break;	  
  92:Core/Src/bmp.c **** 						case 2 : 
  93:Core/Src/bmp.c **** 							color+=((u16)bmpbuf[count]<<8)&0XF800;//R	  
  94:Core/Src/bmp.c **** 							break ;			
  95:Core/Src/bmp.c **** 					}   
  96:Core/Src/bmp.c **** 				}else if(color_byte==2)  //16位颜色图
  97:Core/Src/bmp.c **** 				{
  98:Core/Src/bmp.c **** 					switch(rgb)
  99:Core/Src/bmp.c **** 					{
 100:Core/Src/bmp.c **** 						case 0 : 
 101:Core/Src/bmp.c **** 							if(biCompression==BI_RGB)//RGB:5,5,5
 102:Core/Src/bmp.c **** 							{
 103:Core/Src/bmp.c **** 								color=((u16)bmpbuf[count]&0X1F);	 	//R
 104:Core/Src/bmp.c **** 								color+=(((u16)bmpbuf[count])&0XE0)<<1; //G
 105:Core/Src/bmp.c **** 							}else		//RGB:5,6,5
 106:Core/Src/bmp.c **** 							{
 107:Core/Src/bmp.c **** 								color=bmpbuf[count];  			//G,B
 108:Core/Src/bmp.c **** 							}  
 109:Core/Src/bmp.c **** 							break ;   
 110:Core/Src/bmp.c **** 						case 1 : 			  			 
 111:Core/Src/bmp.c **** 							if(biCompression==BI_RGB)//RGB:5,5,5
 112:Core/Src/bmp.c **** 							{
 113:Core/Src/bmp.c **** 								color+=(u16)bmpbuf[count]<<9;  //R,G
 114:Core/Src/bmp.c **** 							}else  		//RGB:5,6,5
 115:Core/Src/bmp.c **** 							{
 116:Core/Src/bmp.c **** 								color+=(u16)bmpbuf[count]<<8;	//R,G
 117:Core/Src/bmp.c **** 							}  									 
 118:Core/Src/bmp.c **** 							break ;	 
 119:Core/Src/bmp.c **** 					}		     
 120:Core/Src/bmp.c **** 				}else if(color_byte==4)//32位颜色图
 121:Core/Src/bmp.c **** 				{
 122:Core/Src/bmp.c **** 					switch (rgb)
 123:Core/Src/bmp.c **** 					{
 124:Core/Src/bmp.c **** 						case 0:				  
 125:Core/Src/bmp.c **** 							color=bmpbuf[count]>>3; //B
 126:Core/Src/bmp.c **** 							break ;	   
 127:Core/Src/bmp.c **** 						case 1: 	 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 5


 128:Core/Src/bmp.c **** 							color+=((u16)bmpbuf[count]<<3)&0X07E0;//G
 129:Core/Src/bmp.c **** 							break;	  
 130:Core/Src/bmp.c **** 						case 2 : 
 131:Core/Src/bmp.c **** 							color+=((u16)bmpbuf[count]<<8)&0XF800;//R	  
 132:Core/Src/bmp.c **** 							break ;			
 133:Core/Src/bmp.c **** 						case 3 :
 134:Core/Src/bmp.c **** 							//alphabend=bmpbuf[count];//不读取  ALPHA通道
 135:Core/Src/bmp.c **** 							break ;  		  	 
 136:Core/Src/bmp.c **** 					}	
 137:Core/Src/bmp.c **** 				}else if(color_byte==1)//8位色,暂时不支持,需要用到颜色表.
 138:Core/Src/bmp.c **** 				{
 139:Core/Src/bmp.c **** 				} 
 140:Core/Src/bmp.c **** 				rgb++;	  
 141:Core/Src/bmp.c **** 				count++ ;		  
 142:Core/Src/bmp.c **** 				if(rgb==color_byte) //水平方向读取到1像素数数据后显示
 143:Core/Src/bmp.c **** 				{	
 144:Core/Src/bmp.c **** 					if(x<picinfo.ImgWidth)	 					 			   
 145:Core/Src/bmp.c **** 					{	
 146:Core/Src/bmp.c **** 						realx=(x*picinfo.Div_Fac)>>13;//x轴实际值
 147:Core/Src/bmp.c **** 						if(is_element_ok(realx,realy,1)&&yok)//符合条件
 148:Core/Src/bmp.c **** 						{						 				 	  	       
 149:Core/Src/bmp.c **** 							pic_phy.draw_point(realx+picinfo.S_XOFF,realy+picinfo.S_YOFF-1,color);//显示图片	
 150:Core/Src/bmp.c **** 							//POINT_COLOR=color;		 
 151:Core/Src/bmp.c **** 							//LCD_DrawPoint(realx+picinfo.S_XOFF,realy+picinfo.S_YOFF); 
 152:Core/Src/bmp.c **** 							//SRAMLCD.Draw_Point(realx+picinfo.S_XOFF,realy+picinfo.S_YOFF,color);
 153:Core/Src/bmp.c **** 						}   									    
 154:Core/Src/bmp.c **** 					}
 155:Core/Src/bmp.c **** 					x++;//x轴增加一个像素 
 156:Core/Src/bmp.c **** 					color=0x00; 
 157:Core/Src/bmp.c **** 					rgb=0;  		  
 158:Core/Src/bmp.c **** 				}
 159:Core/Src/bmp.c **** 				countpix++;//像素累加
 160:Core/Src/bmp.c **** 				if(countpix>=rowlen)//水平方向像素值到了.换行
 161:Core/Src/bmp.c **** 				{		 
 162:Core/Src/bmp.c **** 					y--; 
 163:Core/Src/bmp.c **** 					if(y==0)break;			 
 164:Core/Src/bmp.c **** 					realy=(y*picinfo.Div_Fac)>>13;//实际y值改变	 
 165:Core/Src/bmp.c **** 					if(is_element_ok(realx,realy,0))yok=1;//此处不改变picinfo.staticx,y的值	 
 166:Core/Src/bmp.c **** 					else yok=0; 
 167:Core/Src/bmp.c **** 					x=0; 
 168:Core/Src/bmp.c **** 					countpix=0;
 169:Core/Src/bmp.c **** 					color=0x00;
 170:Core/Src/bmp.c **** 					rgb=0;
 171:Core/Src/bmp.c **** 				}	 
 172:Core/Src/bmp.c **** 			} 		
 173:Core/Src/bmp.c **** 			res=f_read(f_bmp,databuf,readlen,(UINT *)&br);//读出readlen个字节
 174:Core/Src/bmp.c **** 			if(br!=readlen)readlen=br;	//最后一批数据		  
 175:Core/Src/bmp.c **** 			if(res||br==0)break;		//读取出错
 176:Core/Src/bmp.c **** 			bmpbuf=databuf;
 177:Core/Src/bmp.c **** 	 	 	count=0;
 178:Core/Src/bmp.c **** 		}  
 179:Core/Src/bmp.c **** 		f_close(f_bmp);//关闭文件
 180:Core/Src/bmp.c **** 	}  	
 181:Core/Src/bmp.c **** #if BMP_USE_MALLOC == 1	//使用malloc	
 182:Core/Src/bmp.c **** 	pic_memfree(databuf);	 
 103              		.loc 1 182 2 is_stmt 1 view .LVU32
 104 0030 4846     		mov	r0, r9
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 6


 105 0032 FFF7FEFF 		bl	pic_memfree
 106              	.LVL8:
 183:Core/Src/bmp.c **** 	pic_memfree(f_bmp);		 
 107              		.loc 1 183 2 view .LVU33
 108 0036 5046     		mov	r0, r10
 109 0038 FFF7FEFF 		bl	pic_memfree
 110              	.LVL9:
 184:Core/Src/bmp.c **** #endif	
 185:Core/Src/bmp.c **** 	return res;		//BMP显示结束.    					   
 111              		.loc 1 185 2 view .LVU34
 112              	.L2:
 186:Core/Src/bmp.c **** }		 
 113              		.loc 1 186 1 is_stmt 0 view .LVU35
 114 003c 0098     		ldr	r0, [sp]
 115 003e 0BB0     		add	sp, sp, #44
 116              	.LCFI2:
 117              		.cfi_remember_state
 118              		.cfi_def_cfa_offset 36
 119              		@ sp needed
 120 0040 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 121              	.LVL10:
 122              	.L31:
 123              	.LCFI3:
 124              		.cfi_restore_state
  49:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 125              		.loc 1 49 3 is_stmt 1 view .LVU36
 126 0044 4846     		mov	r0, r9
 127              	.LVL11:
  49:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 128              		.loc 1 49 3 is_stmt 0 view .LVU37
 129 0046 FFF7FEFF 		bl	pic_memfree
 130              	.LVL12:
  50:Core/Src/bmp.c **** 	} 	 
 131              		.loc 1 50 3 is_stmt 1 view .LVU38
  50:Core/Src/bmp.c **** 	} 	 
 132              		.loc 1 50 10 is_stmt 0 view .LVU39
 133 004a 1123     		movs	r3, #17
 134 004c 0093     		str	r3, [sp]
 135 004e F5E7     		b	.L2
 136              	.LVL13:
 137              	.L32:
  59:Core/Src/bmp.c **** 		pbmp=(BITMAPINFO*)databuf;					//得到BMP的头部信息   
 138              		.loc 1 59 3 is_stmt 1 view .LVU40
 139 0050 0DF12603 		add	r3, sp, #38
 140 0054 4FF40062 		mov	r2, #2048
 141 0058 4946     		mov	r1, r9
 142 005a 5046     		mov	r0, r10
 143              	.LVL14:
  59:Core/Src/bmp.c **** 		pbmp=(BITMAPINFO*)databuf;					//得到BMP的头部信息   
 144              		.loc 1 59 3 is_stmt 0 view .LVU41
 145 005c FFF7FEFF 		bl	f_read
 146              	.LVL15:
  60:Core/Src/bmp.c **** 		count=pbmp->bmfHeader.bfOffBits;        	//数据偏移,得到数据段的开始地址
 147              		.loc 1 60 3 is_stmt 1 view .LVU42
  61:Core/Src/bmp.c **** 		color_byte=pbmp->bmiHeader.biBitCount/8;	//彩色位 16/24/32  
 148              		.loc 1 61 3 view .LVU43
  61:Core/Src/bmp.c **** 		color_byte=pbmp->bmiHeader.biBitCount/8;	//彩色位 16/24/32  
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 7


 149              		.loc 1 61 8 is_stmt 0 view .LVU44
 150 0060 B9F80C40 		ldrh	r4, [r9, #12]
 151              	.LVL16:
  62:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 152              		.loc 1 62 3 is_stmt 1 view .LVU45
  62:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 153              		.loc 1 62 29 is_stmt 0 view .LVU46
 154 0064 B9F81E80 		ldrh	r8, [r9, #30]
  62:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 155              		.loc 1 62 13 view .LVU47
 156 0068 4FEAD805 		lsr	r5, r8, #3
 157 006c C8F3C708 		ubfx	r8, r8, #3, #8
 158              	.LVL17:
  63:Core/Src/bmp.c **** 		picinfo.ImgHeight=pbmp->bmiHeader.biHeight;	//得到图片高度
 159              		.loc 1 63 3 is_stmt 1 view .LVU48
  63:Core/Src/bmp.c **** 		picinfo.ImgHeight=pbmp->bmiHeader.biHeight;	//得到图片高度
 160              		.loc 1 63 16 is_stmt 0 view .LVU49
 161 0070 99F82030 		ldrb	r3, [r9, #32]	@ zero_extendqisi2
 162 0074 0793     		str	r3, [sp, #28]
 163              	.LVL18:
  64:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度 
 164              		.loc 1 64 3 is_stmt 1 view .LVU50
  64:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度 
 165              		.loc 1 64 36 is_stmt 0 view .LVU51
 166 0076 D9F81830 		ldr	r3, [r9, #24]
  64:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度 
 167              		.loc 1 64 20 view .LVU52
 168 007a 8A4E     		ldr	r6, .L38
 169 007c B360     		str	r3, [r6, #8]
  65:Core/Src/bmp.c **** 		ai_draw_init();//初始化智能画图			
 170              		.loc 1 65 3 is_stmt 1 view .LVU53
  65:Core/Src/bmp.c **** 		ai_draw_init();//初始化智能画图			
 171              		.loc 1 65 35 is_stmt 0 view .LVU54
 172 007e D9F81430 		ldr	r3, [r9, #20]
  65:Core/Src/bmp.c **** 		ai_draw_init();//初始化智能画图			
 173              		.loc 1 65 19 view .LVU55
 174 0082 7360     		str	r3, [r6, #4]
  66:Core/Src/bmp.c **** 		//水平像素必须是4的倍数!!
 175              		.loc 1 66 3 is_stmt 1 view .LVU56
 176 0084 FFF7FEFF 		bl	ai_draw_init
 177              	.LVL19:
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 178              		.loc 1 68 3 view .LVU57
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 179              		.loc 1 68 14 is_stmt 0 view .LVU58
 180 0088 7268     		ldr	r2, [r6, #4]
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 181              		.loc 1 68 23 view .LVU59
 182 008a 02FB08F3 		mul	r3, r2, r8
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 183              		.loc 1 68 5 view .LVU60
 184 008e 13F0030F 		tst	r3, #3
 185 0092 18D0     		beq	.L5
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 186              		.loc 1 68 38 is_stmt 1 discriminator 1 view .LVU61
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 187              		.loc 1 68 75 is_stmt 0 discriminator 1 view .LVU62
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 8


 188 0094 9B08     		lsrs	r3, r3, #2
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 189              		.loc 1 68 77 discriminator 1 view .LVU63
 190 0096 0133     		adds	r3, r3, #1
  68:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 191              		.loc 1 68 44 discriminator 1 view .LVU64
 192 0098 9B00     		lsls	r3, r3, #2
 193 009a 9BB2     		uxth	r3, r3
 194 009c 0393     		str	r3, [sp, #12]
 195              	.LVL20:
 196              	.L6:
  71:Core/Src/bmp.c **** 		x=0 ;
 197              		.loc 1 71 3 is_stmt 1 view .LVU65
  72:Core/Src/bmp.c **** 		y=picinfo.ImgHeight;
 198              		.loc 1 72 3 view .LVU66
  73:Core/Src/bmp.c **** 		rgb=0;      
 199              		.loc 1 73 3 view .LVU67
  73:Core/Src/bmp.c **** 		rgb=0;      
 200              		.loc 1 73 12 is_stmt 0 view .LVU68
 201 009e 814B     		ldr	r3, .L38
  73:Core/Src/bmp.c **** 		rgb=0;      
 202              		.loc 1 73 4 view .LVU69
 203 00a0 B3F808B0 		ldrh	fp, [r3, #8]
 204              	.LVL21:
  74:Core/Src/bmp.c **** 		//对于尺寸小于等于设定尺寸的图片,进行快速解码
 205              		.loc 1 74 3 is_stmt 1 view .LVU70
  76:Core/Src/bmp.c **** 		bmpbuf=databuf;
 206              		.loc 1 76 3 view .LVU71
  76:Core/Src/bmp.c **** 		bmpbuf=databuf;
 207              		.loc 1 76 19 is_stmt 0 view .LVU72
 208 00a4 DB68     		ldr	r3, [r3, #12]
  76:Core/Src/bmp.c **** 		bmpbuf=databuf;
 209              		.loc 1 76 11 view .LVU73
 210 00a6 03FB0BF3 		mul	r3, r3, fp
  76:Core/Src/bmp.c **** 		bmpbuf=databuf;
 211              		.loc 1 76 8 view .LVU74
 212 00aa C3F34F33 		ubfx	r3, r3, #13, #16
 213 00ae 0493     		str	r3, [sp, #16]
 214              	.LVL22:
  77:Core/Src/bmp.c **** 		while(1)
 215              		.loc 1 77 3 is_stmt 1 view .LVU75
  74:Core/Src/bmp.c **** 		//对于尺寸小于等于设定尺寸的图片,进行快速解码
 216              		.loc 1 74 6 is_stmt 0 view .LVU76
 217 00b0 009D     		ldr	r5, [sp]
  35:Core/Src/bmp.c **** 
 218              		.loc 1 35 7 view .LVU77
 219 00b2 4FF40066 		mov	r6, #2048
  30:Core/Src/bmp.c **** 	u8 res;
 220              		.loc 1 30 6 view .LVU78
 221 00b6 0123     		movs	r3, #1
 222 00b8 0693     		str	r3, [sp, #24]
  28:Core/Src/bmp.c **** 	u16 realy=0;
 223              		.loc 1 28 7 view .LVU79
 224 00ba 0023     		movs	r3, #0
 225 00bc 0593     		str	r3, [sp, #20]
  25:Core/Src/bmp.c **** 
 226              		.loc 1 25 6 view .LVU80
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 9


 227 00be 1F46     		mov	r7, r3
  71:Core/Src/bmp.c **** 		x=0 ;
 228              		.loc 1 71 8 view .LVU81
 229 00c0 0193     		str	r3, [sp, #4]
  72:Core/Src/bmp.c **** 		y=picinfo.ImgHeight;
 230              		.loc 1 72 4 view .LVU82
 231 00c2 0293     		str	r3, [sp, #8]
 232 00c4 D4E0     		b	.L7
 233              	.LVL23:
 234              	.L5:
  69:Core/Src/bmp.c **** 		//开始解码BMP   
 235              		.loc 1 69 8 is_stmt 1 view .LVU83
  69:Core/Src/bmp.c **** 		//开始解码BMP   
 236              		.loc 1 69 14 is_stmt 0 view .LVU84
 237 00c6 EDB2     		uxtb	r5, r5
 238 00c8 15FB02F5 		smulbb	r5, r5, r2
 239 00cc ABB2     		uxth	r3, r5
 240 00ce 0393     		str	r3, [sp, #12]
 241              	.LVL24:
  69:Core/Src/bmp.c **** 		//开始解码BMP   
 242              		.loc 1 69 14 view .LVU85
 243 00d0 E5E7     		b	.L6
 244              	.LVL25:
 245              	.L23:
  82:Core/Src/bmp.c **** 				{
 246              		.loc 1 82 5 is_stmt 1 view .LVU86
  82:Core/Src/bmp.c **** 				{
 247              		.loc 1 82 7 is_stmt 0 view .LVU87
 248 00d2 B8F1030F 		cmp	r8, #3
 249 00d6 31D0     		beq	.L33
  96:Core/Src/bmp.c **** 				{
 250              		.loc 1 96 11 is_stmt 1 view .LVU88
  96:Core/Src/bmp.c **** 				{
 251              		.loc 1 96 13 is_stmt 0 view .LVU89
 252 00d8 B8F1020F 		cmp	r8, #2
 253 00dc 4DD0     		beq	.L34
 120:Core/Src/bmp.c **** 				{
 254              		.loc 1 120 11 is_stmt 1 view .LVU90
 120:Core/Src/bmp.c **** 				{
 255              		.loc 1 120 13 is_stmt 0 view .LVU91
 256 00de B8F1040F 		cmp	r8, #4
 257 00e2 70D0     		beq	.L35
 258              	.L11:
 139:Core/Src/bmp.c **** 				rgb++;	  
 259              		.loc 1 139 5 is_stmt 1 view .LVU92
 140:Core/Src/bmp.c **** 				count++ ;		  
 260              		.loc 1 140 5 view .LVU93
 140:Core/Src/bmp.c **** 				count++ ;		  
 261              		.loc 1 140 8 is_stmt 0 view .LVU94
 262 00e4 0135     		adds	r5, r5, #1
 263              	.LVL26:
 140:Core/Src/bmp.c **** 				count++ ;		  
 264              		.loc 1 140 8 view .LVU95
 265 00e6 EDB2     		uxtb	r5, r5
 266              	.LVL27:
 141:Core/Src/bmp.c **** 				if(rgb==color_byte) //水平方向读取到1像素数数据后显示
 267              		.loc 1 141 5 is_stmt 1 view .LVU96
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 10


 141:Core/Src/bmp.c **** 				if(rgb==color_byte) //水平方向读取到1像素数数据后显示
 268              		.loc 1 141 10 is_stmt 0 view .LVU97
 269 00e8 0134     		adds	r4, r4, #1
 270              	.LVL28:
 141:Core/Src/bmp.c **** 				if(rgb==color_byte) //水平方向读取到1像素数数据后显示
 271              		.loc 1 141 10 view .LVU98
 272 00ea A4B2     		uxth	r4, r4
 273              	.LVL29:
 142:Core/Src/bmp.c **** 				{	
 274              		.loc 1 142 5 is_stmt 1 view .LVU99
 142:Core/Src/bmp.c **** 				{	
 275              		.loc 1 142 7 is_stmt 0 view .LVU100
 276 00ec A845     		cmp	r8, r5
 277 00ee 00F08980 		beq	.L36
 278              	.LVL30:
 279              	.L19:
 159:Core/Src/bmp.c **** 				if(countpix>=rowlen)//水平方向像素值到了.换行
 280              		.loc 1 159 5 is_stmt 1 view .LVU101
 159:Core/Src/bmp.c **** 				if(countpix>=rowlen)//水平方向像素值到了.换行
 281              		.loc 1 159 13 is_stmt 0 view .LVU102
 282 00f2 0137     		adds	r7, r7, #1
 283              	.LVL31:
 159:Core/Src/bmp.c **** 				if(countpix>=rowlen)//水平方向像素值到了.换行
 284              		.loc 1 159 13 view .LVU103
 285 00f4 BFB2     		uxth	r7, r7
 286              	.LVL32:
 160:Core/Src/bmp.c **** 				{		 
 287              		.loc 1 160 5 is_stmt 1 view .LVU104
 160:Core/Src/bmp.c **** 				{		 
 288              		.loc 1 160 7 is_stmt 0 view .LVU105
 289 00f6 039B     		ldr	r3, [sp, #12]
 290 00f8 BB42     		cmp	r3, r7
 291 00fa 00F2B980 		bhi	.L7
 162:Core/Src/bmp.c **** 					if(y==0)break;			 
 292              		.loc 1 162 6 is_stmt 1 view .LVU106
 162:Core/Src/bmp.c **** 					if(y==0)break;			 
 293              		.loc 1 162 7 is_stmt 0 view .LVU107
 294 00fe 0BF1FF3B 		add	fp, fp, #-1
 295              	.LVL33:
 162:Core/Src/bmp.c **** 					if(y==0)break;			 
 296              		.loc 1 162 7 view .LVU108
 297 0102 1FFA8BFB 		uxth	fp, fp
 298              	.LVL34:
 163:Core/Src/bmp.c **** 					realy=(y*picinfo.Div_Fac)>>13;//实际y值改变	 
 299              		.loc 1 163 6 is_stmt 1 view .LVU109
 163:Core/Src/bmp.c **** 					realy=(y*picinfo.Div_Fac)>>13;//实际y值改变	 
 300              		.loc 1 163 8 is_stmt 0 view .LVU110
 301 0106 BBF1000F 		cmp	fp, #0
 302 010a 00F0B480 		beq	.L22
 164:Core/Src/bmp.c **** 					if(is_element_ok(realx,realy,0))yok=1;//此处不改变picinfo.staticx,y的值	 
 303              		.loc 1 164 6 is_stmt 1 view .LVU111
 164:Core/Src/bmp.c **** 					if(is_element_ok(realx,realy,0))yok=1;//此处不改变picinfo.staticx,y的值	 
 304              		.loc 1 164 22 is_stmt 0 view .LVU112
 305 010e 654B     		ldr	r3, .L38
 306 0110 DB68     		ldr	r3, [r3, #12]
 164:Core/Src/bmp.c **** 					if(is_element_ok(realx,realy,0))yok=1;//此处不改变picinfo.staticx,y的值	 
 307              		.loc 1 164 14 view .LVU113
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 11


 308 0112 03FB0BF3 		mul	r3, r3, fp
 164:Core/Src/bmp.c **** 					if(is_element_ok(realx,realy,0))yok=1;//此处不改变picinfo.staticx,y的值	 
 309              		.loc 1 164 11 view .LVU114
 310 0116 C3F34F33 		ubfx	r3, r3, #13, #16
 311 011a 0493     		str	r3, [sp, #16]
 312              	.LVL35:
 165:Core/Src/bmp.c **** 					else yok=0; 
 313              		.loc 1 165 6 is_stmt 1 view .LVU115
 165:Core/Src/bmp.c **** 					else yok=0; 
 314              		.loc 1 165 9 is_stmt 0 view .LVU116
 315 011c 0022     		movs	r2, #0
 316 011e 1946     		mov	r1, r3
 317 0120 0598     		ldr	r0, [sp, #20]
 318 0122 FFF7FEFF 		bl	is_element_ok
 319              	.LVL36:
 165:Core/Src/bmp.c **** 					else yok=0; 
 320              		.loc 1 165 8 view .LVU117
 321 0126 0546     		mov	r5, r0
 322              	.LVL37:
 165:Core/Src/bmp.c **** 					else yok=0; 
 323              		.loc 1 165 8 view .LVU118
 324 0128 0028     		cmp	r0, #0
 325 012a 00F09980 		beq	.L27
 170:Core/Src/bmp.c **** 				}	 
 326              		.loc 1 170 9 view .LVU119
 327 012e 009D     		ldr	r5, [sp]
 165:Core/Src/bmp.c **** 					else yok=0; 
 328              		.loc 1 165 41 view .LVU120
 329 0130 0123     		movs	r3, #1
 330 0132 0693     		str	r3, [sp, #24]
 331              	.LVL38:
 168:Core/Src/bmp.c **** 					color=0x00;
 332              		.loc 1 168 14 view .LVU121
 333 0134 0027     		movs	r7, #0
 334              	.LVL39:
 169:Core/Src/bmp.c **** 					rgb=0;
 335              		.loc 1 169 11 view .LVU122
 336 0136 0197     		str	r7, [sp, #4]
 337              	.LVL40:
 167:Core/Src/bmp.c **** 					countpix=0;
 338              		.loc 1 167 7 view .LVU123
 339 0138 0297     		str	r7, [sp, #8]
 340              	.LVL41:
 167:Core/Src/bmp.c **** 					countpix=0;
 341              		.loc 1 167 7 view .LVU124
 342 013a 99E0     		b	.L7
 343              	.LVL42:
 344              	.L33:
  84:Core/Src/bmp.c **** 					{
 345              		.loc 1 84 6 is_stmt 1 view .LVU125
 346 013c 012D     		cmp	r5, #1
 347 013e 08D0     		beq	.L9
 348 0140 022D     		cmp	r5, #2
 349 0142 10D0     		beq	.L10
 350 0144 002D     		cmp	r5, #0
 351 0146 CDD1     		bne	.L11
  87:Core/Src/bmp.c **** 							break ;	   
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 12


 352              		.loc 1 87 8 view .LVU126
  87:Core/Src/bmp.c **** 							break ;	   
 353              		.loc 1 87 20 is_stmt 0 view .LVU127
 354 0148 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
  87:Core/Src/bmp.c **** 							break ;	   
 355              		.loc 1 87 13 view .LVU128
 356 014c DB08     		lsrs	r3, r3, #3
 357 014e 0193     		str	r3, [sp, #4]
 358              	.LVL43:
  88:Core/Src/bmp.c **** 						case 1: 	 
 359              		.loc 1 88 8 is_stmt 1 view .LVU129
 360 0150 C8E7     		b	.L11
 361              	.L9:
  90:Core/Src/bmp.c **** 							break;	  
 362              		.loc 1 90 8 view .LVU130
  90:Core/Src/bmp.c **** 							break;	  
 363              		.loc 1 90 27 is_stmt 0 view .LVU131
 364 0152 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
  90:Core/Src/bmp.c **** 							break;	  
 365              		.loc 1 90 34 view .LVU132
 366 0156 DB00     		lsls	r3, r3, #3
  90:Core/Src/bmp.c **** 							break;	  
 367              		.loc 1 90 38 view .LVU133
 368 0158 03F4FC63 		and	r3, r3, #2016
  90:Core/Src/bmp.c **** 							break;	  
 369              		.loc 1 90 13 view .LVU134
 370 015c 019A     		ldr	r2, [sp, #4]
 371 015e 1344     		add	r3, r3, r2
 372 0160 9BB2     		uxth	r3, r3
 373 0162 0193     		str	r3, [sp, #4]
 374              	.LVL44:
  91:Core/Src/bmp.c **** 						case 2 : 
 375              		.loc 1 91 8 is_stmt 1 view .LVU135
 376 0164 BEE7     		b	.L11
 377              	.L10:
  93:Core/Src/bmp.c **** 							break ;			
 378              		.loc 1 93 8 view .LVU136
  93:Core/Src/bmp.c **** 							break ;			
 379              		.loc 1 93 27 is_stmt 0 view .LVU137
 380 0166 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
  93:Core/Src/bmp.c **** 							break ;			
 381              		.loc 1 93 34 view .LVU138
 382 016a 1B02     		lsls	r3, r3, #8
  93:Core/Src/bmp.c **** 							break ;			
 383              		.loc 1 93 38 view .LVU139
 384 016c 03F47843 		and	r3, r3, #63488
  93:Core/Src/bmp.c **** 							break ;			
 385              		.loc 1 93 13 view .LVU140
 386 0170 019A     		ldr	r2, [sp, #4]
 387 0172 1344     		add	r3, r3, r2
 388 0174 9BB2     		uxth	r3, r3
 389 0176 0193     		str	r3, [sp, #4]
 390              	.LVL45:
  94:Core/Src/bmp.c **** 					}   
 391              		.loc 1 94 8 is_stmt 1 view .LVU141
 392 0178 B4E7     		b	.L11
 393              	.L34:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 13


  98:Core/Src/bmp.c **** 					{
 394              		.loc 1 98 6 view .LVU142
 395 017a 65B1     		cbz	r5, .L13
 396 017c 012D     		cmp	r5, #1
 397 017e B1D1     		bne	.L11
 111:Core/Src/bmp.c **** 							{
 398              		.loc 1 111 8 view .LVU143
 111:Core/Src/bmp.c **** 							{
 399              		.loc 1 111 10 is_stmt 0 view .LVU144
 400 0180 079B     		ldr	r3, [sp, #28]
 401 0182 C3B9     		cbnz	r3, .L16
 113:Core/Src/bmp.c **** 							}else  		//RGB:5,6,5
 402              		.loc 1 113 9 is_stmt 1 view .LVU145
 113:Core/Src/bmp.c **** 							}else  		//RGB:5,6,5
 403              		.loc 1 113 27 is_stmt 0 view .LVU146
 404 0184 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
 113:Core/Src/bmp.c **** 							}else  		//RGB:5,6,5
 405              		.loc 1 113 34 view .LVU147
 406 0188 5B02     		lsls	r3, r3, #9
 407 018a 9BB2     		uxth	r3, r3
 113:Core/Src/bmp.c **** 							}else  		//RGB:5,6,5
 408              		.loc 1 113 14 view .LVU148
 409 018c 019A     		ldr	r2, [sp, #4]
 410 018e 1344     		add	r3, r3, r2
 411 0190 9BB2     		uxth	r3, r3
 412 0192 0193     		str	r3, [sp, #4]
 413              	.LVL46:
 113:Core/Src/bmp.c **** 							}else  		//RGB:5,6,5
 414              		.loc 1 113 14 view .LVU149
 415 0194 A6E7     		b	.L11
 416              	.L13:
 101:Core/Src/bmp.c **** 							{
 417              		.loc 1 101 8 is_stmt 1 view .LVU150
 101:Core/Src/bmp.c **** 							{
 418              		.loc 1 101 10 is_stmt 0 view .LVU151
 419 0196 079B     		ldr	r3, [sp, #28]
 420 0198 4BB9     		cbnz	r3, .L15
 103:Core/Src/bmp.c **** 								color+=(((u16)bmpbuf[count])&0XE0)<<1; //G
 421              		.loc 1 103 9 is_stmt 1 view .LVU152
 103:Core/Src/bmp.c **** 								color+=(((u16)bmpbuf[count])&0XE0)<<1; //G
 422              		.loc 1 103 27 is_stmt 0 view .LVU153
 423 019a 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
 103:Core/Src/bmp.c **** 								color+=(((u16)bmpbuf[count])&0XE0)<<1; //G
 424              		.loc 1 103 14 view .LVU154
 425 019e 03F01F02 		and	r2, r3, #31
 426              	.LVL47:
 104:Core/Src/bmp.c **** 							}else		//RGB:5,6,5
 427              		.loc 1 104 9 is_stmt 1 view .LVU155
 104:Core/Src/bmp.c **** 							}else		//RGB:5,6,5
 428              		.loc 1 104 43 is_stmt 0 view .LVU156
 429 01a2 5B00     		lsls	r3, r3, #1
 430 01a4 03F4E073 		and	r3, r3, #448
 104:Core/Src/bmp.c **** 							}else		//RGB:5,6,5
 431              		.loc 1 104 14 view .LVU157
 432 01a8 1344     		add	r3, r3, r2
 433 01aa 0193     		str	r3, [sp, #4]
 434              	.LVL48:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 14


 104:Core/Src/bmp.c **** 							}else		//RGB:5,6,5
 435              		.loc 1 104 14 view .LVU158
 436 01ac 9AE7     		b	.L11
 437              	.L15:
 107:Core/Src/bmp.c **** 							}  
 438              		.loc 1 107 9 is_stmt 1 view .LVU159
 107:Core/Src/bmp.c **** 							}  
 439              		.loc 1 107 14 is_stmt 0 view .LVU160
 440 01ae 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
 441 01b2 0193     		str	r3, [sp, #4]
 442              	.LVL49:
 107:Core/Src/bmp.c **** 							}  
 443              		.loc 1 107 14 view .LVU161
 444 01b4 96E7     		b	.L11
 445              	.L16:
 116:Core/Src/bmp.c **** 							}  									 
 446              		.loc 1 116 9 is_stmt 1 view .LVU162
 116:Core/Src/bmp.c **** 							}  									 
 447              		.loc 1 116 27 is_stmt 0 view .LVU163
 448 01b6 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
 116:Core/Src/bmp.c **** 							}  									 
 449              		.loc 1 116 14 view .LVU164
 450 01ba 019A     		ldr	r2, [sp, #4]
 451 01bc 02EB0323 		add	r3, r2, r3, lsl #8
 452 01c0 9BB2     		uxth	r3, r3
 453 01c2 0193     		str	r3, [sp, #4]
 454              	.LVL50:
 116:Core/Src/bmp.c **** 							}  									 
 455              		.loc 1 116 14 view .LVU165
 456 01c4 8EE7     		b	.L11
 457              	.L35:
 122:Core/Src/bmp.c **** 					{
 458              		.loc 1 122 6 is_stmt 1 view .LVU166
 459 01c6 012D     		cmp	r5, #1
 460 01c8 08D0     		beq	.L17
 461 01ca 022D     		cmp	r5, #2
 462 01cc 10D0     		beq	.L18
 463 01ce 002D     		cmp	r5, #0
 464 01d0 88D1     		bne	.L11
 125:Core/Src/bmp.c **** 							break ;	   
 465              		.loc 1 125 8 view .LVU167
 125:Core/Src/bmp.c **** 							break ;	   
 466              		.loc 1 125 20 is_stmt 0 view .LVU168
 467 01d2 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
 125:Core/Src/bmp.c **** 							break ;	   
 468              		.loc 1 125 13 view .LVU169
 469 01d6 DB08     		lsrs	r3, r3, #3
 470 01d8 0193     		str	r3, [sp, #4]
 471              	.LVL51:
 126:Core/Src/bmp.c **** 						case 1: 	 
 472              		.loc 1 126 8 is_stmt 1 view .LVU170
 473 01da 83E7     		b	.L11
 474              	.L17:
 128:Core/Src/bmp.c **** 							break;	  
 475              		.loc 1 128 8 view .LVU171
 128:Core/Src/bmp.c **** 							break;	  
 476              		.loc 1 128 27 is_stmt 0 view .LVU172
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 15


 477 01dc 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
 128:Core/Src/bmp.c **** 							break;	  
 478              		.loc 1 128 34 view .LVU173
 479 01e0 DB00     		lsls	r3, r3, #3
 128:Core/Src/bmp.c **** 							break;	  
 480              		.loc 1 128 38 view .LVU174
 481 01e2 03F4FC63 		and	r3, r3, #2016
 128:Core/Src/bmp.c **** 							break;	  
 482              		.loc 1 128 13 view .LVU175
 483 01e6 019A     		ldr	r2, [sp, #4]
 484 01e8 1344     		add	r3, r3, r2
 485 01ea 9BB2     		uxth	r3, r3
 486 01ec 0193     		str	r3, [sp, #4]
 487              	.LVL52:
 129:Core/Src/bmp.c **** 						case 2 : 
 488              		.loc 1 129 8 is_stmt 1 view .LVU176
 489 01ee 79E7     		b	.L11
 490              	.L18:
 131:Core/Src/bmp.c **** 							break ;			
 491              		.loc 1 131 8 view .LVU177
 131:Core/Src/bmp.c **** 							break ;			
 492              		.loc 1 131 27 is_stmt 0 view .LVU178
 493 01f0 19F80430 		ldrb	r3, [r9, r4]	@ zero_extendqisi2
 131:Core/Src/bmp.c **** 							break ;			
 494              		.loc 1 131 34 view .LVU179
 495 01f4 1B02     		lsls	r3, r3, #8
 131:Core/Src/bmp.c **** 							break ;			
 496              		.loc 1 131 38 view .LVU180
 497 01f6 03F47843 		and	r3, r3, #63488
 131:Core/Src/bmp.c **** 							break ;			
 498              		.loc 1 131 13 view .LVU181
 499 01fa 019A     		ldr	r2, [sp, #4]
 500 01fc 1344     		add	r3, r3, r2
 501 01fe 9BB2     		uxth	r3, r3
 502 0200 0193     		str	r3, [sp, #4]
 503              	.LVL53:
 132:Core/Src/bmp.c **** 						case 3 :
 504              		.loc 1 132 8 is_stmt 1 view .LVU182
 505 0202 6FE7     		b	.L11
 506              	.L36:
 144:Core/Src/bmp.c **** 					{	
 507              		.loc 1 144 6 view .LVU183
 144:Core/Src/bmp.c **** 					{	
 508              		.loc 1 144 18 is_stmt 0 view .LVU184
 509 0204 274B     		ldr	r3, .L38
 510 0206 5B68     		ldr	r3, [r3, #4]
 144:Core/Src/bmp.c **** 					{	
 511              		.loc 1 144 8 view .LVU185
 512 0208 029A     		ldr	r2, [sp, #8]
 513 020a 9A42     		cmp	r2, r3
 514 020c 07D3     		bcc	.L37
 515              	.LVL54:
 516              	.L20:
 155:Core/Src/bmp.c **** 					color=0x00; 
 517              		.loc 1 155 6 is_stmt 1 view .LVU186
 155:Core/Src/bmp.c **** 					color=0x00; 
 518              		.loc 1 155 7 is_stmt 0 view .LVU187
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 16


 519 020e 029B     		ldr	r3, [sp, #8]
 520 0210 0133     		adds	r3, r3, #1
 521 0212 9BB2     		uxth	r3, r3
 522 0214 0293     		str	r3, [sp, #8]
 523              	.LVL55:
 156:Core/Src/bmp.c **** 					rgb=0;  		  
 524              		.loc 1 156 6 is_stmt 1 view .LVU188
 157:Core/Src/bmp.c **** 				}
 525              		.loc 1 157 6 view .LVU189
 157:Core/Src/bmp.c **** 				}
 526              		.loc 1 157 9 is_stmt 0 view .LVU190
 527 0216 009D     		ldr	r5, [sp]
 156:Core/Src/bmp.c **** 					rgb=0;  		  
 528              		.loc 1 156 11 view .LVU191
 529 0218 0023     		movs	r3, #0
 530 021a 0193     		str	r3, [sp, #4]
 531 021c 69E7     		b	.L19
 532              	.LVL56:
 533              	.L37:
 146:Core/Src/bmp.c **** 						if(is_element_ok(realx,realy,1)&&yok)//符合条件
 534              		.loc 1 146 7 is_stmt 1 view .LVU192
 146:Core/Src/bmp.c **** 						if(is_element_ok(realx,realy,1)&&yok)//符合条件
 535              		.loc 1 146 23 is_stmt 0 view .LVU193
 536 021e 214B     		ldr	r3, .L38
 537 0220 DB68     		ldr	r3, [r3, #12]
 146:Core/Src/bmp.c **** 						if(is_element_ok(realx,realy,1)&&yok)//符合条件
 538              		.loc 1 146 15 view .LVU194
 539 0222 02FB03F3 		mul	r3, r2, r3
 146:Core/Src/bmp.c **** 						if(is_element_ok(realx,realy,1)&&yok)//符合条件
 540              		.loc 1 146 12 view .LVU195
 541 0226 C3F34F33 		ubfx	r3, r3, #13, #16
 542 022a 1D46     		mov	r5, r3
 543              	.LVL57:
 146:Core/Src/bmp.c **** 						if(is_element_ok(realx,realy,1)&&yok)//符合条件
 544              		.loc 1 146 12 view .LVU196
 545 022c 0593     		str	r3, [sp, #20]
 546              	.LVL58:
 147:Core/Src/bmp.c **** 						{						 				 	  	       
 547              		.loc 1 147 7 is_stmt 1 view .LVU197
 147:Core/Src/bmp.c **** 						{						 				 	  	       
 548              		.loc 1 147 10 is_stmt 0 view .LVU198
 549 022e 0122     		movs	r2, #1
 550 0230 0499     		ldr	r1, [sp, #16]
 551 0232 1846     		mov	r0, r3
 552 0234 FFF7FEFF 		bl	is_element_ok
 553              	.LVL59:
 147:Core/Src/bmp.c **** 						{						 				 	  	       
 554              		.loc 1 147 9 view .LVU199
 555 0238 0028     		cmp	r0, #0
 556 023a E8D0     		beq	.L20
 147:Core/Src/bmp.c **** 						{						 				 	  	       
 557              		.loc 1 147 38 discriminator 1 view .LVU200
 558 023c 069A     		ldr	r2, [sp, #24]
 559 023e 002A     		cmp	r2, #0
 560 0240 E5D0     		beq	.L20
 149:Core/Src/bmp.c **** 							//POINT_COLOR=color;		 
 561              		.loc 1 149 8 is_stmt 1 view .LVU201
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 17


 149:Core/Src/bmp.c **** 							//POINT_COLOR=color;		 
 562              		.loc 1 149 15 is_stmt 0 view .LVU202
 563 0242 194B     		ldr	r3, .L38+4
 564 0244 5B68     		ldr	r3, [r3, #4]
 149:Core/Src/bmp.c **** 							//POINT_COLOR=color;		 
 565              		.loc 1 149 40 view .LVU203
 566 0246 174A     		ldr	r2, .L38
 567 0248 9069     		ldr	r0, [r2, #24]
 149:Core/Src/bmp.c **** 							//POINT_COLOR=color;		 
 568              		.loc 1 149 61 view .LVU204
 569 024a D169     		ldr	r1, [r2, #28]
 149:Core/Src/bmp.c **** 							//POINT_COLOR=color;		 
 570              		.loc 1 149 53 view .LVU205
 571 024c 049A     		ldr	r2, [sp, #16]
 572 024e 1144     		add	r1, r1, r2
 573 0250 89B2     		uxth	r1, r1
 149:Core/Src/bmp.c **** 							//POINT_COLOR=color;		 
 574              		.loc 1 149 8 view .LVU206
 575 0252 0139     		subs	r1, r1, #1
 576 0254 2844     		add	r0, r0, r5
 577 0256 019A     		ldr	r2, [sp, #4]
 578 0258 89B2     		uxth	r1, r1
 579 025a 80B2     		uxth	r0, r0
 580 025c 9847     		blx	r3
 581              	.LVL60:
 582 025e D6E7     		b	.L20
 583              	.LVL61:
 584              	.L27:
 166:Core/Src/bmp.c **** 					x=0; 
 585              		.loc 1 166 14 view .LVU207
 586 0260 0690     		str	r0, [sp, #24]
 587              	.LVL62:
 168:Core/Src/bmp.c **** 					color=0x00;
 588              		.loc 1 168 14 view .LVU208
 589 0262 0027     		movs	r7, #0
 590              	.LVL63:
 169:Core/Src/bmp.c **** 					rgb=0;
 591              		.loc 1 169 11 view .LVU209
 592 0264 0197     		str	r7, [sp, #4]
 593              	.LVL64:
 167:Core/Src/bmp.c **** 					countpix=0;
 594              		.loc 1 167 7 view .LVU210
 595 0266 0297     		str	r7, [sp, #8]
 596              	.LVL65:
 167:Core/Src/bmp.c **** 					countpix=0;
 597              		.loc 1 167 7 view .LVU211
 598 0268 02E0     		b	.L7
 599              	.LVL66:
 600              	.L24:
 175:Core/Src/bmp.c **** 			bmpbuf=databuf;
 601              		.loc 1 175 4 is_stmt 1 view .LVU212
 175:Core/Src/bmp.c **** 			bmpbuf=databuf;
 602              		.loc 1 175 6 is_stmt 0 view .LVU213
 603 026a 88B9     		cbnz	r0, .L25
 175:Core/Src/bmp.c **** 			bmpbuf=databuf;
 604              		.loc 1 175 10 discriminator 1 view .LVU214
 605 026c 83B1     		cbz	r3, .L25
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 18


 177:Core/Src/bmp.c **** 		}  
 606              		.loc 1 177 11 view .LVU215
 607 026e 0024     		movs	r4, #0
 608              	.LVL67:
 609              	.L7:
  80:Core/Src/bmp.c **** 		    {
 610              		.loc 1 80 9 is_stmt 1 view .LVU216
 611 0270 B442     		cmp	r4, r6
 612 0272 FFF42EAF 		bcc	.L23
 613              	.L22:
 173:Core/Src/bmp.c **** 			if(br!=readlen)readlen=br;	//最后一批数据		  
 614              		.loc 1 173 4 view .LVU217
 173:Core/Src/bmp.c **** 			if(br!=readlen)readlen=br;	//最后一批数据		  
 615              		.loc 1 173 8 is_stmt 0 view .LVU218
 616 0276 0DF12603 		add	r3, sp, #38
 617 027a 3246     		mov	r2, r6
 618 027c 4946     		mov	r1, r9
 619 027e 5046     		mov	r0, r10
 620 0280 FFF7FEFF 		bl	f_read
 621              	.LVL68:
 174:Core/Src/bmp.c **** 			if(res||br==0)break;		//读取出错
 622              		.loc 1 174 4 is_stmt 1 view .LVU219
 174:Core/Src/bmp.c **** 			if(res||br==0)break;		//读取出错
 623              		.loc 1 174 9 is_stmt 0 view .LVU220
 624 0284 BDF82630 		ldrh	r3, [sp, #38]
 174:Core/Src/bmp.c **** 			if(res||br==0)break;		//读取出错
 625              		.loc 1 174 6 view .LVU221
 626 0288 B342     		cmp	r3, r6
 627 028a EED0     		beq	.L24
 174:Core/Src/bmp.c **** 			if(res||br==0)break;		//读取出错
 628              		.loc 1 174 26 view .LVU222
 629 028c 1E46     		mov	r6, r3
 630              	.LVL69:
 174:Core/Src/bmp.c **** 			if(res||br==0)break;		//读取出错
 631              		.loc 1 174 26 view .LVU223
 632 028e ECE7     		b	.L24
 633              	.LVL70:
 634              	.L25:
 179:Core/Src/bmp.c **** 	}  	
 635              		.loc 1 179 3 view .LVU224
 636 0290 0446     		mov	r4, r0
 637              	.LVL71:
 179:Core/Src/bmp.c **** 	}  	
 638              		.loc 1 179 3 is_stmt 1 view .LVU225
 639 0292 5046     		mov	r0, r10
 640              	.LVL72:
 179:Core/Src/bmp.c **** 	}  	
 641              		.loc 1 179 3 is_stmt 0 view .LVU226
 642 0294 FFF7FEFF 		bl	f_close
 643              	.LVL73:
 173:Core/Src/bmp.c **** 			if(br!=readlen)readlen=br;	//最后一批数据		  
 644              		.loc 1 173 8 view .LVU227
 645 0298 0094     		str	r4, [sp]
 646 029a C9E6     		b	.L4
 647              	.LVL74:
 648              	.L26:
  45:Core/Src/bmp.c **** 	f_bmp=(FIL *)pic_memalloc(sizeof(FIL));	//开辟FIL字节的内存区域 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 19


 649              		.loc 1 45 26 view .LVU228
 650 029c 1123     		movs	r3, #17
 651 029e 0093     		str	r3, [sp]
 652 02a0 CCE6     		b	.L2
 653              	.L39:
 654 02a2 00BF     		.align	2
 655              	.L38:
 656 02a4 00000000 		.word	picinfo
 657 02a8 00000000 		.word	pic_phy
 658              		.cfi_endproc
 659              	.LFE130:
 661              		.section	.text.minibmp_decode,"ax",%progbits
 662              		.align	1
 663              		.global	minibmp_decode
 664              		.syntax unified
 665              		.thumb
 666              		.thumb_func
 667              		.fpu fpv4-sp-d16
 669              	minibmp_decode:
 670              	.LVL75:
 671              	.LFB131:
 187:Core/Src/bmp.c **** //小尺寸的bmp解码,解码filename这个BMP文件		
 188:Core/Src/bmp.c **** //filename:包含路径的文件名
 189:Core/Src/bmp.c **** //x,y,width,height:开窗大小
 190:Core/Src/bmp.c **** //acolor:附加的alphablend的颜色(这个仅对32位色bmp有效!!!)
 191:Core/Src/bmp.c **** //mode:模式(除了bit5,其他的均只对32位色bmp有效!!!)
 192:Core/Src/bmp.c **** //     bit[7:6]:0,仅使用图片本身和底色alphablend;
 193:Core/Src/bmp.c **** //              1,仅图片和acolor进行alphablend,并且不适用附加的透明度;
 194:Core/Src/bmp.c **** //              2,底色,acolor,图片,一起进行alphablend;
 195:Core/Src/bmp.c **** //	   bit5:保留
 196:Core/Src/bmp.c **** //     bit4~0:0~31,使用附加alphablend的透明程度 	      	  			  
 197:Core/Src/bmp.c **** //返回值:0,成功;
 198:Core/Src/bmp.c **** //    其他,错误码.
 199:Core/Src/bmp.c **** u8 minibmp_decode(u8 *filename,u16 x,u16 y,u16 width,u16 height,u16 acolor,u8 mode)//尺寸小于240*32
 200:Core/Src/bmp.c **** {
 672              		.loc 1 200 1 is_stmt 1 view -0
 673              		.cfi_startproc
 674              		@ args = 12, pretend = 0, frame = 72
 675              		@ frame_needed = 0, uses_anonymous_args = 0
 676              		.loc 1 200 1 is_stmt 0 view .LVU230
 677 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 678              	.LCFI4:
 679              		.cfi_def_cfa_offset 36
 680              		.cfi_offset 4, -36
 681              		.cfi_offset 5, -32
 682              		.cfi_offset 6, -28
 683              		.cfi_offset 7, -24
 684              		.cfi_offset 8, -20
 685              		.cfi_offset 9, -16
 686              		.cfi_offset 10, -12
 687              		.cfi_offset 11, -8
 688              		.cfi_offset 14, -4
 689 0004 93B0     		sub	sp, sp, #76
 690              	.LCFI5:
 691              		.cfi_def_cfa_offset 112
 692 0006 0446     		mov	r4, r0
 693 0008 8A46     		mov	r10, r1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 20


 694 000a 1746     		mov	r7, r2
 695 000c BDF87420 		ldrh	r2, [sp, #116]
 696              	.LVL76:
 697              		.loc 1 200 1 view .LVU231
 698 0010 0692     		str	r2, [sp, #24]
 699 0012 9DF87820 		ldrb	r2, [sp, #120]	@ zero_extendqisi2
 700 0016 0992     		str	r2, [sp, #36]
 201:Core/Src/bmp.c **** 	FIL* f_bmp;
 701              		.loc 1 201 2 is_stmt 1 view .LVU232
 202:Core/Src/bmp.c ****     u16 br;
 702              		.loc 1 202 5 view .LVU233
 203:Core/Src/bmp.c **** 	u8  color_byte;
 703              		.loc 1 203 2 view .LVU234
 204:Core/Src/bmp.c **** 	u16 tx,ty,color;	 
 704              		.loc 1 204 2 view .LVU235
 205:Core/Src/bmp.c **** 	//tx,ty的实际坐标	
 206:Core/Src/bmp.c **** 	u8 res;
 705              		.loc 1 206 2 view .LVU236
 207:Core/Src/bmp.c **** 	u16 i,j;
 706              		.loc 1 207 2 view .LVU237
 208:Core/Src/bmp.c **** 	u8 *databuf;    		//数据读取存                                                                    
 707              		.loc 1 208 2 view .LVU238
 209:Core/Src/bmp.c ****  	u16 readlen=BMP_DBUF_SIZE;//一次从SD卡读取的字节数长度,不能小于LCD宽度*3!!!
 708              		.loc 1 209 3 view .LVU239
 709              	.LVL77:
 210:Core/Src/bmp.c **** 
 211:Core/Src/bmp.c **** 	u8 *bmpbuf;			  	//数据解码地址
 710              		.loc 1 211 2 view .LVU240
 212:Core/Src/bmp.c **** 	u8 biCompression=0;		//记录压缩方式
 711              		.loc 1 212 2 view .LVU241
 213:Core/Src/bmp.c **** 	
 214:Core/Src/bmp.c **** 	u16 rowcnt;				//一次读取的行数
 712              		.loc 1 214 2 view .LVU242
 215:Core/Src/bmp.c **** 	u16 rowlen;	  		 	//水平方向字节数  
 713              		.loc 1 215 2 view .LVU243
 216:Core/Src/bmp.c **** 	u16 rowpix=0;			//水平方向像素数	  
 714              		.loc 1 216 2 view .LVU244
 217:Core/Src/bmp.c **** 	u8 rowadd;				//每行填充字节数
 715              		.loc 1 217 2 view .LVU245
 218:Core/Src/bmp.c **** 
 219:Core/Src/bmp.c **** 	u16 tmp_color;
 716              		.loc 1 219 2 view .LVU246
 220:Core/Src/bmp.c **** 
 221:Core/Src/bmp.c **** 	u8 alphabend=0xff;		//代表透明色为0，完全不透明
 717              		.loc 1 221 2 view .LVU247
 222:Core/Src/bmp.c **** 	u8 alphamode=mode>>6;	//得到模式值,0/1/2
 718              		.loc 1 222 2 view .LVU248
 719              		.loc 1 222 5 is_stmt 0 view .LVU249
 720 0018 9209     		lsrs	r2, r2, #6
 721 001a 0C92     		str	r2, [sp, #48]
 722              	.LVL78:
 223:Core/Src/bmp.c **** 	BITMAPINFO *pbmp;   	//临时指针		 
 723              		.loc 1 223 2 is_stmt 1 view .LVU250
 224:Core/Src/bmp.c **** 	//得到窗体尺寸
 225:Core/Src/bmp.c **** 	picinfo.S_Height=height;
 724              		.loc 1 225 2 view .LVU251
 725              		.loc 1 225 18 is_stmt 0 view .LVU252
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 21


 726 001c A64A     		ldr	r2, .L86
 727 001e BDF87010 		ldrh	r1, [sp, #112]
 728              	.LVL79:
 729              		.loc 1 225 18 view .LVU253
 730 0022 1161     		str	r1, [r2, #16]
 226:Core/Src/bmp.c **** 	picinfo.S_Width=width;
 731              		.loc 1 226 2 is_stmt 1 view .LVU254
 732              		.loc 1 226 17 is_stmt 0 view .LVU255
 733 0024 5361     		str	r3, [r2, #20]
 227:Core/Src/bmp.c **** 		
 228:Core/Src/bmp.c **** #if BMP_USE_MALLOC == 1	//使用malloc	
 229:Core/Src/bmp.c **** 	databuf=(u8*)pic_memalloc(readlen);		//开辟readlen字节的内存区域
 734              		.loc 1 229 2 is_stmt 1 view .LVU256
 735              		.loc 1 229 15 is_stmt 0 view .LVU257
 736 0026 4FF40060 		mov	r0, #2048
 737              	.LVL80:
 738              		.loc 1 229 15 view .LVU258
 739 002a FFF7FEFF 		bl	pic_memalloc
 740              	.LVL81:
 230:Core/Src/bmp.c **** 	if(databuf==NULL)return PIC_MEM_ERR;		//内存申请失败.
 741              		.loc 1 230 2 is_stmt 1 view .LVU259
 742              		.loc 1 230 4 is_stmt 0 view .LVU260
 743 002e 0590     		str	r0, [sp, #20]
 744 0030 0028     		cmp	r0, #0
 745 0032 00F07581 		beq	.L68
 231:Core/Src/bmp.c **** 	f_bmp=(FIL *)pic_memalloc(sizeof(FIL));	//开辟FIL字节的内存区域 
 746              		.loc 1 231 2 is_stmt 1 view .LVU261
 747              		.loc 1 231 15 is_stmt 0 view .LVU262
 748 0036 4FF40A70 		mov	r0, #552
 749              	.LVL82:
 750              		.loc 1 231 15 view .LVU263
 751 003a FFF7FEFF 		bl	pic_memalloc
 752              	.LVL83:
 232:Core/Src/bmp.c **** 	if(f_bmp==NULL)								//内存申请失败.
 753              		.loc 1 232 2 is_stmt 1 view .LVU264
 754              		.loc 1 232 4 is_stmt 0 view .LVU265
 755 003e 0490     		str	r0, [sp, #16]
 756 0040 90B1     		cbz	r0, .L79
 233:Core/Src/bmp.c **** 	{		 
 234:Core/Src/bmp.c **** 		pic_memfree(databuf);
 235:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 236:Core/Src/bmp.c **** 	} 	 
 237:Core/Src/bmp.c **** #else
 238:Core/Src/bmp.c **** 	databuf=bmpreadbuf;
 239:Core/Src/bmp.c **** 	f_bmp=&f_bfile;
 240:Core/Src/bmp.c **** #endif
 241:Core/Src/bmp.c **** 	res=f_open(f_bmp,(const TCHAR*)filename,FA_READ);//打开文件	 						  
 757              		.loc 1 241 2 is_stmt 1 view .LVU266
 758              		.loc 1 241 6 is_stmt 0 view .LVU267
 759 0042 0122     		movs	r2, #1
 760 0044 2146     		mov	r1, r4
 761 0046 0498     		ldr	r0, [sp, #16]
 762              		.loc 1 241 6 view .LVU268
 763 0048 FFF7FEFF 		bl	f_open
 764              	.LVL84:
 242:Core/Src/bmp.c **** 	if(res==0)//打开成功.
 765              		.loc 1 242 2 is_stmt 1 view .LVU269
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 22


 766              		.loc 1 242 4 is_stmt 0 view .LVU270
 767 004c 0290     		str	r0, [sp, #8]
 768 004e 88B1     		cbz	r0, .L80
 243:Core/Src/bmp.c **** 	{ 
 244:Core/Src/bmp.c **** 		f_read(f_bmp,databuf,sizeof(BITMAPINFO),(UINT*)&br);//读出BITMAPINFO信息 
 245:Core/Src/bmp.c **** 		pbmp=(BITMAPINFO*)databuf;					//得到BMP的头部信息   
 246:Core/Src/bmp.c **** 		color_byte=pbmp->bmiHeader.biBitCount/8;	//彩色位 16/24/32  
 247:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 248:Core/Src/bmp.c **** 		picinfo.ImgHeight=pbmp->bmiHeader.biHeight;	//得到图片高度
 249:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度   
 250:Core/Src/bmp.c **** 		//水平像素必须是4的倍数!!
 251:Core/Src/bmp.c **** 		if((picinfo.ImgWidth*color_byte)%4)rowlen=((picinfo.ImgWidth*color_byte)/4+1)*4;
 252:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 253:Core/Src/bmp.c **** 		rowadd=rowlen-picinfo.ImgWidth*color_byte;	//每行填充字节数
 254:Core/Src/bmp.c ****  		//开始解码BMP   
 255:Core/Src/bmp.c **** 		color=0;//颜色清空	 													 
 256:Core/Src/bmp.c **** 		tx=0 ;
 257:Core/Src/bmp.c **** 		ty=picinfo.ImgHeight-1;
 258:Core/Src/bmp.c **** 		if(picinfo.ImgWidth<=picinfo.S_Width&&picinfo.ImgHeight<=picinfo.S_Height)
 259:Core/Src/bmp.c **** 		{  							   
 260:Core/Src/bmp.c **** 			rowcnt=readlen/rowlen;						//一次读取的行数
 261:Core/Src/bmp.c **** 			readlen=rowcnt*rowlen;						//一次读取的字节数
 262:Core/Src/bmp.c **** 			rowpix=picinfo.ImgWidth;					//水平像素数就是宽度 
 263:Core/Src/bmp.c **** 			f_lseek(f_bmp,pbmp->bmfHeader.bfOffBits);	//偏移到数据起始位置 	  
 264:Core/Src/bmp.c **** 			while(1)
 265:Core/Src/bmp.c **** 			{	     
 266:Core/Src/bmp.c **** 				res=f_read(f_bmp,databuf,readlen,(UINT *)&br);	//读出readlen个字节
 267:Core/Src/bmp.c **** 				bmpbuf=databuf;									//数据首地址  
 268:Core/Src/bmp.c **** 				if(br!=readlen)rowcnt=br/rowlen;				//最后剩下的行数
 269:Core/Src/bmp.c **** 				if(color_byte==3)  			//24位BMP图片
 270:Core/Src/bmp.c **** 				{
 271:Core/Src/bmp.c **** 					for(j=0;j<rowcnt;j++)	//每次读到的行数
 272:Core/Src/bmp.c **** 					{
 273:Core/Src/bmp.c **** 						for(i=0;i<rowpix;i++)//写一行像素
 274:Core/Src/bmp.c **** 						{
 275:Core/Src/bmp.c **** 							color=(*bmpbuf++)>>3;		   		 	//B
 276:Core/Src/bmp.c **** 							color+=((u16)(*bmpbuf++)<<3)&0X07E0;	//G
 277:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 278:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 279:Core/Src/bmp.c **** 							tx++;
 280:Core/Src/bmp.c **** 						}
 281:Core/Src/bmp.c **** 						bmpbuf+=rowadd;//跳过填充区
 282:Core/Src/bmp.c **** 						tx=0;
 283:Core/Src/bmp.c **** 						ty--;
 284:Core/Src/bmp.c **** 					}
 285:Core/Src/bmp.c **** 				}else if(color_byte==2)//16位BMP图片
 286:Core/Src/bmp.c **** 				{
 287:Core/Src/bmp.c **** 					for(j=0;j<rowcnt;j++)//每次读到的行数
 288:Core/Src/bmp.c **** 					{
 289:Core/Src/bmp.c **** 						if(biCompression==BI_RGB)//RGB:5,5,5
 290:Core/Src/bmp.c **** 						{
 291:Core/Src/bmp.c **** 							for(i=0;i<rowpix;i++)
 292:Core/Src/bmp.c **** 							{
 293:Core/Src/bmp.c **** 								color=((u16)*bmpbuf&0X1F);			//R
 294:Core/Src/bmp.c **** 								color+=(((u16)*bmpbuf++)&0XE0)<<1; 	//G
 295:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<9;  	    //R,G	 
 296:Core/Src/bmp.c **** 							    pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 23


 297:Core/Src/bmp.c **** 								tx++;
 298:Core/Src/bmp.c **** 							}
 299:Core/Src/bmp.c **** 						}else  //RGB 565
 300:Core/Src/bmp.c **** 						{
 301:Core/Src/bmp.c **** 							for(i=0;i<rowpix;i++)
 302:Core/Src/bmp.c **** 							{											 
 303:Core/Src/bmp.c **** 								color=*bmpbuf++;  			//G,B
 304:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<8;	//R,G	 
 305:Core/Src/bmp.c **** 							  	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 306:Core/Src/bmp.c **** 								tx++;
 307:Core/Src/bmp.c **** 							}
 308:Core/Src/bmp.c **** 						}
 309:Core/Src/bmp.c **** 						bmpbuf+=rowadd;//跳过填充区
 310:Core/Src/bmp.c **** 						tx=0;
 311:Core/Src/bmp.c **** 						ty--;
 312:Core/Src/bmp.c **** 					}	
 313:Core/Src/bmp.c **** 				}else if(color_byte==4)		//32位BMP图片
 314:Core/Src/bmp.c **** 				{
 315:Core/Src/bmp.c **** 					for(j=0;j<rowcnt;j++)	//每次读到的行数
 316:Core/Src/bmp.c **** 					{
 317:Core/Src/bmp.c **** 						for(i=0;i<rowpix;i++)
 318:Core/Src/bmp.c **** 						{
 319:Core/Src/bmp.c **** 							color=(*bmpbuf++)>>3;		   		 	//B
 320:Core/Src/bmp.c **** 							color+=((u16)(*bmpbuf++)<<3)&0X07E0;	//G
 321:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 322:Core/Src/bmp.c **** 							alphabend=*bmpbuf++;					//ALPHA通道
 323:Core/Src/bmp.c **** 							if(alphamode!=1) //需要读取底色
 324:Core/Src/bmp.c **** 							{
 325:Core/Src/bmp.c **** 								tmp_color=pic_phy.read_point(x+tx,y+ty);//读取颜色		   
 326:Core/Src/bmp.c **** 							    if(alphamode==2)//需要附加的alphablend
 327:Core/Src/bmp.c **** 								{
 328:Core/Src/bmp.c **** 									tmp_color=piclib_alpha_blend(tmp_color,acolor,mode&0X1F);	//与指定颜色进行blend		 
 329:Core/Src/bmp.c **** 								}
 330:Core/Src/bmp.c **** 								color=piclib_alpha_blend(tmp_color,color,alphabend/8); 			//和底色进行alphablend
 331:Core/Src/bmp.c **** 							}else tmp_color=piclib_alpha_blend(acolor,color,alphabend/8);		//与指定颜色进行blend
 332:Core/Src/bmp.c ****  							pic_phy.draw_point(x+tx,y+ty,color);//显示图片				   
 333:Core/Src/bmp.c **** 							tx++;//x轴增加一个像素 	  
 334:Core/Src/bmp.c **** 						}
 335:Core/Src/bmp.c **** 						bmpbuf+=rowadd;//跳过填充区
 336:Core/Src/bmp.c **** 						tx=0;
 337:Core/Src/bmp.c **** 						ty--;
 338:Core/Src/bmp.c **** 					}
 339:Core/Src/bmp.c **** 
 340:Core/Src/bmp.c **** 				}
 341:Core/Src/bmp.c **** 				if(br!=readlen||res)break;	 
 342:Core/Src/bmp.c **** 			}	 
 343:Core/Src/bmp.c **** 		}	
 344:Core/Src/bmp.c **** 		f_close(f_bmp);//关闭文件      
 345:Core/Src/bmp.c **** 	}else res=PIC_SIZE_ERR;//图片尺寸错误	
 769              		.loc 1 345 11 view .LVU271
 770 0050 2823     		movs	r3, #40
 771 0052 0293     		str	r3, [sp, #8]
 772              	.LVL85:
 773              	.L43:
 346:Core/Src/bmp.c **** #if BMP_USE_MALLOC == 1	//使用malloc	
 347:Core/Src/bmp.c **** 	pic_memfree(databuf);	 
 774              		.loc 1 347 2 is_stmt 1 view .LVU272
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 24


 775 0054 0598     		ldr	r0, [sp, #20]
 776 0056 FFF7FEFF 		bl	pic_memfree
 777              	.LVL86:
 348:Core/Src/bmp.c **** 	pic_memfree(f_bmp);		 
 778              		.loc 1 348 2 view .LVU273
 779 005a 0498     		ldr	r0, [sp, #16]
 780 005c FFF7FEFF 		bl	pic_memfree
 781              	.LVL87:
 349:Core/Src/bmp.c **** #endif	
 350:Core/Src/bmp.c **** 	return res;
 782              		.loc 1 350 2 view .LVU274
 783              	.L41:
 351:Core/Src/bmp.c **** }            
 784              		.loc 1 351 1 is_stmt 0 view .LVU275
 785 0060 0298     		ldr	r0, [sp, #8]
 786 0062 13B0     		add	sp, sp, #76
 787              	.LCFI6:
 788              		.cfi_remember_state
 789              		.cfi_def_cfa_offset 36
 790              		@ sp needed
 791 0064 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 792              	.LVL88:
 793              	.L79:
 794              	.LCFI7:
 795              		.cfi_restore_state
 234:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 796              		.loc 1 234 3 is_stmt 1 view .LVU276
 797 0068 0598     		ldr	r0, [sp, #20]
 798              	.LVL89:
 234:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 799              		.loc 1 234 3 is_stmt 0 view .LVU277
 800 006a FFF7FEFF 		bl	pic_memfree
 801              	.LVL90:
 235:Core/Src/bmp.c **** 	} 	 
 802              		.loc 1 235 3 is_stmt 1 view .LVU278
 235:Core/Src/bmp.c **** 	} 	 
 803              		.loc 1 235 10 is_stmt 0 view .LVU279
 804 006e 1123     		movs	r3, #17
 805 0070 0293     		str	r3, [sp, #8]
 806 0072 F5E7     		b	.L41
 807              	.LVL91:
 808              	.L80:
 244:Core/Src/bmp.c **** 		pbmp=(BITMAPINFO*)databuf;					//得到BMP的头部信息   
 809              		.loc 1 244 3 is_stmt 1 view .LVU280
 810 0074 0DF14603 		add	r3, sp, #70
 811 0078 4422     		movs	r2, #68
 812 007a 059C     		ldr	r4, [sp, #20]
 813              	.LVL92:
 244:Core/Src/bmp.c **** 		pbmp=(BITMAPINFO*)databuf;					//得到BMP的头部信息   
 814              		.loc 1 244 3 is_stmt 0 view .LVU281
 815 007c 2146     		mov	r1, r4
 816 007e 0498     		ldr	r0, [sp, #16]
 817              	.LVL93:
 244:Core/Src/bmp.c **** 		pbmp=(BITMAPINFO*)databuf;					//得到BMP的头部信息   
 818              		.loc 1 244 3 view .LVU282
 819 0080 FFF7FEFF 		bl	f_read
 820              	.LVL94:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 25


 245:Core/Src/bmp.c **** 		color_byte=pbmp->bmiHeader.biBitCount/8;	//彩色位 16/24/32  
 821              		.loc 1 245 3 is_stmt 1 view .LVU283
 246:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 822              		.loc 1 246 3 view .LVU284
 246:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 823              		.loc 1 246 29 is_stmt 0 view .LVU285
 824 0084 2246     		mov	r2, r4
 825 0086 E38B     		ldrh	r3, [r4, #30]
 246:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 826              		.loc 1 246 13 view .LVU286
 827 0088 D808     		lsrs	r0, r3, #3
 828 008a C3F3C704 		ubfx	r4, r3, #3, #8
 829              	.LVL95:
 246:Core/Src/bmp.c **** 		biCompression=pbmp->bmiHeader.biCompression;//压缩方式
 830              		.loc 1 246 13 view .LVU287
 831 008e 0A94     		str	r4, [sp, #40]
 832              	.LVL96:
 247:Core/Src/bmp.c **** 		picinfo.ImgHeight=pbmp->bmiHeader.biHeight;	//得到图片高度
 833              		.loc 1 247 3 is_stmt 1 view .LVU288
 247:Core/Src/bmp.c **** 		picinfo.ImgHeight=pbmp->bmiHeader.biHeight;	//得到图片高度
 834              		.loc 1 247 16 is_stmt 0 view .LVU289
 835 0090 92F82030 		ldrb	r3, [r2, #32]	@ zero_extendqisi2
 836 0094 0F93     		str	r3, [sp, #60]
 837              	.LVL97:
 248:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度   
 838              		.loc 1 248 3 is_stmt 1 view .LVU290
 248:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度   
 839              		.loc 1 248 36 is_stmt 0 view .LVU291
 840 0096 9169     		ldr	r1, [r2, #24]
 248:Core/Src/bmp.c **** 		picinfo.ImgWidth=pbmp->bmiHeader.biWidth;  	//得到图片宽度   
 841              		.loc 1 248 20 view .LVU292
 842 0098 874B     		ldr	r3, .L86
 843 009a 9960     		str	r1, [r3, #8]
 249:Core/Src/bmp.c **** 		//水平像素必须是4的倍数!!
 844              		.loc 1 249 3 is_stmt 1 view .LVU293
 249:Core/Src/bmp.c **** 		//水平像素必须是4的倍数!!
 845              		.loc 1 249 35 is_stmt 0 view .LVU294
 846 009c 5269     		ldr	r2, [r2, #20]
 847              	.LVL98:
 249:Core/Src/bmp.c **** 		//水平像素必须是4的倍数!!
 848              		.loc 1 249 19 view .LVU295
 849 009e 5A60     		str	r2, [r3, #4]
 251:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 850              		.loc 1 251 3 is_stmt 1 view .LVU296
 251:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 851              		.loc 1 251 23 is_stmt 0 view .LVU297
 852 00a0 02FB04F3 		mul	r3, r2, r4
 251:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 853              		.loc 1 251 5 view .LVU298
 854 00a4 13F0030F 		tst	r3, #3
 855 00a8 1CD0     		beq	.L44
 251:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 856              		.loc 1 251 38 is_stmt 1 discriminator 1 view .LVU299
 251:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 857              		.loc 1 251 75 is_stmt 0 discriminator 1 view .LVU300
 858 00aa 9B08     		lsrs	r3, r3, #2
 251:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 26


 859              		.loc 1 251 77 discriminator 1 view .LVU301
 860 00ac 0133     		adds	r3, r3, #1
 251:Core/Src/bmp.c **** 		else rowlen=picinfo.ImgWidth*color_byte;
 861              		.loc 1 251 44 discriminator 1 view .LVU302
 862 00ae 9B00     		lsls	r3, r3, #2
 863 00b0 9BB2     		uxth	r3, r3
 864 00b2 0E93     		str	r3, [sp, #56]
 865              	.LVL99:
 866              	.L45:
 253:Core/Src/bmp.c ****  		//开始解码BMP   
 867              		.loc 1 253 3 is_stmt 1 view .LVU303
 253:Core/Src/bmp.c ****  		//开始解码BMP   
 868              		.loc 1 253 16 is_stmt 0 view .LVU304
 869 00b4 9DF83830 		ldrb	r3, [sp, #56]	@ zero_extendqisi2
 870 00b8 0A98     		ldr	r0, [sp, #40]
 871 00ba 12FB00F0 		smulbb	r0, r2, r0
 872 00be C0B2     		uxtb	r0, r0
 253:Core/Src/bmp.c ****  		//开始解码BMP   
 873              		.loc 1 253 9 view .LVU305
 874 00c0 1B1A     		subs	r3, r3, r0
 875 00c2 DBB2     		uxtb	r3, r3
 876 00c4 0893     		str	r3, [sp, #32]
 877              	.LVL100:
 255:Core/Src/bmp.c **** 		tx=0 ;
 878              		.loc 1 255 3 is_stmt 1 view .LVU306
 256:Core/Src/bmp.c **** 		ty=picinfo.ImgHeight-1;
 879              		.loc 1 256 3 view .LVU307
 257:Core/Src/bmp.c **** 		if(picinfo.ImgWidth<=picinfo.S_Width&&picinfo.ImgHeight<=picinfo.S_Height)
 880              		.loc 1 257 3 view .LVU308
 257:Core/Src/bmp.c **** 		if(picinfo.ImgWidth<=picinfo.S_Width&&picinfo.ImgHeight<=picinfo.S_Height)
 881              		.loc 1 257 23 is_stmt 0 view .LVU309
 882 00c6 8DB2     		uxth	r5, r1
 257:Core/Src/bmp.c **** 		if(picinfo.ImgWidth<=picinfo.S_Width&&picinfo.ImgHeight<=picinfo.S_Height)
 883              		.loc 1 257 5 view .LVU310
 884 00c8 013D     		subs	r5, r5, #1
 885 00ca ADB2     		uxth	r5, r5
 886              	.LVL101:
 258:Core/Src/bmp.c **** 		{  							   
 887              		.loc 1 258 3 is_stmt 1 view .LVU311
 258:Core/Src/bmp.c **** 		{  							   
 888              		.loc 1 258 31 is_stmt 0 view .LVU312
 889 00cc 7A4B     		ldr	r3, .L86
 890 00ce 5B69     		ldr	r3, [r3, #20]
 258:Core/Src/bmp.c **** 		{  							   
 891              		.loc 1 258 5 view .LVU313
 892 00d0 9A42     		cmp	r2, r3
 893 00d2 03D8     		bhi	.L46
 258:Core/Src/bmp.c **** 		{  							   
 894              		.loc 1 258 67 discriminator 1 view .LVU314
 895 00d4 784B     		ldr	r3, .L86
 896 00d6 1B69     		ldr	r3, [r3, #16]
 258:Core/Src/bmp.c **** 		{  							   
 897              		.loc 1 258 39 discriminator 1 view .LVU315
 898 00d8 9942     		cmp	r1, r3
 899 00da 09D9     		bls	.L81
 900              	.LVL102:
 901              	.L46:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 27


 344:Core/Src/bmp.c **** 	}else res=PIC_SIZE_ERR;//图片尺寸错误	
 902              		.loc 1 344 3 is_stmt 1 view .LVU316
 903 00dc 0498     		ldr	r0, [sp, #16]
 904 00de FFF7FEFF 		bl	f_close
 905              	.LVL103:
 906 00e2 B7E7     		b	.L43
 907              	.LVL104:
 908              	.L44:
 252:Core/Src/bmp.c **** 		rowadd=rowlen-picinfo.ImgWidth*color_byte;	//每行填充字节数
 909              		.loc 1 252 8 view .LVU317
 252:Core/Src/bmp.c **** 		rowadd=rowlen-picinfo.ImgWidth*color_byte;	//每行填充字节数
 910              		.loc 1 252 14 is_stmt 0 view .LVU318
 911 00e4 C0B2     		uxtb	r0, r0
 912 00e6 10FB02F0 		smulbb	r0, r0, r2
 913 00ea 83B2     		uxth	r3, r0
 914 00ec 0E93     		str	r3, [sp, #56]
 915              	.LVL105:
 252:Core/Src/bmp.c **** 		rowadd=rowlen-picinfo.ImgWidth*color_byte;	//每行填充字节数
 916              		.loc 1 252 14 view .LVU319
 917 00ee E1E7     		b	.L45
 918              	.LVL106:
 919              	.L81:
 260:Core/Src/bmp.c **** 			readlen=rowcnt*rowlen;						//一次读取的字节数
 920              		.loc 1 260 4 is_stmt 1 view .LVU320
 260:Core/Src/bmp.c **** 			readlen=rowcnt*rowlen;						//一次读取的字节数
 921              		.loc 1 260 10 is_stmt 0 view .LVU321
 922 00f0 4FF40063 		mov	r3, #2048
 923 00f4 0E99     		ldr	r1, [sp, #56]
 924 00f6 B3FBF1F3 		udiv	r3, r3, r1
 925 00fa 0793     		str	r3, [sp, #28]
 926              	.LVL107:
 261:Core/Src/bmp.c **** 			rowpix=picinfo.ImgWidth;					//水平像素数就是宽度 
 927              		.loc 1 261 4 is_stmt 1 view .LVU322
 261:Core/Src/bmp.c **** 			rowpix=picinfo.ImgWidth;					//水平像素数就是宽度 
 928              		.loc 1 261 11 is_stmt 0 view .LVU323
 929 00fc 11FB03F3 		smulbb	r3, r1, r3
 930              	.LVL108:
 261:Core/Src/bmp.c **** 			rowpix=picinfo.ImgWidth;					//水平像素数就是宽度 
 931              		.loc 1 261 11 view .LVU324
 932 0100 9BB2     		uxth	r3, r3
 933 0102 0D93     		str	r3, [sp, #52]
 934              	.LVL109:
 262:Core/Src/bmp.c **** 			f_lseek(f_bmp,pbmp->bmfHeader.bfOffBits);	//偏移到数据起始位置 	  
 935              		.loc 1 262 4 is_stmt 1 view .LVU325
 262:Core/Src/bmp.c **** 			f_lseek(f_bmp,pbmp->bmfHeader.bfOffBits);	//偏移到数据起始位置 	  
 936              		.loc 1 262 10 is_stmt 0 view .LVU326
 937 0104 1FFA82FB 		uxth	fp, r2
 938              	.LVL110:
 263:Core/Src/bmp.c **** 			while(1)
 939              		.loc 1 263 4 is_stmt 1 view .LVU327
 940 0108 059B     		ldr	r3, [sp, #20]
 941 010a D968     		ldr	r1, [r3, #12]
 942 010c 0498     		ldr	r0, [sp, #16]
 943 010e FFF7FEFF 		bl	f_lseek
 944              	.LVL111:
 945 0112 E1E0     		b	.L67
 946              	.LVL112:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 28


 947              	.L50:
 275:Core/Src/bmp.c **** 							color+=((u16)(*bmpbuf++)<<3)&0X07E0;	//G
 948              		.loc 1 275 8 discriminator 3 view .LVU328
 275:Core/Src/bmp.c **** 							color+=((u16)(*bmpbuf++)<<3)&0X07E0;	//G
 949              		.loc 1 275 15 is_stmt 0 discriminator 3 view .LVU329
 950 0114 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 951              	.LVL113:
 276:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 952              		.loc 1 276 8 is_stmt 1 discriminator 3 view .LVU330
 276:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 953              		.loc 1 276 22 is_stmt 0 discriminator 3 view .LVU331
 954 0116 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 276:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 955              		.loc 1 276 32 discriminator 3 view .LVU332
 956 0118 D200     		lsls	r2, r2, #3
 276:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 957              		.loc 1 276 36 discriminator 3 view .LVU333
 958 011a 02F4FC62 		and	r2, r2, #2016
 276:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 959              		.loc 1 276 13 discriminator 3 view .LVU334
 960 011e 02EBD102 		add	r2, r2, r1, lsr #3
 961              	.LVL114:
 277:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 962              		.loc 1 277 8 is_stmt 1 discriminator 3 view .LVU335
 277:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 963              		.loc 1 277 29 is_stmt 0 discriminator 3 view .LVU336
 964 0122 03F10308 		add	r8, r3, #3
 965              	.LVL115:
 277:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 966              		.loc 1 277 22 discriminator 3 view .LVU337
 967 0126 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 277:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 968              		.loc 1 277 32 discriminator 3 view .LVU338
 969 0128 1B02     		lsls	r3, r3, #8
 277:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 970              		.loc 1 277 36 discriminator 3 view .LVU339
 971 012a 03F47843 		and	r3, r3, #63488
 277:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 972              		.loc 1 277 13 discriminator 3 view .LVU340
 973 012e 1A44     		add	r2, r2, r3
 974              	.LVL116:
 278:Core/Src/bmp.c **** 							tx++;
 975              		.loc 1 278 10 is_stmt 1 discriminator 3 view .LVU341
 278:Core/Src/bmp.c **** 							tx++;
 976              		.loc 1 278 17 is_stmt 0 discriminator 3 view .LVU342
 977 0130 624B     		ldr	r3, .L86+4
 978 0132 5B68     		ldr	r3, [r3, #4]
 278:Core/Src/bmp.c **** 							tx++;
 979              		.loc 1 278 10 discriminator 3 view .LVU343
 980 0134 E919     		adds	r1, r5, r7
 981 0136 06EB0A00 		add	r0, r6, r10
 982 013a 92B2     		uxth	r2, r2
 278:Core/Src/bmp.c **** 							tx++;
 983              		.loc 1 278 10 discriminator 3 view .LVU344
 984 013c 89B2     		uxth	r1, r1
 985 013e 80B2     		uxth	r0, r0
 986 0140 9847     		blx	r3
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 29


 987              	.LVL117:
 279:Core/Src/bmp.c **** 						}
 988              		.loc 1 279 8 is_stmt 1 discriminator 3 view .LVU345
 279:Core/Src/bmp.c **** 						}
 989              		.loc 1 279 10 is_stmt 0 discriminator 3 view .LVU346
 990 0142 0136     		adds	r6, r6, #1
 991              	.LVL118:
 279:Core/Src/bmp.c **** 						}
 992              		.loc 1 279 10 discriminator 3 view .LVU347
 993 0144 B6B2     		uxth	r6, r6
 994              	.LVL119:
 273:Core/Src/bmp.c **** 						{
 995              		.loc 1 273 24 is_stmt 1 discriminator 3 view .LVU348
 273:Core/Src/bmp.c **** 						{
 996              		.loc 1 273 25 is_stmt 0 discriminator 3 view .LVU349
 997 0146 0134     		adds	r4, r4, #1
 998              	.LVL120:
 273:Core/Src/bmp.c **** 						{
 999              		.loc 1 273 25 discriminator 3 view .LVU350
 1000 0148 A4B2     		uxth	r4, r4
 1001              	.LVL121:
 277:Core/Src/bmp.c ****  						 	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1002              		.loc 1 277 29 discriminator 3 view .LVU351
 1003 014a 4346     		mov	r3, r8
 1004              	.LVL122:
 1005              	.L51:
 273:Core/Src/bmp.c **** 						{
 1006              		.loc 1 273 15 is_stmt 1 discriminator 1 view .LVU352
 273:Core/Src/bmp.c **** 						{
 1007              		.loc 1 273 7 is_stmt 0 discriminator 1 view .LVU353
 1008 014c 5C45     		cmp	r4, fp
 1009 014e E1D3     		bcc	.L50
 281:Core/Src/bmp.c **** 						tx=0;
 1010              		.loc 1 281 7 is_stmt 1 discriminator 2 view .LVU354
 281:Core/Src/bmp.c **** 						tx=0;
 1011              		.loc 1 281 13 is_stmt 0 discriminator 2 view .LVU355
 1012 0150 089A     		ldr	r2, [sp, #32]
 1013 0152 1344     		add	r3, r3, r2
 1014              	.LVL123:
 282:Core/Src/bmp.c **** 						ty--;
 1015              		.loc 1 282 7 is_stmt 1 discriminator 2 view .LVU356
 283:Core/Src/bmp.c **** 					}
 1016              		.loc 1 283 7 discriminator 2 view .LVU357
 283:Core/Src/bmp.c **** 					}
 1017              		.loc 1 283 9 is_stmt 0 discriminator 2 view .LVU358
 1018 0154 013D     		subs	r5, r5, #1
 1019              	.LVL124:
 283:Core/Src/bmp.c **** 					}
 1020              		.loc 1 283 9 discriminator 2 view .LVU359
 1021 0156 ADB2     		uxth	r5, r5
 1022              	.LVL125:
 271:Core/Src/bmp.c **** 					{
 1023              		.loc 1 271 23 is_stmt 1 discriminator 2 view .LVU360
 271:Core/Src/bmp.c **** 					{
 1024              		.loc 1 271 24 is_stmt 0 discriminator 2 view .LVU361
 1025 0158 09F10109 		add	r9, r9, #1
 1026              	.LVL126:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 30


 271:Core/Src/bmp.c **** 					{
 1027              		.loc 1 271 24 discriminator 2 view .LVU362
 1028 015c 1FFA89F9 		uxth	r9, r9
 1029              	.LVL127:
 1030              	.L48:
 271:Core/Src/bmp.c **** 					{
 1031              		.loc 1 271 14 is_stmt 1 discriminator 1 view .LVU363
 271:Core/Src/bmp.c **** 					{
 1032              		.loc 1 271 6 is_stmt 0 discriminator 1 view .LVU364
 1033 0160 079A     		ldr	r2, [sp, #28]
 1034 0162 9145     		cmp	r9, r2
 1035 0164 80F0AE80 		bcs	.L52
 273:Core/Src/bmp.c **** 						{
 1036              		.loc 1 273 12 view .LVU365
 1037 0168 0024     		movs	r4, #0
 1038 016a 2646     		mov	r6, r4
 1039 016c EEE7     		b	.L51
 1040              	.LVL128:
 1041              	.L84:
 267:Core/Src/bmp.c **** 				if(br!=readlen)rowcnt=br/rowlen;				//最后剩下的行数
 1042              		.loc 1 267 11 view .LVU366
 1043 016e 059B     		ldr	r3, [sp, #20]
 271:Core/Src/bmp.c **** 					{
 1044              		.loc 1 271 11 view .LVU367
 1045 0170 4FF00009 		mov	r9, #0
 1046 0174 F4E7     		b	.L48
 1047              	.LVL129:
 1048              	.L57:
 293:Core/Src/bmp.c **** 								color+=(((u16)*bmpbuf++)&0XE0)<<1; 	//G
 1049              		.loc 1 293 9 is_stmt 1 discriminator 3 view .LVU368
 293:Core/Src/bmp.c **** 								color+=(((u16)*bmpbuf++)&0XE0)<<1; 	//G
 1050              		.loc 1 293 21 is_stmt 0 discriminator 3 view .LVU369
 1051 0176 8846     		mov	r8, r1
 1052 0178 18F8023B 		ldrb	r3, [r8], #2	@ zero_extendqisi2
 293:Core/Src/bmp.c **** 								color+=(((u16)*bmpbuf++)&0XE0)<<1; 	//G
 1053              		.loc 1 293 14 discriminator 3 view .LVU370
 1054 017c 03F01F02 		and	r2, r3, #31
 1055              	.LVL130:
 294:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<9;  	    //R,G	 
 1056              		.loc 1 294 9 is_stmt 1 discriminator 3 view .LVU371
 294:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<9;  	    //R,G	 
 1057              		.loc 1 294 39 is_stmt 0 discriminator 3 view .LVU372
 1058 0180 5B00     		lsls	r3, r3, #1
 1059 0182 03F4E073 		and	r3, r3, #448
 294:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<9;  	    //R,G	 
 1060              		.loc 1 294 14 discriminator 3 view .LVU373
 1061 0186 1344     		add	r3, r3, r2
 1062              	.LVL131:
 295:Core/Src/bmp.c **** 							    pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1063              		.loc 1 295 10 is_stmt 1 discriminator 3 view .LVU374
 295:Core/Src/bmp.c **** 							    pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1064              		.loc 1 295 23 is_stmt 0 discriminator 3 view .LVU375
 1065 0188 4A78     		ldrb	r2, [r1, #1]	@ zero_extendqisi2
 295:Core/Src/bmp.c **** 							    pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1066              		.loc 1 295 15 discriminator 3 view .LVU376
 1067 018a 03EB4222 		add	r2, r3, r2, lsl #9
 1068              	.LVL132:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 31


 296:Core/Src/bmp.c **** 								tx++;
 1069              		.loc 1 296 12 is_stmt 1 discriminator 3 view .LVU377
 296:Core/Src/bmp.c **** 								tx++;
 1070              		.loc 1 296 19 is_stmt 0 discriminator 3 view .LVU378
 1071 018e 4B4B     		ldr	r3, .L86+4
 1072 0190 5B68     		ldr	r3, [r3, #4]
 296:Core/Src/bmp.c **** 								tx++;
 1073              		.loc 1 296 12 discriminator 3 view .LVU379
 1074 0192 E919     		adds	r1, r5, r7
 1075 0194 06EB0A00 		add	r0, r6, r10
 1076 0198 92B2     		uxth	r2, r2
 296:Core/Src/bmp.c **** 								tx++;
 1077              		.loc 1 296 12 discriminator 3 view .LVU380
 1078 019a 89B2     		uxth	r1, r1
 1079 019c 80B2     		uxth	r0, r0
 1080 019e 9847     		blx	r3
 1081              	.LVL133:
 297:Core/Src/bmp.c **** 							}
 1082              		.loc 1 297 9 is_stmt 1 discriminator 3 view .LVU381
 297:Core/Src/bmp.c **** 							}
 1083              		.loc 1 297 11 is_stmt 0 discriminator 3 view .LVU382
 1084 01a0 0136     		adds	r6, r6, #1
 1085              	.LVL134:
 297:Core/Src/bmp.c **** 							}
 1086              		.loc 1 297 11 discriminator 3 view .LVU383
 1087 01a2 B6B2     		uxth	r6, r6
 1088              	.LVL135:
 291:Core/Src/bmp.c **** 							{
 1089              		.loc 1 291 25 is_stmt 1 discriminator 3 view .LVU384
 291:Core/Src/bmp.c **** 							{
 1090              		.loc 1 291 26 is_stmt 0 discriminator 3 view .LVU385
 1091 01a4 0134     		adds	r4, r4, #1
 1092              	.LVL136:
 291:Core/Src/bmp.c **** 							{
 1093              		.loc 1 291 26 discriminator 3 view .LVU386
 1094 01a6 A4B2     		uxth	r4, r4
 1095              	.LVL137:
 295:Core/Src/bmp.c **** 							    pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1096              		.loc 1 295 30 discriminator 3 view .LVU387
 1097 01a8 4146     		mov	r1, r8
 1098              	.LVL138:
 1099              	.L55:
 291:Core/Src/bmp.c **** 							{
 1100              		.loc 1 291 16 is_stmt 1 discriminator 1 view .LVU388
 291:Core/Src/bmp.c **** 							{
 1101              		.loc 1 291 8 is_stmt 0 discriminator 1 view .LVU389
 1102 01aa 5C45     		cmp	r4, fp
 1103 01ac E3D3     		bcc	.L57
 1104              	.L58:
 309:Core/Src/bmp.c **** 						tx=0;
 1105              		.loc 1 309 7 is_stmt 1 discriminator 2 view .LVU390
 309:Core/Src/bmp.c **** 						tx=0;
 1106              		.loc 1 309 13 is_stmt 0 discriminator 2 view .LVU391
 1107 01ae 089B     		ldr	r3, [sp, #32]
 1108 01b0 1944     		add	r1, r1, r3
 1109              	.LVL139:
 310:Core/Src/bmp.c **** 						ty--;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 32


 1110              		.loc 1 310 7 is_stmt 1 discriminator 2 view .LVU392
 311:Core/Src/bmp.c **** 					}	
 1111              		.loc 1 311 7 discriminator 2 view .LVU393
 311:Core/Src/bmp.c **** 					}	
 1112              		.loc 1 311 9 is_stmt 0 discriminator 2 view .LVU394
 1113 01b2 013D     		subs	r5, r5, #1
 1114              	.LVL140:
 311:Core/Src/bmp.c **** 					}	
 1115              		.loc 1 311 9 discriminator 2 view .LVU395
 1116 01b4 ADB2     		uxth	r5, r5
 1117              	.LVL141:
 287:Core/Src/bmp.c **** 					{
 1118              		.loc 1 287 23 is_stmt 1 discriminator 2 view .LVU396
 287:Core/Src/bmp.c **** 					{
 1119              		.loc 1 287 24 is_stmt 0 discriminator 2 view .LVU397
 1120 01b6 09F10109 		add	r9, r9, #1
 1121              	.LVL142:
 287:Core/Src/bmp.c **** 					{
 1122              		.loc 1 287 24 discriminator 2 view .LVU398
 1123 01ba 1FFA89F9 		uxth	r9, r9
 1124              	.LVL143:
 1125              	.L53:
 287:Core/Src/bmp.c **** 					{
 1126              		.loc 1 287 14 is_stmt 1 discriminator 1 view .LVU399
 287:Core/Src/bmp.c **** 					{
 1127              		.loc 1 287 6 is_stmt 0 discriminator 1 view .LVU400
 1128 01be 079B     		ldr	r3, [sp, #28]
 1129 01c0 9945     		cmp	r9, r3
 1130 01c2 7FD2     		bcs	.L52
 289:Core/Src/bmp.c **** 						{
 1131              		.loc 1 289 7 is_stmt 1 view .LVU401
 289:Core/Src/bmp.c **** 						{
 1132              		.loc 1 289 9 is_stmt 0 view .LVU402
 1133 01c4 0F9B     		ldr	r3, [sp, #60]
 1134 01c6 13B1     		cbz	r3, .L73
 301:Core/Src/bmp.c **** 							{											 
 1135              		.loc 1 301 13 view .LVU403
 1136 01c8 0024     		movs	r4, #0
 1137 01ca 2646     		mov	r6, r4
 1138 01cc 16E0     		b	.L56
 1139              	.L73:
 291:Core/Src/bmp.c **** 							{
 1140              		.loc 1 291 13 view .LVU404
 1141 01ce 0024     		movs	r4, #0
 1142 01d0 2646     		mov	r6, r4
 1143 01d2 EAE7     		b	.L55
 1144              	.LVL144:
 1145              	.L59:
 303:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<8;	//R,G	 
 1146              		.loc 1 303 9 is_stmt 1 discriminator 3 view .LVU405
 303:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<8;	//R,G	 
 1147              		.loc 1 303 15 is_stmt 0 discriminator 3 view .LVU406
 1148 01d4 8846     		mov	r8, r1
 303:Core/Src/bmp.c **** 		 						color+=((u16)*bmpbuf++)<<8;	//R,G	 
 1149              		.loc 1 303 14 discriminator 3 view .LVU407
 1150 01d6 18F8022B 		ldrb	r2, [r8], #2	@ zero_extendqisi2
 1151              	.LVL145:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 33


 304:Core/Src/bmp.c **** 							  	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1152              		.loc 1 304 10 is_stmt 1 discriminator 3 view .LVU408
 304:Core/Src/bmp.c **** 							  	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1153              		.loc 1 304 23 is_stmt 0 discriminator 3 view .LVU409
 1154 01da 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 304:Core/Src/bmp.c **** 							  	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1155              		.loc 1 304 15 discriminator 3 view .LVU410
 1156 01dc 02EB0322 		add	r2, r2, r3, lsl #8
 1157              	.LVL146:
 305:Core/Src/bmp.c **** 								tx++;
 1158              		.loc 1 305 11 is_stmt 1 discriminator 3 view .LVU411
 305:Core/Src/bmp.c **** 								tx++;
 1159              		.loc 1 305 18 is_stmt 0 discriminator 3 view .LVU412
 1160 01e0 364B     		ldr	r3, .L86+4
 1161 01e2 5B68     		ldr	r3, [r3, #4]
 305:Core/Src/bmp.c **** 								tx++;
 1162              		.loc 1 305 11 discriminator 3 view .LVU413
 1163 01e4 E919     		adds	r1, r5, r7
 1164 01e6 06EB0A00 		add	r0, r6, r10
 1165 01ea 92B2     		uxth	r2, r2
 305:Core/Src/bmp.c **** 								tx++;
 1166              		.loc 1 305 11 discriminator 3 view .LVU414
 1167 01ec 89B2     		uxth	r1, r1
 1168 01ee 80B2     		uxth	r0, r0
 1169 01f0 9847     		blx	r3
 1170              	.LVL147:
 306:Core/Src/bmp.c **** 							}
 1171              		.loc 1 306 9 is_stmt 1 discriminator 3 view .LVU415
 306:Core/Src/bmp.c **** 							}
 1172              		.loc 1 306 11 is_stmt 0 discriminator 3 view .LVU416
 1173 01f2 0136     		adds	r6, r6, #1
 1174              	.LVL148:
 306:Core/Src/bmp.c **** 							}
 1175              		.loc 1 306 11 discriminator 3 view .LVU417
 1176 01f4 B6B2     		uxth	r6, r6
 1177              	.LVL149:
 301:Core/Src/bmp.c **** 							{											 
 1178              		.loc 1 301 25 is_stmt 1 discriminator 3 view .LVU418
 301:Core/Src/bmp.c **** 							{											 
 1179              		.loc 1 301 26 is_stmt 0 discriminator 3 view .LVU419
 1180 01f6 0134     		adds	r4, r4, #1
 1181              	.LVL150:
 301:Core/Src/bmp.c **** 							{											 
 1182              		.loc 1 301 26 discriminator 3 view .LVU420
 1183 01f8 A4B2     		uxth	r4, r4
 1184              	.LVL151:
 304:Core/Src/bmp.c **** 							  	pic_phy.draw_point(x+tx,y+ty,color);//显示图片	
 1185              		.loc 1 304 30 discriminator 3 view .LVU421
 1186 01fa 4146     		mov	r1, r8
 1187              	.LVL152:
 1188              	.L56:
 301:Core/Src/bmp.c **** 							{											 
 1189              		.loc 1 301 16 is_stmt 1 discriminator 1 view .LVU422
 301:Core/Src/bmp.c **** 							{											 
 1190              		.loc 1 301 8 is_stmt 0 discriminator 1 view .LVU423
 1191 01fc 5C45     		cmp	r4, fp
 1192 01fe E9D3     		bcc	.L59
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 34


 301:Core/Src/bmp.c **** 							{											 
 1193              		.loc 1 301 8 discriminator 1 view .LVU424
 1194 0200 D5E7     		b	.L58
 1195              	.LVL153:
 1196              	.L85:
 267:Core/Src/bmp.c **** 				if(br!=readlen)rowcnt=br/rowlen;				//最后剩下的行数
 1197              		.loc 1 267 11 view .LVU425
 1198 0202 0599     		ldr	r1, [sp, #20]
 287:Core/Src/bmp.c **** 					{
 1199              		.loc 1 287 11 view .LVU426
 1200 0204 4FF00009 		mov	r9, #0
 1201 0208 D9E7     		b	.L53
 1202              	.LVL154:
 1203              	.L63:
 330:Core/Src/bmp.c **** 							}else tmp_color=piclib_alpha_blend(acolor,color,alphabend/8);		//与指定颜色进行blend
 1204              		.loc 1 330 9 is_stmt 1 view .LVU427
 330:Core/Src/bmp.c **** 							}else tmp_color=piclib_alpha_blend(acolor,color,alphabend/8);		//与指定颜色进行blend
 1205              		.loc 1 330 15 is_stmt 0 view .LVU428
 1206 020a 4FEADB02 		lsr	r2, fp, #3
 1207 020e 2146     		mov	r1, r4
 1208 0210 FFF7FEFF 		bl	piclib_alpha_blend
 1209              	.LVL155:
 330:Core/Src/bmp.c **** 							}else tmp_color=piclib_alpha_blend(acolor,color,alphabend/8);		//与指定颜色进行blend
 1210              		.loc 1 330 15 view .LVU429
 1211 0214 0446     		mov	r4, r0
 1212              	.LVL156:
 1213              	.L64:
 332:Core/Src/bmp.c **** 							tx++;//x轴增加一个像素 	  
 1214              		.loc 1 332 9 is_stmt 1 discriminator 2 view .LVU430
 332:Core/Src/bmp.c **** 							tx++;//x轴增加一个像素 	  
 1215              		.loc 1 332 16 is_stmt 0 discriminator 2 view .LVU431
 1216 0216 294B     		ldr	r3, .L86+4
 1217 0218 5B68     		ldr	r3, [r3, #4]
 332:Core/Src/bmp.c **** 							tx++;//x轴增加一个像素 	  
 1218              		.loc 1 332 9 discriminator 2 view .LVU432
 1219 021a E919     		adds	r1, r5, r7
 1220 021c 06EB0A00 		add	r0, r6, r10
 1221 0220 2246     		mov	r2, r4
 1222 0222 89B2     		uxth	r1, r1
 1223 0224 80B2     		uxth	r0, r0
 1224 0226 9847     		blx	r3
 1225              	.LVL157:
 333:Core/Src/bmp.c **** 						}
 1226              		.loc 1 333 8 is_stmt 1 discriminator 2 view .LVU433
 333:Core/Src/bmp.c **** 						}
 1227              		.loc 1 333 10 is_stmt 0 discriminator 2 view .LVU434
 1228 0228 0136     		adds	r6, r6, #1
 1229              	.LVL158:
 333:Core/Src/bmp.c **** 						}
 1230              		.loc 1 333 10 discriminator 2 view .LVU435
 1231 022a B6B2     		uxth	r6, r6
 1232              	.LVL159:
 317:Core/Src/bmp.c **** 						{
 1233              		.loc 1 317 24 is_stmt 1 discriminator 2 view .LVU436
 317:Core/Src/bmp.c **** 						{
 1234              		.loc 1 317 25 is_stmt 0 discriminator 2 view .LVU437
 1235 022c 08F10108 		add	r8, r8, #1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 35


 1236              	.LVL160:
 317:Core/Src/bmp.c **** 						{
 1237              		.loc 1 317 25 discriminator 2 view .LVU438
 1238 0230 1FFA88F8 		uxth	r8, r8
 1239              	.LVL161:
 322:Core/Src/bmp.c **** 							if(alphamode!=1) //需要读取底色
 1240              		.loc 1 322 25 discriminator 2 view .LVU439
 1241 0234 019B     		ldr	r3, [sp, #4]
 1242              	.LVL162:
 1243              	.L66:
 317:Core/Src/bmp.c **** 						{
 1244              		.loc 1 317 15 is_stmt 1 discriminator 1 view .LVU440
 317:Core/Src/bmp.c **** 						{
 1245              		.loc 1 317 7 is_stmt 0 discriminator 1 view .LVU441
 1246 0236 039A     		ldr	r2, [sp, #12]
 1247 0238 9045     		cmp	r8, r2
 1248 023a 2CD2     		bcs	.L82
 319:Core/Src/bmp.c **** 							color+=((u16)(*bmpbuf++)<<3)&0X07E0;	//G
 1249              		.loc 1 319 8 is_stmt 1 view .LVU442
 1250              	.LVL163:
 319:Core/Src/bmp.c **** 							color+=((u16)(*bmpbuf++)<<3)&0X07E0;	//G
 1251              		.loc 1 319 15 is_stmt 0 view .LVU443
 1252 023c 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 1253              	.LVL164:
 320:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 1254              		.loc 1 320 8 is_stmt 1 view .LVU444
 320:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 1255              		.loc 1 320 22 is_stmt 0 view .LVU445
 1256 023e 5C78     		ldrb	r4, [r3, #1]	@ zero_extendqisi2
 320:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 1257              		.loc 1 320 32 view .LVU446
 1258 0240 E400     		lsls	r4, r4, #3
 320:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 1259              		.loc 1 320 36 view .LVU447
 1260 0242 04F4FC64 		and	r4, r4, #2016
 320:Core/Src/bmp.c **** 							color+=(((u16)*bmpbuf++)<<8)&0XF800;	//R
 1261              		.loc 1 320 13 view .LVU448
 1262 0246 04EBD004 		add	r4, r4, r0, lsr #3
 1263              	.LVL165:
 321:Core/Src/bmp.c **** 							alphabend=*bmpbuf++;					//ALPHA通道
 1264              		.loc 1 321 8 is_stmt 1 view .LVU449
 321:Core/Src/bmp.c **** 							alphabend=*bmpbuf++;					//ALPHA通道
 1265              		.loc 1 321 22 is_stmt 0 view .LVU450
 1266 024a 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 321:Core/Src/bmp.c **** 							alphabend=*bmpbuf++;					//ALPHA通道
 1267              		.loc 1 321 32 view .LVU451
 1268 024c 0002     		lsls	r0, r0, #8
 321:Core/Src/bmp.c **** 							alphabend=*bmpbuf++;					//ALPHA通道
 1269              		.loc 1 321 36 view .LVU452
 1270 024e 00F47840 		and	r0, r0, #63488
 321:Core/Src/bmp.c **** 							alphabend=*bmpbuf++;					//ALPHA通道
 1271              		.loc 1 321 13 view .LVU453
 1272 0252 0444     		add	r4, r4, r0
 1273              	.LVL166:
 321:Core/Src/bmp.c **** 							alphabend=*bmpbuf++;					//ALPHA通道
 1274              		.loc 1 321 13 view .LVU454
 1275 0254 A4B2     		uxth	r4, r4
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 36


 1276              	.LVL167:
 322:Core/Src/bmp.c **** 							if(alphamode!=1) //需要读取底色
 1277              		.loc 1 322 8 is_stmt 1 view .LVU455
 322:Core/Src/bmp.c **** 							if(alphamode!=1) //需要读取底色
 1278              		.loc 1 322 25 is_stmt 0 view .LVU456
 1279 0256 1A1D     		adds	r2, r3, #4
 1280 0258 0192     		str	r2, [sp, #4]
 1281              	.LVL168:
 322:Core/Src/bmp.c **** 							if(alphamode!=1) //需要读取底色
 1282              		.loc 1 322 17 view .LVU457
 1283 025a 93F803B0 		ldrb	fp, [r3, #3]	@ zero_extendqisi2
 1284              	.LVL169:
 323:Core/Src/bmp.c **** 							{
 1285              		.loc 1 323 8 is_stmt 1 view .LVU458
 323:Core/Src/bmp.c **** 							{
 1286              		.loc 1 323 10 is_stmt 0 view .LVU459
 1287 025e B9F1010F 		cmp	r9, #1
 1288 0262 11D0     		beq	.L62
 325:Core/Src/bmp.c **** 							    if(alphamode==2)//需要附加的alphablend
 1289              		.loc 1 325 9 is_stmt 1 view .LVU460
 325:Core/Src/bmp.c **** 							    if(alphamode==2)//需要附加的alphablend
 1290              		.loc 1 325 26 is_stmt 0 view .LVU461
 1291 0264 154B     		ldr	r3, .L86+4
 1292 0266 1B68     		ldr	r3, [r3]
 325:Core/Src/bmp.c **** 							    if(alphamode==2)//需要附加的alphablend
 1293              		.loc 1 325 19 view .LVU462
 1294 0268 E919     		adds	r1, r5, r7
 1295 026a 06EB0A00 		add	r0, r6, r10
 1296 026e 89B2     		uxth	r1, r1
 1297 0270 80B2     		uxth	r0, r0
 1298 0272 9847     		blx	r3
 1299              	.LVL170:
 326:Core/Src/bmp.c **** 								{
 1300              		.loc 1 326 12 is_stmt 1 view .LVU463
 326:Core/Src/bmp.c **** 								{
 1301              		.loc 1 326 14 is_stmt 0 view .LVU464
 1302 0274 B9F1020F 		cmp	r9, #2
 1303 0278 C7D1     		bne	.L63
 328:Core/Src/bmp.c **** 								}
 1304              		.loc 1 328 10 is_stmt 1 view .LVU465
 328:Core/Src/bmp.c **** 								}
 1305              		.loc 1 328 20 is_stmt 0 view .LVU466
 1306 027a 099B     		ldr	r3, [sp, #36]
 1307 027c 03F01F02 		and	r2, r3, #31
 1308 0280 0699     		ldr	r1, [sp, #24]
 1309 0282 FFF7FEFF 		bl	piclib_alpha_blend
 1310              	.LVL171:
 328:Core/Src/bmp.c **** 								}
 1311              		.loc 1 328 20 view .LVU467
 1312 0286 C0E7     		b	.L63
 1313              	.LVL172:
 1314              	.L62:
 331:Core/Src/bmp.c ****  							pic_phy.draw_point(x+tx,y+ty,color);//显示图片				   
 1315              		.loc 1 331 14 is_stmt 1 view .LVU468
 331:Core/Src/bmp.c ****  							pic_phy.draw_point(x+tx,y+ty,color);//显示图片				   
 1316              		.loc 1 331 24 is_stmt 0 view .LVU469
 1317 0288 4FEADB02 		lsr	r2, fp, #3
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 37


 1318              	.LVL173:
 331:Core/Src/bmp.c ****  							pic_phy.draw_point(x+tx,y+ty,color);//显示图片				   
 1319              		.loc 1 331 24 view .LVU470
 1320 028c 2146     		mov	r1, r4
 1321 028e 0698     		ldr	r0, [sp, #24]
 1322 0290 FFF7FEFF 		bl	piclib_alpha_blend
 1323              	.LVL174:
 1324 0294 BFE7     		b	.L64
 1325              	.LVL175:
 1326              	.L82:
 335:Core/Src/bmp.c **** 						tx=0;
 1327              		.loc 1 335 7 is_stmt 1 discriminator 2 view .LVU471
 335:Core/Src/bmp.c **** 						tx=0;
 1328              		.loc 1 335 13 is_stmt 0 discriminator 2 view .LVU472
 1329 0296 089A     		ldr	r2, [sp, #32]
 1330 0298 1344     		add	r3, r3, r2
 1331              	.LVL176:
 336:Core/Src/bmp.c **** 						ty--;
 1332              		.loc 1 336 7 is_stmt 1 discriminator 2 view .LVU473
 337:Core/Src/bmp.c **** 					}
 1333              		.loc 1 337 7 discriminator 2 view .LVU474
 337:Core/Src/bmp.c **** 					}
 1334              		.loc 1 337 9 is_stmt 0 discriminator 2 view .LVU475
 1335 029a 013D     		subs	r5, r5, #1
 1336              	.LVL177:
 337:Core/Src/bmp.c **** 					}
 1337              		.loc 1 337 9 discriminator 2 view .LVU476
 1338 029c ADB2     		uxth	r5, r5
 1339              	.LVL178:
 315:Core/Src/bmp.c **** 					{
 1340              		.loc 1 315 23 is_stmt 1 discriminator 2 view .LVU477
 315:Core/Src/bmp.c **** 					{
 1341              		.loc 1 315 24 is_stmt 0 discriminator 2 view .LVU478
 1342 029e 0B9A     		ldr	r2, [sp, #44]
 1343 02a0 0132     		adds	r2, r2, #1
 1344 02a2 92B2     		uxth	r2, r2
 1345 02a4 0B92     		str	r2, [sp, #44]
 1346              	.LVL179:
 1347              	.L61:
 315:Core/Src/bmp.c **** 					{
 1348              		.loc 1 315 14 is_stmt 1 discriminator 1 view .LVU479
 315:Core/Src/bmp.c **** 					{
 1349              		.loc 1 315 6 is_stmt 0 discriminator 1 view .LVU480
 1350 02a6 0B9A     		ldr	r2, [sp, #44]
 1351 02a8 0799     		ldr	r1, [sp, #28]
 1352 02aa 8A42     		cmp	r2, r1
 1353 02ac 08D2     		bcs	.L83
 317:Core/Src/bmp.c **** 						{
 1354              		.loc 1 317 12 view .LVU481
 1355 02ae 4FF00008 		mov	r8, #0
 1356 02b2 4646     		mov	r6, r8
 1357 02b4 BFE7     		b	.L66
 1358              	.L87:
 1359 02b6 00BF     		.align	2
 1360              	.L86:
 1361 02b8 00000000 		.word	picinfo
 1362 02bc 00000000 		.word	pic_phy
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 38


 1363              	.L83:
 1364 02c0 DDF80CB0 		ldr	fp, [sp, #12]
 1365              	.LVL180:
 1366              	.L52:
 341:Core/Src/bmp.c **** 			}	 
 1367              		.loc 1 341 5 is_stmt 1 view .LVU482
 341:Core/Src/bmp.c **** 			}	 
 1368              		.loc 1 341 10 is_stmt 0 view .LVU483
 1369 02c4 BDF84630 		ldrh	r3, [sp, #70]
 341:Core/Src/bmp.c **** 			}	 
 1370              		.loc 1 341 7 view .LVU484
 1371 02c8 0D9A     		ldr	r2, [sp, #52]
 1372 02ca 9342     		cmp	r3, r2
 1373 02cc 7FF406AF 		bne	.L46
 341:Core/Src/bmp.c **** 			}	 
 1374              		.loc 1 341 19 discriminator 1 view .LVU485
 1375 02d0 029B     		ldr	r3, [sp, #8]
 1376 02d2 002B     		cmp	r3, #0
 1377 02d4 7FF402AF 		bne	.L46
 1378              	.LVL181:
 1379              	.L67:
 264:Core/Src/bmp.c **** 			{	     
 1380              		.loc 1 264 4 is_stmt 1 view .LVU486
 266:Core/Src/bmp.c **** 				bmpbuf=databuf;									//数据首地址  
 1381              		.loc 1 266 5 view .LVU487
 266:Core/Src/bmp.c **** 				bmpbuf=databuf;									//数据首地址  
 1382              		.loc 1 266 9 is_stmt 0 view .LVU488
 1383 02d8 0DF14603 		add	r3, sp, #70
 1384 02dc 0D9C     		ldr	r4, [sp, #52]
 1385 02de 2246     		mov	r2, r4
 1386 02e0 0599     		ldr	r1, [sp, #20]
 1387 02e2 0498     		ldr	r0, [sp, #16]
 1388 02e4 FFF7FEFF 		bl	f_read
 1389              	.LVL182:
 1390 02e8 0290     		str	r0, [sp, #8]
 1391              	.LVL183:
 267:Core/Src/bmp.c **** 				if(br!=readlen)rowcnt=br/rowlen;				//最后剩下的行数
 1392              		.loc 1 267 5 is_stmt 1 view .LVU489
 268:Core/Src/bmp.c **** 				if(color_byte==3)  			//24位BMP图片
 1393              		.loc 1 268 5 view .LVU490
 268:Core/Src/bmp.c **** 				if(color_byte==3)  			//24位BMP图片
 1394              		.loc 1 268 10 is_stmt 0 view .LVU491
 1395 02ea BDF84630 		ldrh	r3, [sp, #70]
 268:Core/Src/bmp.c **** 				if(color_byte==3)  			//24位BMP图片
 1396              		.loc 1 268 7 view .LVU492
 1397 02ee A342     		cmp	r3, r4
 1398 02f0 03D0     		beq	.L47
 268:Core/Src/bmp.c **** 				if(color_byte==3)  			//24位BMP图片
 1399              		.loc 1 268 20 is_stmt 1 discriminator 1 view .LVU493
 268:Core/Src/bmp.c **** 				if(color_byte==3)  			//24位BMP图片
 1400              		.loc 1 268 26 is_stmt 0 discriminator 1 view .LVU494
 1401 02f2 0E9A     		ldr	r2, [sp, #56]
 1402 02f4 B3FBF2F3 		udiv	r3, r3, r2
 1403 02f8 0793     		str	r3, [sp, #28]
 1404              	.LVL184:
 1405              	.L47:
 269:Core/Src/bmp.c **** 				{
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 39


 1406              		.loc 1 269 5 is_stmt 1 view .LVU495
 269:Core/Src/bmp.c **** 				{
 1407              		.loc 1 269 7 is_stmt 0 view .LVU496
 1408 02fa 0A9B     		ldr	r3, [sp, #40]
 1409 02fc 032B     		cmp	r3, #3
 1410 02fe 3FF436AF 		beq	.L84
 285:Core/Src/bmp.c **** 				{
 1411              		.loc 1 285 11 is_stmt 1 view .LVU497
 285:Core/Src/bmp.c **** 				{
 1412              		.loc 1 285 13 is_stmt 0 view .LVU498
 1413 0302 0A9B     		ldr	r3, [sp, #40]
 1414 0304 022B     		cmp	r3, #2
 1415 0306 3FF47CAF 		beq	.L85
 313:Core/Src/bmp.c **** 				{
 1416              		.loc 1 313 11 is_stmt 1 view .LVU499
 313:Core/Src/bmp.c **** 				{
 1417              		.loc 1 313 13 is_stmt 0 view .LVU500
 1418 030a 0A9B     		ldr	r3, [sp, #40]
 1419 030c 042B     		cmp	r3, #4
 1420 030e D9D1     		bne	.L52
 267:Core/Src/bmp.c **** 				if(br!=readlen)rowcnt=br/rowlen;				//最后剩下的行数
 1421              		.loc 1 267 11 view .LVU501
 1422 0310 059B     		ldr	r3, [sp, #20]
 315:Core/Src/bmp.c **** 					{
 1423              		.loc 1 315 11 view .LVU502
 1424 0312 0022     		movs	r2, #0
 1425 0314 0B92     		str	r2, [sp, #44]
 1426 0316 DDF83090 		ldr	r9, [sp, #48]
 1427 031a CDF80CB0 		str	fp, [sp, #12]
 1428 031e C2E7     		b	.L61
 1429              	.LVL185:
 1430              	.L68:
 230:Core/Src/bmp.c **** 	f_bmp=(FIL *)pic_memalloc(sizeof(FIL));	//开辟FIL字节的内存区域 
 1431              		.loc 1 230 26 view .LVU503
 1432 0320 1123     		movs	r3, #17
 1433 0322 0293     		str	r3, [sp, #8]
 1434 0324 9CE6     		b	.L41
 1435              		.cfi_endproc
 1436              	.LFE131:
 1438 0326 00BF     		.section	.text.bmp_encode,"ax",%progbits
 1439              		.align	1
 1440              		.global	bmp_encode
 1441              		.syntax unified
 1442              		.thumb
 1443              		.thumb_func
 1444              		.fpu fpv4-sp-d16
 1446              	bmp_encode:
 1447              	.LVL186:
 1448              	.LFB132:
 352:Core/Src/bmp.c **** //BMP编码函数
 353:Core/Src/bmp.c **** //将当前LCD屏幕的指定区域截图,存为16位格式的BMP文件 RGB565格式.
 354:Core/Src/bmp.c **** //保存为rgb565则需要掩码,需要利用原来的调色板位置增加掩码.这里我们已经增加了掩码.
 355:Core/Src/bmp.c **** //保存为rgb555格式则需要颜色转换,耗时间比较久,所以保存为565是最快速的办法.
 356:Core/Src/bmp.c **** //filename:存放路径
 357:Core/Src/bmp.c **** //x,y:在屏幕上的起始坐标  
 358:Core/Src/bmp.c **** //mode:模式.0,仅仅创建新文件的方式编码;1,如果之前存在文件,则覆盖之前的文件.如果没有,则创建新的文件.
 359:Core/Src/bmp.c **** //返回值:0,成功;其他,错误码.  
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 40


 360:Core/Src/bmp.c **** u8 bmp_encode(u8 *filename,u16 x,u16 y,u16 width,u16 height,u8 mode)
 361:Core/Src/bmp.c **** {				
 1449              		.loc 1 361 1 is_stmt 1 view -0
 1450              		.cfi_startproc
 1451              		@ args = 8, pretend = 0, frame = 72
 1452              		@ frame_needed = 0, uses_anonymous_args = 0
 1453              		.loc 1 361 1 is_stmt 0 view .LVU505
 1454 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1455              	.LCFI8:
 1456              		.cfi_def_cfa_offset 36
 1457              		.cfi_offset 4, -36
 1458              		.cfi_offset 5, -32
 1459              		.cfi_offset 6, -28
 1460              		.cfi_offset 7, -24
 1461              		.cfi_offset 8, -20
 1462              		.cfi_offset 9, -16
 1463              		.cfi_offset 10, -12
 1464              		.cfi_offset 11, -8
 1465              		.cfi_offset 14, -4
 1466 0004 93B0     		sub	sp, sp, #76
 1467              	.LCFI9:
 1468              		.cfi_def_cfa_offset 112
 1469 0006 BDF870A0 		ldrh	r10, [sp, #112]
 1470 000a 9DF874B0 		ldrb	fp, [sp, #116]	@ zero_extendqisi2
 362:Core/Src/bmp.c **** 	FIL* f_bmp;
 1471              		.loc 1 362 2 is_stmt 1 view .LVU506
 363:Core/Src/bmp.c **** 	u16 bmpheadsize;			//bmp头大小	   	
 1472              		.loc 1 363 2 view .LVU507
 364:Core/Src/bmp.c ****  	BITMAPINFO hbmp;			//bmp头	 
 1473              		.loc 1 364 3 view .LVU508
 365:Core/Src/bmp.c **** 	u8 res=0;
 1474              		.loc 1 365 2 view .LVU509
 1475              	.LVL187:
 366:Core/Src/bmp.c **** 	u16 tx,ty;				   	//图像尺寸
 1476              		.loc 1 366 2 view .LVU510
 367:Core/Src/bmp.c **** 	u16 *databuf;				//数据缓存区地址	   	
 1477              		.loc 1 367 2 view .LVU511
 368:Core/Src/bmp.c **** 	u16 pixcnt;				   	//像素计数器
 1478              		.loc 1 368 2 view .LVU512
 369:Core/Src/bmp.c **** 	u16 bi4width;		       	//水平像素字节数	   
 1479              		.loc 1 369 2 view .LVU513
 370:Core/Src/bmp.c **** 	if(width==0||height==0)return PIC_WINDOW_ERR;	//区域错误
 1480              		.loc 1 370 2 view .LVU514
 1481              		.loc 1 370 4 is_stmt 0 view .LVU515
 1482 000e 002B     		cmp	r3, #0
 1483 0010 00F0BB80 		beq	.L103
 1484 0014 0546     		mov	r5, r0
 1485 0016 8846     		mov	r8, r1
 1486 0018 1646     		mov	r6, r2
 1487 001a 1C46     		mov	r4, r3
 1488              		.loc 1 370 13 discriminator 2 view .LVU516
 1489 001c BAF1000F 		cmp	r10, #0
 1490 0020 00F0B580 		beq	.L104
 371:Core/Src/bmp.c **** 	if((x+width-1)>lcddev.width)return PIC_WINDOW_ERR;		//区域错误
 1491              		.loc 1 371 2 is_stmt 1 view .LVU517
 1492              		.loc 1 371 7 is_stmt 0 view .LVU518
 1493 0024 CB18     		adds	r3, r1, r3
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 41


 1494              	.LVL188:
 1495              		.loc 1 371 13 view .LVU519
 1496 0026 013B     		subs	r3, r3, #1
 1497              		.loc 1 371 23 view .LVU520
 1498 0028 5D4A     		ldr	r2, .L117
 1499              	.LVL189:
 1500              		.loc 1 371 23 view .LVU521
 1501 002a 9288     		ldrh	r2, [r2, #4]
 1502              		.loc 1 371 4 view .LVU522
 1503 002c 9342     		cmp	r3, r2
 1504 002e 00F3B080 		bgt	.L105
 372:Core/Src/bmp.c **** 	if((y+height-1)>lcddev.height)return PIC_WINDOW_ERR;	//区域错误 
 1505              		.loc 1 372 2 is_stmt 1 view .LVU523
 1506              		.loc 1 372 7 is_stmt 0 view .LVU524
 1507 0032 06EB0A03 		add	r3, r6, r10
 1508              		.loc 1 372 14 view .LVU525
 1509 0036 013B     		subs	r3, r3, #1
 1510              		.loc 1 372 24 view .LVU526
 1511 0038 594A     		ldr	r2, .L117
 1512 003a D288     		ldrh	r2, [r2, #6]
 1513              		.loc 1 372 4 view .LVU527
 1514 003c 9342     		cmp	r3, r2
 1515 003e 00F3AA80 		bgt	.L106
 373:Core/Src/bmp.c ****  	 
 374:Core/Src/bmp.c **** #if BMP_USE_MALLOC == 1	//使用malloc	
 375:Core/Src/bmp.c **** 	databuf=(u16*)pic_memalloc(1024);		//开辟至少bi4width大小的字节的内存区域 ,对240宽的屏,480个字节就
 1516              		.loc 1 375 2 is_stmt 1 view .LVU528
 1517              		.loc 1 375 16 is_stmt 0 view .LVU529
 1518 0042 4FF48060 		mov	r0, #1024
 1519              	.LVL190:
 1520              		.loc 1 375 16 view .LVU530
 1521 0046 FFF7FEFF 		bl	pic_memalloc
 1522              	.LVL191:
 376:Core/Src/bmp.c **** 	if(databuf==NULL)return PIC_MEM_ERR;		//内存申请失败.
 1523              		.loc 1 376 2 is_stmt 1 view .LVU531
 1524              		.loc 1 376 4 is_stmt 0 view .LVU532
 1525 004a 0746     		mov	r7, r0
 1526 004c 0028     		cmp	r0, #0
 1527 004e 00F0A480 		beq	.L107
 377:Core/Src/bmp.c **** 	f_bmp=(FIL *)pic_memalloc(sizeof(FIL));	//开辟FIL字节的内存区域 
 1528              		.loc 1 377 2 is_stmt 1 view .LVU533
 1529              		.loc 1 377 15 is_stmt 0 view .LVU534
 1530 0052 4FF40A70 		mov	r0, #552
 1531              	.LVL192:
 1532              		.loc 1 377 15 view .LVU535
 1533 0056 FFF7FEFF 		bl	pic_memalloc
 1534              	.LVL193:
 378:Core/Src/bmp.c **** 	if(f_bmp==NULL)								//内存申请失败.
 1535              		.loc 1 378 2 is_stmt 1 view .LVU536
 1536              		.loc 1 378 4 is_stmt 0 view .LVU537
 1537 005a 8146     		mov	r9, r0
 1538 005c 0028     		cmp	r0, #0
 1539 005e 4BD0     		beq	.L111
 379:Core/Src/bmp.c **** 	{		 
 380:Core/Src/bmp.c **** 		pic_memfree(databuf);
 381:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 382:Core/Src/bmp.c **** 	} 	 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 42


 383:Core/Src/bmp.c **** #else
 384:Core/Src/bmp.c **** 	databuf=(u16*)bmpreadbuf;
 385:Core/Src/bmp.c **** 	f_bmp=&f_bfile;
 386:Core/Src/bmp.c **** #endif	      
 387:Core/Src/bmp.c **** 	bmpheadsize=sizeof(hbmp);//得到bmp文件头的大小   
 1540              		.loc 1 387 2 is_stmt 1 view .LVU538
 1541              	.LVL194:
 388:Core/Src/bmp.c **** 	mymemset((u8*)&hbmp,0,sizeof(hbmp));//置零空申请到的内存.	    
 1542              		.loc 1 388 2 view .LVU539
 1543 0060 4422     		movs	r2, #68
 1544 0062 0021     		movs	r1, #0
 1545 0064 01A8     		add	r0, sp, #4
 1546              	.LVL195:
 1547              		.loc 1 388 2 is_stmt 0 view .LVU540
 1548 0066 FFF7FEFF 		bl	mymemset
 1549              	.LVL196:
 389:Core/Src/bmp.c **** 	hbmp.bmiHeader.biSize=sizeof(BITMAPINFOHEADER);//信息头大小
 1550              		.loc 1 389 2 is_stmt 1 view .LVU541
 1551              		.loc 1 389 23 is_stmt 0 view .LVU542
 1552 006a 2823     		movs	r3, #40
 1553 006c 0593     		str	r3, [sp, #20]
 390:Core/Src/bmp.c **** 	hbmp.bmiHeader.biWidth=width;	 	//bmp的宽度
 1554              		.loc 1 390 2 is_stmt 1 view .LVU543
 1555              		.loc 1 390 24 is_stmt 0 view .LVU544
 1556 006e 0694     		str	r4, [sp, #24]
 391:Core/Src/bmp.c **** 	hbmp.bmiHeader.biHeight=height; 	//bmp的高度
 1557              		.loc 1 391 2 is_stmt 1 view .LVU545
 1558              		.loc 1 391 25 is_stmt 0 view .LVU546
 1559 0070 CDF81CA0 		str	r10, [sp, #28]
 392:Core/Src/bmp.c **** 	hbmp.bmiHeader.biPlanes=1;	 		//恒为1
 1560              		.loc 1 392 2 is_stmt 1 view .LVU547
 1561              		.loc 1 392 25 is_stmt 0 view .LVU548
 1562 0074 0123     		movs	r3, #1
 1563 0076 ADF82030 		strh	r3, [sp, #32]	@ movhi
 393:Core/Src/bmp.c **** 	hbmp.bmiHeader.biBitCount=16;	 	//bmp为16位色bmp
 1564              		.loc 1 393 2 is_stmt 1 view .LVU549
 1565              		.loc 1 393 27 is_stmt 0 view .LVU550
 1566 007a 1023     		movs	r3, #16
 1567 007c ADF82230 		strh	r3, [sp, #34]	@ movhi
 394:Core/Src/bmp.c **** 	hbmp.bmiHeader.biCompression=BI_BITFIELDS;//每个象素的比特由指定的掩码决定。
 1568              		.loc 1 394 2 is_stmt 1 view .LVU551
 1569              		.loc 1 394 30 is_stmt 0 view .LVU552
 1570 0080 0323     		movs	r3, #3
 1571 0082 0993     		str	r3, [sp, #36]
 395:Core/Src/bmp.c ****  	hbmp.bmiHeader.biSizeImage=hbmp.bmiHeader.biHeight*hbmp.bmiHeader.biWidth*hbmp.bmiHeader.biBitCou
 1572              		.loc 1 395 3 is_stmt 1 view .LVU553
 1573              		.loc 1 395 53 is_stmt 0 view .LVU554
 1574 0084 0AFB04F4 		mul	r4, r10, r4
 1575              		.loc 1 395 102 view .LVU555
 1576 0088 2401     		lsls	r4, r4, #4
 1577 008a 3AD4     		bmi	.L112
 1578              	.L91:
 1579 008c E310     		asrs	r3, r4, #3
 1580              		.loc 1 395 29 view .LVU556
 1581 008e 0A93     		str	r3, [sp, #40]
 396:Core/Src/bmp.c ****  				   
 397:Core/Src/bmp.c **** 	hbmp.bmfHeader.bfType=((u16)'M'<<8)+'B';//BM格式标志
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 43


 1582              		.loc 1 397 2 is_stmt 1 view .LVU557
 1583              		.loc 1 397 23 is_stmt 0 view .LVU558
 1584 0090 44F64252 		movw	r2, #19778
 1585 0094 ADF80420 		strh	r2, [sp, #4]	@ movhi
 398:Core/Src/bmp.c **** 	hbmp.bmfHeader.bfSize=bmpheadsize+hbmp.bmiHeader.biSizeImage;//整个bmp的大小
 1586              		.loc 1 398 2 is_stmt 1 view .LVU559
 1587              		.loc 1 398 35 is_stmt 0 view .LVU560
 1588 0098 4433     		adds	r3, r3, #68
 1589              		.loc 1 398 23 view .LVU561
 1590 009a 0293     		str	r3, [sp, #8]
 399:Core/Src/bmp.c ****    	hbmp.bmfHeader.bfOffBits=bmpheadsize;//到数据区的偏移
 1591              		.loc 1 399 5 is_stmt 1 view .LVU562
 1592              		.loc 1 399 29 is_stmt 0 view .LVU563
 1593 009c 4423     		movs	r3, #68
 1594 009e 0493     		str	r3, [sp, #16]
 400:Core/Src/bmp.c **** 
 401:Core/Src/bmp.c **** 	hbmp.RGB_MASK[0]=0X00F800;	 		//红色掩码
 1595              		.loc 1 401 2 is_stmt 1 view .LVU564
 1596              		.loc 1 401 18 is_stmt 0 view .LVU565
 1597 00a0 4FF47843 		mov	r3, #63488
 1598 00a4 0F93     		str	r3, [sp, #60]
 402:Core/Src/bmp.c **** 	hbmp.RGB_MASK[1]=0X0007E0;	 		//绿色掩码
 1599              		.loc 1 402 2 is_stmt 1 view .LVU566
 1600              		.loc 1 402 18 is_stmt 0 view .LVU567
 1601 00a6 4FF4FC63 		mov	r3, #2016
 1602 00aa 1093     		str	r3, [sp, #64]
 403:Core/Src/bmp.c **** 	hbmp.RGB_MASK[2]=0X00001F;	 		//蓝色掩码
 1603              		.loc 1 403 2 is_stmt 1 view .LVU568
 1604              		.loc 1 403 18 is_stmt 0 view .LVU569
 1605 00ac 1F23     		movs	r3, #31
 1606 00ae 1193     		str	r3, [sp, #68]
 404:Core/Src/bmp.c **** 
 405:Core/Src/bmp.c **** 	if(mode==1)res=f_open(f_bmp,(const TCHAR*)filename,FA_READ|FA_WRITE);//尝试打开之前的文件
 1607              		.loc 1 405 2 is_stmt 1 view .LVU570
 1608              		.loc 1 405 4 is_stmt 0 view .LVU571
 1609 00b0 BBF1010F 		cmp	fp, #1
 1610 00b4 27D0     		beq	.L113
 365:Core/Src/bmp.c **** 	u16 tx,ty;				   	//图像尺寸
 1611              		.loc 1 365 5 view .LVU572
 1612 00b6 0024     		movs	r4, #0
 1613              	.LVL197:
 1614              	.L92:
 406:Core/Src/bmp.c ****  	if(mode==0||res==0x04)res=f_open(f_bmp,(const TCHAR*)filename,FA_WRITE|FA_CREATE_NEW);//模式0,或
 1615              		.loc 1 406 3 is_stmt 1 view .LVU573
 1616              		.loc 1 406 5 is_stmt 0 view .LVU574
 1617 00b8 BBF1000F 		cmp	fp, #0
 1618 00bc 01D0     		beq	.L93
 1619              		.loc 1 406 13 discriminator 2 view .LVU575
 1620 00be 042C     		cmp	r4, #4
 1621 00c0 05D1     		bne	.L94
 1622              	.L93:
 1623              		.loc 1 406 25 is_stmt 1 discriminator 3 view .LVU576
 1624              		.loc 1 406 29 is_stmt 0 discriminator 3 view .LVU577
 1625 00c2 0622     		movs	r2, #6
 1626 00c4 2946     		mov	r1, r5
 1627 00c6 4846     		mov	r0, r9
 1628 00c8 FFF7FEFF 		bl	f_open
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 44


 1629              	.LVL198:
 1630 00cc 0446     		mov	r4, r0
 1631              	.LVL199:
 1632              	.L94:
 407:Core/Src/bmp.c ****  	if((hbmp.bmiHeader.biWidth*2)%4)//水平像素(字节)不为4的倍数
 1633              		.loc 1 407 3 is_stmt 1 view .LVU578
 1634              		.loc 1 407 21 is_stmt 0 view .LVU579
 1635 00ce 069D     		ldr	r5, [sp, #24]
 1636              	.LVL200:
 1637              		.loc 1 407 5 view .LVU580
 1638 00d0 15F0010F 		tst	r5, #1
 1639 00d4 1ED0     		beq	.L95
 408:Core/Src/bmp.c **** 	{
 409:Core/Src/bmp.c **** 		bi4width=((hbmp.bmiHeader.biWidth*2)/4+1)*4;//实际要写入的宽度像素,必须为4的倍数.	
 1640              		.loc 1 409 3 is_stmt 1 view .LVU581
 1641              		.loc 1 409 39 is_stmt 0 view .LVU582
 1642 00d6 05EBD575 		add	r5, r5, r5, lsr #31
 1643 00da 6D10     		asrs	r5, r5, #1
 1644              		.loc 1 409 41 view .LVU583
 1645 00dc 0135     		adds	r5, r5, #1
 1646              		.loc 1 409 11 view .LVU584
 1647 00de AD00     		lsls	r5, r5, #2
 1648 00e0 ADB2     		uxth	r5, r5
 1649              	.LVL201:
 1650              	.L96:
 410:Core/Src/bmp.c **** 	}else bi4width=hbmp.bmiHeader.biWidth*2;		//刚好为4的倍数	 
 411:Core/Src/bmp.c ****  	if(res==FR_OK)//创建成功
 1651              		.loc 1 411 3 is_stmt 1 view .LVU585
 1652              		.loc 1 411 5 is_stmt 0 view .LVU586
 1653 00e2 D4B1     		cbz	r4, .L114
 1654              	.L97:
 412:Core/Src/bmp.c **** 	{
 413:Core/Src/bmp.c **** 		res=f_write(f_bmp,(u8*)&hbmp,bmpheadsize,&bw);//写入BMP首部  
 414:Core/Src/bmp.c **** 		for(ty=y+height-1;hbmp.bmiHeader.biHeight;ty--)
 415:Core/Src/bmp.c **** 		{
 416:Core/Src/bmp.c **** 			pixcnt=0;
 417:Core/Src/bmp.c ****  			for(tx=x;pixcnt!=(bi4width/2);)
 418:Core/Src/bmp.c **** 			{
 419:Core/Src/bmp.c **** 				if(pixcnt<hbmp.bmiHeader.biWidth)databuf[pixcnt]=LCD_ReadPoint(tx,ty);//读取坐标点的值 
 420:Core/Src/bmp.c **** 				else databuf[pixcnt]=0Xffff;//补充白色的像素.  
 421:Core/Src/bmp.c **** 				pixcnt++;
 422:Core/Src/bmp.c **** 				tx++;
 423:Core/Src/bmp.c **** 			}
 424:Core/Src/bmp.c **** 			hbmp.bmiHeader.biHeight--;
 425:Core/Src/bmp.c **** 			res=f_write(f_bmp,(u8*)databuf,bi4width,&bw);//写入数据
 426:Core/Src/bmp.c **** 		}
 427:Core/Src/bmp.c **** 		f_close(f_bmp);
 428:Core/Src/bmp.c **** 	}	    
 429:Core/Src/bmp.c **** #if BMP_USE_MALLOC == 1	//使用malloc	
 430:Core/Src/bmp.c **** 	pic_memfree(databuf);	 
 1655              		.loc 1 430 2 is_stmt 1 view .LVU587
 1656 00e4 3846     		mov	r0, r7
 1657 00e6 FFF7FEFF 		bl	pic_memfree
 1658              	.LVL202:
 431:Core/Src/bmp.c **** 	pic_memfree(f_bmp);		 
 1659              		.loc 1 431 2 view .LVU588
 1660 00ea 4846     		mov	r0, r9
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 45


 1661 00ec FFF7FEFF 		bl	pic_memfree
 1662              	.LVL203:
 432:Core/Src/bmp.c **** #endif	
 433:Core/Src/bmp.c **** 	return res;
 1663              		.loc 1 433 2 view .LVU589
 1664              	.L89:
 434:Core/Src/bmp.c **** }
 1665              		.loc 1 434 1 is_stmt 0 view .LVU590
 1666 00f0 2046     		mov	r0, r4
 1667 00f2 13B0     		add	sp, sp, #76
 1668              	.LCFI10:
 1669              		.cfi_remember_state
 1670              		.cfi_def_cfa_offset 36
 1671              		@ sp needed
 1672 00f4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1673              	.LVL204:
 1674              	.L111:
 1675              	.LCFI11:
 1676              		.cfi_restore_state
 380:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 1677              		.loc 1 380 3 is_stmt 1 view .LVU591
 1678 00f8 3846     		mov	r0, r7
 1679              	.LVL205:
 380:Core/Src/bmp.c **** 		return PIC_MEM_ERR;				
 1680              		.loc 1 380 3 is_stmt 0 view .LVU592
 1681 00fa FFF7FEFF 		bl	pic_memfree
 1682              	.LVL206:
 381:Core/Src/bmp.c **** 	} 	 
 1683              		.loc 1 381 3 is_stmt 1 view .LVU593
 381:Core/Src/bmp.c **** 	} 	 
 1684              		.loc 1 381 10 is_stmt 0 view .LVU594
 1685 00fe 1124     		movs	r4, #17
 1686 0100 F6E7     		b	.L89
 1687              	.LVL207:
 1688              	.L112:
 395:Core/Src/bmp.c ****  				   
 1689              		.loc 1 395 102 view .LVU595
 1690 0102 0734     		adds	r4, r4, #7
 1691 0104 C2E7     		b	.L91
 1692              	.L113:
 405:Core/Src/bmp.c ****  	if(mode==0||res==0x04)res=f_open(f_bmp,(const TCHAR*)filename,FA_WRITE|FA_CREATE_NEW);//模式0,或
 1693              		.loc 1 405 13 is_stmt 1 discriminator 1 view .LVU596
 405:Core/Src/bmp.c ****  	if(mode==0||res==0x04)res=f_open(f_bmp,(const TCHAR*)filename,FA_WRITE|FA_CREATE_NEW);//模式0,或
 1694              		.loc 1 405 17 is_stmt 0 discriminator 1 view .LVU597
 1695 0106 0322     		movs	r2, #3
 1696 0108 2946     		mov	r1, r5
 1697 010a 4846     		mov	r0, r9
 1698 010c FFF7FEFF 		bl	f_open
 1699              	.LVL208:
 1700 0110 0446     		mov	r4, r0
 1701              	.LVL209:
 405:Core/Src/bmp.c ****  	if(mode==0||res==0x04)res=f_open(f_bmp,(const TCHAR*)filename,FA_WRITE|FA_CREATE_NEW);//模式0,或
 1702              		.loc 1 405 17 discriminator 1 view .LVU598
 1703 0112 D1E7     		b	.L92
 1704              	.LVL210:
 1705              	.L95:
 410:Core/Src/bmp.c ****  	if(res==FR_OK)//创建成功
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 46


 1706              		.loc 1 410 8 is_stmt 1 view .LVU599
 410:Core/Src/bmp.c ****  	if(res==FR_OK)//创建成功
 1707              		.loc 1 410 16 is_stmt 0 view .LVU600
 1708 0114 6D00     		lsls	r5, r5, #1
 1709 0116 ADB2     		uxth	r5, r5
 1710              	.LVL211:
 410:Core/Src/bmp.c ****  	if(res==FR_OK)//创建成功
 1711              		.loc 1 410 16 view .LVU601
 1712 0118 E3E7     		b	.L96
 1713              	.L114:
 413:Core/Src/bmp.c **** 		for(ty=y+height-1;hbmp.bmiHeader.biHeight;ty--)
 1714              		.loc 1 413 3 is_stmt 1 view .LVU602
 413:Core/Src/bmp.c **** 		for(ty=y+height-1;hbmp.bmiHeader.biHeight;ty--)
 1715              		.loc 1 413 7 is_stmt 0 view .LVU603
 1716 011a 224B     		ldr	r3, .L117+4
 1717 011c 4422     		movs	r2, #68
 1718 011e 01A9     		add	r1, sp, #4
 1719 0120 4846     		mov	r0, r9
 1720 0122 FFF7FEFF 		bl	f_write
 1721              	.LVL212:
 1722 0126 0446     		mov	r4, r0
 1723              	.LVL213:
 414:Core/Src/bmp.c **** 		{
 1724              		.loc 1 414 3 is_stmt 1 view .LVU604
 414:Core/Src/bmp.c **** 		{
 1725              		.loc 1 414 11 is_stmt 0 view .LVU605
 1726 0128 5644     		add	r6, r6, r10
 1727 012a B6B2     		uxth	r6, r6
 414:Core/Src/bmp.c **** 		{
 1728              		.loc 1 414 9 view .LVU606
 1729 012c 013E     		subs	r6, r6, #1
 1730 012e B6B2     		uxth	r6, r6
 1731              	.LVL214:
 414:Core/Src/bmp.c **** 		{
 1732              		.loc 1 414 3 view .LVU607
 1733 0130 22E0     		b	.L98
 1734              	.LVL215:
 1735              	.L99:
 420:Core/Src/bmp.c **** 				pixcnt++;
 1736              		.loc 1 420 10 is_stmt 1 view .LVU608
 420:Core/Src/bmp.c **** 				pixcnt++;
 1737              		.loc 1 420 25 is_stmt 0 view .LVU609
 1738 0132 4FF6FF73 		movw	r3, #65535
 1739 0136 27F81430 		strh	r3, [r7, r4, lsl #1]	@ movhi
 1740              	.L100:
 421:Core/Src/bmp.c **** 				tx++;
 1741              		.loc 1 421 5 is_stmt 1 view .LVU610
 421:Core/Src/bmp.c **** 				tx++;
 1742              		.loc 1 421 11 is_stmt 0 view .LVU611
 1743 013a 0134     		adds	r4, r4, #1
 1744              	.LVL216:
 421:Core/Src/bmp.c **** 				tx++;
 1745              		.loc 1 421 11 view .LVU612
 1746 013c A4B2     		uxth	r4, r4
 1747              	.LVL217:
 422:Core/Src/bmp.c **** 			}
 1748              		.loc 1 422 5 is_stmt 1 view .LVU613
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 47


 422:Core/Src/bmp.c **** 			}
 1749              		.loc 1 422 7 is_stmt 0 view .LVU614
 1750 013e 0AF10100 		add	r0, r10, #1
 1751 0142 1FFA80FA 		uxth	r10, r0
 1752              	.LVL218:
 1753              	.L102:
 417:Core/Src/bmp.c **** 			{
 1754              		.loc 1 417 14 is_stmt 1 discriminator 1 view .LVU615
 417:Core/Src/bmp.c **** 			{
 1755              		.loc 1 417 5 is_stmt 0 discriminator 1 view .LVU616
 1756 0146 B4EB550F 		cmp	r4, r5, lsr #1
 1757 014a 09D0     		beq	.L115
 419:Core/Src/bmp.c **** 				else databuf[pixcnt]=0Xffff;//补充白色的像素.  
 1758              		.loc 1 419 5 is_stmt 1 view .LVU617
 419:Core/Src/bmp.c **** 				else databuf[pixcnt]=0Xffff;//补充白色的像素.  
 1759              		.loc 1 419 29 is_stmt 0 view .LVU618
 1760 014c 069B     		ldr	r3, [sp, #24]
 419:Core/Src/bmp.c **** 				else databuf[pixcnt]=0Xffff;//补充白色的像素.  
 1761              		.loc 1 419 7 view .LVU619
 1762 014e 9C42     		cmp	r4, r3
 1763 0150 EFDA     		bge	.L99
 419:Core/Src/bmp.c **** 				else databuf[pixcnt]=0Xffff;//补充白色的像素.  
 1764              		.loc 1 419 38 is_stmt 1 discriminator 1 view .LVU620
 419:Core/Src/bmp.c **** 				else databuf[pixcnt]=0Xffff;//补充白色的像素.  
 1765              		.loc 1 419 54 is_stmt 0 discriminator 1 view .LVU621
 1766 0152 3146     		mov	r1, r6
 1767 0154 5046     		mov	r0, r10
 1768 0156 FFF7FEFF 		bl	LCD_ReadPoint
 1769              	.LVL219:
 419:Core/Src/bmp.c **** 				else databuf[pixcnt]=0Xffff;//补充白色的像素.  
 1770              		.loc 1 419 53 discriminator 1 view .LVU622
 1771 015a 27F81400 		strh	r0, [r7, r4, lsl #1]	@ movhi
 1772 015e ECE7     		b	.L100
 1773              	.L115:
 424:Core/Src/bmp.c **** 			res=f_write(f_bmp,(u8*)databuf,bi4width,&bw);//写入数据
 1774              		.loc 1 424 4 is_stmt 1 discriminator 2 view .LVU623
 424:Core/Src/bmp.c **** 			res=f_write(f_bmp,(u8*)databuf,bi4width,&bw);//写入数据
 1775              		.loc 1 424 18 is_stmt 0 discriminator 2 view .LVU624
 1776 0160 079B     		ldr	r3, [sp, #28]
 424:Core/Src/bmp.c **** 			res=f_write(f_bmp,(u8*)databuf,bi4width,&bw);//写入数据
 1777              		.loc 1 424 27 discriminator 2 view .LVU625
 1778 0162 013B     		subs	r3, r3, #1
 1779 0164 0793     		str	r3, [sp, #28]
 425:Core/Src/bmp.c **** 		}
 1780              		.loc 1 425 4 is_stmt 1 discriminator 2 view .LVU626
 425:Core/Src/bmp.c **** 		}
 1781              		.loc 1 425 8 is_stmt 0 discriminator 2 view .LVU627
 1782 0166 0F4B     		ldr	r3, .L117+4
 1783 0168 2A46     		mov	r2, r5
 1784 016a 3946     		mov	r1, r7
 1785 016c 4846     		mov	r0, r9
 1786 016e FFF7FEFF 		bl	f_write
 1787              	.LVL220:
 1788 0172 0446     		mov	r4, r0
 1789              	.LVL221:
 414:Core/Src/bmp.c **** 		{
 1790              		.loc 1 414 45 is_stmt 1 discriminator 2 view .LVU628
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 48


 414:Core/Src/bmp.c **** 		{
 1791              		.loc 1 414 47 is_stmt 0 discriminator 2 view .LVU629
 1792 0174 013E     		subs	r6, r6, #1
 1793              	.LVL222:
 414:Core/Src/bmp.c **** 		{
 1794              		.loc 1 414 47 discriminator 2 view .LVU630
 1795 0176 B6B2     		uxth	r6, r6
 1796              	.LVL223:
 1797              	.L98:
 414:Core/Src/bmp.c **** 		{
 1798              		.loc 1 414 21 is_stmt 1 discriminator 1 view .LVU631
 414:Core/Src/bmp.c **** 		{
 1799              		.loc 1 414 35 is_stmt 0 discriminator 1 view .LVU632
 1800 0178 079B     		ldr	r3, [sp, #28]
 414:Core/Src/bmp.c **** 		{
 1801              		.loc 1 414 3 discriminator 1 view .LVU633
 1802 017a 13B1     		cbz	r3, .L116
 417:Core/Src/bmp.c **** 			{
 1803              		.loc 1 417 11 view .LVU634
 1804 017c C246     		mov	r10, r8
 416:Core/Src/bmp.c ****  			for(tx=x;pixcnt!=(bi4width/2);)
 1805              		.loc 1 416 10 view .LVU635
 1806 017e 0024     		movs	r4, #0
 1807              	.LVL224:
 416:Core/Src/bmp.c ****  			for(tx=x;pixcnt!=(bi4width/2);)
 1808              		.loc 1 416 10 view .LVU636
 1809 0180 E1E7     		b	.L102
 1810              	.LVL225:
 1811              	.L116:
 427:Core/Src/bmp.c **** 	}	    
 1812              		.loc 1 427 3 is_stmt 1 view .LVU637
 1813 0182 4846     		mov	r0, r9
 1814 0184 FFF7FEFF 		bl	f_close
 1815              	.LVL226:
 1816 0188 ACE7     		b	.L97
 1817              	.LVL227:
 1818              	.L103:
 370:Core/Src/bmp.c **** 	if((x+width-1)>lcddev.width)return PIC_WINDOW_ERR;		//区域错误
 1819              		.loc 1 370 32 is_stmt 0 view .LVU638
 1820 018a 2924     		movs	r4, #41
 1821 018c B0E7     		b	.L89
 1822              	.L104:
 370:Core/Src/bmp.c **** 	if((x+width-1)>lcddev.width)return PIC_WINDOW_ERR;		//区域错误
 1823              		.loc 1 370 32 view .LVU639
 1824 018e 2924     		movs	r4, #41
 1825 0190 AEE7     		b	.L89
 1826              	.LVL228:
 1827              	.L105:
 371:Core/Src/bmp.c **** 	if((y+height-1)>lcddev.height)return PIC_WINDOW_ERR;	//区域错误 
 1828              		.loc 1 371 37 view .LVU640
 1829 0192 2924     		movs	r4, #41
 1830 0194 ACE7     		b	.L89
 1831              	.L106:
 372:Core/Src/bmp.c ****  	 
 1832              		.loc 1 372 39 view .LVU641
 1833 0196 2924     		movs	r4, #41
 1834 0198 AAE7     		b	.L89
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 49


 1835              	.LVL229:
 1836              	.L107:
 376:Core/Src/bmp.c **** 	f_bmp=(FIL *)pic_memalloc(sizeof(FIL));	//开辟FIL字节的内存区域 
 1837              		.loc 1 376 26 view .LVU642
 1838 019a 1124     		movs	r4, #17
 1839 019c A8E7     		b	.L89
 1840              	.L118:
 1841 019e 00BF     		.align	2
 1842              	.L117:
 1843 01a0 00000000 		.word	lcddev
 1844 01a4 00000000 		.word	bw
 1845              		.cfi_endproc
 1846              	.LFE132:
 1848              		.text
 1849              	.Letext0:
 1850              		.file 2 "d:\\install\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\include\\machin
 1851              		.file 3 "d:\\install\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\include\\sys\\_
 1852              		.file 4 "Core/Inc/stm32f4xx.h"
 1853              		.file 5 "Core/Inc/lcd.h"
 1854              		.file 6 "Core/Inc/integer.h"
 1855              		.file 7 "Core/Inc/ff.h"
 1856              		.file 8 "Core/Inc/bmp.h"
 1857              		.file 9 "Core/Inc/piclib.h"
 1858              		.file 10 "Core/Inc/exfuns.h"
 1859              		.file 11 "Core/Inc/malloc.h"
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s 			page 50


DEFINED SYMBOLS
                            *ABS*:00000000 bmp.c
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:18     .text.stdbmp_decode:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:26     .text.stdbmp_decode:00000000 stdbmp_decode
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:656    .text.stdbmp_decode:000002a4 $d
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:662    .text.minibmp_decode:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:669    .text.minibmp_decode:00000000 minibmp_decode
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:1361   .text.minibmp_decode:000002b8 $d
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:1364   .text.minibmp_decode:000002c0 $t
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:1439   .text.bmp_encode:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:1446   .text.bmp_encode:00000000 bmp_encode
C:\Users\ADMIN\AppData\Local\Temp\ccPZRKnC.s:1843   .text.bmp_encode:000001a0 $d

UNDEFINED SYMBOLS
pic_memalloc
f_open
pic_memfree
f_read
ai_draw_init
is_element_ok
f_close
picinfo
pic_phy
f_lseek
piclib_alpha_blend
mymemset
f_write
LCD_ReadPoint
lcddev
bw
