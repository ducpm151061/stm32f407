ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SPI1_SetSpeed,"ax",%progbits
  18              		.align	1
  19              		.global	SPI1_SetSpeed
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	SPI1_SetSpeed:
  27              	.LVL0:
  28              	.LFB131:
  29              		.file 1 "Core/Src/spi.c"
   1:Core/Src/spi.c **** //////////////////////////////////////////////////////////////////////////////////	 
   2:Core/Src/spi.c **** //±¾³ÌÐòÖ»¹©Ñ§Ï°Ê¹ÓÃ£¬Î´¾­×÷ÕßÐí¿É£¬²»µÃÓÃÓÚÆäËüÉÌÒµÓÃÍ¾
   3:Core/Src/spi.c **** //²âÊÔÓ²¼þ£ºµ¥Æ¬»úSTM32F407VGT6,STM32F407VxT6×îÐ¡ÏµÍ³¿ª·¢°å,Ö÷Æµ168MHZ£¬¾§Õñ8MHZ
   4:Core/Src/spi.c **** //QDtech-TFTÒº¾§Çý¶¯ for STM32 FSMC
   5:Core/Src/spi.c **** //Chan@ShenZhen QDtech co.,LTD
   6:Core/Src/spi.c **** //¹«Ë¾ÍøÕ¾:www.qdtft.com
   7:Core/Src/spi.c **** //wiki¼¼Êõ×ÊÁÏÍøÕ¾£ºhttp://www.lcdwiki.com
   8:Core/Src/spi.c **** //ÎÒË¾Ìá¹©¼¼ÊõÖ§³Ö£¬ÈÎºÎ¼¼ÊõÎÊÌâ»¶Ó­ËæÊ±½»Á÷Ñ§Ï°
   9:Core/Src/spi.c **** //¹Ì»°(´«Õæ) :+86 0755-21077707 
  10:Core/Src/spi.c **** //ÊÖ»ú: (ÏúÊÛ)18823372746 £¨¼¼Êõ)15989313508
  11:Core/Src/spi.c **** //ÓÊÏä:(ÏúÊÛ/¶©µ¥) sales@qdtft.com  (ÊÛºó/¼¼Êõ·þÎñ)service@qdtft.com
  12:Core/Src/spi.c **** //QQ:(ÊÛÇ°×ÉÑ¯)3002706772 (¼¼ÊõÖ§³Ö)3002778157
  13:Core/Src/spi.c **** //¼¼Êõ½»Á÷QQÈº:778679828
  14:Core/Src/spi.c **** //´´½¨ÈÕÆÚ:2020/06/29
  15:Core/Src/spi.c **** //°æ±¾£ºV1.0
  16:Core/Src/spi.c **** //°æÈ¨ËùÓÐ£¬µÁ°æ±Ø¾¿¡£
  17:Core/Src/spi.c **** //Copyright(C) ÉîÛÚÊÐÈ«¶¯µç×Ó¼¼ÊõÓÐÏÞ¹«Ë¾ 2018-2028
  18:Core/Src/spi.c **** //All rights reserved
  19:Core/Src/spi.c **** /************************************************************************************
  20:Core/Src/spi.c **** //STM32F407VxT6×îÐ¡ÏµÍ³¿ª·¢°åÄÚ²¿SD¿¨Ê¾Àý
  21:Core/Src/spi.c **** //     LED0           --->            PA1
  22:Core/Src/spi.c **** //     KEY0           --->            PE4
  23:Core/Src/spi.c **** //     KEY_UP         --->            PA0
  24:Core/Src/spi.c **** //     SD_D0          --->            PC8
  25:Core/Src/spi.c **** //     SD_D1          --->            PC9
  26:Core/Src/spi.c **** //     SD_D2          --->            PC10
  27:Core/Src/spi.c **** //     SD_D3          --->            PC11
  28:Core/Src/spi.c **** //     SD_CLK         --->            PC12
  29:Core/Src/spi.c **** //     SD_CMD         --->            PD2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 2


  30:Core/Src/spi.c **** //     SPI_CLK        --->            PB3
  31:Core/Src/spi.c **** //     SPI_MOSI       --->            PB5
  32:Core/Src/spi.c **** //     SPI_MISO       --->            PB4
  33:Core/Src/spi.c **** //     USART1_TX      --->            PA9
  34:Core/Src/spi.c **** //     USART1_RX      --->            PA10
  35:Core/Src/spi.c **** //Ö§³ÖILI9341/ILI9486/ILI9488/ST7793/ST7796S/R61509/NT35310/NT35510/SSD1963
  36:Core/Src/spi.c **** //TFT LCD¿ÉÒÔÖ±½Ó²åÈëSTM32F407VxT6×îÐ¡ÏµÍ³¿ª·¢°åTFTLCD²å²Û»òÕßÍ¨¹ýÅÅÏß½ÓÈëTFTLCD²å×ù
  37:Core/Src/spi.c **** //STM32Á¬½ÓÒý½ÅÊÇÖ¸TFTLCD²å²Û»òÕß²å×ùÒý½ÅÄÚ²¿Á¬½ÓµÄSTM32Òý½Å
  38:Core/Src/spi.c **** //=================================µçÔ´½ÓÏß=======================================//
  39:Core/Src/spi.c **** //     LCDÄ£¿é                    STM32Á¬½ÓÒý½Å
  40:Core/Src/spi.c **** //      VDD           --->           DC5V/3.3V          //µçÔ´
  41:Core/Src/spi.c **** //      GND           --->             GND              //µçÔ´µØ
  42:Core/Src/spi.c **** //=============================Òº¾§ÆÁÊý¾ÝÏß½ÓÏß===================================//
  43:Core/Src/spi.c **** //     LCDÄ£¿é                    STM32Á¬½ÓÒý½Å
  44:Core/Src/spi.c **** //      DB0           --->            PD14        -|   
  45:Core/Src/spi.c **** //      DB1           --->            PD15         |  
  46:Core/Src/spi.c **** //      DB2           --->            PD0          | 
  47:Core/Src/spi.c **** //      DB3           --->            PD1          | 
  48:Core/Src/spi.c **** //      DB4           --->            PE7          |
  49:Core/Src/spi.c **** //      DB5           --->            PE8          |
  50:Core/Src/spi.c **** //      DB6           --->            PE9          |
  51:Core/Src/spi.c **** //      DB7           --->            PE10         |===>Òº¾§ÆÁ16Î»²¢¿ÚÊý¾ÝÐÅºÅ
  52:Core/Src/spi.c **** //      DB8           --->            PE11         |
  53:Core/Src/spi.c **** //      DB9           --->            PE12         |
  54:Core/Src/spi.c **** //      DB10          --->            PE13         |
  55:Core/Src/spi.c **** //      DB11          --->            PE14         |
  56:Core/Src/spi.c **** //      DB12          --->            PE15         |
  57:Core/Src/spi.c **** //      DB13          --->            PD8          |
  58:Core/Src/spi.c **** //      DB14          --->            PD9          |
  59:Core/Src/spi.c **** //      DB15          --->            PD10        -|
  60:Core/Src/spi.c **** //=============================Òº¾§ÆÁ¿ØÖÆÏß½ÓÏß===================================//
  61:Core/Src/spi.c **** //     LCDÄ£¿é 				            STM32Á¬½ÓÒý½Å 
  62:Core/Src/spi.c **** //      WR            --->            PD5             //Òº¾§ÆÁÐ´Êý¾Ý¿ØÖÆÐÅºÅ
  63:Core/Src/spi.c **** //      RD            --->            PD4             //Òº¾§ÆÁ¶ÁÊý¾Ý¿ØÖÆÐÅºÅ
  64:Core/Src/spi.c **** //      RS            --->            PD11            //Òº¾§ÆÁÊý¾Ý/ÃüÁî¿ØÖÆÐÅºÅ
  65:Core/Src/spi.c **** //      RST           --->          ¸´Î»Òý½Å£¨Ä¬ÈÏ£©  //Òº¾§ÆÁ¸´Î»¿ØÖÆÐÅºÅ£¨Ò²¿ÉÑ¡ÔñPD13£©
  66:Core/Src/spi.c **** //      CS            --->            PD7             //Òº¾§ÆÁÆ¬Ñ¡¿ØÖÆÐÅºÅ
  67:Core/Src/spi.c **** //      BL            --->            PB15            //Òº¾§ÆÁ±³¹â¿ØÖÆÐÅºÅ
  68:Core/Src/spi.c **** *************************************************************************************/	
  69:Core/Src/spi.c ****  /* @attention
  70:Core/Src/spi.c ****   *
  71:Core/Src/spi.c ****   * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
  72:Core/Src/spi.c ****   * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE
  73:Core/Src/spi.c ****   * TIME. AS A RESULT, QD electronic SHALL NOT BE HELD LIABLE FOR ANY
  74:Core/Src/spi.c ****   * DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING
  75:Core/Src/spi.c ****   * FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE
  76:Core/Src/spi.c ****   * CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  77:Core/Src/spi.c **** *************************************************************************************/
  78:Core/Src/spi.c **** #include "spi.h"
  79:Core/Src/spi.c **** 
  80:Core/Src/spi.c **** /*****************************************************************************
  81:Core/Src/spi.c ****  * @name       :void SPI1_Init(void)
  82:Core/Src/spi.c ****  * @date       :2020-05-08 
  83:Core/Src/spi.c ****  * @function   :Initialize the hardware SPI2
  84:Core/Src/spi.c ****  * @parameters :None
  85:Core/Src/spi.c ****  * @retvalue   :None
  86:Core/Src/spi.c **** ******************************************************************************/	 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 3


  87:Core/Src/spi.c **** void SPI1_Init(void)
  88:Core/Src/spi.c **** {	 
  89:Core/Src/spi.c ****   GPIO_InitTypeDef  GPIO_InitStructure;
  90:Core/Src/spi.c ****   SPI_InitTypeDef  SPI_InitStructure;	
  91:Core/Src/spi.c ****   RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);//Ê¹ÄÜGPIOBÊ±ÖÓ
  92:Core/Src/spi.c ****   RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);//Ê¹ÄÜSPI1Ê±ÖÓ
  93:Core/Src/spi.c ****   //GPIOFB3,4,5³õÊ¼»¯ÉèÖÃ
  94:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3|GPIO_Pin_4|GPIO_Pin_5;//PB3~5¸´ÓÃ¹¦ÄÜÊä³ö	
  95:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;//¸´ÓÃ¹¦ÄÜ
  96:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;//ÍÆÍìÊä³ö
  97:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;//100MHz
  98:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;//ÉÏÀ­
  99:Core/Src/spi.c ****   GPIO_Init(GPIOB, &GPIO_InitStructure);//³õÊ¼»¯
 100:Core/Src/spi.c **** 	GPIO_PinAFConfig(GPIOB,GPIO_PinSource3,GPIO_AF_SPI1); //PB3¸´ÓÃÎª SPI1
 101:Core/Src/spi.c **** 	GPIO_PinAFConfig(GPIOB,GPIO_PinSource4,GPIO_AF_SPI1); //PB4¸´ÓÃÎª SPI1
 102:Core/Src/spi.c **** 	GPIO_PinAFConfig(GPIOB,GPIO_PinSource5,GPIO_AF_SPI1); //PB5¸´ÓÃÎª SPI1
 103:Core/Src/spi.c ****  
 104:Core/Src/spi.c **** 	//ÕâÀïÖ»Õë¶ÔSPI¿Ú³õÊ¼»¯
 105:Core/Src/spi.c **** 	RCC_APB2PeriphResetCmd(RCC_APB2Periph_SPI1,ENABLE);//¸´Î»SPI1
 106:Core/Src/spi.c **** 	RCC_APB2PeriphResetCmd(RCC_APB2Periph_SPI1,DISABLE);//Í£Ö¹¸´Î»SPI1
 107:Core/Src/spi.c **** 	SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;  //ÉèÖÃSPIµ¥Ïò»òÕßË«ÏòµÄÊý¾ÝÄ£Ê
 108:Core/Src/spi.c **** 	SPI_InitStructure.SPI_Mode = SPI_Mode_Master;		//ÉèÖÃSPI¹¤×÷Ä£Ê½:ÉèÖÃÎªÖ÷SPI
 109:Core/Src/spi.c **** 	SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;		//ÉèÖÃSPIµÄÊý¾Ý´óÐ¡:SPI·¢ËÍ½ÓÊÕ8Î»Ö¡½á¹¹
 110:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CPOL = SPI_CPOL_High;		//´®ÐÐÍ¬²½Ê±ÖÓµÄ¿ÕÏÐ×´Ì¬Îª¸ßµçÆ½
 111:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CPHA = SPI_CPHA_2Edge;	//´®ÐÐÍ¬²½Ê±ÖÓµÄµÚ¶þ¸öÌø±äÑØ£¨ÉÏÉý»òÏÂ½µ£©Êý¾Ý±»²ÉÑù
 112:Core/Src/spi.c **** 	SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;		//NSSÐÅºÅÓÉÓ²¼þ£¨NSS¹Ü½Å£©»¹ÊÇÈí¼þ£¨Ê¹ÓÃSSIÎ»£©¹ÜÀí:ÄÚ²
 113:Core/Src/spi.c **** 	SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_256;		//¶¨Òå²¨ÌØÂÊÔ¤·ÖÆµµÄÖµ:²¨ÌØÂ
 114:Core/Src/spi.c **** 	SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;	//Ö¸¶¨Êý¾Ý´«Êä´ÓMSBÎ»»¹ÊÇLSBÎ»¿ªÊ¼:Êý¾Ý´«Êä´ÓMS
 115:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CRCPolynomial = 7;	//CRCÖµ¼ÆËãµÄ¶àÏîÊ½
 116:Core/Src/spi.c **** 	SPI_Init(SPI1, &SPI_InitStructure);  //¸ù¾ÝSPI_InitStructÖÐÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯ÍâÉèSPIx¼Ä´æÆ÷
 117:Core/Src/spi.c **** 	SPI_Cmd(SPI1, ENABLE); //Ê¹ÄÜSPIÍâÉè
 118:Core/Src/spi.c **** 	SPI1_ReadWriteByte(0xff);//Æô¶¯´«Êä		 
 119:Core/Src/spi.c **** } 
 120:Core/Src/spi.c **** 
 121:Core/Src/spi.c **** /*****************************************************************************
 122:Core/Src/spi.c ****  * @name       :void SPI1_SetSpeed(u8 SPI_BaudRatePrescaler)
 123:Core/Src/spi.c ****  * @date       :2020-05-08 
 124:Core/Src/spi.c ****  * @function   :set hardware SPI1 speed
 125:Core/Src/spi.c ****  * @parameters :SPI_BaudRatePrescaler:SPI_BaudRatePrescaler_2~SPI_BaudRatePrescaler_256
 126:Core/Src/spi.c **** 								TIME:84MHZ
 127:Core/Src/spi.c ****  * @retvalue   :None
 128:Core/Src/spi.c **** ******************************************************************************/	  
 129:Core/Src/spi.c **** void SPI1_SetSpeed(u8 SPI_BaudRatePrescaler)
 130:Core/Src/spi.c **** {
  30              		.loc 1 130 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 130 1 is_stmt 0 view .LVU1
  35 0000 08B5     		push	{r3, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
 131:Core/Src/spi.c ****   assert_param(IS_SPI_BAUDRATE_PRESCALER(SPI_BaudRatePrescaler));//ÅÐ¶ÏÓÐÐ§ÐÔ
  40              		.loc 1 131 3 is_stmt 1 view .LVU2
 132:Core/Src/spi.c **** 	SPI1->CR1&=0XFFC7;//Î»3-5ÇåÁã£¬ÓÃÀ´ÉèÖÃ²¨ÌØÂÊ
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 4


  41              		.loc 1 132 2 view .LVU3
  42              		.loc 1 132 11 is_stmt 0 view .LVU4
  43 0002 084A     		ldr	r2, .L3
  44 0004 1388     		ldrh	r3, [r2]
  45 0006 9BB2     		uxth	r3, r3
  46 0008 23F03803 		bic	r3, r3, #56
  47 000c 9BB2     		uxth	r3, r3
  48 000e 1380     		strh	r3, [r2]	@ movhi
 133:Core/Src/spi.c **** 	SPI1->CR1|=SPI_BaudRatePrescaler;	//ÉèÖÃSPI1ËÙ¶È 
  49              		.loc 1 133 2 is_stmt 1 view .LVU5
  50              		.loc 1 133 11 is_stmt 0 view .LVU6
  51 0010 1388     		ldrh	r3, [r2]
  52 0012 9BB2     		uxth	r3, r3
  53 0014 0343     		orrs	r3, r3, r0
  54 0016 1380     		strh	r3, [r2]	@ movhi
 134:Core/Src/spi.c **** 	SPI_Cmd(SPI1,ENABLE); //Ê¹ÄÜSPI1
  55              		.loc 1 134 2 is_stmt 1 view .LVU7
  56 0018 0121     		movs	r1, #1
  57 001a 1046     		mov	r0, r2
  58              	.LVL1:
  59              		.loc 1 134 2 is_stmt 0 view .LVU8
  60 001c FFF7FEFF 		bl	SPI_Cmd
  61              	.LVL2:
 135:Core/Src/spi.c **** } 
  62              		.loc 1 135 1 view .LVU9
  63 0020 08BD     		pop	{r3, pc}
  64              	.L4:
  65 0022 00BF     		.align	2
  66              	.L3:
  67 0024 00300140 		.word	1073819648
  68              		.cfi_endproc
  69              	.LFE131:
  71              		.section	.text.SPI1_ReadWriteByte,"ax",%progbits
  72              		.align	1
  73              		.global	SPI1_ReadWriteByte
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  77              		.fpu fpv4-sp-d16
  79              	SPI1_ReadWriteByte:
  80              	.LVL3:
  81              	.LFB132:
 136:Core/Src/spi.c **** 
 137:Core/Src/spi.c **** /*****************************************************************************
 138:Core/Src/spi.c ****  * @name       :u8 SPI1_ReadWriteByte(u8 TxData)
 139:Core/Src/spi.c ****  * @date       :2020-05-08 
 140:Core/Src/spi.c ****  * @function   :Write a byte of data using hardware SPI
 141:Core/Src/spi.c ****  * @parameters :TxData:Data to be written
 142:Core/Src/spi.c ****  * @retvalue   :Data received by the bus
 143:Core/Src/spi.c **** ******************************************************************************/	
 144:Core/Src/spi.c **** u8 SPI1_ReadWriteByte(u8 TxData)
 145:Core/Src/spi.c **** {		 			  
  82              		.loc 1 145 1 is_stmt 1 view -0
  83              		.cfi_startproc
  84              		@ args = 0, pretend = 0, frame = 0
  85              		@ frame_needed = 0, uses_anonymous_args = 0
  86              		.loc 1 145 1 is_stmt 0 view .LVU11
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 5


  87 0000 10B5     		push	{r4, lr}
  88              	.LCFI1:
  89              		.cfi_def_cfa_offset 8
  90              		.cfi_offset 4, -8
  91              		.cfi_offset 14, -4
  92 0002 0446     		mov	r4, r0
 146:Core/Src/spi.c ****   while (SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_TXE) == RESET){}//µÈ´ý·¢ËÍÇø¿Õ  
  93              		.loc 1 146 3 is_stmt 1 view .LVU12
  94              	.LVL4:
  95              	.L6:
  96              		.loc 1 146 66 discriminator 1 view .LVU13
  97              		.loc 1 146 9 discriminator 1 view .LVU14
  98              		.loc 1 146 10 is_stmt 0 discriminator 1 view .LVU15
  99 0004 0221     		movs	r1, #2
 100 0006 0A48     		ldr	r0, .L9
 101 0008 FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 102              	.LVL5:
 103              		.loc 1 146 9 discriminator 1 view .LVU16
 104 000c 0028     		cmp	r0, #0
 105 000e F9D0     		beq	.L6
 147:Core/Src/spi.c **** 	SPI_I2S_SendData(SPI1, TxData); //Í¨¹ýÍâÉèSPIx·¢ËÍÒ»¸öbyte  Êý¾Ý	
 106              		.loc 1 147 2 is_stmt 1 view .LVU17
 107 0010 2146     		mov	r1, r4
 108 0012 0748     		ldr	r0, .L9
 109 0014 FFF7FEFF 		bl	SPI_I2S_SendData
 110              	.LVL6:
 148:Core/Src/spi.c ****   while (SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_RXNE) == RESET){} //µÈ´ý½ÓÊÕÍêÒ»¸öbyte  
 111              		.loc 1 148 3 view .LVU18
 112              	.L7:
 113              		.loc 1 148 67 discriminator 1 view .LVU19
 114              		.loc 1 148 9 discriminator 1 view .LVU20
 115              		.loc 1 148 10 is_stmt 0 discriminator 1 view .LVU21
 116 0018 0121     		movs	r1, #1
 117 001a 0548     		ldr	r0, .L9
 118 001c FFF7FEFF 		bl	SPI_I2S_GetFlagStatus
 119              	.LVL7:
 120              		.loc 1 148 9 discriminator 1 view .LVU22
 121 0020 0028     		cmp	r0, #0
 122 0022 F9D0     		beq	.L7
 149:Core/Src/spi.c **** 	return SPI_I2S_ReceiveData(SPI1); //·µ»ØÍ¨¹ýSPIx×î½ü½ÓÊÕµÄÊý¾Ý			    
 123              		.loc 1 149 2 is_stmt 1 view .LVU23
 124              		.loc 1 149 9 is_stmt 0 view .LVU24
 125 0024 0248     		ldr	r0, .L9
 126 0026 FFF7FEFF 		bl	SPI_I2S_ReceiveData
 127              	.LVL8:
 150:Core/Src/spi.c **** }
 128              		.loc 1 150 1 view .LVU25
 129 002a C0B2     		uxtb	r0, r0
 130 002c 10BD     		pop	{r4, pc}
 131              	.L10:
 132 002e 00BF     		.align	2
 133              	.L9:
 134 0030 00300140 		.word	1073819648
 135              		.cfi_endproc
 136              	.LFE132:
 138              		.section	.text.SPI1_Init,"ax",%progbits
 139              		.align	1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 6


 140              		.global	SPI1_Init
 141              		.syntax unified
 142              		.thumb
 143              		.thumb_func
 144              		.fpu fpv4-sp-d16
 146              	SPI1_Init:
 147              	.LFB130:
  88:Core/Src/spi.c ****   GPIO_InitTypeDef  GPIO_InitStructure;
 148              		.loc 1 88 1 is_stmt 1 view -0
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 32
 151              		@ frame_needed = 0, uses_anonymous_args = 0
 152 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 153              	.LCFI2:
 154              		.cfi_def_cfa_offset 28
 155              		.cfi_offset 4, -28
 156              		.cfi_offset 5, -24
 157              		.cfi_offset 6, -20
 158              		.cfi_offset 7, -16
 159              		.cfi_offset 8, -12
 160              		.cfi_offset 9, -8
 161              		.cfi_offset 14, -4
 162 0004 89B0     		sub	sp, sp, #36
 163              	.LCFI3:
 164              		.cfi_def_cfa_offset 64
  89:Core/Src/spi.c ****   SPI_InitTypeDef  SPI_InitStructure;	
 165              		.loc 1 89 3 view .LVU27
  90:Core/Src/spi.c ****   RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);//Ê¹ÄÜGPIOBÊ±ÖÓ
 166              		.loc 1 90 3 view .LVU28
  91:Core/Src/spi.c ****   RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);//Ê¹ÄÜSPI1Ê±ÖÓ
 167              		.loc 1 91 3 view .LVU29
 168 0006 0121     		movs	r1, #1
 169 0008 0220     		movs	r0, #2
 170 000a FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
 171              	.LVL9:
  92:Core/Src/spi.c ****   //GPIOFB3,4,5³õÊ¼»¯ÉèÖÃ
 172              		.loc 1 92 3 view .LVU30
 173 000e 0121     		movs	r1, #1
 174 0010 4FF48050 		mov	r0, #4096
 175 0014 FFF7FEFF 		bl	RCC_APB2PeriphClockCmd
 176              	.LVL10:
  94:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;//¸´ÓÃ¹¦ÄÜ
 177              		.loc 1 94 3 view .LVU31
  94:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;//¸´ÓÃ¹¦ÄÜ
 178              		.loc 1 94 31 is_stmt 0 view .LVU32
 179 0018 3827     		movs	r7, #56
 180 001a 0697     		str	r7, [sp, #24]
  95:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;//ÍÆÍìÊä³ö
 181              		.loc 1 95 3 is_stmt 1 view .LVU33
  95:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;//ÍÆÍìÊä³ö
 182              		.loc 1 95 32 is_stmt 0 view .LVU34
 183 001c 4FF00208 		mov	r8, #2
 184 0020 8DF81C80 		strb	r8, [sp, #28]
  96:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;//100MHz
 185              		.loc 1 96 3 is_stmt 1 view .LVU35
  96:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;//100MHz
 186              		.loc 1 96 33 is_stmt 0 view .LVU36
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 7


 187 0024 0024     		movs	r4, #0
 188 0026 8DF81E40 		strb	r4, [sp, #30]
  97:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;//ÉÏÀ­
 189              		.loc 1 97 3 is_stmt 1 view .LVU37
  97:Core/Src/spi.c ****   GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;//ÉÏÀ­
 190              		.loc 1 97 33 is_stmt 0 view .LVU38
 191 002a 4FF00309 		mov	r9, #3
 192 002e 8DF81D90 		strb	r9, [sp, #29]
  98:Core/Src/spi.c ****   GPIO_Init(GPIOB, &GPIO_InitStructure);//³õÊ¼»¯
 193              		.loc 1 98 3 is_stmt 1 view .LVU39
  98:Core/Src/spi.c ****   GPIO_Init(GPIOB, &GPIO_InitStructure);//³õÊ¼»¯
 194              		.loc 1 98 32 is_stmt 0 view .LVU40
 195 0032 0125     		movs	r5, #1
 196 0034 8DF81F50 		strb	r5, [sp, #31]
  99:Core/Src/spi.c **** 	GPIO_PinAFConfig(GPIOB,GPIO_PinSource3,GPIO_AF_SPI1); //PB3¸´ÓÃÎª SPI1
 197              		.loc 1 99 3 is_stmt 1 view .LVU41
 198 0038 214E     		ldr	r6, .L13
 199 003a 06A9     		add	r1, sp, #24
 200 003c 3046     		mov	r0, r6
 201 003e FFF7FEFF 		bl	GPIO_Init
 202              	.LVL11:
 100:Core/Src/spi.c **** 	GPIO_PinAFConfig(GPIOB,GPIO_PinSource4,GPIO_AF_SPI1); //PB4¸´ÓÃÎª SPI1
 203              		.loc 1 100 2 view .LVU42
 204 0042 0522     		movs	r2, #5
 205 0044 4946     		mov	r1, r9
 206 0046 3046     		mov	r0, r6
 207 0048 FFF7FEFF 		bl	GPIO_PinAFConfig
 208              	.LVL12:
 101:Core/Src/spi.c **** 	GPIO_PinAFConfig(GPIOB,GPIO_PinSource5,GPIO_AF_SPI1); //PB5¸´ÓÃÎª SPI1
 209              		.loc 1 101 2 view .LVU43
 210 004c 0522     		movs	r2, #5
 211 004e 0421     		movs	r1, #4
 212 0050 3046     		mov	r0, r6
 213 0052 FFF7FEFF 		bl	GPIO_PinAFConfig
 214              	.LVL13:
 102:Core/Src/spi.c ****  
 215              		.loc 1 102 2 view .LVU44
 216 0056 0522     		movs	r2, #5
 217 0058 1146     		mov	r1, r2
 218 005a 3046     		mov	r0, r6
 219 005c FFF7FEFF 		bl	GPIO_PinAFConfig
 220              	.LVL14:
 105:Core/Src/spi.c **** 	RCC_APB2PeriphResetCmd(RCC_APB2Periph_SPI1,DISABLE);//Í£Ö¹¸´Î»SPI1
 221              		.loc 1 105 2 view .LVU45
 222 0060 2946     		mov	r1, r5
 223 0062 4FF48050 		mov	r0, #4096
 224 0066 FFF7FEFF 		bl	RCC_APB2PeriphResetCmd
 225              	.LVL15:
 106:Core/Src/spi.c **** 	SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex;  //ÉèÖÃSPIµ¥Ïò»òÕßË«ÏòµÄÊý¾ÝÄ£Ê
 226              		.loc 1 106 2 view .LVU46
 227 006a 2146     		mov	r1, r4
 228 006c 4FF48050 		mov	r0, #4096
 229 0070 FFF7FEFF 		bl	RCC_APB2PeriphResetCmd
 230              	.LVL16:
 107:Core/Src/spi.c **** 	SPI_InitStructure.SPI_Mode = SPI_Mode_Master;		//ÉèÖÃSPI¹¤×÷Ä£Ê½:ÉèÖÃÎªÖ÷SPI
 231              		.loc 1 107 2 view .LVU47
 107:Core/Src/spi.c **** 	SPI_InitStructure.SPI_Mode = SPI_Mode_Master;		//ÉèÖÃSPI¹¤×÷Ä£Ê½:ÉèÖÃÎªÖ÷SPI
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 8


 232              		.loc 1 107 34 is_stmt 0 view .LVU48
 233 0074 ADF80440 		strh	r4, [sp, #4]	@ movhi
 108:Core/Src/spi.c **** 	SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;		//ÉèÖÃSPIµÄÊý¾Ý´óÐ¡:SPI·¢ËÍ½ÓÊÕ8Î»Ö¡½á¹¹
 234              		.loc 1 108 2 is_stmt 1 view .LVU49
 108:Core/Src/spi.c **** 	SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b;		//ÉèÖÃSPIµÄÊý¾Ý´óÐ¡:SPI·¢ËÍ½ÓÊÕ8Î»Ö¡½á¹¹
 235              		.loc 1 108 29 is_stmt 0 view .LVU50
 236 0078 4FF48273 		mov	r3, #260
 237 007c ADF80630 		strh	r3, [sp, #6]	@ movhi
 109:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CPOL = SPI_CPOL_High;		//´®ÐÐÍ¬²½Ê±ÖÓµÄ¿ÕÏÐ×´Ì¬Îª¸ßµçÆ½
 238              		.loc 1 109 2 is_stmt 1 view .LVU51
 109:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CPOL = SPI_CPOL_High;		//´®ÐÐÍ¬²½Ê±ÖÓµÄ¿ÕÏÐ×´Ì¬Îª¸ßµçÆ½
 239              		.loc 1 109 33 is_stmt 0 view .LVU52
 240 0080 ADF80840 		strh	r4, [sp, #8]	@ movhi
 110:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CPHA = SPI_CPHA_2Edge;	//´®ÐÐÍ¬²½Ê±ÖÓµÄµÚ¶þ¸öÌø±äÑØ£¨ÉÏÉý»òÏÂ½µ£©Êý¾Ý±»²ÉÑù
 241              		.loc 1 110 2 is_stmt 1 view .LVU53
 110:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CPHA = SPI_CPHA_2Edge;	//´®ÐÐÍ¬²½Ê±ÖÓµÄµÚ¶þ¸öÌø±äÑØ£¨ÉÏÉý»òÏÂ½µ£©Êý¾Ý±»²ÉÑù
 242              		.loc 1 110 29 is_stmt 0 view .LVU54
 243 0084 ADF80A80 		strh	r8, [sp, #10]	@ movhi
 111:Core/Src/spi.c **** 	SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;		//NSSÐÅºÅÓÉÓ²¼þ£¨NSS¹Ü½Å£©»¹ÊÇÈí¼þ£¨Ê¹ÓÃSSIÎ»£©¹ÜÀí:ÄÚ²
 244              		.loc 1 111 2 is_stmt 1 view .LVU55
 111:Core/Src/spi.c **** 	SPI_InitStructure.SPI_NSS = SPI_NSS_Soft;		//NSSÐÅºÅÓÉÓ²¼þ£¨NSS¹Ü½Å£©»¹ÊÇÈí¼þ£¨Ê¹ÓÃSSIÎ»£©¹ÜÀí:ÄÚ²
 245              		.loc 1 111 29 is_stmt 0 view .LVU56
 246 0088 ADF80C50 		strh	r5, [sp, #12]	@ movhi
 112:Core/Src/spi.c **** 	SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_256;		//¶¨Òå²¨ÌØÂÊÔ¤·ÖÆµµÄÖµ:²¨ÌØÂ
 247              		.loc 1 112 2 is_stmt 1 view .LVU57
 112:Core/Src/spi.c **** 	SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_256;		//¶¨Òå²¨ÌØÂÊÔ¤·ÖÆµµÄÖµ:²¨ÌØÂ
 248              		.loc 1 112 28 is_stmt 0 view .LVU58
 249 008c 4FF40073 		mov	r3, #512
 250 0090 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 113:Core/Src/spi.c **** 	SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;	//Ö¸¶¨Êý¾Ý´«Êä´ÓMSBÎ»»¹ÊÇLSBÎ»¿ªÊ¼:Êý¾Ý´«Êä´ÓMS
 251              		.loc 1 113 2 is_stmt 1 view .LVU59
 113:Core/Src/spi.c **** 	SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB;	//Ö¸¶¨Êý¾Ý´«Êä´ÓMSBÎ»»¹ÊÇLSBÎ»¿ªÊ¼:Êý¾Ý´«Êä´ÓMS
 252              		.loc 1 113 42 is_stmt 0 view .LVU60
 253 0094 ADF81070 		strh	r7, [sp, #16]	@ movhi
 114:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CRCPolynomial = 7;	//CRCÖµ¼ÆËãµÄ¶àÏîÊ½
 254              		.loc 1 114 2 is_stmt 1 view .LVU61
 114:Core/Src/spi.c **** 	SPI_InitStructure.SPI_CRCPolynomial = 7;	//CRCÖµ¼ÆËãµÄ¶àÏîÊ½
 255              		.loc 1 114 33 is_stmt 0 view .LVU62
 256 0098 ADF81240 		strh	r4, [sp, #18]	@ movhi
 115:Core/Src/spi.c **** 	SPI_Init(SPI1, &SPI_InitStructure);  //¸ù¾ÝSPI_InitStructÖÐÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯ÍâÉèSPIx¼Ä´æÆ÷
 257              		.loc 1 115 2 is_stmt 1 view .LVU63
 115:Core/Src/spi.c **** 	SPI_Init(SPI1, &SPI_InitStructure);  //¸ù¾ÝSPI_InitStructÖÐÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯ÍâÉèSPIx¼Ä´æÆ÷
 258              		.loc 1 115 38 is_stmt 0 view .LVU64
 259 009c 0723     		movs	r3, #7
 260 009e ADF81430 		strh	r3, [sp, #20]	@ movhi
 116:Core/Src/spi.c **** 	SPI_Cmd(SPI1, ENABLE); //Ê¹ÄÜSPIÍâÉè
 261              		.loc 1 116 2 is_stmt 1 view .LVU65
 262 00a2 084C     		ldr	r4, .L13+4
 263 00a4 01A9     		add	r1, sp, #4
 264 00a6 2046     		mov	r0, r4
 265 00a8 FFF7FEFF 		bl	SPI_Init
 266              	.LVL17:
 117:Core/Src/spi.c **** 	SPI1_ReadWriteByte(0xff);//Æô¶¯´«Êä		 
 267              		.loc 1 117 2 view .LVU66
 268 00ac 2946     		mov	r1, r5
 269 00ae 2046     		mov	r0, r4
 270 00b0 FFF7FEFF 		bl	SPI_Cmd
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 9


 271              	.LVL18:
 118:Core/Src/spi.c **** } 
 272              		.loc 1 118 2 view .LVU67
 273 00b4 FF20     		movs	r0, #255
 274 00b6 FFF7FEFF 		bl	SPI1_ReadWriteByte
 275              	.LVL19:
 119:Core/Src/spi.c **** 
 276              		.loc 1 119 1 is_stmt 0 view .LVU68
 277 00ba 09B0     		add	sp, sp, #36
 278              	.LCFI4:
 279              		.cfi_def_cfa_offset 28
 280              		@ sp needed
 281 00bc BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 282              	.L14:
 283              		.align	2
 284              	.L13:
 285 00c0 00040240 		.word	1073873920
 286 00c4 00300140 		.word	1073819648
 287              		.cfi_endproc
 288              	.LFE130:
 290              		.text
 291              	.Letext0:
 292              		.file 2 "d:\\install\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\include\\machin
 293              		.file 3 "d:\\install\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\include\\sys\\_
 294              		.file 4 "Core/Inc/stm32f4xx.h"
 295              		.file 5 "Drivers/STM32F4xx_FWLIB/inc/stm32f4xx_gpio.h"
 296              		.file 6 "Drivers/STM32F4xx_FWLIB/inc/stm32f4xx_spi.h"
 297              		.file 7 "Drivers/STM32F4xx_FWLIB/inc/stm32f4xx_rcc.h"
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s 			page 10


DEFINED SYMBOLS
                            *ABS*:00000000 spi.c
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:18     .text.SPI1_SetSpeed:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:26     .text.SPI1_SetSpeed:00000000 SPI1_SetSpeed
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:67     .text.SPI1_SetSpeed:00000024 $d
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:72     .text.SPI1_ReadWriteByte:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:79     .text.SPI1_ReadWriteByte:00000000 SPI1_ReadWriteByte
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:134    .text.SPI1_ReadWriteByte:00000030 $d
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:139    .text.SPI1_Init:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:146    .text.SPI1_Init:00000000 SPI1_Init
C:\Users\ADMIN\AppData\Local\Temp\ccwi31ug.s:285    .text.SPI1_Init:000000c0 $d

UNDEFINED SYMBOLS
SPI_Cmd
SPI_I2S_GetFlagStatus
SPI_I2S_SendData
SPI_I2S_ReceiveData
RCC_AHB1PeriphClockCmd
RCC_APB2PeriphClockCmd
GPIO_Init
GPIO_PinAFConfig
RCC_APB2PeriphResetCmd
SPI_Init
