ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ff.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.mem_cpy,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	mem_cpy:
  26              	.LVL0:
  27              	.LFB0:
  28              		.file 1 "Core/Src/ff.c"
   1:Core/Src/ff.c **** /*----------------------------------------------------------------------------/
   2:Core/Src/ff.c **** /  FatFs - FAT file system module  R0.10a                (C)ChaN, 2014
   3:Core/Src/ff.c **** /-----------------------------------------------------------------------------/
   4:Core/Src/ff.c **** / FatFs module is a generic FAT file system module for small embedded systems.
   5:Core/Src/ff.c **** / This is a free software that opened for education, research and commercial
   6:Core/Src/ff.c **** / developments under license policy of following terms.
   7:Core/Src/ff.c **** /
   8:Core/Src/ff.c **** /  Copyright (C) 2014, ChaN, all right reserved.
   9:Core/Src/ff.c **** /
  10:Core/Src/ff.c **** / * The FatFs module is a free software and there is NO WARRANTY.
  11:Core/Src/ff.c **** / * No restriction on use. You can use, modify and redistribute it for
  12:Core/Src/ff.c **** /   personal, non-profit or commercial products UNDER YOUR RESPONSIBILITY.
  13:Core/Src/ff.c **** / * Redistributions of source code must retain the above copyright notice.
  14:Core/Src/ff.c **** /
  15:Core/Src/ff.c **** /-----------------------------------------------------------------------------/
  16:Core/Src/ff.c **** / Feb 26,'06 R0.00  Prototype.
  17:Core/Src/ff.c **** /
  18:Core/Src/ff.c **** / Apr 29,'06 R0.01  First stable version.
  19:Core/Src/ff.c **** /
  20:Core/Src/ff.c **** / Jun 01,'06 R0.02  Added FAT12 support.
  21:Core/Src/ff.c **** /                   Removed unbuffered mode.
  22:Core/Src/ff.c **** /                   Fixed a problem on small (<32M) partition.
  23:Core/Src/ff.c **** / Jun 10,'06 R0.02a Added a configuration option (_FS_MINIMUM).
  24:Core/Src/ff.c **** /
  25:Core/Src/ff.c **** / Sep 22,'06 R0.03  Added f_rename().
  26:Core/Src/ff.c **** /                   Changed option _FS_MINIMUM to _FS_MINIMIZE.
  27:Core/Src/ff.c **** / Dec 11,'06 R0.03a Improved cluster scan algorithm to write files fast.
  28:Core/Src/ff.c **** /                   Fixed f_mkdir() creates incorrect directory on FAT32.
  29:Core/Src/ff.c **** /
  30:Core/Src/ff.c **** / Feb 04,'07 R0.04  Supported multiple drive system.
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 2


  31:Core/Src/ff.c **** /                   Changed some interfaces for multiple drive system.
  32:Core/Src/ff.c **** /                   Changed f_mountdrv() to f_mount().
  33:Core/Src/ff.c **** /                   Added f_mkfs().
  34:Core/Src/ff.c **** / Apr 01,'07 R0.04a Supported multiple partitions on a physical drive.
  35:Core/Src/ff.c **** /                   Added a capability of extending file size to f_lseek().
  36:Core/Src/ff.c **** /                   Added minimization level 3.
  37:Core/Src/ff.c **** /                   Fixed an endian sensitive code in f_mkfs().
  38:Core/Src/ff.c **** / May 05,'07 R0.04b Added a configuration option _USE_NTFLAG.
  39:Core/Src/ff.c **** /                   Added FSINFO support.
  40:Core/Src/ff.c **** /                   Fixed DBCS name can result FR_INVALID_NAME.
  41:Core/Src/ff.c **** /                   Fixed short seek (<= csize) collapses the file object.
  42:Core/Src/ff.c **** /
  43:Core/Src/ff.c **** / Aug 25,'07 R0.05  Changed arguments of f_read(), f_write() and f_mkfs().
  44:Core/Src/ff.c **** /                   Fixed f_mkfs() on FAT32 creates incorrect FSINFO.
  45:Core/Src/ff.c **** /                   Fixed f_mkdir() on FAT32 creates incorrect directory.
  46:Core/Src/ff.c **** / Feb 03,'08 R0.05a Added f_truncate() and f_utime().
  47:Core/Src/ff.c **** /                   Fixed off by one error at FAT sub-type determination.
  48:Core/Src/ff.c **** /                   Fixed btr in f_read() can be mistruncated.
  49:Core/Src/ff.c **** /                   Fixed cached sector is not flushed when create and close without write.
  50:Core/Src/ff.c **** /
  51:Core/Src/ff.c **** / Apr 01,'08 R0.06  Added fputc(), fputs(), fprintf() and fgets().
  52:Core/Src/ff.c **** /                   Improved performance of f_lseek() on moving to the same or following cluster.
  53:Core/Src/ff.c **** /
  54:Core/Src/ff.c **** / Apr 01,'09 R0.07  Merged Tiny-FatFs as a configuration option. (_FS_TINY)
  55:Core/Src/ff.c **** /                   Added long file name feature.
  56:Core/Src/ff.c **** /                   Added multiple code page feature.
  57:Core/Src/ff.c **** /                   Added re-entrancy for multitask operation.
  58:Core/Src/ff.c **** /                   Added auto cluster size selection to f_mkfs().
  59:Core/Src/ff.c **** /                   Added rewind option to f_readdir().
  60:Core/Src/ff.c **** /                   Changed result code of critical errors.
  61:Core/Src/ff.c **** /                   Renamed string functions to avoid name collision.
  62:Core/Src/ff.c **** / Apr 14,'09 R0.07a Separated out OS dependent code on reentrant cfg.
  63:Core/Src/ff.c **** /                   Added multiple sector size feature.
  64:Core/Src/ff.c **** / Jun 21,'09 R0.07c Fixed f_unlink() can return FR_OK on error.
  65:Core/Src/ff.c **** /                   Fixed wrong cache control in f_lseek().
  66:Core/Src/ff.c **** /                   Added relative path feature.
  67:Core/Src/ff.c **** /                   Added f_chdir() and f_chdrive().
  68:Core/Src/ff.c **** /                   Added proper case conversion to extended character.
  69:Core/Src/ff.c **** / Nov 03,'09 R0.07e Separated out configuration options from ff.h to ffconf.h.
  70:Core/Src/ff.c **** /                   Fixed f_unlink() fails to remove a sub-directory on _FS_RPATH.
  71:Core/Src/ff.c **** /                   Fixed name matching error on the 13 character boundary.
  72:Core/Src/ff.c **** /                   Added a configuration option, _LFN_UNICODE.
  73:Core/Src/ff.c **** /                   Changed f_readdir() to return the SFN with always upper case on non-LFN cfg.
  74:Core/Src/ff.c **** /
  75:Core/Src/ff.c **** / May 15,'10 R0.08  Added a memory configuration option. (_USE_LFN = 3)
  76:Core/Src/ff.c **** /                   Added file lock feature. (_FS_SHARE)
  77:Core/Src/ff.c **** /                   Added fast seek feature. (_USE_FASTSEEK)
  78:Core/Src/ff.c **** /                   Changed some types on the API, XCHAR->TCHAR.
  79:Core/Src/ff.c **** /                   Changed .fname in the FILINFO structure on Unicode cfg.
  80:Core/Src/ff.c **** /                   String functions support UTF-8 encoding files on Unicode cfg.
  81:Core/Src/ff.c **** / Aug 16,'10 R0.08a Added f_getcwd().
  82:Core/Src/ff.c **** /                   Added sector erase feature. (_USE_ERASE)
  83:Core/Src/ff.c **** /                   Moved file lock semaphore table from fs object to the bss.
  84:Core/Src/ff.c **** /                   Fixed a wrong directory entry is created on non-LFN cfg when the given name con
  85:Core/Src/ff.c **** /                   Fixed f_mkfs() creates wrong FAT32 volume.
  86:Core/Src/ff.c **** / Jan 15,'11 R0.08b Fast seek feature is also applied to f_read() and f_write().
  87:Core/Src/ff.c **** /                   f_lseek() reports required table size on creating CLMP.
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 3


  88:Core/Src/ff.c **** /                   Extended format syntax of f_printf().
  89:Core/Src/ff.c **** /                   Ignores duplicated directory separators in given path name.
  90:Core/Src/ff.c **** /
  91:Core/Src/ff.c **** / Sep 06,'11 R0.09  f_mkfs() supports multiple partition to complete the multiple partition feature
  92:Core/Src/ff.c **** /                   Added f_fdisk().
  93:Core/Src/ff.c **** / Aug 27,'12 R0.09a Changed f_open() and f_opendir() reject null object pointer to avoid crash.
  94:Core/Src/ff.c **** /                   Changed option name _FS_SHARE to _FS_LOCK.
  95:Core/Src/ff.c **** /                   Fixed assertion failure due to OS/2 EA on FAT12/16 volume.
  96:Core/Src/ff.c **** / Jan 24,'13 R0.09b Added f_setlabel() and f_getlabel().
  97:Core/Src/ff.c **** /
  98:Core/Src/ff.c **** / Oct 02,'13 R0.10  Added selection of character encoding on the file. (_STRF_ENCODE)
  99:Core/Src/ff.c **** /                   Added f_closedir().
 100:Core/Src/ff.c **** /                   Added forced full FAT scan for f_getfree(). (_FS_NOFSINFO)
 101:Core/Src/ff.c **** /                   Added forced mount feature with changes of f_mount().
 102:Core/Src/ff.c **** /                   Improved behavior of volume auto detection.
 103:Core/Src/ff.c **** /                   Improved write throughput of f_puts() and f_printf().
 104:Core/Src/ff.c **** /                   Changed argument of f_chdrive(), f_mkfs(), disk_read() and disk_write().
 105:Core/Src/ff.c **** /                   Fixed f_write() can be truncated when the file size is close to 4GB.
 106:Core/Src/ff.c **** /                   Fixed f_open(), f_mkdir() and f_setlabel() can return incorrect error code.
 107:Core/Src/ff.c **** / Jan 15,'14 R0.10a Added arbitrary strings as drive number in the path name. (_STR_VOLUME_ID)
 108:Core/Src/ff.c **** /                   Added a configuration option of minimum sector size. (_MIN_SS)
 109:Core/Src/ff.c **** /                   2nd argument of f_rename() can have a drive number and it will be ignored.
 110:Core/Src/ff.c **** /                   Fixed f_mount() with forced mount fails when drive number is >= 1.
 111:Core/Src/ff.c **** /                   Fixed f_close() invalidates the file object without volume lock.
 112:Core/Src/ff.c **** /                   Fixed f_closedir() returns but the volume lock is left acquired.
 113:Core/Src/ff.c **** /                   Fixed creation of an entry with LFN fails on too many SFN collisions.
 114:Core/Src/ff.c **** /---------------------------------------------------------------------------*/
 115:Core/Src/ff.c **** 
 116:Core/Src/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
 117:Core/Src/ff.c **** #include "diskio.h"		/* Declarations of disk I/O functions */
 118:Core/Src/ff.c **** 
 119:Core/Src/ff.c **** 
 120:Core/Src/ff.c **** 
 121:Core/Src/ff.c **** 
 122:Core/Src/ff.c **** /*--------------------------------------------------------------------------
 123:Core/Src/ff.c **** 
 124:Core/Src/ff.c ****    Module Private Definitions
 125:Core/Src/ff.c **** 
 126:Core/Src/ff.c **** ---------------------------------------------------------------------------*/
 127:Core/Src/ff.c **** 
 128:Core/Src/ff.c **** #if _FATFS != 29000	/* Revision ID */
 129:Core/Src/ff.c **** #error Wrong include file (ff.h).
 130:Core/Src/ff.c **** #endif
 131:Core/Src/ff.c **** 
 132:Core/Src/ff.c **** 
 133:Core/Src/ff.c **** /* Reentrancy related */
 134:Core/Src/ff.c **** #if _FS_REENTRANT
 135:Core/Src/ff.c **** #if _USE_LFN == 1
 136:Core/Src/ff.c **** #error Static LFN work area cannot be used at thread-safe configuration.
 137:Core/Src/ff.c **** #endif
 138:Core/Src/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
 139:Core/Src/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 140:Core/Src/ff.c **** #else
 141:Core/Src/ff.c **** #define	ENTER_FF(fs)
 142:Core/Src/ff.c **** #define LEAVE_FF(fs, res)	return res
 143:Core/Src/ff.c **** #endif
 144:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 4


 145:Core/Src/ff.c **** #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 146:Core/Src/ff.c **** 
 147:Core/Src/ff.c **** 
 148:Core/Src/ff.c **** /* Definitions of sector size */
 149:Core/Src/ff.c **** #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 150:Core/Src/ff.c **** #error Wrong sector size configuration.
 151:Core/Src/ff.c **** #endif
 152:Core/Src/ff.c **** #if _MAX_SS == _MIN_SS
 153:Core/Src/ff.c **** #define	SS(fs)	((UINT)_MIN_SS)	/* Fixed sector size */
 154:Core/Src/ff.c **** #else
 155:Core/Src/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
 156:Core/Src/ff.c **** #endif
 157:Core/Src/ff.c **** 
 158:Core/Src/ff.c **** 
 159:Core/Src/ff.c **** /* File access control feature */
 160:Core/Src/ff.c **** #if _FS_LOCK
 161:Core/Src/ff.c **** #if _FS_READONLY
 162:Core/Src/ff.c **** #error _FS_LOCK must be 0 at read-only cfg.
 163:Core/Src/ff.c **** #endif
 164:Core/Src/ff.c **** typedef struct {
 165:Core/Src/ff.c **** 	FATFS *fs;				/* Object ID 1, volume (NULL:blank entry) */
 166:Core/Src/ff.c **** 	DWORD clu;				/* Object ID 2, directory */
 167:Core/Src/ff.c **** 	WORD idx;				/* Object ID 3, directory index */
 168:Core/Src/ff.c **** 	WORD ctr;				/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 169:Core/Src/ff.c **** } FILESEM;
 170:Core/Src/ff.c **** #endif
 171:Core/Src/ff.c **** 
 172:Core/Src/ff.c **** 
 173:Core/Src/ff.c **** 
 174:Core/Src/ff.c **** /* DBCS code ranges and SBCS extend character conversion table */
 175:Core/Src/ff.c **** 
 176:Core/Src/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
 177:Core/Src/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
 178:Core/Src/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
 179:Core/Src/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
 180:Core/Src/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
 181:Core/Src/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
 182:Core/Src/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
 183:Core/Src/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
 184:Core/Src/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
 185:Core/Src/ff.c **** 
 186:Core/Src/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
 187:Core/Src/ff.c **** #define _DF1S	0x81
 188:Core/Src/ff.c **** #define _DF1E	0xFE
 189:Core/Src/ff.c **** #define _DS1S	0x40
 190:Core/Src/ff.c **** #define _DS1E	0x7E
 191:Core/Src/ff.c **** #define _DS2S	0x80
 192:Core/Src/ff.c **** #define _DS2E	0xFE
 193:Core/Src/ff.c **** 
 194:Core/Src/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
 195:Core/Src/ff.c **** #define _DF1S	0x81
 196:Core/Src/ff.c **** #define _DF1E	0xFE
 197:Core/Src/ff.c **** #define _DS1S	0x41
 198:Core/Src/ff.c **** #define _DS1E	0x5A
 199:Core/Src/ff.c **** #define _DS2S	0x61
 200:Core/Src/ff.c **** #define _DS2E	0x7A
 201:Core/Src/ff.c **** #define _DS3S	0x81
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 5


 202:Core/Src/ff.c **** #define _DS3E	0xFE
 203:Core/Src/ff.c **** 
 204:Core/Src/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
 205:Core/Src/ff.c **** #define _DF1S	0x81
 206:Core/Src/ff.c **** #define _DF1E	0xFE
 207:Core/Src/ff.c **** #define _DS1S	0x40
 208:Core/Src/ff.c **** #define _DS1E	0x7E
 209:Core/Src/ff.c **** #define _DS2S	0xA1
 210:Core/Src/ff.c **** #define _DS2E	0xFE
 211:Core/Src/ff.c **** 
 212:Core/Src/ff.c **** #elif _CODE_PAGE == 437	/* U.S. (OEM) */
 213:Core/Src/ff.c **** #define _DF1S	0
 214:Core/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x9
 215:Core/Src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 216:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 217:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 218:Core/Src/ff.c **** 
 219:Core/Src/ff.c **** #elif _CODE_PAGE == 720	/* Arabic (OEM) */
 220:Core/Src/ff.c **** #define _DF1S	0
 221:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x9
 222:Core/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 223:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 224:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 225:Core/Src/ff.c **** 
 226:Core/Src/ff.c **** #elif _CODE_PAGE == 737	/* Greek (OEM) */
 227:Core/Src/ff.c **** #define _DF1S	0
 228:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 229:Core/Src/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,
 230:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 231:Core/Src/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 232:Core/Src/ff.c **** 
 233:Core/Src/ff.c **** #elif _CODE_PAGE == 775	/* Baltic (OEM) */
 234:Core/Src/ff.c **** #define _DF1S	0
 235:Core/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x9
 236:Core/Src/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 237:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,
 238:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 239:Core/Src/ff.c **** 
 240:Core/Src/ff.c **** #elif _CODE_PAGE == 850	/* Multilingual Latin 1 (OEM) */
 241:Core/Src/ff.c **** #define _DF1S	0
 242:Core/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 243:Core/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 244:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 245:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 246:Core/Src/ff.c **** 
 247:Core/Src/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 (OEM) */
 248:Core/Src/ff.c **** #define _DF1S	0
 249:Core/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x9
 250:Core/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,
 251:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 252:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,
 253:Core/Src/ff.c **** 
 254:Core/Src/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic (OEM) */
 255:Core/Src/ff.c **** #define _DF1S	0
 256:Core/Src/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x9
 257:Core/Src/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 258:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 6


 259:Core/Src/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,
 260:Core/Src/ff.c **** 
 261:Core/Src/ff.c **** #elif _CODE_PAGE == 857	/* Turkish (OEM) */
 262:Core/Src/ff.c **** #define _DF1S	0
 263:Core/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x9
 264:Core/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 265:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 266:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,
 267:Core/Src/ff.c **** 
 268:Core/Src/ff.c **** #elif _CODE_PAGE == 858	/* Multilingual Latin 1 + Euro (OEM) */
 269:Core/Src/ff.c **** #define _DF1S	0
 270:Core/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 271:Core/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 272:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 273:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 274:Core/Src/ff.c **** 
 275:Core/Src/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew (OEM) */
 276:Core/Src/ff.c **** #define _DF1S	0
 277:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 278:Core/Src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 279:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 280:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 281:Core/Src/ff.c **** 
 282:Core/Src/ff.c **** #elif _CODE_PAGE == 866	/* Russian (OEM) */
 283:Core/Src/ff.c **** #define _DF1S	0
 284:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 285:Core/Src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,
 286:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 287:Core/Src/ff.c **** 				0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,
 288:Core/Src/ff.c **** 
 289:Core/Src/ff.c **** #elif _CODE_PAGE == 874	/* Thai (OEM, Windows) */
 290:Core/Src/ff.c **** #define _DF1S	0
 291:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 292:Core/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 293:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 294:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 295:Core/Src/ff.c **** 
 296:Core/Src/ff.c **** #elif _CODE_PAGE == 1250 /* Central Europe (Windows) */
 297:Core/Src/ff.c **** #define _DF1S	0
 298:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 299:Core/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 300:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 301:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 302:Core/Src/ff.c **** 
 303:Core/Src/ff.c **** #elif _CODE_PAGE == 1251 /* Cyrillic (Windows) */
 304:Core/Src/ff.c **** #define _DF1S	0
 305:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x8
 306:Core/Src/ff.c **** 				0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 307:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 308:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 309:Core/Src/ff.c **** 
 310:Core/Src/ff.c **** #elif _CODE_PAGE == 1252 /* Latin 1 (Windows) */
 311:Core/Src/ff.c **** #define _DF1S	0
 312:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 313:Core/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 314:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 315:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 7


 316:Core/Src/ff.c **** 
 317:Core/Src/ff.c **** #elif _CODE_PAGE == 1253 /* Greek (Windows) */
 318:Core/Src/ff.c **** #define _DF1S	0
 319:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 320:Core/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 321:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 322:Core/Src/ff.c **** 				0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 323:Core/Src/ff.c **** 
 324:Core/Src/ff.c **** #elif _CODE_PAGE == 1254 /* Turkish (Windows) */
 325:Core/Src/ff.c **** #define _DF1S	0
 326:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 327:Core/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 328:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 329:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 330:Core/Src/ff.c **** 
 331:Core/Src/ff.c **** #elif _CODE_PAGE == 1255 /* Hebrew (Windows) */
 332:Core/Src/ff.c **** #define _DF1S	0
 333:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 334:Core/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 335:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 336:Core/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 337:Core/Src/ff.c **** 
 338:Core/Src/ff.c **** #elif _CODE_PAGE == 1256 /* Arabic (Windows) */
 339:Core/Src/ff.c **** #define _DF1S	0
 340:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 341:Core/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 342:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 343:Core/Src/ff.c **** 				0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,
 344:Core/Src/ff.c **** 
 345:Core/Src/ff.c **** #elif _CODE_PAGE == 1257 /* Baltic (Windows) */
 346:Core/Src/ff.c **** #define _DF1S	0
 347:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 348:Core/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 349:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 350:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 351:Core/Src/ff.c **** 
 352:Core/Src/ff.c **** #elif _CODE_PAGE == 1258 /* Vietnam (OEM, Windows) */
 353:Core/Src/ff.c **** #define _DF1S	0
 354:Core/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 355:Core/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 356:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 357:Core/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 358:Core/Src/ff.c **** 
 359:Core/Src/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 360:Core/Src/ff.c **** #if _USE_LFN
 361:Core/Src/ff.c **** #error Cannot use LFN feature without valid code page.
 362:Core/Src/ff.c **** #endif
 363:Core/Src/ff.c **** #define _DF1S	0
 364:Core/Src/ff.c **** 
 365:Core/Src/ff.c **** #else
 366:Core/Src/ff.c **** #error Unknown code page
 367:Core/Src/ff.c **** 
 368:Core/Src/ff.c **** #endif
 369:Core/Src/ff.c **** 
 370:Core/Src/ff.c **** 
 371:Core/Src/ff.c **** /* Character code support macros */
 372:Core/Src/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 8


 373:Core/Src/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 374:Core/Src/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 375:Core/Src/ff.c **** 
 376:Core/Src/ff.c **** #if _DF1S		/* Code page is DBCS */
 377:Core/Src/ff.c **** 
 378:Core/Src/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 379:Core/Src/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 380:Core/Src/ff.c **** #else			/* One 1st byte area */
 381:Core/Src/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 382:Core/Src/ff.c **** #endif
 383:Core/Src/ff.c **** 
 384:Core/Src/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 385:Core/Src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 386:Core/Src/ff.c **** #else			/* Two 2nd byte areas */
 387:Core/Src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 388:Core/Src/ff.c **** #endif
 389:Core/Src/ff.c **** 
 390:Core/Src/ff.c **** #else			/* Code page is SBCS */
 391:Core/Src/ff.c **** 
 392:Core/Src/ff.c **** #define IsDBCS1(c)	0
 393:Core/Src/ff.c **** #define IsDBCS2(c)	0
 394:Core/Src/ff.c **** 
 395:Core/Src/ff.c **** #endif /* _DF1S */
 396:Core/Src/ff.c **** 
 397:Core/Src/ff.c **** 
 398:Core/Src/ff.c **** /* Name status flags */
 399:Core/Src/ff.c **** #define NS			11		/* Index of name status byte in fn[] */
 400:Core/Src/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 401:Core/Src/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 402:Core/Src/ff.c **** #define NS_LAST		0x04	/* Last segment */
 403:Core/Src/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
 404:Core/Src/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 405:Core/Src/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 406:Core/Src/ff.c **** 
 407:Core/Src/ff.c **** 
 408:Core/Src/ff.c **** /* FAT sub-type boundaries */
 409:Core/Src/ff.c **** #define MIN_FAT16	4086U	/* Minimum number of clusters for FAT16 */
 410:Core/Src/ff.c **** #define	MIN_FAT32	65526U	/* Minimum number of clusters for FAT32 */
 411:Core/Src/ff.c **** 
 412:Core/Src/ff.c **** 
 413:Core/Src/ff.c **** /* FatFs refers the members in the FAT structures as byte array instead of
 414:Core/Src/ff.c **** / structure member because the structure is not binary compatible between
 415:Core/Src/ff.c **** / different platforms */
 416:Core/Src/ff.c **** 
 417:Core/Src/ff.c **** #define BS_jmpBoot			0	/* Jump instruction (3) */
 418:Core/Src/ff.c **** #define BS_OEMName			3	/* OEM name (8) */
 419:Core/Src/ff.c **** #define BPB_BytsPerSec		11	/* Sector size [byte] (2) */
 420:Core/Src/ff.c **** #define BPB_SecPerClus		13	/* Cluster size [sector] (1) */
 421:Core/Src/ff.c **** #define BPB_RsvdSecCnt		14	/* Size of reserved area [sector] (2) */
 422:Core/Src/ff.c **** #define BPB_NumFATs			16	/* Number of FAT copies (1) */
 423:Core/Src/ff.c **** #define BPB_RootEntCnt		17	/* Number of root directory entries for FAT12/16 (2) */
 424:Core/Src/ff.c **** #define BPB_TotSec16		19	/* Volume size [sector] (2) */
 425:Core/Src/ff.c **** #define BPB_Media			21	/* Media descriptor (1) */
 426:Core/Src/ff.c **** #define BPB_FATSz16			22	/* FAT size [sector] (2) */
 427:Core/Src/ff.c **** #define BPB_SecPerTrk		24	/* Track size [sector] (2) */
 428:Core/Src/ff.c **** #define BPB_NumHeads		26	/* Number of heads (2) */
 429:Core/Src/ff.c **** #define BPB_HiddSec			28	/* Number of special hidden sectors (4) */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 9


 430:Core/Src/ff.c **** #define BPB_TotSec32		32	/* Volume size [sector] (4) */
 431:Core/Src/ff.c **** #define BS_DrvNum			36	/* Physical drive number (2) */
 432:Core/Src/ff.c **** #define BS_BootSig			38	/* Extended boot signature (1) */
 433:Core/Src/ff.c **** #define BS_VolID			39	/* Volume serial number (4) */
 434:Core/Src/ff.c **** #define BS_VolLab			43	/* Volume label (8) */
 435:Core/Src/ff.c **** #define BS_FilSysType		54	/* File system type (1) */
 436:Core/Src/ff.c **** #define BPB_FATSz32			36	/* FAT size [sector] (4) */
 437:Core/Src/ff.c **** #define BPB_ExtFlags		40	/* Extended flags (2) */
 438:Core/Src/ff.c **** #define BPB_FSVer			42	/* File system version (2) */
 439:Core/Src/ff.c **** #define BPB_RootClus		44	/* Root directory first cluster (4) */
 440:Core/Src/ff.c **** #define BPB_FSInfo			48	/* Offset of FSINFO sector (2) */
 441:Core/Src/ff.c **** #define BPB_BkBootSec		50	/* Offset of backup boot sector (2) */
 442:Core/Src/ff.c **** #define BS_DrvNum32			64	/* Physical drive number (2) */
 443:Core/Src/ff.c **** #define BS_BootSig32		66	/* Extended boot signature (1) */
 444:Core/Src/ff.c **** #define BS_VolID32			67	/* Volume serial number (4) */
 445:Core/Src/ff.c **** #define BS_VolLab32			71	/* Volume label (8) */
 446:Core/Src/ff.c **** #define BS_FilSysType32		82	/* File system type (1) */
 447:Core/Src/ff.c **** #define	FSI_LeadSig			0	/* FSI: Leading signature (4) */
 448:Core/Src/ff.c **** #define	FSI_StrucSig		484	/* FSI: Structure signature (4) */
 449:Core/Src/ff.c **** #define	FSI_Free_Count		488	/* FSI: Number of free clusters (4) */
 450:Core/Src/ff.c **** #define	FSI_Nxt_Free		492	/* FSI: Last allocated cluster (4) */
 451:Core/Src/ff.c **** #define MBR_Table			446	/* MBR: Partition table offset (2) */
 452:Core/Src/ff.c **** #define	SZ_PTE				16	/* MBR: Size of a partition table entry */
 453:Core/Src/ff.c **** #define BS_55AA				510	/* Boot sector signature (2) */
 454:Core/Src/ff.c **** 
 455:Core/Src/ff.c **** #define	DIR_Name			0	/* Short file name (11) */
 456:Core/Src/ff.c **** #define	DIR_Attr			11	/* Attribute (1) */
 457:Core/Src/ff.c **** #define	DIR_NTres			12	/* NT flag (1) */
 458:Core/Src/ff.c **** #define DIR_CrtTimeTenth	13	/* Created time sub-second (1) */
 459:Core/Src/ff.c **** #define	DIR_CrtTime			14	/* Created time (2) */
 460:Core/Src/ff.c **** #define	DIR_CrtDate			16	/* Created date (2) */
 461:Core/Src/ff.c **** #define DIR_LstAccDate		18	/* Last accessed date (2) */
 462:Core/Src/ff.c **** #define	DIR_FstClusHI		20	/* Higher 16-bit of first cluster (2) */
 463:Core/Src/ff.c **** #define	DIR_WrtTime			22	/* Modified time (2) */
 464:Core/Src/ff.c **** #define	DIR_WrtDate			24	/* Modified date (2) */
 465:Core/Src/ff.c **** #define	DIR_FstClusLO		26	/* Lower 16-bit of first cluster (2) */
 466:Core/Src/ff.c **** #define	DIR_FileSize		28	/* File size (4) */
 467:Core/Src/ff.c **** #define	LDIR_Ord			0	/* LFN entry order and LLE flag (1) */
 468:Core/Src/ff.c **** #define	LDIR_Attr			11	/* LFN attribute (1) */
 469:Core/Src/ff.c **** #define	LDIR_Type			12	/* LFN type (1) */
 470:Core/Src/ff.c **** #define	LDIR_Chksum			13	/* Sum of corresponding SFN entry */
 471:Core/Src/ff.c **** #define	LDIR_FstClusLO		26	/* Filled by zero (0) */
 472:Core/Src/ff.c **** #define	SZ_DIR				32		/* Size of a directory entry */
 473:Core/Src/ff.c **** #define	LLE					0x40	/* Last long entry flag in LDIR_Ord */
 474:Core/Src/ff.c **** #define	DDE					0xE5	/* Deleted directory entry mark in DIR_Name[0] */
 475:Core/Src/ff.c **** #define	NDDE				0x05	/* Replacement of the character collides with DDE */
 476:Core/Src/ff.c **** 
 477:Core/Src/ff.c **** 
 478:Core/Src/ff.c **** 
 479:Core/Src/ff.c **** 
 480:Core/Src/ff.c **** /*------------------------------------------------------------*/
 481:Core/Src/ff.c **** /* Module private work area                                   */
 482:Core/Src/ff.c **** /*------------------------------------------------------------*/
 483:Core/Src/ff.c **** /* Note that uninitialized variables with static duration are
 484:Core/Src/ff.c **** /  guaranteed zero/null as initial value. If not, either the
 485:Core/Src/ff.c **** /  compiler or start-up routine is out of ANSI-C standard.
 486:Core/Src/ff.c **** */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 10


 487:Core/Src/ff.c **** 
 488:Core/Src/ff.c **** #if _VOLUMES >= 1 || _VOLUMES <= 10
 489:Core/Src/ff.c **** static
 490:Core/Src/ff.c **** FATFS *FatFs[_VOLUMES];		/* Pointer to the file system objects (logical drives) */
 491:Core/Src/ff.c **** #else
 492:Core/Src/ff.c **** #error Number of volumes must be 1 to 10.
 493:Core/Src/ff.c **** #endif
 494:Core/Src/ff.c **** 
 495:Core/Src/ff.c **** static
 496:Core/Src/ff.c **** WORD Fsid;					/* File system mount ID */
 497:Core/Src/ff.c **** 
 498:Core/Src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
 499:Core/Src/ff.c **** static
 500:Core/Src/ff.c **** BYTE CurrVol;				/* Current drive */
 501:Core/Src/ff.c **** #endif
 502:Core/Src/ff.c **** 
 503:Core/Src/ff.c **** #if _FS_LOCK
 504:Core/Src/ff.c **** static
 505:Core/Src/ff.c **** FILESEM	Files[_FS_LOCK];	/* Open object lock semaphores */
 506:Core/Src/ff.c **** #endif
 507:Core/Src/ff.c **** 
 508:Core/Src/ff.c **** #if _USE_LFN == 0			/* No LFN feature */
 509:Core/Src/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]
 510:Core/Src/ff.c **** #define INIT_BUF(dobj)		(dobj).fn = sfn
 511:Core/Src/ff.c **** #define	FREE_BUF()
 512:Core/Src/ff.c **** 
 513:Core/Src/ff.c **** #elif _USE_LFN == 1			/* LFN feature with static working buffer */
 514:Core/Src/ff.c **** static
 515:Core/Src/ff.c **** WCHAR LfnBuf[_MAX_LFN+1];
 516:Core/Src/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]
 517:Core/Src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = LfnBuf; }
 518:Core/Src/ff.c **** #define	FREE_BUF()
 519:Core/Src/ff.c **** 
 520:Core/Src/ff.c **** #elif _USE_LFN == 2 		/* LFN feature with dynamic working buffer on the stack */
 521:Core/Src/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR lbuf[_MAX_LFN+1]
 522:Core/Src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = lbuf; }
 523:Core/Src/ff.c **** #define	FREE_BUF()
 524:Core/Src/ff.c **** 
 525:Core/Src/ff.c **** #elif _USE_LFN == 3 		/* LFN feature with dynamic working buffer on the heap */
 526:Core/Src/ff.c **** #define	DEF_NAMEBUF			BYTE sfn[12]; WCHAR *lfn
 527:Core/Src/ff.c **** #define INIT_BUF(dobj)		{ lfn = ff_memalloc((_MAX_LFN + 1) * 2); \
 528:Core/Src/ff.c **** 							  if (!lfn) LEAVE_FF((dobj).fs, FR_NOT_ENOUGH_CORE); \
 529:Core/Src/ff.c **** 							  (dobj).lfn = lfn;	(dobj).fn = sfn; }
 530:Core/Src/ff.c **** #define	FREE_BUF()			ff_memfree(lfn)
 531:Core/Src/ff.c **** 
 532:Core/Src/ff.c **** #else
 533:Core/Src/ff.c **** #error Wrong LFN configuration.
 534:Core/Src/ff.c **** #endif
 535:Core/Src/ff.c **** 
 536:Core/Src/ff.c **** 
 537:Core/Src/ff.c **** #ifdef _EXCVT
 538:Core/Src/ff.c **** static
 539:Core/Src/ff.c **** const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for extended characters */
 540:Core/Src/ff.c **** #endif
 541:Core/Src/ff.c **** 
 542:Core/Src/ff.c **** 
 543:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 11


 544:Core/Src/ff.c **** 
 545:Core/Src/ff.c **** 
 546:Core/Src/ff.c **** 
 547:Core/Src/ff.c **** /*--------------------------------------------------------------------------
 548:Core/Src/ff.c **** 
 549:Core/Src/ff.c ****    Module Private Functions
 550:Core/Src/ff.c **** 
 551:Core/Src/ff.c **** ---------------------------------------------------------------------------*/
 552:Core/Src/ff.c **** 
 553:Core/Src/ff.c **** 
 554:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 555:Core/Src/ff.c **** /* String functions                                                      */
 556:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 557:Core/Src/ff.c **** 
 558:Core/Src/ff.c **** /* Copy memory to memory */
 559:Core/Src/ff.c **** static
 560:Core/Src/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
  29              		.loc 1 560 53 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 561:Core/Src/ff.c **** 	BYTE *d = (BYTE*)dst;
  34              		.loc 1 561 2 view .LVU1
 562:Core/Src/ff.c **** 	const BYTE *s = (const BYTE*)src;
  35              		.loc 1 562 2 view .LVU2
 563:Core/Src/ff.c **** 
 564:Core/Src/ff.c **** #if _WORD_ACCESS == 1
 565:Core/Src/ff.c **** 	while (cnt >= sizeof (int)) {
 566:Core/Src/ff.c **** 		*(int*)d = *(int*)s;
 567:Core/Src/ff.c **** 		d += sizeof (int); s += sizeof (int);
 568:Core/Src/ff.c **** 		cnt -= sizeof (int);
 569:Core/Src/ff.c **** 	}
 570:Core/Src/ff.c **** #endif
 571:Core/Src/ff.c **** 	while (cnt--)
  36              		.loc 1 571 2 view .LVU3
  37              		.loc 1 571 8 is_stmt 0 view .LVU4
  38 0000 04E0     		b	.L2
  39              	.LVL1:
  40              	.L3:
 572:Core/Src/ff.c **** 		*d++ = *s++;
  41              		.loc 1 572 3 is_stmt 1 view .LVU5
  42              		.loc 1 572 10 is_stmt 0 view .LVU6
  43 0002 11F8012B 		ldrb	r2, [r1], #1	@ zero_extendqisi2
  44              	.LVL2:
  45              		.loc 1 572 8 view .LVU7
  46 0006 00F8012B 		strb	r2, [r0], #1
  47              	.LVL3:
 571:Core/Src/ff.c **** 		*d++ = *s++;
  48              		.loc 1 571 12 view .LVU8
  49 000a 1A46     		mov	r2, r3
  50              	.LVL4:
  51              	.L2:
 571:Core/Src/ff.c **** 		*d++ = *s++;
  52              		.loc 1 571 8 is_stmt 1 view .LVU9
 571:Core/Src/ff.c **** 		*d++ = *s++;
  53              		.loc 1 571 12 is_stmt 0 view .LVU10
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 12


  54 000c 531E     		subs	r3, r2, #1
  55              	.LVL5:
 571:Core/Src/ff.c **** 		*d++ = *s++;
  56              		.loc 1 571 8 view .LVU11
  57 000e 002A     		cmp	r2, #0
  58 0010 F7D1     		bne	.L3
 573:Core/Src/ff.c **** }
  59              		.loc 1 573 1 view .LVU12
  60 0012 7047     		bx	lr
  61              		.cfi_endproc
  62              	.LFE0:
  64              		.section	.text.mem_set,"ax",%progbits
  65              		.align	1
  66              		.syntax unified
  67              		.thumb
  68              		.thumb_func
  69              		.fpu fpv4-sp-d16
  71              	mem_set:
  72              	.LVL6:
  73              	.LFB1:
 574:Core/Src/ff.c **** 
 575:Core/Src/ff.c **** /* Fill memory */
 576:Core/Src/ff.c **** static
 577:Core/Src/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
  74              		.loc 1 577 45 is_stmt 1 view -0
  75              		.cfi_startproc
  76              		@ args = 0, pretend = 0, frame = 0
  77              		@ frame_needed = 0, uses_anonymous_args = 0
  78              		@ link register save eliminated.
 578:Core/Src/ff.c **** 	BYTE *d = (BYTE*)dst;
  79              		.loc 1 578 2 view .LVU14
 579:Core/Src/ff.c **** 
 580:Core/Src/ff.c **** 	while (cnt--)
  80              		.loc 1 580 2 view .LVU15
  81              		.loc 1 580 8 is_stmt 0 view .LVU16
  82 0000 02E0     		b	.L5
  83              	.LVL7:
  84              	.L6:
 581:Core/Src/ff.c **** 		*d++ = (BYTE)val;
  85              		.loc 1 581 3 is_stmt 1 view .LVU17
  86              		.loc 1 581 8 is_stmt 0 view .LVU18
  87 0002 00F8011B 		strb	r1, [r0], #1
  88              	.LVL8:
 580:Core/Src/ff.c **** 		*d++ = (BYTE)val;
  89              		.loc 1 580 12 view .LVU19
  90 0006 1A46     		mov	r2, r3
  91              	.LVL9:
  92              	.L5:
 580:Core/Src/ff.c **** 		*d++ = (BYTE)val;
  93              		.loc 1 580 8 is_stmt 1 view .LVU20
 580:Core/Src/ff.c **** 		*d++ = (BYTE)val;
  94              		.loc 1 580 12 is_stmt 0 view .LVU21
  95 0008 531E     		subs	r3, r2, #1
  96              	.LVL10:
 580:Core/Src/ff.c **** 		*d++ = (BYTE)val;
  97              		.loc 1 580 8 view .LVU22
  98 000a 002A     		cmp	r2, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 13


  99 000c F9D1     		bne	.L6
 582:Core/Src/ff.c **** }
 100              		.loc 1 582 1 view .LVU23
 101 000e 7047     		bx	lr
 102              		.cfi_endproc
 103              	.LFE1:
 105              		.section	.text.mem_cmp,"ax",%progbits
 106              		.align	1
 107              		.syntax unified
 108              		.thumb
 109              		.thumb_func
 110              		.fpu fpv4-sp-d16
 112              	mem_cmp:
 113              	.LVL11:
 114              	.LFB2:
 583:Core/Src/ff.c **** 
 584:Core/Src/ff.c **** /* Compare memory to memory */
 585:Core/Src/ff.c **** static
 586:Core/Src/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {
 115              		.loc 1 586 58 is_stmt 1 view -0
 116              		.cfi_startproc
 117              		@ args = 0, pretend = 0, frame = 0
 118              		@ frame_needed = 0, uses_anonymous_args = 0
 119              		@ link register save eliminated.
 120              		.loc 1 586 58 is_stmt 0 view .LVU25
 121 0000 10B4     		push	{r4}
 122              	.LCFI0:
 123              		.cfi_def_cfa_offset 4
 124              		.cfi_offset 4, -4
 125 0002 0346     		mov	r3, r0
 587:Core/Src/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 126              		.loc 1 587 2 is_stmt 1 view .LVU26
 127              	.LVL12:
 588:Core/Src/ff.c **** 	int r = 0;
 128              		.loc 1 588 2 view .LVU27
 589:Core/Src/ff.c **** 
 590:Core/Src/ff.c **** 	while (cnt-- && (r = *d++ - *s++) == 0) ;
 129              		.loc 1 590 2 view .LVU28
 588:Core/Src/ff.c **** 	int r = 0;
 130              		.loc 1 588 6 is_stmt 0 view .LVU29
 131 0004 0020     		movs	r0, #0
 132              	.LVL13:
 133              	.L9:
 134              		.loc 1 590 42 is_stmt 1 discriminator 2 view .LVU30
 135              		.loc 1 590 8 discriminator 2 view .LVU31
 136 0006 1446     		mov	r4, r2
 137              		.loc 1 590 12 is_stmt 0 discriminator 2 view .LVU32
 138 0008 013A     		subs	r2, r2, #1
 139              	.LVL14:
 140              		.loc 1 590 8 discriminator 2 view .LVU33
 141 000a 34B1     		cbz	r4, .L7
 142              	.LVL15:
 143              		.loc 1 590 23 discriminator 1 view .LVU34
 144 000c 13F8010B 		ldrb	r0, [r3], #1	@ zero_extendqisi2
 145              	.LVL16:
 146              		.loc 1 590 30 discriminator 1 view .LVU35
 147 0010 11F801CB 		ldrb	ip, [r1], #1	@ zero_extendqisi2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 14


 148              	.LVL17:
 149              		.loc 1 590 15 discriminator 1 view .LVU36
 150 0014 B0EB0C00 		subs	r0, r0, ip
 151              	.LVL18:
 152              		.loc 1 590 15 discriminator 1 view .LVU37
 153 0018 F5D0     		beq	.L9
 154              	.LVL19:
 155              	.L7:
 591:Core/Src/ff.c **** 	return r;
 592:Core/Src/ff.c **** }
 156              		.loc 1 592 1 view .LVU38
 157 001a 5DF8044B 		ldr	r4, [sp], #4
 158              	.LCFI1:
 159              		.cfi_restore 4
 160              		.cfi_def_cfa_offset 0
 161 001e 7047     		bx	lr
 162              		.cfi_endproc
 163              	.LFE2:
 165              		.section	.text.chk_chr,"ax",%progbits
 166              		.align	1
 167              		.syntax unified
 168              		.thumb
 169              		.thumb_func
 170              		.fpu fpv4-sp-d16
 172              	chk_chr:
 173              	.LVL20:
 174              	.LFB3:
 593:Core/Src/ff.c **** 
 594:Core/Src/ff.c **** /* Check if chr is contained in the string */
 595:Core/Src/ff.c **** static
 596:Core/Src/ff.c **** int chk_chr (const char* str, int chr) {
 175              		.loc 1 596 40 is_stmt 1 view -0
 176              		.cfi_startproc
 177              		@ args = 0, pretend = 0, frame = 0
 178              		@ frame_needed = 0, uses_anonymous_args = 0
 179              		@ link register save eliminated.
 180              		.loc 1 596 40 is_stmt 0 view .LVU40
 181 0000 0346     		mov	r3, r0
 597:Core/Src/ff.c **** 	while (*str && *str != chr) str++;
 182              		.loc 1 597 2 is_stmt 1 view .LVU41
 183              		.loc 1 597 8 is_stmt 0 view .LVU42
 184 0002 00E0     		b	.L13
 185              	.LVL21:
 186              	.L15:
 187              		.loc 1 597 30 is_stmt 1 discriminator 3 view .LVU43
 188              		.loc 1 597 33 is_stmt 0 discriminator 3 view .LVU44
 189 0004 0133     		adds	r3, r3, #1
 190              	.LVL22:
 191              	.L13:
 192              		.loc 1 597 8 is_stmt 1 discriminator 1 view .LVU45
 193              		.loc 1 597 9 is_stmt 0 discriminator 1 view .LVU46
 194 0006 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 195              		.loc 1 597 8 discriminator 1 view .LVU47
 196 0008 08B1     		cbz	r0, .L14
 197              		.loc 1 597 14 discriminator 2 view .LVU48
 198 000a 8842     		cmp	r0, r1
 199 000c FAD1     		bne	.L15
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 15


 200              	.L14:
 598:Core/Src/ff.c **** 	return *str;
 201              		.loc 1 598 2 is_stmt 1 view .LVU49
 599:Core/Src/ff.c **** }
 202              		.loc 1 599 1 is_stmt 0 view .LVU50
 203 000e 7047     		bx	lr
 204              		.cfi_endproc
 205              	.LFE3:
 207              		.section	.text.clmt_clust,"ax",%progbits
 208              		.align	1
 209              		.syntax unified
 210              		.thumb
 211              		.thumb_func
 212              		.fpu fpv4-sp-d16
 214              	clmt_clust:
 215              	.LVL23:
 216              	.LFB12:
 600:Core/Src/ff.c **** 
 601:Core/Src/ff.c **** 
 602:Core/Src/ff.c **** 
 603:Core/Src/ff.c **** 
 604:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 605:Core/Src/ff.c **** /* Request/Release grant to access the volume                            */
 606:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 607:Core/Src/ff.c **** #if _FS_REENTRANT
 608:Core/Src/ff.c **** static
 609:Core/Src/ff.c **** int lock_fs (
 610:Core/Src/ff.c **** 	FATFS* fs		/* File system object */
 611:Core/Src/ff.c **** )
 612:Core/Src/ff.c **** {
 613:Core/Src/ff.c **** 	return ff_req_grant(fs->sobj);
 614:Core/Src/ff.c **** }
 615:Core/Src/ff.c **** 
 616:Core/Src/ff.c **** 
 617:Core/Src/ff.c **** static
 618:Core/Src/ff.c **** void unlock_fs (
 619:Core/Src/ff.c **** 	FATFS* fs,		/* File system object */
 620:Core/Src/ff.c **** 	FRESULT res		/* Result code to be returned */
 621:Core/Src/ff.c **** )
 622:Core/Src/ff.c **** {
 623:Core/Src/ff.c **** 	if (fs &&
 624:Core/Src/ff.c **** 		res != FR_NOT_ENABLED &&
 625:Core/Src/ff.c **** 		res != FR_INVALID_DRIVE &&
 626:Core/Src/ff.c **** 		res != FR_INVALID_OBJECT &&
 627:Core/Src/ff.c **** 		res != FR_TIMEOUT) {
 628:Core/Src/ff.c **** 		ff_rel_grant(fs->sobj);
 629:Core/Src/ff.c **** 	}
 630:Core/Src/ff.c **** }
 631:Core/Src/ff.c **** #endif
 632:Core/Src/ff.c **** 
 633:Core/Src/ff.c **** 
 634:Core/Src/ff.c **** 
 635:Core/Src/ff.c **** 
 636:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 637:Core/Src/ff.c **** /* File lock control functions                                           */
 638:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 639:Core/Src/ff.c **** #if _FS_LOCK
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 16


 640:Core/Src/ff.c **** 
 641:Core/Src/ff.c **** static
 642:Core/Src/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
 643:Core/Src/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 644:Core/Src/ff.c **** 	int acc			/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 645:Core/Src/ff.c **** )
 646:Core/Src/ff.c **** {
 647:Core/Src/ff.c **** 	UINT i, be;
 648:Core/Src/ff.c **** 
 649:Core/Src/ff.c **** 	/* Search file semaphore table */
 650:Core/Src/ff.c **** 	for (i = be = 0; i < _FS_LOCK; i++) {
 651:Core/Src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 652:Core/Src/ff.c **** 			if (Files[i].fs == dp->fs &&	 	/* Check if the object matched with an open object */
 653:Core/Src/ff.c **** 				Files[i].clu == dp->sclust &&
 654:Core/Src/ff.c **** 				Files[i].idx == dp->index) break;
 655:Core/Src/ff.c **** 		} else {			/* Blank entry */
 656:Core/Src/ff.c **** 			be = 1;
 657:Core/Src/ff.c **** 		}
 658:Core/Src/ff.c **** 	}
 659:Core/Src/ff.c **** 	if (i == _FS_LOCK)	/* The object is not opened */
 660:Core/Src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 661:Core/Src/ff.c **** 
 662:Core/Src/ff.c **** 	/* The object has been opened. Reject any open against writing file and all write mode open */
 663:Core/Src/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 664:Core/Src/ff.c **** }
 665:Core/Src/ff.c **** 
 666:Core/Src/ff.c **** 
 667:Core/Src/ff.c **** static
 668:Core/Src/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new object */
 669:Core/Src/ff.c **** {
 670:Core/Src/ff.c **** 	UINT i;
 671:Core/Src/ff.c **** 
 672:Core/Src/ff.c **** 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 673:Core/Src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
 674:Core/Src/ff.c **** }
 675:Core/Src/ff.c **** 
 676:Core/Src/ff.c **** 
 677:Core/Src/ff.c **** static
 678:Core/Src/ff.c **** UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
 679:Core/Src/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 680:Core/Src/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 681:Core/Src/ff.c **** )
 682:Core/Src/ff.c **** {
 683:Core/Src/ff.c **** 	UINT i;
 684:Core/Src/ff.c **** 
 685:Core/Src/ff.c **** 
 686:Core/Src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
 687:Core/Src/ff.c **** 		if (Files[i].fs == dp->fs &&
 688:Core/Src/ff.c **** 			Files[i].clu == dp->sclust &&
 689:Core/Src/ff.c **** 			Files[i].idx == dp->index) break;
 690:Core/Src/ff.c **** 	}
 691:Core/Src/ff.c **** 
 692:Core/Src/ff.c **** 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
 693:Core/Src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 694:Core/Src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 695:Core/Src/ff.c **** 		Files[i].fs = dp->fs;
 696:Core/Src/ff.c **** 		Files[i].clu = dp->sclust;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 17


 697:Core/Src/ff.c **** 		Files[i].idx = dp->index;
 698:Core/Src/ff.c **** 		Files[i].ctr = 0;
 699:Core/Src/ff.c **** 	}
 700:Core/Src/ff.c **** 
 701:Core/Src/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 702:Core/Src/ff.c **** 
 703:Core/Src/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 704:Core/Src/ff.c **** 
 705:Core/Src/ff.c **** 	return i + 1;
 706:Core/Src/ff.c **** }
 707:Core/Src/ff.c **** 
 708:Core/Src/ff.c **** 
 709:Core/Src/ff.c **** static
 710:Core/Src/ff.c **** FRESULT dec_lock (	/* Decrement object open counter */
 711:Core/Src/ff.c **** 	UINT i			/* Semaphore index (1..) */
 712:Core/Src/ff.c **** )
 713:Core/Src/ff.c **** {
 714:Core/Src/ff.c **** 	WORD n;
 715:Core/Src/ff.c **** 	FRESULT res;
 716:Core/Src/ff.c **** 
 717:Core/Src/ff.c **** 
 718:Core/Src/ff.c **** 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
 719:Core/Src/ff.c **** 		n = Files[i].ctr;
 720:Core/Src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 721:Core/Src/ff.c **** 		if (n) n--;					/* Decrement read mode open count */
 722:Core/Src/ff.c **** 		Files[i].ctr = n;
 723:Core/Src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 724:Core/Src/ff.c **** 		res = FR_OK;
 725:Core/Src/ff.c **** 	} else {
 726:Core/Src/ff.c **** 		res = FR_INT_ERR;			/* Invalid index nunber */
 727:Core/Src/ff.c **** 	}
 728:Core/Src/ff.c **** 	return res;
 729:Core/Src/ff.c **** }
 730:Core/Src/ff.c **** 
 731:Core/Src/ff.c **** 
 732:Core/Src/ff.c **** static
 733:Core/Src/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 734:Core/Src/ff.c **** 	FATFS *fs
 735:Core/Src/ff.c **** )
 736:Core/Src/ff.c **** {
 737:Core/Src/ff.c **** 	UINT i;
 738:Core/Src/ff.c **** 
 739:Core/Src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {
 740:Core/Src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 741:Core/Src/ff.c **** 	}
 742:Core/Src/ff.c **** }
 743:Core/Src/ff.c **** #endif
 744:Core/Src/ff.c **** 
 745:Core/Src/ff.c **** 
 746:Core/Src/ff.c **** 
 747:Core/Src/ff.c **** 
 748:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 749:Core/Src/ff.c **** /* Move/Flush disk access window in the file system object               */
 750:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 751:Core/Src/ff.c **** #if !_FS_READONLY
 752:Core/Src/ff.c **** static
 753:Core/Src/ff.c **** FRESULT sync_window (
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 18


 754:Core/Src/ff.c **** 	FATFS* fs		/* File system object */
 755:Core/Src/ff.c **** )
 756:Core/Src/ff.c **** {
 757:Core/Src/ff.c **** 	DWORD wsect;
 758:Core/Src/ff.c **** 	UINT nf;
 759:Core/Src/ff.c **** 
 760:Core/Src/ff.c **** 
 761:Core/Src/ff.c **** 	if (fs->wflag) {	/* Write back the sector if it is dirty */
 762:Core/Src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 763:Core/Src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1))
 764:Core/Src/ff.c **** 			return FR_DISK_ERR;
 765:Core/Src/ff.c **** 		fs->wflag = 0;
 766:Core/Src/ff.c **** 		if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 767:Core/Src/ff.c **** 			for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 768:Core/Src/ff.c **** 				wsect += fs->fsize;
 769:Core/Src/ff.c **** 				disk_write(fs->drv, fs->win, wsect, 1);
 770:Core/Src/ff.c **** 			}
 771:Core/Src/ff.c **** 		}
 772:Core/Src/ff.c **** 	}
 773:Core/Src/ff.c **** 	return FR_OK;
 774:Core/Src/ff.c **** }
 775:Core/Src/ff.c **** #endif
 776:Core/Src/ff.c **** 
 777:Core/Src/ff.c **** 
 778:Core/Src/ff.c **** static
 779:Core/Src/ff.c **** FRESULT move_window (
 780:Core/Src/ff.c **** 	FATFS* fs,		/* File system object */
 781:Core/Src/ff.c **** 	DWORD sector	/* Sector number to make appearance in the fs->win[] */
 782:Core/Src/ff.c **** )
 783:Core/Src/ff.c **** {
 784:Core/Src/ff.c **** 	if (sector != fs->winsect) {	/* Changed current window */
 785:Core/Src/ff.c **** #if !_FS_READONLY
 786:Core/Src/ff.c **** 		if (sync_window(fs) != FR_OK)
 787:Core/Src/ff.c **** 			return FR_DISK_ERR;
 788:Core/Src/ff.c **** #endif
 789:Core/Src/ff.c **** 		if (disk_read(fs->drv, fs->win, sector, 1))
 790:Core/Src/ff.c **** 			return FR_DISK_ERR;
 791:Core/Src/ff.c **** 		fs->winsect = sector;
 792:Core/Src/ff.c **** 	}
 793:Core/Src/ff.c **** 
 794:Core/Src/ff.c **** 	return FR_OK;
 795:Core/Src/ff.c **** }
 796:Core/Src/ff.c **** 
 797:Core/Src/ff.c **** 
 798:Core/Src/ff.c **** 
 799:Core/Src/ff.c **** 
 800:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 801:Core/Src/ff.c **** /* Synchronize file system and strage device                             */
 802:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 803:Core/Src/ff.c **** #if !_FS_READONLY
 804:Core/Src/ff.c **** static
 805:Core/Src/ff.c **** FRESULT sync_fs (	/* FR_OK: successful, FR_DISK_ERR: failed */
 806:Core/Src/ff.c **** 	FATFS* fs		/* File system object */
 807:Core/Src/ff.c **** )
 808:Core/Src/ff.c **** {
 809:Core/Src/ff.c **** 	FRESULT res;
 810:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 19


 811:Core/Src/ff.c **** 
 812:Core/Src/ff.c **** 	res = sync_window(fs);
 813:Core/Src/ff.c **** 	if (res == FR_OK) {
 814:Core/Src/ff.c **** 		/* Update FSINFO sector if needed */
 815:Core/Src/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
 816:Core/Src/ff.c **** 			/* Create FSINFO structure */
 817:Core/Src/ff.c **** 			mem_set(fs->win, 0, SS(fs));
 818:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 819:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 820:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 821:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 822:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 823:Core/Src/ff.c **** 			/* Write it into the FSINFO sector */
 824:Core/Src/ff.c **** 			fs->winsect = fs->volbase + 1;
 825:Core/Src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 826:Core/Src/ff.c **** 			fs->fsi_flag = 0;
 827:Core/Src/ff.c **** 		}
 828:Core/Src/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 829:Core/Src/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
 830:Core/Src/ff.c **** 			res = FR_DISK_ERR;
 831:Core/Src/ff.c **** 	}
 832:Core/Src/ff.c **** 
 833:Core/Src/ff.c **** 	return res;
 834:Core/Src/ff.c **** }
 835:Core/Src/ff.c **** #endif
 836:Core/Src/ff.c **** 
 837:Core/Src/ff.c **** 
 838:Core/Src/ff.c **** 
 839:Core/Src/ff.c **** 
 840:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 841:Core/Src/ff.c **** /* Get sector# from cluster#                                             */
 842:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 843:Core/Src/ff.c **** 
 844:Core/Src/ff.c **** 
 845:Core/Src/ff.c **** DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
 846:Core/Src/ff.c **** 	FATFS* fs,		/* File system object */
 847:Core/Src/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 848:Core/Src/ff.c **** )
 849:Core/Src/ff.c **** {
 850:Core/Src/ff.c **** 	clst -= 2;
 851:Core/Src/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 852:Core/Src/ff.c **** 	return clst * fs->csize + fs->database;
 853:Core/Src/ff.c **** }
 854:Core/Src/ff.c **** 
 855:Core/Src/ff.c **** 
 856:Core/Src/ff.c **** 
 857:Core/Src/ff.c **** 
 858:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 859:Core/Src/ff.c **** /* FAT access - Read value of a FAT entry                                */
 860:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 861:Core/Src/ff.c **** 
 862:Core/Src/ff.c **** 
 863:Core/Src/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, Else:Cluster status */
 864:Core/Src/ff.c **** 	FATFS* fs,	/* File system object */
 865:Core/Src/ff.c **** 	DWORD clst	/* Cluster# to get the link information */
 866:Core/Src/ff.c **** )
 867:Core/Src/ff.c **** {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 20


 868:Core/Src/ff.c **** 	UINT wc, bc;
 869:Core/Src/ff.c **** 	BYTE *p;
 870:Core/Src/ff.c **** 
 871:Core/Src/ff.c **** 
 872:Core/Src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent)	/* Check range */
 873:Core/Src/ff.c **** 		return 1;
 874:Core/Src/ff.c **** 
 875:Core/Src/ff.c **** 	switch (fs->fs_type) {
 876:Core/Src/ff.c **** 	case FS_FAT12 :
 877:Core/Src/ff.c **** 		bc = (UINT)clst; bc += bc / 2;
 878:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 879:Core/Src/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 880:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 881:Core/Src/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 882:Core/Src/ff.c **** 		return clst & 1 ? wc >> 4 : (wc & 0xFFF);
 883:Core/Src/ff.c **** 
 884:Core/Src/ff.c **** 	case FS_FAT16 :
 885:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)))) break;
 886:Core/Src/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 887:Core/Src/ff.c **** 		return LD_WORD(p);
 888:Core/Src/ff.c **** 
 889:Core/Src/ff.c **** 	case FS_FAT32 :
 890:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)))) break;
 891:Core/Src/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 892:Core/Src/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 893:Core/Src/ff.c **** 
 894:Core/Src/ff.c **** 	default:
 895:Core/Src/ff.c **** 		return 1;
 896:Core/Src/ff.c **** 	}
 897:Core/Src/ff.c **** 
 898:Core/Src/ff.c **** 	return 0xFFFFFFFF;	/* An error occurred at the disk I/O layer */
 899:Core/Src/ff.c **** }
 900:Core/Src/ff.c **** 
 901:Core/Src/ff.c **** 
 902:Core/Src/ff.c **** 
 903:Core/Src/ff.c **** 
 904:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 905:Core/Src/ff.c **** /* FAT access - Change value of a FAT entry                              */
 906:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 907:Core/Src/ff.c **** #if !_FS_READONLY
 908:Core/Src/ff.c **** 
 909:Core/Src/ff.c **** FRESULT put_fat (
 910:Core/Src/ff.c **** 	FATFS* fs,	/* File system object */
 911:Core/Src/ff.c **** 	DWORD clst,	/* Cluster# to be changed in range of 2 to fs->n_fatent - 1 */
 912:Core/Src/ff.c **** 	DWORD val	/* New value to mark the cluster */
 913:Core/Src/ff.c **** )
 914:Core/Src/ff.c **** {
 915:Core/Src/ff.c **** 	UINT bc;
 916:Core/Src/ff.c **** 	BYTE *p;
 917:Core/Src/ff.c **** 	FRESULT res;
 918:Core/Src/ff.c **** 
 919:Core/Src/ff.c **** 
 920:Core/Src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 921:Core/Src/ff.c **** 		res = FR_INT_ERR;
 922:Core/Src/ff.c **** 
 923:Core/Src/ff.c **** 	} else {
 924:Core/Src/ff.c **** 		switch (fs->fs_type) {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 21


 925:Core/Src/ff.c **** 		case FS_FAT12 :
 926:Core/Src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
 927:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 928:Core/Src/ff.c **** 			if (res != FR_OK) break;
 929:Core/Src/ff.c **** 			p = &fs->win[bc % SS(fs)];
 930:Core/Src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 931:Core/Src/ff.c **** 			bc++;
 932:Core/Src/ff.c **** 			fs->wflag = 1;
 933:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 934:Core/Src/ff.c **** 			if (res != FR_OK) break;
 935:Core/Src/ff.c **** 			p = &fs->win[bc % SS(fs)];
 936:Core/Src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 937:Core/Src/ff.c **** 			break;
 938:Core/Src/ff.c **** 
 939:Core/Src/ff.c **** 		case FS_FAT16 :
 940:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 941:Core/Src/ff.c **** 			if (res != FR_OK) break;
 942:Core/Src/ff.c **** 			p = &fs->win[clst * 2 % SS(fs)];
 943:Core/Src/ff.c **** 			ST_WORD(p, (WORD)val);
 944:Core/Src/ff.c **** 			break;
 945:Core/Src/ff.c **** 
 946:Core/Src/ff.c **** 		case FS_FAT32 :
 947:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 948:Core/Src/ff.c **** 			if (res != FR_OK) break;
 949:Core/Src/ff.c **** 			p = &fs->win[clst * 4 % SS(fs)];
 950:Core/Src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 951:Core/Src/ff.c **** 			ST_DWORD(p, val);
 952:Core/Src/ff.c **** 			break;
 953:Core/Src/ff.c **** 
 954:Core/Src/ff.c **** 		default :
 955:Core/Src/ff.c **** 			res = FR_INT_ERR;
 956:Core/Src/ff.c **** 		}
 957:Core/Src/ff.c **** 		fs->wflag = 1;
 958:Core/Src/ff.c **** 	}
 959:Core/Src/ff.c **** 
 960:Core/Src/ff.c **** 	return res;
 961:Core/Src/ff.c **** }
 962:Core/Src/ff.c **** #endif /* !_FS_READONLY */
 963:Core/Src/ff.c **** 
 964:Core/Src/ff.c **** 
 965:Core/Src/ff.c **** 
 966:Core/Src/ff.c **** 
 967:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 968:Core/Src/ff.c **** /* FAT handling - Remove a cluster chain                                 */
 969:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
 970:Core/Src/ff.c **** #if !_FS_READONLY
 971:Core/Src/ff.c **** static
 972:Core/Src/ff.c **** FRESULT remove_chain (
 973:Core/Src/ff.c **** 	FATFS* fs,			/* File system object */
 974:Core/Src/ff.c **** 	DWORD clst			/* Cluster# to remove a chain from */
 975:Core/Src/ff.c **** )
 976:Core/Src/ff.c **** {
 977:Core/Src/ff.c **** 	FRESULT res;
 978:Core/Src/ff.c **** 	DWORD nxt;
 979:Core/Src/ff.c **** #if _USE_ERASE
 980:Core/Src/ff.c **** 	DWORD scl = clst, ecl = clst, rt[2];
 981:Core/Src/ff.c **** #endif
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 22


 982:Core/Src/ff.c **** 
 983:Core/Src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 984:Core/Src/ff.c **** 		res = FR_INT_ERR;
 985:Core/Src/ff.c **** 
 986:Core/Src/ff.c **** 	} else {
 987:Core/Src/ff.c **** 		res = FR_OK;
 988:Core/Src/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
 989:Core/Src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 990:Core/Src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 991:Core/Src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 992:Core/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 993:Core/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 994:Core/Src/ff.c **** 			if (res != FR_OK) break;
 995:Core/Src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
 996:Core/Src/ff.c **** 				fs->free_clust++;
 997:Core/Src/ff.c **** 				fs->fsi_flag |= 1;
 998:Core/Src/ff.c **** 			}
 999:Core/Src/ff.c **** #if _USE_ERASE
1000:Core/Src/ff.c **** 			if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1001:Core/Src/ff.c **** 				ecl = nxt;
1002:Core/Src/ff.c **** 			} else {				/* End of contiguous clusters */ 
1003:Core/Src/ff.c **** 				rt[0] = clust2sect(fs, scl);					/* Start sector */
1004:Core/Src/ff.c **** 				rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
1005:Core/Src/ff.c **** 				disk_ioctl(fs->drv, CTRL_ERASE_SECTOR, rt);		/* Erase the block */
1006:Core/Src/ff.c **** 				scl = ecl = nxt;
1007:Core/Src/ff.c **** 			}
1008:Core/Src/ff.c **** #endif
1009:Core/Src/ff.c **** 			clst = nxt;	/* Next cluster */
1010:Core/Src/ff.c **** 		}
1011:Core/Src/ff.c **** 	}
1012:Core/Src/ff.c **** 
1013:Core/Src/ff.c **** 	return res;
1014:Core/Src/ff.c **** }
1015:Core/Src/ff.c **** #endif
1016:Core/Src/ff.c **** 
1017:Core/Src/ff.c **** 
1018:Core/Src/ff.c **** 
1019:Core/Src/ff.c **** 
1020:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1021:Core/Src/ff.c **** /* FAT handling - Stretch or Create a cluster chain                      */
1022:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1023:Core/Src/ff.c **** #if !_FS_READONLY
1024:Core/Src/ff.c **** static
1025:Core/Src/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
1026:Core/Src/ff.c **** 	FATFS* fs,			/* File system object */
1027:Core/Src/ff.c **** 	DWORD clst			/* Cluster# to stretch. 0 means create a new chain. */
1028:Core/Src/ff.c **** )
1029:Core/Src/ff.c **** {
1030:Core/Src/ff.c **** 	DWORD cs, ncl, scl;
1031:Core/Src/ff.c **** 	FRESULT res;
1032:Core/Src/ff.c **** 
1033:Core/Src/ff.c **** 
1034:Core/Src/ff.c **** 	if (clst == 0) {		/* Create a new chain */
1035:Core/Src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
1036:Core/Src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
1037:Core/Src/ff.c **** 	}
1038:Core/Src/ff.c **** 	else {					/* Stretch the current chain */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 23


1039:Core/Src/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
1040:Core/Src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
1041:Core/Src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
1042:Core/Src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1043:Core/Src/ff.c **** 		scl = clst;
1044:Core/Src/ff.c **** 	}
1045:Core/Src/ff.c **** 
1046:Core/Src/ff.c **** 	ncl = scl;				/* Start cluster */
1047:Core/Src/ff.c **** 	for (;;) {
1048:Core/Src/ff.c **** 		ncl++;							/* Next cluster */
1049:Core/Src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
1050:Core/Src/ff.c **** 			ncl = 2;
1051:Core/Src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
1052:Core/Src/ff.c **** 		}
1053:Core/Src/ff.c **** 		cs = get_fat(fs, ncl);			/* Get the cluster status */
1054:Core/Src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
1055:Core/Src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
1056:Core/Src/ff.c **** 			return cs;
1057:Core/Src/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
1058:Core/Src/ff.c **** 	}
1059:Core/Src/ff.c **** 
1060:Core/Src/ff.c **** 	res = put_fat(fs, ncl, 0x0FFFFFFF);	/* Mark the new cluster "last link" */
1061:Core/Src/ff.c **** 	if (res == FR_OK && clst != 0) {
1062:Core/Src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
1063:Core/Src/ff.c **** 	}
1064:Core/Src/ff.c **** 	if (res == FR_OK) {
1065:Core/Src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
1066:Core/Src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
1067:Core/Src/ff.c **** 			fs->free_clust--;
1068:Core/Src/ff.c **** 			fs->fsi_flag |= 1;
1069:Core/Src/ff.c **** 		}
1070:Core/Src/ff.c **** 	} else {
1071:Core/Src/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
1072:Core/Src/ff.c **** 	}
1073:Core/Src/ff.c **** 
1074:Core/Src/ff.c **** 	return ncl;		/* Return new cluster number or error code */
1075:Core/Src/ff.c **** }
1076:Core/Src/ff.c **** #endif /* !_FS_READONLY */
1077:Core/Src/ff.c **** 
1078:Core/Src/ff.c **** 
1079:Core/Src/ff.c **** 
1080:Core/Src/ff.c **** 
1081:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1082:Core/Src/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1083:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1084:Core/Src/ff.c **** 
1085:Core/Src/ff.c **** #if _USE_FASTSEEK
1086:Core/Src/ff.c **** static
1087:Core/Src/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1088:Core/Src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1089:Core/Src/ff.c **** 	DWORD ofs		/* File offset to be converted to cluster# */
1090:Core/Src/ff.c **** )
1091:Core/Src/ff.c **** {
 217              		.loc 1 1091 1 is_stmt 1 view -0
 218              		.cfi_startproc
 219              		@ args = 0, pretend = 0, frame = 0
 220              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 24


 221              		@ link register save eliminated.
1092:Core/Src/ff.c **** 	DWORD cl, ncl, *tbl;
 222              		.loc 1 1092 2 view .LVU52
1093:Core/Src/ff.c **** 
1094:Core/Src/ff.c **** 
1095:Core/Src/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
 223              		.loc 1 1095 2 view .LVU53
 224              		.loc 1 1095 10 is_stmt 0 view .LVU54
 225 0000 436A     		ldr	r3, [r0, #36]
 226              		.loc 1 1095 6 view .LVU55
 227 0002 0433     		adds	r3, r3, #4
 228              	.LVL24:
1096:Core/Src/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
 229              		.loc 1 1096 2 is_stmt 1 view .LVU56
 230              		.loc 1 1096 11 is_stmt 0 view .LVU57
 231 0004 490A     		lsrs	r1, r1, #9
 232              	.LVL25:
 233              		.loc 1 1096 28 view .LVU58
 234 0006 0268     		ldr	r2, [r0]
 235              		.loc 1 1096 32 view .LVU59
 236 0008 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 237              		.loc 1 1096 5 view .LVU60
 238 000a B1FBF2F1 		udiv	r1, r1, r2
 239              	.LVL26:
 240              		.loc 1 1096 5 view .LVU61
 241 000e 01E0     		b	.L19
 242              	.LVL27:
 243              	.L20:
1097:Core/Src/ff.c **** 	for (;;) {
1098:Core/Src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
1099:Core/Src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
1100:Core/Src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
1101:Core/Src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 244              		.loc 1 1101 3 is_stmt 1 view .LVU62
 245              		.loc 1 1101 6 is_stmt 0 view .LVU63
 246 0010 091A     		subs	r1, r1, r0
 247              	.LVL28:
 248              		.loc 1 1101 14 is_stmt 1 view .LVU64
 249              		.loc 1 1101 17 is_stmt 0 view .LVU65
 250 0012 0833     		adds	r3, r3, #8
 251              	.LVL29:
1097:Core/Src/ff.c **** 	for (;;) {
 252              		.loc 1 1097 8 is_stmt 1 view .LVU66
 253              	.L19:
1097:Core/Src/ff.c **** 	for (;;) {
 254              		.loc 1 1097 2 view .LVU67
1098:Core/Src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 255              		.loc 1 1098 3 view .LVU68
1098:Core/Src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 256              		.loc 1 1098 7 is_stmt 0 view .LVU69
 257 0014 1868     		ldr	r0, [r3]
 258              	.LVL30:
1099:Core/Src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 259              		.loc 1 1099 3 is_stmt 1 view .LVU70
1099:Core/Src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 260              		.loc 1 1099 6 is_stmt 0 view .LVU71
 261 0016 18B1     		cbz	r0, .L16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 25


1100:Core/Src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 262              		.loc 1 1100 3 is_stmt 1 view .LVU72
1100:Core/Src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 263              		.loc 1 1100 6 is_stmt 0 view .LVU73
 264 0018 8142     		cmp	r1, r0
 265 001a F9D2     		bcs	.L20
1102:Core/Src/ff.c **** 	}
1103:Core/Src/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
 266              		.loc 1 1103 2 is_stmt 1 view .LVU74
 267              		.loc 1 1103 14 is_stmt 0 view .LVU75
 268 001c 5868     		ldr	r0, [r3, #4]
 269              	.LVL31:
 270              		.loc 1 1103 12 view .LVU76
 271 001e 0844     		add	r0, r0, r1
 272              	.L16:
1104:Core/Src/ff.c **** }
 273              		.loc 1 1104 1 view .LVU77
 274 0020 7047     		bx	lr
 275              		.cfi_endproc
 276              	.LFE12:
 278              		.section	.text.ld_clust,"ax",%progbits
 279              		.align	1
 280              		.syntax unified
 281              		.thumb
 282              		.thumb_func
 283              		.fpu fpv4-sp-d16
 285              	ld_clust:
 286              	.LVL32:
 287              	.LFB16:
1105:Core/Src/ff.c **** #endif	/* _USE_FASTSEEK */
1106:Core/Src/ff.c **** 
1107:Core/Src/ff.c **** 
1108:Core/Src/ff.c **** 
1109:Core/Src/ff.c **** 
1110:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1111:Core/Src/ff.c **** /* Directory handling - Set directory index                              */
1112:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1113:Core/Src/ff.c **** 
1114:Core/Src/ff.c **** //static,STATIC, 
1115:Core/Src/ff.c **** FRESULT dir_sdi (
1116:Core/Src/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1117:Core/Src/ff.c **** 	UINT idx		/* Index of directory table */
1118:Core/Src/ff.c **** )
1119:Core/Src/ff.c **** {
1120:Core/Src/ff.c **** 	DWORD clst, sect;
1121:Core/Src/ff.c **** 	UINT ic;
1122:Core/Src/ff.c **** 
1123:Core/Src/ff.c **** 
1124:Core/Src/ff.c **** 	dp->index = (WORD)idx;	/* Current index */
1125:Core/Src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
1126:Core/Src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
1127:Core/Src/ff.c **** 		return FR_INT_ERR;
1128:Core/Src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
1129:Core/Src/ff.c **** 		clst = dp->fs->dirbase;
1130:Core/Src/ff.c **** 
1131:Core/Src/ff.c **** 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
1132:Core/Src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 26


1133:Core/Src/ff.c **** 			return FR_INT_ERR;
1134:Core/Src/ff.c **** 		sect = dp->fs->dirbase;
1135:Core/Src/ff.c **** 	}
1136:Core/Src/ff.c **** 	else {				/* Dynamic table (root-directory in FAT32 or sub-directory) */
1137:Core/Src/ff.c **** 		ic = SS(dp->fs) / SZ_DIR * dp->fs->csize;	/* Entries per cluster */
1138:Core/Src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
1139:Core/Src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
1140:Core/Src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1141:Core/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
1142:Core/Src/ff.c **** 				return FR_INT_ERR;
1143:Core/Src/ff.c **** 			idx -= ic;
1144:Core/Src/ff.c **** 		}
1145:Core/Src/ff.c **** 		sect = clust2sect(dp->fs, clst);
1146:Core/Src/ff.c **** 	}
1147:Core/Src/ff.c **** 	dp->clust = clst;	/* Current cluster# */
1148:Core/Src/ff.c **** 	if (!sect) return FR_INT_ERR;
1149:Core/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIR);					/* Sector# of the directory entry */
1150:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (idx % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
1151:Core/Src/ff.c **** 
1152:Core/Src/ff.c **** 	return FR_OK;
1153:Core/Src/ff.c **** }
1154:Core/Src/ff.c **** 
1155:Core/Src/ff.c **** 
1156:Core/Src/ff.c **** 
1157:Core/Src/ff.c **** 
1158:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1159:Core/Src/ff.c **** /* Directory handling - Move directory table index next                  */
1160:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1161:Core/Src/ff.c **** 
1162:Core/Src/ff.c **** static
1163:Core/Src/ff.c **** FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
1164:Core/Src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1165:Core/Src/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1166:Core/Src/ff.c **** )
1167:Core/Src/ff.c **** {
1168:Core/Src/ff.c **** 	DWORD clst;
1169:Core/Src/ff.c **** 	UINT i;
1170:Core/Src/ff.c **** 
1171:Core/Src/ff.c **** 
1172:Core/Src/ff.c **** 	i = dp->index + 1;
1173:Core/Src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
1174:Core/Src/ff.c **** 		return FR_NO_FILE;
1175:Core/Src/ff.c **** 
1176:Core/Src/ff.c **** 	if (!(i % (SS(dp->fs) / SZ_DIR))) {	/* Sector changed? */
1177:Core/Src/ff.c **** 		dp->sect++;					/* Next sector */
1178:Core/Src/ff.c **** 
1179:Core/Src/ff.c **** 		if (!dp->clust) {		/* Static table */
1180:Core/Src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
1181:Core/Src/ff.c **** 				return FR_NO_FILE;
1182:Core/Src/ff.c **** 		}
1183:Core/Src/ff.c **** 		else {					/* Dynamic table */
1184:Core/Src/ff.c **** 			if (((i / (SS(dp->fs) / SZ_DIR)) & (dp->fs->csize - 1)) == 0) {	/* Cluster changed? */
1185:Core/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
1186:Core/Src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
1187:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1188:Core/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
1189:Core/Src/ff.c **** #if !_FS_READONLY
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 27


1190:Core/Src/ff.c **** 					UINT c;
1191:Core/Src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
1192:Core/Src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
1193:Core/Src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1194:Core/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
1195:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1196:Core/Src/ff.c **** 					/* Clean-up stretched table */
1197:Core/Src/ff.c **** 					if (sync_window(dp->fs)) return FR_DISK_ERR;/* Flush disk access window */
1198:Core/Src/ff.c **** 					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
1199:Core/Src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
1200:Core/Src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
1201:Core/Src/ff.c **** 						dp->fs->wflag = 1;
1202:Core/Src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
1203:Core/Src/ff.c **** 						dp->fs->winsect++;
1204:Core/Src/ff.c **** 					}
1205:Core/Src/ff.c **** 					dp->fs->winsect -= c;						/* Rewind window offset */
1206:Core/Src/ff.c **** #else
1207:Core/Src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT (this is to suppress warni
1208:Core/Src/ff.c **** 					return FR_NO_FILE;							/* Report EOT */
1209:Core/Src/ff.c **** #endif
1210:Core/Src/ff.c **** 				}
1211:Core/Src/ff.c **** 				dp->clust = clst;				/* Initialize data for new cluster */
1212:Core/Src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
1213:Core/Src/ff.c **** 			}
1214:Core/Src/ff.c **** 		}
1215:Core/Src/ff.c **** 	}
1216:Core/Src/ff.c **** 
1217:Core/Src/ff.c **** 	dp->index = (WORD)i;	/* Current index */
1218:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (i % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Current entry in the window */
1219:Core/Src/ff.c **** 
1220:Core/Src/ff.c **** 	return FR_OK;
1221:Core/Src/ff.c **** }
1222:Core/Src/ff.c **** 
1223:Core/Src/ff.c **** 
1224:Core/Src/ff.c **** 
1225:Core/Src/ff.c **** 
1226:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1227:Core/Src/ff.c **** /* Directory handling - Reserve directory entry                          */
1228:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1229:Core/Src/ff.c **** 
1230:Core/Src/ff.c **** #if !_FS_READONLY
1231:Core/Src/ff.c **** static
1232:Core/Src/ff.c **** FRESULT dir_alloc (
1233:Core/Src/ff.c **** 	DIR* dp,	/* Pointer to the directory object */
1234:Core/Src/ff.c **** 	UINT nent	/* Number of contiguous entries to allocate (1-21) */
1235:Core/Src/ff.c **** )
1236:Core/Src/ff.c **** {
1237:Core/Src/ff.c **** 	FRESULT res;
1238:Core/Src/ff.c **** 	UINT n;
1239:Core/Src/ff.c **** 
1240:Core/Src/ff.c **** 
1241:Core/Src/ff.c **** 	res = dir_sdi(dp, 0);
1242:Core/Src/ff.c **** 	if (res == FR_OK) {
1243:Core/Src/ff.c **** 		n = 0;
1244:Core/Src/ff.c **** 		do {
1245:Core/Src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1246:Core/Src/ff.c **** 			if (res != FR_OK) break;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 28


1247:Core/Src/ff.c **** 			if (dp->dir[0] == DDE || dp->dir[0] == 0) {	/* Is it a blank entry? */
1248:Core/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous entries is found */
1249:Core/Src/ff.c **** 			} else {
1250:Core/Src/ff.c **** 				n = 0;					/* Not a blank entry. Restart to search */
1251:Core/Src/ff.c **** 			}
1252:Core/Src/ff.c **** 			res = dir_next(dp, 1);		/* Next entry with table stretch enabled */
1253:Core/Src/ff.c **** 		} while (res == FR_OK);
1254:Core/Src/ff.c **** 	}
1255:Core/Src/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1256:Core/Src/ff.c **** 	return res;
1257:Core/Src/ff.c **** }
1258:Core/Src/ff.c **** #endif
1259:Core/Src/ff.c **** 
1260:Core/Src/ff.c **** 
1261:Core/Src/ff.c **** 
1262:Core/Src/ff.c **** 
1263:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1264:Core/Src/ff.c **** /* Directory handling - Load/Store start cluster number                  */
1265:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1266:Core/Src/ff.c **** 
1267:Core/Src/ff.c **** static
1268:Core/Src/ff.c **** DWORD ld_clust (
1269:Core/Src/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1270:Core/Src/ff.c **** 	BYTE* dir	/* Pointer to the directory entry */
1271:Core/Src/ff.c **** )
1272:Core/Src/ff.c **** {
 288              		.loc 1 1272 1 is_stmt 1 view -0
 289              		.cfi_startproc
 290              		@ args = 0, pretend = 0, frame = 0
 291              		@ frame_needed = 0, uses_anonymous_args = 0
 292              		@ link register save eliminated.
1273:Core/Src/ff.c **** 	DWORD cl;
 293              		.loc 1 1273 2 view .LVU79
1274:Core/Src/ff.c **** 
1275:Core/Src/ff.c **** 	cl = LD_WORD(dir+DIR_FstClusLO);
 294              		.loc 1 1275 2 view .LVU80
 295              		.loc 1 1275 7 is_stmt 0 view .LVU81
 296 0000 CA7E     		ldrb	r2, [r1, #27]	@ zero_extendqisi2
 297 0002 8B7E     		ldrb	r3, [r1, #26]	@ zero_extendqisi2
 298 0004 43EA0223 		orr	r3, r3, r2, lsl #8
 299              	.LVL33:
1276:Core/Src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 300              		.loc 1 1276 2 is_stmt 1 view .LVU82
 301              		.loc 1 1276 8 is_stmt 0 view .LVU83
 302 0008 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 303              		.loc 1 1276 5 view .LVU84
 304 000a 032A     		cmp	r2, #3
 305 000c 01D0     		beq	.L23
 306              	.LVL34:
 307              	.L21:
1277:Core/Src/ff.c **** 		cl |= (DWORD)LD_WORD(dir+DIR_FstClusHI) << 16;
1278:Core/Src/ff.c **** 
1279:Core/Src/ff.c **** 	return cl;
1280:Core/Src/ff.c **** }
 308              		.loc 1 1280 1 view .LVU85
 309 000e 1846     		mov	r0, r3
 310 0010 7047     		bx	lr
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 29


 311              	.LVL35:
 312              	.L23:
1277:Core/Src/ff.c **** 		cl |= (DWORD)LD_WORD(dir+DIR_FstClusHI) << 16;
 313              		.loc 1 1277 3 is_stmt 1 view .LVU86
1277:Core/Src/ff.c **** 		cl |= (DWORD)LD_WORD(dir+DIR_FstClusHI) << 16;
 314              		.loc 1 1277 16 is_stmt 0 view .LVU87
 315 0012 487D     		ldrb	r0, [r1, #21]	@ zero_extendqisi2
 316              	.LVL36:
1277:Core/Src/ff.c **** 		cl |= (DWORD)LD_WORD(dir+DIR_FstClusHI) << 16;
 317              		.loc 1 1277 16 view .LVU88
 318 0014 0A7D     		ldrb	r2, [r1, #20]	@ zero_extendqisi2
 319 0016 42EA0022 		orr	r2, r2, r0, lsl #8
1277:Core/Src/ff.c **** 		cl |= (DWORD)LD_WORD(dir+DIR_FstClusHI) << 16;
 320              		.loc 1 1277 6 view .LVU89
 321 001a 43EA0243 		orr	r3, r3, r2, lsl #16
 322              	.LVL37:
1279:Core/Src/ff.c **** }
 323              		.loc 1 1279 2 is_stmt 1 view .LVU90
1279:Core/Src/ff.c **** }
 324              		.loc 1 1279 9 is_stmt 0 view .LVU91
 325 001e F6E7     		b	.L21
 326              		.cfi_endproc
 327              	.LFE16:
 329              		.section	.text.st_clust,"ax",%progbits
 330              		.align	1
 331              		.syntax unified
 332              		.thumb
 333              		.thumb_func
 334              		.fpu fpv4-sp-d16
 336              	st_clust:
 337              	.LVL38:
 338              	.LFB17:
1281:Core/Src/ff.c **** 
1282:Core/Src/ff.c **** 
1283:Core/Src/ff.c **** #if !_FS_READONLY
1284:Core/Src/ff.c **** static
1285:Core/Src/ff.c **** void st_clust (
1286:Core/Src/ff.c **** 	BYTE* dir,	/* Pointer to the directory entry */
1287:Core/Src/ff.c **** 	DWORD cl	/* Value to be set */
1288:Core/Src/ff.c **** )
1289:Core/Src/ff.c **** {
 339              		.loc 1 1289 1 is_stmt 1 view -0
 340              		.cfi_startproc
 341              		@ args = 0, pretend = 0, frame = 0
 342              		@ frame_needed = 0, uses_anonymous_args = 0
 343              		@ link register save eliminated.
1290:Core/Src/ff.c **** 	ST_WORD(dir+DIR_FstClusLO, cl);
 344              		.loc 1 1290 2 view .LVU93
 345 0000 8176     		strb	r1, [r0, #26]
 346              		.loc 1 1290 2 view .LVU94
 347 0002 C1F30723 		ubfx	r3, r1, #8, #8
 348 0006 C376     		strb	r3, [r0, #27]
1291:Core/Src/ff.c **** 	ST_WORD(dir+DIR_FstClusHI, cl >> 16);
 349              		.loc 1 1291 2 view .LVU95
 350 0008 C1F30743 		ubfx	r3, r1, #16, #8
 351 000c 0375     		strb	r3, [r0, #20]
 352              		.loc 1 1291 2 view .LVU96
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 30


 353 000e 090E     		lsrs	r1, r1, #24
 354              	.LVL39:
 355              		.loc 1 1291 2 is_stmt 0 view .LVU97
 356 0010 4175     		strb	r1, [r0, #21]
1292:Core/Src/ff.c **** }
 357              		.loc 1 1292 1 view .LVU98
 358 0012 7047     		bx	lr
 359              		.cfi_endproc
 360              	.LFE17:
 362              		.section	.text.pick_lfn,"ax",%progbits
 363              		.align	1
 364              		.syntax unified
 365              		.thumb
 366              		.thumb_func
 367              		.fpu fpv4-sp-d16
 369              	pick_lfn:
 370              	.LVL40:
 371              	.LFB19:
1293:Core/Src/ff.c **** #endif
1294:Core/Src/ff.c **** 
1295:Core/Src/ff.c **** 
1296:Core/Src/ff.c **** 
1297:Core/Src/ff.c **** 
1298:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1299:Core/Src/ff.c **** /* LFN handling - Test/Pick/Fit an LFN segment from/to directory entry   */
1300:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1301:Core/Src/ff.c **** #if _USE_LFN
1302:Core/Src/ff.c **** static
1303:Core/Src/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the direc
1304:Core/Src/ff.c **** 
1305:Core/Src/ff.c **** 
1306:Core/Src/ff.c **** static
1307:Core/Src/ff.c **** int cmp_lfn (			/* 1:Matched, 0:Not matched */
1308:Core/Src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN to be compared */
1309:Core/Src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry containing a part of LFN */
1310:Core/Src/ff.c **** )
1311:Core/Src/ff.c **** {
1312:Core/Src/ff.c **** 	UINT i, s;
1313:Core/Src/ff.c **** 	WCHAR wc, uc;
1314:Core/Src/ff.c **** 
1315:Core/Src/ff.c **** 
1316:Core/Src/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLE) - 1) * 13;	/* Get offset in the LFN buffer */
1317:Core/Src/ff.c **** 	s = 0; wc = 1;
1318:Core/Src/ff.c **** 	do {
1319:Core/Src/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);	/* Pick an LFN character from the entry */
1320:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1321:Core/Src/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
1322:Core/Src/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
1323:Core/Src/ff.c **** 				return 0;				/* Not matched */
1324:Core/Src/ff.c **** 		} else {
1325:Core/Src/ff.c **** 			if (uc != 0xFFFF) return 0;	/* Check filler */
1326:Core/Src/ff.c **** 		}
1327:Core/Src/ff.c **** 	} while (++s < 13);				/* Repeat until all characters in the entry are checked */
1328:Core/Src/ff.c **** 
1329:Core/Src/ff.c **** 	if ((dir[LDIR_Ord] & LLE) && wc && lfnbuf[i])	/* Last segment matched but different length */
1330:Core/Src/ff.c **** 		return 0;
1331:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 31


1332:Core/Src/ff.c **** 	return 1;						/* The part of LFN matched */
1333:Core/Src/ff.c **** }
1334:Core/Src/ff.c **** 
1335:Core/Src/ff.c **** 
1336:Core/Src/ff.c **** 
1337:Core/Src/ff.c **** static
1338:Core/Src/ff.c **** int pick_lfn (			/* 1:Succeeded, 0:Buffer overflow */
1339:Core/Src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the Unicode-LFN buffer */
1340:Core/Src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry */
1341:Core/Src/ff.c **** )
1342:Core/Src/ff.c **** {
 372              		.loc 1 1342 1 is_stmt 1 view -0
 373              		.cfi_startproc
 374              		@ args = 0, pretend = 0, frame = 0
 375              		@ frame_needed = 0, uses_anonymous_args = 0
 376              		.loc 1 1342 1 is_stmt 0 view .LVU100
 377 0000 30B5     		push	{r4, r5, lr}
 378              	.LCFI2:
 379              		.cfi_def_cfa_offset 12
 380              		.cfi_offset 4, -12
 381              		.cfi_offset 5, -8
 382              		.cfi_offset 14, -4
1343:Core/Src/ff.c **** 	UINT i, s;
 383              		.loc 1 1343 2 is_stmt 1 view .LVU101
1344:Core/Src/ff.c **** 	WCHAR wc, uc;
 384              		.loc 1 1344 2 view .LVU102
1345:Core/Src/ff.c **** 
1346:Core/Src/ff.c **** 
1347:Core/Src/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
 385              		.loc 1 1347 2 view .LVU103
 386              		.loc 1 1347 11 is_stmt 0 view .LVU104
 387 0002 91F800E0 		ldrb	lr, [r1]	@ zero_extendqisi2
 388              		.loc 1 1347 22 view .LVU105
 389 0006 0EF03F0E 		and	lr, lr, #63
 390              		.loc 1 1347 30 view .LVU106
 391 000a 0EF1FF3E 		add	lr, lr, #-1
 392              		.loc 1 1347 35 view .LVU107
 393 000e 0EEB4E03 		add	r3, lr, lr, lsl #1
 394              		.loc 1 1347 4 view .LVU108
 395 0012 0EEB830E 		add	lr, lr, r3, lsl #2
 396              	.LVL41:
1348:Core/Src/ff.c **** 
1349:Core/Src/ff.c **** 	s = 0; wc = 1;
 397              		.loc 1 1349 2 is_stmt 1 view .LVU109
 398              		.loc 1 1349 9 view .LVU110
 399              		.loc 1 1349 12 is_stmt 0 view .LVU111
 400 0016 0125     		movs	r5, #1
 401              		.loc 1 1349 4 view .LVU112
 402 0018 0022     		movs	r2, #0
 403 001a 06E0     		b	.L29
 404              	.LVL42:
 405              	.L26:
1350:Core/Src/ff.c **** 	do {
1351:Core/Src/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);		/* Pick an LFN character from the entry */
1352:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1353:Core/Src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1354:Core/Src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 32


1355:Core/Src/ff.c **** 		} else {
1356:Core/Src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
 406              		.loc 1 1356 4 is_stmt 1 view .LVU113
 407              		.loc 1 1356 7 is_stmt 0 view .LVU114
 408 001c 4FF6FF74 		movw	r4, #65535
 409 0020 A342     		cmp	r3, r4
 410 0022 25D1     		bne	.L31
 411              	.LVL43:
 412              	.L28:
1357:Core/Src/ff.c **** 		}
1358:Core/Src/ff.c **** 	} while (++s < 13);						/* Read all character in the entry */
 413              		.loc 1 1358 10 is_stmt 1 view .LVU115
 414              		.loc 1 1358 2 is_stmt 0 view .LVU116
 415 0024 0132     		adds	r2, r2, #1
 416              	.LVL44:
 417              		.loc 1 1358 2 view .LVU117
 418 0026 0C2A     		cmp	r2, #12
 419 0028 14D8     		bhi	.L35
 420              	.LVL45:
 421              	.L29:
1350:Core/Src/ff.c **** 	do {
 422              		.loc 1 1350 2 is_stmt 1 view .LVU118
1351:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
 423              		.loc 1 1351 3 view .LVU119
1351:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
 424              		.loc 1 1351 8 is_stmt 0 view .LVU120
 425 002a 144B     		ldr	r3, .L36
 426 002c 13F802C0 		ldrb	ip, [r3, r2]	@ zero_extendqisi2
 427 0030 0CF10103 		add	r3, ip, #1
 428 0034 CC5C     		ldrb	r4, [r1, r3]	@ zero_extendqisi2
 429 0036 11F80C30 		ldrb	r3, [r1, ip]	@ zero_extendqisi2
1351:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
 430              		.loc 1 1351 6 view .LVU121
 431 003a 43EA0423 		orr	r3, r3, r4, lsl #8
 432              	.LVL46:
1352:Core/Src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 433              		.loc 1 1352 3 is_stmt 1 view .LVU122
1352:Core/Src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
 434              		.loc 1 1352 6 is_stmt 0 view .LVU123
 435 003e 002D     		cmp	r5, #0
 436 0040 ECD0     		beq	.L26
1353:Core/Src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 437              		.loc 1 1353 4 is_stmt 1 view .LVU124
1353:Core/Src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 438              		.loc 1 1353 7 is_stmt 0 view .LVU125
 439 0042 BEF1FE0F 		cmp	lr, #254
 440 0046 11D8     		bhi	.L30
1354:Core/Src/ff.c **** 		} else {
 441              		.loc 1 1354 4 is_stmt 1 view .LVU126
 442              	.LVL47:
1354:Core/Src/ff.c **** 		} else {
 443              		.loc 1 1354 16 is_stmt 0 view .LVU127
 444 0048 20F81E30 		strh	r3, [r0, lr, lsl #1]	@ movhi
1354:Core/Src/ff.c **** 		} else {
 445              		.loc 1 1354 21 view .LVU128
 446 004c 1D46     		mov	r5, r3
1354:Core/Src/ff.c **** 		} else {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 33


 447              		.loc 1 1354 12 view .LVU129
 448 004e 0EF1010E 		add	lr, lr, #1
 449              	.LVL48:
1354:Core/Src/ff.c **** 		} else {
 450              		.loc 1 1354 12 view .LVU130
 451 0052 E7E7     		b	.L28
 452              	.LVL49:
 453              	.L35:
1359:Core/Src/ff.c **** 
1360:Core/Src/ff.c **** 	if (dir[LDIR_Ord] & LLE) {				/* Put terminator if it is the last LFN part */
 454              		.loc 1 1360 2 is_stmt 1 view .LVU131
 455              		.loc 1 1360 9 is_stmt 0 view .LVU132
 456 0054 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 457              	.LVL50:
 458              		.loc 1 1360 5 view .LVU133
 459 0056 13F0400F 		tst	r3, #64
 460 005a 0BD0     		beq	.L32
1361:Core/Src/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
 461              		.loc 1 1361 3 is_stmt 1 view .LVU134
 462              		.loc 1 1361 6 is_stmt 0 view .LVU135
 463 005c BEF1FE0F 		cmp	lr, #254
 464 0060 0AD8     		bhi	.L33
1362:Core/Src/ff.c **** 		lfnbuf[i] = 0;
 465              		.loc 1 1362 3 is_stmt 1 view .LVU136
 466              		.loc 1 1362 13 is_stmt 0 view .LVU137
 467 0062 0023     		movs	r3, #0
 468 0064 20F81E30 		strh	r3, [r0, lr, lsl #1]	@ movhi
1363:Core/Src/ff.c **** 	}
1364:Core/Src/ff.c **** 
1365:Core/Src/ff.c **** 	return 1;
 469              		.loc 1 1365 9 view .LVU138
 470 0068 0120     		movs	r0, #1
 471              	.LVL51:
 472              		.loc 1 1365 9 view .LVU139
 473 006a 04E0     		b	.L25
 474              	.LVL52:
 475              	.L30:
1353:Core/Src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 476              		.loc 1 1353 30 view .LVU140
 477 006c 0020     		movs	r0, #0
 478              	.LVL53:
1353:Core/Src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
 479              		.loc 1 1353 30 view .LVU141
 480 006e 02E0     		b	.L25
 481              	.LVL54:
 482              	.L31:
1356:Core/Src/ff.c **** 		}
 483              		.loc 1 1356 29 view .LVU142
 484 0070 0020     		movs	r0, #0
 485              	.LVL55:
1356:Core/Src/ff.c **** 		}
 486              		.loc 1 1356 29 view .LVU143
 487 0072 00E0     		b	.L25
 488              	.LVL56:
 489              	.L32:
 490              		.loc 1 1365 9 view .LVU144
 491 0074 0120     		movs	r0, #1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 34


 492              	.LVL57:
 493              	.L25:
1366:Core/Src/ff.c **** }
 494              		.loc 1 1366 1 view .LVU145
 495 0076 30BD     		pop	{r4, r5, pc}
 496              	.LVL58:
 497              	.L33:
1361:Core/Src/ff.c **** 		lfnbuf[i] = 0;
 498              		.loc 1 1361 29 view .LVU146
 499 0078 0020     		movs	r0, #0
 500              	.LVL59:
1361:Core/Src/ff.c **** 		lfnbuf[i] = 0;
 501              		.loc 1 1361 29 view .LVU147
 502 007a FCE7     		b	.L25
 503              	.L37:
 504              		.align	2
 505              	.L36:
 506 007c 00000000 		.word	.LANCHOR0
 507              		.cfi_endproc
 508              	.LFE19:
 510              		.section	.text.fit_lfn,"ax",%progbits
 511              		.align	1
 512              		.syntax unified
 513              		.thumb
 514              		.thumb_func
 515              		.fpu fpv4-sp-d16
 517              	fit_lfn:
 518              	.LVL60:
 519              	.LFB20:
1367:Core/Src/ff.c **** 
1368:Core/Src/ff.c **** 
1369:Core/Src/ff.c **** #if !_FS_READONLY
1370:Core/Src/ff.c **** static
1371:Core/Src/ff.c **** void fit_lfn (
1372:Core/Src/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN buffer */
1373:Core/Src/ff.c **** 	BYTE* dir,				/* Pointer to the directory entry */
1374:Core/Src/ff.c **** 	BYTE ord,				/* LFN order (1-20) */
1375:Core/Src/ff.c **** 	BYTE sum				/* SFN sum */
1376:Core/Src/ff.c **** )
1377:Core/Src/ff.c **** {
 520              		.loc 1 1377 1 is_stmt 1 view -0
 521              		.cfi_startproc
 522              		@ args = 0, pretend = 0, frame = 0
 523              		@ frame_needed = 0, uses_anonymous_args = 0
 524              		.loc 1 1377 1 is_stmt 0 view .LVU149
 525 0000 30B5     		push	{r4, r5, lr}
 526              	.LCFI3:
 527              		.cfi_def_cfa_offset 12
 528              		.cfi_offset 4, -12
 529              		.cfi_offset 5, -8
 530              		.cfi_offset 14, -4
1378:Core/Src/ff.c **** 	UINT i, s;
 531              		.loc 1 1378 2 is_stmt 1 view .LVU150
1379:Core/Src/ff.c **** 	WCHAR wc;
 532              		.loc 1 1379 2 view .LVU151
1380:Core/Src/ff.c **** 
1381:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 35


1382:Core/Src/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set check sum */
 533              		.loc 1 1382 2 view .LVU152
 534              		.loc 1 1382 19 is_stmt 0 view .LVU153
 535 0002 4B73     		strb	r3, [r1, #13]
1383:Core/Src/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
 536              		.loc 1 1383 2 is_stmt 1 view .LVU154
 537              		.loc 1 1383 17 is_stmt 0 view .LVU155
 538 0004 0F23     		movs	r3, #15
 539              	.LVL61:
 540              		.loc 1 1383 17 view .LVU156
 541 0006 CB72     		strb	r3, [r1, #11]
1384:Core/Src/ff.c **** 	dir[LDIR_Type] = 0;
 542              		.loc 1 1384 2 is_stmt 1 view .LVU157
 543              		.loc 1 1384 17 is_stmt 0 view .LVU158
 544 0008 4FF0000E 		mov	lr, #0
 545 000c 81F80CE0 		strb	lr, [r1, #12]
1385:Core/Src/ff.c **** 	ST_WORD(dir+LDIR_FstClusLO, 0);
 546              		.loc 1 1385 2 is_stmt 1 view .LVU159
 547 0010 81F81AE0 		strb	lr, [r1, #26]
 548              		.loc 1 1385 2 view .LVU160
 549 0014 81F81BE0 		strb	lr, [r1, #27]
1386:Core/Src/ff.c **** 
1387:Core/Src/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
 550              		.loc 1 1387 2 view .LVU161
 551              		.loc 1 1387 11 is_stmt 0 view .LVU162
 552 0018 541E     		subs	r4, r2, #1
 553              		.loc 1 1387 16 view .LVU163
 554 001a 04EB4403 		add	r3, r4, r4, lsl #1
 555              		.loc 1 1387 4 view .LVU164
 556 001e 04EB8304 		add	r4, r4, r3, lsl #2
 557              	.LVL62:
1388:Core/Src/ff.c **** 	s = wc = 0;
 558              		.loc 1 1388 2 is_stmt 1 view .LVU165
 559              		.loc 1 1388 9 is_stmt 0 view .LVU166
 560 0022 7346     		mov	r3, lr
 561 0024 04E0     		b	.L41
 562              	.LVL63:
 563              	.L40:
1389:Core/Src/ff.c **** 	do {
1390:Core/Src/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective character */
1391:Core/Src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
1392:Core/Src/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
1393:Core/Src/ff.c **** 	} while (++s < 13);
 564              		.loc 1 1393 10 is_stmt 1 view .LVU167
 565              		.loc 1 1393 2 is_stmt 0 view .LVU168
 566 0026 0EF1010E 		add	lr, lr, #1
 567              	.LVL64:
 568              		.loc 1 1393 2 view .LVU169
 569 002a BEF10C0F 		cmp	lr, #12
 570 002e 15D8     		bhi	.L46
 571              	.LVL65:
 572              	.L41:
1389:Core/Src/ff.c **** 	do {
 573              		.loc 1 1389 2 is_stmt 1 view .LVU170
1390:Core/Src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 574              		.loc 1 1390 3 view .LVU171
1390:Core/Src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 36


 575              		.loc 1 1390 6 is_stmt 0 view .LVU172
 576 0030 4FF6FF75 		movw	r5, #65535
 577 0034 AB42     		cmp	r3, r5
 578 0036 02D0     		beq	.L39
1390:Core/Src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 579              		.loc 1 1390 21 is_stmt 1 discriminator 1 view .LVU173
 580              	.LVL66:
1390:Core/Src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 581              		.loc 1 1390 24 is_stmt 0 discriminator 1 view .LVU174
 582 0038 30F81430 		ldrh	r3, [r0, r4, lsl #1]
 583              	.LVL67:
1390:Core/Src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
 584              		.loc 1 1390 34 discriminator 1 view .LVU175
 585 003c 0134     		adds	r4, r4, #1
 586              	.LVL68:
 587              	.L39:
1391:Core/Src/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
 588              		.loc 1 1391 3 is_stmt 1 view .LVU176
 589 003e 0D4D     		ldr	r5, .L47
 590 0040 15F80EC0 		ldrb	ip, [r5, lr]	@ zero_extendqisi2
 591 0044 01F80C30 		strb	r3, [r1, ip]
1391:Core/Src/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
 592              		.loc 1 1391 3 view .LVU177
 593 0048 0CF1010C 		add	ip, ip, #1
 594 004c 1D0A     		lsrs	r5, r3, #8
 595 004e 01F80C50 		strb	r5, [r1, ip]
1392:Core/Src/ff.c **** 	} while (++s < 13);
 596              		.loc 1 1392 3 view .LVU178
1392:Core/Src/ff.c **** 	} while (++s < 13);
 597              		.loc 1 1392 6 is_stmt 0 view .LVU179
 598 0052 002B     		cmp	r3, #0
 599 0054 E7D1     		bne	.L40
1392:Core/Src/ff.c **** 	} while (++s < 13);
 600              		.loc 1 1392 15 view .LVU180
 601 0056 4FF6FF73 		movw	r3, #65535
 602              	.LVL69:
1392:Core/Src/ff.c **** 	} while (++s < 13);
 603              		.loc 1 1392 15 view .LVU181
 604 005a E4E7     		b	.L40
 605              	.LVL70:
 606              	.L46:
1394:Core/Src/ff.c **** 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLE;	/* Bottom LFN part is the start of LFN sequence */
 607              		.loc 1 1394 2 is_stmt 1 view .LVU182
 608              		.loc 1 1394 5 is_stmt 0 view .LVU183
 609 005c 4FF6FF75 		movw	r5, #65535
 610 0060 AB42     		cmp	r3, r5
 611 0062 02D0     		beq	.L42
 612              		.loc 1 1394 29 discriminator 2 view .LVU184
 613 0064 30F81430 		ldrh	r3, [r0, r4, lsl #1]
 614              	.LVL71:
 615              		.loc 1 1394 19 discriminator 2 view .LVU185
 616 0068 0BB9     		cbnz	r3, .L43
 617              	.L42:
 618              		.loc 1 1394 34 is_stmt 1 discriminator 3 view .LVU186
 619              		.loc 1 1394 38 is_stmt 0 discriminator 3 view .LVU187
 620 006a 42F04002 		orr	r2, r2, #64
 621              	.LVL72:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 37


 622              	.L43:
1395:Core/Src/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
 623              		.loc 1 1395 2 is_stmt 1 view .LVU188
 624              		.loc 1 1395 16 is_stmt 0 view .LVU189
 625 006e 0A70     		strb	r2, [r1]
1396:Core/Src/ff.c **** }
 626              		.loc 1 1396 1 view .LVU190
 627 0070 30BD     		pop	{r4, r5, pc}
 628              	.LVL73:
 629              	.L48:
 630              		.loc 1 1396 1 view .LVU191
 631 0072 00BF     		.align	2
 632              	.L47:
 633 0074 00000000 		.word	.LANCHOR0
 634              		.cfi_endproc
 635              	.LFE20:
 637              		.section	.text.gen_numname,"ax",%progbits
 638              		.align	1
 639              		.syntax unified
 640              		.thumb
 641              		.thumb_func
 642              		.fpu fpv4-sp-d16
 644              	gen_numname:
 645              	.LVL74:
 646              	.LFB21:
1397:Core/Src/ff.c **** 
1398:Core/Src/ff.c **** #endif
1399:Core/Src/ff.c **** #endif
1400:Core/Src/ff.c **** 
1401:Core/Src/ff.c **** 
1402:Core/Src/ff.c **** 
1403:Core/Src/ff.c **** 
1404:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1405:Core/Src/ff.c **** /* Create numbered name                                                  */
1406:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1407:Core/Src/ff.c **** #if _USE_LFN
1408:Core/Src/ff.c **** static
1409:Core/Src/ff.c **** void gen_numname (
1410:Core/Src/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1411:Core/Src/ff.c **** 	const BYTE* src,	/* Pointer to SFN */
1412:Core/Src/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
1413:Core/Src/ff.c **** 	UINT seq			/* Sequence number */
1414:Core/Src/ff.c **** )
1415:Core/Src/ff.c **** {
 647              		.loc 1 1415 1 is_stmt 1 view -0
 648              		.cfi_startproc
 649              		@ args = 0, pretend = 0, frame = 8
 650              		@ frame_needed = 0, uses_anonymous_args = 0
 651              		.loc 1 1415 1 is_stmt 0 view .LVU193
 652 0000 70B5     		push	{r4, r5, r6, lr}
 653              	.LCFI4:
 654              		.cfi_def_cfa_offset 16
 655              		.cfi_offset 4, -16
 656              		.cfi_offset 5, -12
 657              		.cfi_offset 6, -8
 658              		.cfi_offset 14, -4
 659 0002 82B0     		sub	sp, sp, #8
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 38


 660              	.LCFI5:
 661              		.cfi_def_cfa_offset 24
 662 0004 0546     		mov	r5, r0
 663 0006 1646     		mov	r6, r2
 664 0008 1C46     		mov	r4, r3
1416:Core/Src/ff.c **** 	BYTE ns[8], c;
 665              		.loc 1 1416 2 is_stmt 1 view .LVU194
1417:Core/Src/ff.c **** 	UINT i, j;
 666              		.loc 1 1417 2 view .LVU195
1418:Core/Src/ff.c **** 
1419:Core/Src/ff.c **** 
1420:Core/Src/ff.c **** 	mem_cpy(dst, src, 11);
 667              		.loc 1 1420 2 view .LVU196
 668 000a 0B22     		movs	r2, #11
 669              	.LVL75:
 670              		.loc 1 1420 2 is_stmt 0 view .LVU197
 671 000c FFF7FEFF 		bl	mem_cpy
 672              	.LVL76:
1421:Core/Src/ff.c **** 
1422:Core/Src/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
 673              		.loc 1 1422 2 is_stmt 1 view .LVU198
 674              		.loc 1 1422 5 is_stmt 0 view .LVU199
 675 0010 052C     		cmp	r4, #5
 676 0012 11D8     		bhi	.L50
 677              	.LVL77:
 678              	.L51:
 679              	.LBB2:
1423:Core/Src/ff.c **** 		WCHAR wc;
1424:Core/Src/ff.c **** 		DWORD sr = seq;
1425:Core/Src/ff.c **** 
1426:Core/Src/ff.c **** 		while (*lfn) {	/* Create a CRC */
1427:Core/Src/ff.c **** 			wc = *lfn++;
1428:Core/Src/ff.c **** 			for (i = 0; i < 16; i++) {
 680              		.loc 1 1428 11 view .LVU200
 681 0014 0720     		movs	r0, #7
 682 0016 1FE0     		b	.L57
 683              	.LVL78:
 684              	.L53:
 685              		.loc 1 1428 24 is_stmt 1 discriminator 2 view .LVU201
 686              		.loc 1 1428 25 is_stmt 0 discriminator 2 view .LVU202
 687 0018 0131     		adds	r1, r1, #1
 688              	.LVL79:
 689              	.L52:
 690              		.loc 1 1428 16 is_stmt 1 discriminator 1 view .LVU203
 691              		.loc 1 1428 4 is_stmt 0 discriminator 1 view .LVU204
 692 001a 0F29     		cmp	r1, #15
 693 001c 0CD8     		bhi	.L50
1429:Core/Src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 694              		.loc 1 1429 5 is_stmt 1 view .LVU205
 695              		.loc 1 1429 26 is_stmt 0 view .LVU206
 696 001e 03F0010C 		and	ip, r3, #1
 697              		.loc 1 1429 8 view .LVU207
 698 0022 0CEB4404 		add	r4, ip, r4, lsl #1
 699              	.LVL80:
1430:Core/Src/ff.c **** 				wc >>= 1;
 700              		.loc 1 1430 5 is_stmt 1 view .LVU208
 701              		.loc 1 1430 8 is_stmt 0 view .LVU209
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 39


 702 0026 5B08     		lsrs	r3, r3, #1
 703              	.LVL81:
1431:Core/Src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
 704              		.loc 1 1431 5 is_stmt 1 view .LVU210
 705              		.loc 1 1431 8 is_stmt 0 view .LVU211
 706 0028 14F4803F 		tst	r4, #65536
 707 002c F4D0     		beq	.L53
 708              		.loc 1 1431 23 is_stmt 1 discriminator 1 view .LVU212
 709              		.loc 1 1431 26 is_stmt 0 discriminator 1 view .LVU213
 710 002e 84F48834 		eor	r4, r4, #69632
 711              	.LVL82:
 712              		.loc 1 1431 26 discriminator 1 view .LVU214
 713 0032 84F02104 		eor	r4, r4, #33
 714              	.LVL83:
 715              		.loc 1 1431 26 discriminator 1 view .LVU215
 716 0036 EFE7     		b	.L53
 717              	.LVL84:
 718              	.L50:
1426:Core/Src/ff.c **** 			wc = *lfn++;
 719              		.loc 1 1426 9 is_stmt 1 view .LVU216
1426:Core/Src/ff.c **** 			wc = *lfn++;
 720              		.loc 1 1426 10 is_stmt 0 view .LVU217
 721 0038 3388     		ldrh	r3, [r6]
1426:Core/Src/ff.c **** 			wc = *lfn++;
 722              		.loc 1 1426 9 view .LVU218
 723 003a 002B     		cmp	r3, #0
 724 003c EAD0     		beq	.L51
1427:Core/Src/ff.c **** 			for (i = 0; i < 16; i++) {
 725              		.loc 1 1427 4 is_stmt 1 view .LVU219
1427:Core/Src/ff.c **** 			for (i = 0; i < 16; i++) {
 726              		.loc 1 1427 13 is_stmt 0 view .LVU220
 727 003e 0236     		adds	r6, r6, #2
 728              	.LVL85:
1428:Core/Src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 729              		.loc 1 1428 4 is_stmt 1 view .LVU221
1428:Core/Src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 730              		.loc 1 1428 11 is_stmt 0 view .LVU222
 731 0040 0021     		movs	r1, #0
1428:Core/Src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 732              		.loc 1 1428 4 view .LVU223
 733 0042 EAE7     		b	.L52
 734              	.LVL86:
 735              	.L56:
1428:Core/Src/ff.c **** 				sr = (sr << 1) + (wc & 1);
 736              		.loc 1 1428 4 view .LVU224
 737              	.LBE2:
1432:Core/Src/ff.c **** 			}
1433:Core/Src/ff.c **** 		}
1434:Core/Src/ff.c **** 		seq = (UINT)sr;
1435:Core/Src/ff.c **** 	}
1436:Core/Src/ff.c **** 
1437:Core/Src/ff.c **** 	/* itoa (hexdecimal) */
1438:Core/Src/ff.c **** 	i = 7;
1439:Core/Src/ff.c **** 	do {
1440:Core/Src/ff.c **** 		c = (seq % 16) + '0';
1441:Core/Src/ff.c **** 		if (c > '9') c += 7;
1442:Core/Src/ff.c **** 		ns[i--] = c;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 40


 738              		.loc 1 1442 3 is_stmt 1 view .LVU225
 739              		.loc 1 1442 7 is_stmt 0 view .LVU226
 740 0044 411E     		subs	r1, r0, #1
 741              	.LVL87:
 742              		.loc 1 1442 11 view .LVU227
 743 0046 02AA     		add	r2, sp, #8
 744 0048 0244     		add	r2, r2, r0
 745 004a 02F8083C 		strb	r3, [r2, #-8]
1443:Core/Src/ff.c **** 		seq /= 16;
 746              		.loc 1 1443 3 is_stmt 1 view .LVU228
 747              		.loc 1 1443 7 is_stmt 0 view .LVU229
 748 004e 2309     		lsrs	r3, r4, #4
 749              	.LVL88:
1444:Core/Src/ff.c **** 	} while (seq);
 750              		.loc 1 1444 10 is_stmt 1 view .LVU230
 751              		.loc 1 1444 2 is_stmt 0 view .LVU231
 752 0050 0F2C     		cmp	r4, #15
 753 0052 0AD9     		bls	.L68
1442:Core/Src/ff.c **** 		seq /= 16;
 754              		.loc 1 1442 7 view .LVU232
 755 0054 0846     		mov	r0, r1
1443:Core/Src/ff.c **** 		seq /= 16;
 756              		.loc 1 1443 7 view .LVU233
 757 0056 1C46     		mov	r4, r3
 758              	.LVL89:
 759              	.L57:
1439:Core/Src/ff.c **** 		c = (seq % 16) + '0';
 760              		.loc 1 1439 2 is_stmt 1 view .LVU234
1440:Core/Src/ff.c **** 		if (c > '9') c += 7;
 761              		.loc 1 1440 3 view .LVU235
1440:Core/Src/ff.c **** 		if (c > '9') c += 7;
 762              		.loc 1 1440 12 is_stmt 0 view .LVU236
 763 0058 04F00F02 		and	r2, r4, #15
1440:Core/Src/ff.c **** 		if (c > '9') c += 7;
 764              		.loc 1 1440 5 view .LVU237
 765 005c 02F13003 		add	r3, r2, #48
 766              	.LVL90:
1441:Core/Src/ff.c **** 		ns[i--] = c;
 767              		.loc 1 1441 3 is_stmt 1 view .LVU238
1441:Core/Src/ff.c **** 		ns[i--] = c;
 768              		.loc 1 1441 6 is_stmt 0 view .LVU239
 769 0060 392B     		cmp	r3, #57
 770 0062 EFD9     		bls	.L56
1441:Core/Src/ff.c **** 		ns[i--] = c;
 771              		.loc 1 1441 16 is_stmt 1 discriminator 1 view .LVU240
1441:Core/Src/ff.c **** 		ns[i--] = c;
 772              		.loc 1 1441 18 is_stmt 0 discriminator 1 view .LVU241
 773 0064 02F13703 		add	r3, r2, #55
 774              	.LVL91:
1441:Core/Src/ff.c **** 		ns[i--] = c;
 775              		.loc 1 1441 18 discriminator 1 view .LVU242
 776 0068 ECE7     		b	.L56
 777              	.LVL92:
 778              	.L68:
1445:Core/Src/ff.c **** 	ns[i] = '~';
 779              		.loc 1 1445 2 is_stmt 1 view .LVU243
 780              		.loc 1 1445 8 is_stmt 0 view .LVU244
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 41


 781 006a 7E22     		movs	r2, #126
 782              	.LVL93:
 783              		.loc 1 1445 8 view .LVU245
 784 006c 02AB     		add	r3, sp, #8
 785              	.LVL94:
 786              		.loc 1 1445 8 view .LVU246
 787 006e 0B44     		add	r3, r3, r1
 788              	.LVL95:
 789              		.loc 1 1445 8 view .LVU247
 790 0070 03F8082C 		strb	r2, [r3, #-8]
 791              	.LVL96:
1446:Core/Src/ff.c **** 
1447:Core/Src/ff.c **** 	/* Append the number */
1448:Core/Src/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
 792              		.loc 1 1448 2 is_stmt 1 view .LVU248
 793              		.loc 1 1448 9 is_stmt 0 view .LVU249
 794 0074 0023     		movs	r3, #0
 795              		.loc 1 1448 2 view .LVU250
 796 0076 00E0     		b	.L58
 797              	.LVL97:
 798              	.L59:
 799              		.loc 1 1448 38 is_stmt 1 discriminator 2 view .LVU251
 800              		.loc 1 1448 39 is_stmt 0 discriminator 2 view .LVU252
 801 0078 0133     		adds	r3, r3, #1
 802              	.LVL98:
 803              	.L58:
 804              		.loc 1 1448 14 is_stmt 1 discriminator 1 view .LVU253
 805              		.loc 1 1448 2 is_stmt 0 discriminator 1 view .LVU254
 806 007a 8B42     		cmp	r3, r1
 807 007c 11D2     		bcs	.L63
 808              		.loc 1 1448 26 discriminator 3 view .LVU255
 809 007e EA5C     		ldrb	r2, [r5, r3]	@ zero_extendqisi2
 810              		.loc 1 1448 20 discriminator 3 view .LVU256
 811 0080 202A     		cmp	r2, #32
 812 0082 0ED0     		beq	.L63
1449:Core/Src/ff.c **** 		if (IsDBCS1(dst[j])) {
 813              		.loc 1 1449 3 is_stmt 1 view .LVU257
 814              		.loc 1 1449 7 is_stmt 0 view .LVU258
 815 0084 7F32     		adds	r2, r2, #127
 816 0086 D2B2     		uxtb	r2, r2
 817              		.loc 1 1449 6 view .LVU259
 818 0088 7D2A     		cmp	r2, #125
 819 008a F5D8     		bhi	.L59
1450:Core/Src/ff.c **** 			if (j == i - 1) break;
 820              		.loc 1 1450 4 is_stmt 1 view .LVU260
 821              		.loc 1 1450 15 is_stmt 0 view .LVU261
 822 008c 821E     		subs	r2, r0, #2
 823              		.loc 1 1450 7 view .LVU262
 824 008e 9A42     		cmp	r2, r3
 825 0090 07D0     		beq	.L63
1451:Core/Src/ff.c **** 			j++;
 826              		.loc 1 1451 4 is_stmt 1 view .LVU263
 827              		.loc 1 1451 5 is_stmt 0 view .LVU264
 828 0092 0133     		adds	r3, r3, #1
 829              	.LVL99:
 830              		.loc 1 1451 5 view .LVU265
 831 0094 F0E7     		b	.L59
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 42


 832              	.L65:
1452:Core/Src/ff.c **** 		}
1453:Core/Src/ff.c **** 	}
1454:Core/Src/ff.c **** 	do {
1455:Core/Src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 833              		.loc 1 1455 12 view .LVU266
 834 0096 2020     		movs	r0, #32
 835              	.L62:
 836              		.loc 1 1455 8 discriminator 4 view .LVU267
 837 0098 5A1C     		adds	r2, r3, #1
 838              	.LVL100:
 839              		.loc 1 1455 12 discriminator 4 view .LVU268
 840 009a E854     		strb	r0, [r5, r3]
1456:Core/Src/ff.c **** 	} while (j < 8);
 841              		.loc 1 1456 10 is_stmt 1 discriminator 4 view .LVU269
 842              		.loc 1 1456 2 is_stmt 0 discriminator 4 view .LVU270
 843 009c 072A     		cmp	r2, #7
 844 009e 08D8     		bhi	.L69
1455:Core/Src/ff.c **** 	} while (j < 8);
 845              		.loc 1 1455 8 view .LVU271
 846 00a0 1346     		mov	r3, r2
 847              	.LVL101:
 848              	.L63:
1454:Core/Src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
 849              		.loc 1 1454 2 is_stmt 1 view .LVU272
1455:Core/Src/ff.c **** 	} while (j < 8);
 850              		.loc 1 1455 3 view .LVU273
1455:Core/Src/ff.c **** 	} while (j < 8);
 851              		.loc 1 1455 12 is_stmt 0 view .LVU274
 852 00a2 0729     		cmp	r1, #7
 853 00a4 F7D8     		bhi	.L65
 854              	.LVL102:
1455:Core/Src/ff.c **** 	} while (j < 8);
 855              		.loc 1 1455 12 discriminator 1 view .LVU275
 856 00a6 02AA     		add	r2, sp, #8
 857 00a8 0A44     		add	r2, r2, r1
 858 00aa 12F8080C 		ldrb	r0, [r2, #-8]	@ zero_extendqisi2
1455:Core/Src/ff.c **** 	} while (j < 8);
 859              		.loc 1 1455 28 discriminator 1 view .LVU276
 860 00ae 0131     		adds	r1, r1, #1
 861              	.LVL103:
1455:Core/Src/ff.c **** 	} while (j < 8);
 862              		.loc 1 1455 28 discriminator 1 view .LVU277
 863 00b0 F2E7     		b	.L62
 864              	.LVL104:
 865              	.L69:
1457:Core/Src/ff.c **** }
 866              		.loc 1 1457 1 view .LVU278
 867 00b2 02B0     		add	sp, sp, #8
 868              	.LCFI6:
 869              		.cfi_def_cfa_offset 16
 870              		@ sp needed
 871 00b4 70BD     		pop	{r4, r5, r6, pc}
 872              		.loc 1 1457 1 view .LVU279
 873              		.cfi_endproc
 874              	.LFE21:
 876              		.section	.text.sum_sfn,"ax",%progbits
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 43


 877              		.align	1
 878              		.syntax unified
 879              		.thumb
 880              		.thumb_func
 881              		.fpu fpv4-sp-d16
 883              	sum_sfn:
 884              	.LVL105:
 885              	.LFB22:
1458:Core/Src/ff.c **** #endif
1459:Core/Src/ff.c **** 
1460:Core/Src/ff.c **** 
1461:Core/Src/ff.c **** 
1462:Core/Src/ff.c **** 
1463:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1464:Core/Src/ff.c **** /* Calculate sum of an SFN                                               */
1465:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1466:Core/Src/ff.c **** #if _USE_LFN
1467:Core/Src/ff.c **** static
1468:Core/Src/ff.c **** BYTE sum_sfn (
1469:Core/Src/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
1470:Core/Src/ff.c **** )
1471:Core/Src/ff.c **** {
 886              		.loc 1 1471 1 is_stmt 1 view -0
 887              		.cfi_startproc
 888              		@ args = 0, pretend = 0, frame = 0
 889              		@ frame_needed = 0, uses_anonymous_args = 0
 890              		@ link register save eliminated.
 891              		.loc 1 1471 1 is_stmt 0 view .LVU281
 892 0000 0146     		mov	r1, r0
1472:Core/Src/ff.c **** 	BYTE sum = 0;
 893              		.loc 1 1472 2 is_stmt 1 view .LVU282
 894              	.LVL106:
1473:Core/Src/ff.c **** 	UINT n = 11;
 895              		.loc 1 1473 2 view .LVU283
 896              		.loc 1 1473 7 is_stmt 0 view .LVU284
 897 0002 4FF00B0C 		mov	ip, #11
1472:Core/Src/ff.c **** 	BYTE sum = 0;
 898              		.loc 1 1472 7 view .LVU285
 899 0006 0020     		movs	r0, #0
 900              	.LVL107:
 901              	.L71:
1474:Core/Src/ff.c **** 
1475:Core/Src/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
 902              		.loc 1 1475 2 is_stmt 1 discriminator 1 view .LVU286
 903              		.loc 1 1475 5 discriminator 1 view .LVU287
 904              		.loc 1 1475 22 is_stmt 0 discriminator 1 view .LVU288
 905 0008 C301     		lsls	r3, r0, #7
 906 000a 43EA5003 		orr	r3, r3, r0, lsr #1
 907              		.loc 1 1475 37 discriminator 1 view .LVU289
 908 000e 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 909              	.LVL108:
 910              		.loc 1 1475 37 discriminator 1 view .LVU290
 911 0010 0131     		adds	r1, r1, #1
 912              	.LVL109:
 913              		.loc 1 1475 9 discriminator 1 view .LVU291
 914 0012 50FA83F3 		uxtab	r3, r0, r3
 915 0016 D8B2     		uxtb	r0, r3
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 44


 916              	.LVL110:
 917              		.loc 1 1475 51 is_stmt 1 discriminator 1 view .LVU292
 918              		.loc 1 1475 2 is_stmt 0 discriminator 1 view .LVU293
 919 0018 BCF1010C 		subs	ip, ip, #1
 920              	.LVL111:
 921              		.loc 1 1475 2 discriminator 1 view .LVU294
 922 001c F4D1     		bne	.L71
1476:Core/Src/ff.c **** 	return sum;
 923              		.loc 1 1476 2 is_stmt 1 view .LVU295
1477:Core/Src/ff.c **** }
 924              		.loc 1 1477 1 is_stmt 0 view .LVU296
 925 001e 7047     		bx	lr
 926              		.cfi_endproc
 927              	.LFE22:
 929              		.section	.text.get_ldnumber,"ax",%progbits
 930              		.align	1
 931              		.syntax unified
 932              		.thumb
 933              		.thumb_func
 934              		.fpu fpv4-sp-d16
 936              	get_ldnumber:
 937              	.LVL112:
 938              	.LFB30:
1478:Core/Src/ff.c **** #endif
1479:Core/Src/ff.c **** 
1480:Core/Src/ff.c **** 
1481:Core/Src/ff.c **** 
1482:Core/Src/ff.c **** 
1483:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1484:Core/Src/ff.c **** /* Directory handling - Find an object in the directory                  */
1485:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1486:Core/Src/ff.c **** 
1487:Core/Src/ff.c **** static
1488:Core/Src/ff.c **** FRESULT dir_find (
1489:Core/Src/ff.c **** 	DIR* dp			/* Pointer to the directory object linked to the file name */
1490:Core/Src/ff.c **** )
1491:Core/Src/ff.c **** {
1492:Core/Src/ff.c **** 	FRESULT res;
1493:Core/Src/ff.c **** 	BYTE c, *dir;
1494:Core/Src/ff.c **** #if _USE_LFN
1495:Core/Src/ff.c **** 	BYTE a, ord, sum;
1496:Core/Src/ff.c **** #endif
1497:Core/Src/ff.c **** 
1498:Core/Src/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
1499:Core/Src/ff.c **** 	if (res != FR_OK) return res;
1500:Core/Src/ff.c **** 
1501:Core/Src/ff.c **** #if _USE_LFN
1502:Core/Src/ff.c **** 	ord = sum = 0xFF;
1503:Core/Src/ff.c **** #endif
1504:Core/Src/ff.c **** 	do {
1505:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1506:Core/Src/ff.c **** 		if (res != FR_OK) break;
1507:Core/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1508:Core/Src/ff.c **** 		c = dir[DIR_Name];
1509:Core/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1510:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1511:Core/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 45


1512:Core/Src/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
1513:Core/Src/ff.c **** 			ord = 0xFF;
1514:Core/Src/ff.c **** 		} else {
1515:Core/Src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1516:Core/Src/ff.c **** 				if (dp->lfn) {
1517:Core/Src/ff.c **** 					if (c & LLE) {		/* Is it start of LFN sequence? */
1518:Core/Src/ff.c **** 						sum = dir[LDIR_Chksum];
1519:Core/Src/ff.c **** 						c &= ~LLE; ord = c;	/* LFN start order */
1520:Core/Src/ff.c **** 						dp->lfn_idx = dp->index;
1521:Core/Src/ff.c **** 					}
1522:Core/Src/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
1523:Core/Src/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1524:Core/Src/ff.c **** 				}
1525:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
1526:Core/Src/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
1527:Core/Src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1528:Core/Src/ff.c **** 				if (!(dp->fn[NS] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
1529:Core/Src/ff.c **** 			}
1530:Core/Src/ff.c **** 		}
1531:Core/Src/ff.c **** #else		/* Non LFN configuration */
1532:Core/Src/ff.c **** 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dp->fn, 11)) /* Is it a valid entry? */
1533:Core/Src/ff.c **** 			break;
1534:Core/Src/ff.c **** #endif
1535:Core/Src/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
1536:Core/Src/ff.c **** 	} while (res == FR_OK);
1537:Core/Src/ff.c **** 
1538:Core/Src/ff.c **** 	return res;
1539:Core/Src/ff.c **** }
1540:Core/Src/ff.c **** 
1541:Core/Src/ff.c **** 
1542:Core/Src/ff.c **** 
1543:Core/Src/ff.c **** 
1544:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1545:Core/Src/ff.c **** /* Read an object from the directory                                     */
1546:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1547:Core/Src/ff.c **** #if _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2
1548:Core/Src/ff.c **** static
1549:Core/Src/ff.c **** FRESULT dir_read (
1550:Core/Src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1551:Core/Src/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
1552:Core/Src/ff.c **** )
1553:Core/Src/ff.c **** {
1554:Core/Src/ff.c **** 	FRESULT res;
1555:Core/Src/ff.c **** 	BYTE a, c, *dir;
1556:Core/Src/ff.c **** #if _USE_LFN
1557:Core/Src/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
1558:Core/Src/ff.c **** #endif
1559:Core/Src/ff.c **** 
1560:Core/Src/ff.c **** 	res = FR_NO_FILE;
1561:Core/Src/ff.c **** 	while (dp->sect) {
1562:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1563:Core/Src/ff.c **** 		if (res != FR_OK) break;
1564:Core/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1565:Core/Src/ff.c **** 		c = dir[DIR_Name];
1566:Core/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1567:Core/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1568:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 46


1569:Core/Src/ff.c **** 		if (c == DDE || (!_FS_RPATH && c == '.') || (int)(a == AM_VOL) != vol) {	/* An entry without vali
1570:Core/Src/ff.c **** 			ord = 0xFF;
1571:Core/Src/ff.c **** 		} else {
1572:Core/Src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1573:Core/Src/ff.c **** 				if (c & LLE) {			/* Is it start of LFN sequence? */
1574:Core/Src/ff.c **** 					sum = dir[LDIR_Chksum];
1575:Core/Src/ff.c **** 					c &= ~LLE; ord = c;
1576:Core/Src/ff.c **** 					dp->lfn_idx = dp->index;
1577:Core/Src/ff.c **** 				}
1578:Core/Src/ff.c **** 				/* Check LFN validity and capture it */
1579:Core/Src/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1580:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
1581:Core/Src/ff.c **** 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
1582:Core/Src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
1583:Core/Src/ff.c **** 				break;
1584:Core/Src/ff.c **** 			}
1585:Core/Src/ff.c **** 		}
1586:Core/Src/ff.c **** #else		/* Non LFN configuration */
1587:Core/Src/ff.c **** 		if (c != DDE && (_FS_RPATH || c != '.') && a != AM_LFN && (int)(a == AM_VOL) == vol)	/* Is it a v
1588:Core/Src/ff.c **** 			break;
1589:Core/Src/ff.c **** #endif
1590:Core/Src/ff.c **** 		res = dir_next(dp, 0);				/* Next entry */
1591:Core/Src/ff.c **** 		if (res != FR_OK) break;
1592:Core/Src/ff.c **** 	}
1593:Core/Src/ff.c **** 
1594:Core/Src/ff.c **** 	if (res != FR_OK) dp->sect = 0;
1595:Core/Src/ff.c **** 
1596:Core/Src/ff.c **** 	return res;
1597:Core/Src/ff.c **** }
1598:Core/Src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
1599:Core/Src/ff.c **** 
1600:Core/Src/ff.c **** 
1601:Core/Src/ff.c **** 
1602:Core/Src/ff.c **** 
1603:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1604:Core/Src/ff.c **** /* Register an object to the directory                                   */
1605:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1606:Core/Src/ff.c **** #if !_FS_READONLY
1607:Core/Src/ff.c **** static
1608:Core/Src/ff.c **** FRESULT dir_register (	/* FR_OK:Successful, FR_DENIED:No free entry or too many SFN collision, FR_D
1609:Core/Src/ff.c **** 	DIR* dp				/* Target directory with object name to be created */
1610:Core/Src/ff.c **** )
1611:Core/Src/ff.c **** {
1612:Core/Src/ff.c **** 	FRESULT res;
1613:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1614:Core/Src/ff.c **** 	UINT n, nent;
1615:Core/Src/ff.c **** 	BYTE sn[12], *fn, sum;
1616:Core/Src/ff.c **** 	WCHAR *lfn;
1617:Core/Src/ff.c **** 
1618:Core/Src/ff.c **** 
1619:Core/Src/ff.c **** 	fn = dp->fn; lfn = dp->lfn;
1620:Core/Src/ff.c **** 	mem_cpy(sn, fn, 12);
1621:Core/Src/ff.c **** 
1622:Core/Src/ff.c **** 	if (_FS_RPATH && (sn[NS] & NS_DOT))		/* Cannot create dot entry */
1623:Core/Src/ff.c **** 		return FR_INVALID_NAME;
1624:Core/Src/ff.c **** 
1625:Core/Src/ff.c **** 	if (sn[NS] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 47


1626:Core/Src/ff.c **** 		fn[NS] = 0; dp->lfn = 0;			/* Find only SFN */
1627:Core/Src/ff.c **** 		for (n = 1; n < 100; n++) {
1628:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
1629:Core/Src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
1630:Core/Src/ff.c **** 			if (res != FR_OK) break;
1631:Core/Src/ff.c **** 		}
1632:Core/Src/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
1633:Core/Src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
1634:Core/Src/ff.c **** 		fn[NS] = sn[NS]; dp->lfn = lfn;
1635:Core/Src/ff.c **** 	}
1636:Core/Src/ff.c **** 
1637:Core/Src/ff.c **** 	if (sn[NS] & NS_LFN) {			/* When LFN is to be created, allocate entries for an SFN + LFNs. */
1638:Core/Src/ff.c **** 		for (n = 0; lfn[n]; n++) ;
1639:Core/Src/ff.c **** 		nent = (n + 25) / 13;
1640:Core/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
1641:Core/Src/ff.c **** 		nent = 1;
1642:Core/Src/ff.c **** 	}
1643:Core/Src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
1644:Core/Src/ff.c **** 
1645:Core/Src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
1646:Core/Src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
1647:Core/Src/ff.c **** 		if (res == FR_OK) {
1648:Core/Src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
1649:Core/Src/ff.c **** 			do {					/* Store LFN entries in bottom first */
1650:Core/Src/ff.c **** 				res = move_window(dp->fs, dp->sect);
1651:Core/Src/ff.c **** 				if (res != FR_OK) break;
1652:Core/Src/ff.c **** 				fit_lfn(dp->lfn, dp->dir, (BYTE)nent, sum);
1653:Core/Src/ff.c **** 				dp->fs->wflag = 1;
1654:Core/Src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
1655:Core/Src/ff.c **** 			} while (res == FR_OK && --nent);
1656:Core/Src/ff.c **** 		}
1657:Core/Src/ff.c **** 	}
1658:Core/Src/ff.c **** #else	/* Non LFN configuration */
1659:Core/Src/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
1660:Core/Src/ff.c **** #endif
1661:Core/Src/ff.c **** 
1662:Core/Src/ff.c **** 	if (res == FR_OK) {				/* Set SFN entry */
1663:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1664:Core/Src/ff.c **** 		if (res == FR_OK) {
1665:Core/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIR);	/* Clean the entry */
1666:Core/Src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
1667:Core/Src/ff.c **** #if _USE_LFN
1668:Core/Src/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NS] & (NS_BODY | NS_EXT);	/* Put NT flag */
1669:Core/Src/ff.c **** #endif
1670:Core/Src/ff.c **** 			dp->fs->wflag = 1;
1671:Core/Src/ff.c **** 		}
1672:Core/Src/ff.c **** 	}
1673:Core/Src/ff.c **** 
1674:Core/Src/ff.c **** 	return res;
1675:Core/Src/ff.c **** }
1676:Core/Src/ff.c **** #endif /* !_FS_READONLY */
1677:Core/Src/ff.c **** 
1678:Core/Src/ff.c **** 
1679:Core/Src/ff.c **** 
1680:Core/Src/ff.c **** 
1681:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1682:Core/Src/ff.c **** /* Remove an object from the directory                                   */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 48


1683:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1684:Core/Src/ff.c **** #if !_FS_READONLY && !_FS_MINIMIZE
1685:Core/Src/ff.c **** static
1686:Core/Src/ff.c **** FRESULT dir_remove (	/* FR_OK: Successful, FR_DISK_ERR: A disk error */
1687:Core/Src/ff.c **** 	DIR* dp				/* Directory object pointing the entry to be removed */
1688:Core/Src/ff.c **** )
1689:Core/Src/ff.c **** {
1690:Core/Src/ff.c **** 	FRESULT res;
1691:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1692:Core/Src/ff.c **** 	UINT i;
1693:Core/Src/ff.c **** 
1694:Core/Src/ff.c **** 	i = dp->index;	/* SFN index */
1695:Core/Src/ff.c **** 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN en
1696:Core/Src/ff.c **** 	if (res == FR_OK) {
1697:Core/Src/ff.c **** 		do {
1698:Core/Src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1699:Core/Src/ff.c **** 			if (res != FR_OK) break;
1700:Core/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIR);	/* Clear and mark the entry "deleted" */
1701:Core/Src/ff.c **** 			*dp->dir = DDE;
1702:Core/Src/ff.c **** 			dp->fs->wflag = 1;
1703:Core/Src/ff.c **** 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
1704:Core/Src/ff.c **** 			res = dir_next(dp, 0);		/* Next entry */
1705:Core/Src/ff.c **** 		} while (res == FR_OK);
1706:Core/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
1707:Core/Src/ff.c **** 	}
1708:Core/Src/ff.c **** 
1709:Core/Src/ff.c **** #else			/* Non LFN configuration */
1710:Core/Src/ff.c **** 	res = dir_sdi(dp, dp->index);
1711:Core/Src/ff.c **** 	if (res == FR_OK) {
1712:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1713:Core/Src/ff.c **** 		if (res == FR_OK) {
1714:Core/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIR);	/* Clear and mark the entry "deleted" */
1715:Core/Src/ff.c **** 			*dp->dir = DDE;
1716:Core/Src/ff.c **** 			dp->fs->wflag = 1;
1717:Core/Src/ff.c **** 		}
1718:Core/Src/ff.c **** 	}
1719:Core/Src/ff.c **** #endif
1720:Core/Src/ff.c **** 
1721:Core/Src/ff.c **** 	return res;
1722:Core/Src/ff.c **** }
1723:Core/Src/ff.c **** #endif /* !_FS_READONLY */
1724:Core/Src/ff.c **** 
1725:Core/Src/ff.c **** 
1726:Core/Src/ff.c **** 
1727:Core/Src/ff.c **** 
1728:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1729:Core/Src/ff.c **** /* Get file information from directory entry                             */
1730:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1731:Core/Src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
1732:Core/Src/ff.c **** static
1733:Core/Src/ff.c **** void get_fileinfo (		/* No return code */
1734:Core/Src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
1735:Core/Src/ff.c **** 	FILINFO* fno	 	/* Pointer to the file information to be filled */
1736:Core/Src/ff.c **** )
1737:Core/Src/ff.c **** {
1738:Core/Src/ff.c **** 	UINT i;
1739:Core/Src/ff.c **** 	TCHAR *p, c;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 49


1740:Core/Src/ff.c **** 
1741:Core/Src/ff.c **** 
1742:Core/Src/ff.c **** 	p = fno->fname;
1743:Core/Src/ff.c **** 	if (dp->sect) {		/* Get SFN */
1744:Core/Src/ff.c **** 		BYTE *dir = dp->dir;
1745:Core/Src/ff.c **** 
1746:Core/Src/ff.c **** 		i = 0;
1747:Core/Src/ff.c **** 		while (i < 11) {		/* Copy name body and extension */
1748:Core/Src/ff.c **** 			c = (TCHAR)dir[i++];
1749:Core/Src/ff.c **** 			if (c == ' ') continue;			/* Skip padding spaces */
1750:Core/Src/ff.c **** 			if (c == NDDE) c = (TCHAR)DDE;	/* Restore replaced DDE character */
1751:Core/Src/ff.c **** 			if (i == 9) *p++ = '.';			/* Insert a . if extension is exist */
1752:Core/Src/ff.c **** #if _USE_LFN
1753:Core/Src/ff.c **** 			if (IsUpper(c) && (dir[DIR_NTres] & (i >= 9 ? NS_EXT : NS_BODY)))
1754:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
1755:Core/Src/ff.c **** #if _LFN_UNICODE
1756:Core/Src/ff.c **** 			if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dir[i]))
1757:Core/Src/ff.c **** 				c = c << 8 | dir[i++];
1758:Core/Src/ff.c **** 			c = ff_convert(c, 1);	/* OEM -> Unicode */
1759:Core/Src/ff.c **** 			if (!c) c = '?';
1760:Core/Src/ff.c **** #endif
1761:Core/Src/ff.c **** #endif
1762:Core/Src/ff.c **** 			*p++ = c;
1763:Core/Src/ff.c **** 		}
1764:Core/Src/ff.c **** 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
1765:Core/Src/ff.c **** 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
1766:Core/Src/ff.c **** 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
1767:Core/Src/ff.c **** 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
1768:Core/Src/ff.c **** 	}
1769:Core/Src/ff.c **** 	*p = 0;		/* Terminate SFN string by a \0 */
1770:Core/Src/ff.c **** 
1771:Core/Src/ff.c **** #if _USE_LFN
1772:Core/Src/ff.c **** 	if (fno->lfname) {
1773:Core/Src/ff.c **** 		WCHAR w, *lfn;
1774:Core/Src/ff.c **** 
1775:Core/Src/ff.c **** 		i = 0; p = fno->lfname;
1776:Core/Src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
1777:Core/Src/ff.c **** 			lfn = dp->lfn;
1778:Core/Src/ff.c **** 			while ((w = *lfn++) != 0) {		/* Get an LFN character */
1779:Core/Src/ff.c **** #if !_LFN_UNICODE
1780:Core/Src/ff.c **** 				w = ff_convert(w, 0);		/* Unicode -> OEM */
1781:Core/Src/ff.c **** 				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
1782:Core/Src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
1783:Core/Src/ff.c **** 					p[i++] = (TCHAR)(w >> 8);
1784:Core/Src/ff.c **** #endif
1785:Core/Src/ff.c **** 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* No LFN if buffer overflow */
1786:Core/Src/ff.c **** 				p[i++] = (TCHAR)w;
1787:Core/Src/ff.c **** 			}
1788:Core/Src/ff.c **** 		}
1789:Core/Src/ff.c **** 		p[i] = 0;	/* Terminate LFN string by a \0 */
1790:Core/Src/ff.c **** 	}
1791:Core/Src/ff.c **** #endif
1792:Core/Src/ff.c **** }
1793:Core/Src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2*/
1794:Core/Src/ff.c **** 
1795:Core/Src/ff.c **** 
1796:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 50


1797:Core/Src/ff.c **** 
1798:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1799:Core/Src/ff.c **** /* Pick a segment and create the object name in directory form           */
1800:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
1801:Core/Src/ff.c **** 
1802:Core/Src/ff.c **** static
1803:Core/Src/ff.c **** FRESULT create_name (
1804:Core/Src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
1805:Core/Src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
1806:Core/Src/ff.c **** )
1807:Core/Src/ff.c **** {
1808:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1809:Core/Src/ff.c **** 	BYTE b, cf;
1810:Core/Src/ff.c **** 	WCHAR w, *lfn;
1811:Core/Src/ff.c **** 	UINT i, ni, si, di;
1812:Core/Src/ff.c **** 	const TCHAR *p;
1813:Core/Src/ff.c **** 
1814:Core/Src/ff.c **** 	/* Create LFN in Unicode */
1815:Core/Src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
1816:Core/Src/ff.c **** 	lfn = dp->lfn;
1817:Core/Src/ff.c **** 	si = di = 0;
1818:Core/Src/ff.c **** 	for (;;) {
1819:Core/Src/ff.c **** 		w = p[si++];					/* Get a character */
1820:Core/Src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
1821:Core/Src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
1822:Core/Src/ff.c **** 			return FR_INVALID_NAME;
1823:Core/Src/ff.c **** #if !_LFN_UNICODE
1824:Core/Src/ff.c **** 		w &= 0xFF;
1825:Core/Src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
1826:Core/Src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
1827:Core/Src/ff.c **** 			if (!IsDBCS2(b))
1828:Core/Src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
1829:Core/Src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
1830:Core/Src/ff.c **** 		}
1831:Core/Src/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
1832:Core/Src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
1833:Core/Src/ff.c **** #endif
1834:Core/Src/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal characters for LFN */
1835:Core/Src/ff.c **** 			return FR_INVALID_NAME;
1836:Core/Src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
1837:Core/Src/ff.c **** 	}
1838:Core/Src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
1839:Core/Src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
1840:Core/Src/ff.c **** #if _FS_RPATH
1841:Core/Src/ff.c **** 	if ((di == 1 && lfn[di-1] == '.') || /* Is this a dot entry? */
1842:Core/Src/ff.c **** 		(di == 2 && lfn[di-1] == '.' && lfn[di-2] == '.')) {
1843:Core/Src/ff.c **** 		lfn[di] = 0;
1844:Core/Src/ff.c **** 		for (i = 0; i < 11; i++)
1845:Core/Src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
1846:Core/Src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
1847:Core/Src/ff.c **** 		return FR_OK;
1848:Core/Src/ff.c **** 	}
1849:Core/Src/ff.c **** #endif
1850:Core/Src/ff.c **** 	while (di) {						/* Strip trailing spaces and dots */
1851:Core/Src/ff.c **** 		w = lfn[di-1];
1852:Core/Src/ff.c **** 		if (w != ' ' && w != '.') break;
1853:Core/Src/ff.c **** 		di--;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 51


1854:Core/Src/ff.c **** 	}
1855:Core/Src/ff.c **** 	if (!di) return FR_INVALID_NAME;	/* Reject nul string */
1856:Core/Src/ff.c **** 
1857:Core/Src/ff.c **** 	lfn[di] = 0;						/* LFN is created */
1858:Core/Src/ff.c **** 
1859:Core/Src/ff.c **** 	/* Create SFN in directory form */
1860:Core/Src/ff.c **** 	mem_set(dp->fn, ' ', 11);
1861:Core/Src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
1862:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
1863:Core/Src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
1864:Core/Src/ff.c **** 
1865:Core/Src/ff.c **** 	b = i = 0; ni = 8;
1866:Core/Src/ff.c **** 	for (;;) {
1867:Core/Src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
1868:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
1869:Core/Src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
1870:Core/Src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
1871:Core/Src/ff.c **** 		}
1872:Core/Src/ff.c **** 
1873:Core/Src/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
1874:Core/Src/ff.c **** 			if (ni == 11) {				/* Long extension */
1875:Core/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
1876:Core/Src/ff.c **** 			}
1877:Core/Src/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
1878:Core/Src/ff.c **** 			if (si > di) break;			/* No extension */
1879:Core/Src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
1880:Core/Src/ff.c **** 			b <<= 2; continue;
1881:Core/Src/ff.c **** 		}
1882:Core/Src/ff.c **** 
1883:Core/Src/ff.c **** 		if (w >= 0x80) {				/* Non ASCII character */
1884:Core/Src/ff.c **** #ifdef _EXCVT
1885:Core/Src/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
1886:Core/Src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
1887:Core/Src/ff.c **** #else
1888:Core/Src/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
1889:Core/Src/ff.c **** #endif
1890:Core/Src/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
1891:Core/Src/ff.c **** 		}
1892:Core/Src/ff.c **** 
1893:Core/Src/ff.c **** 		if (_DF1S && w >= 0x100) {		/* Double byte character (always false on SBCS cfg) */
1894:Core/Src/ff.c **** 			if (i >= ni - 1) {
1895:Core/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
1896:Core/Src/ff.c **** 			}
1897:Core/Src/ff.c **** 			dp->fn[i++] = (BYTE)(w >> 8);
1898:Core/Src/ff.c **** 		} else {						/* Single byte character */
1899:Core/Src/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
1900:Core/Src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
1901:Core/Src/ff.c **** 			} else {
1902:Core/Src/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
1903:Core/Src/ff.c **** 					b |= 2;
1904:Core/Src/ff.c **** 				} else {
1905:Core/Src/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
1906:Core/Src/ff.c **** 						b |= 1; w -= 0x20;
1907:Core/Src/ff.c **** 					}
1908:Core/Src/ff.c **** 				}
1909:Core/Src/ff.c **** 			}
1910:Core/Src/ff.c **** 		}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 52


1911:Core/Src/ff.c **** 		dp->fn[i++] = (BYTE)w;
1912:Core/Src/ff.c **** 	}
1913:Core/Src/ff.c **** 
1914:Core/Src/ff.c **** 	if (dp->fn[0] == DDE) dp->fn[0] = NDDE;	/* If the first character collides with deleted mark, repl
1915:Core/Src/ff.c **** 
1916:Core/Src/ff.c **** 	if (ni == 8) b <<= 2;
1917:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
1918:Core/Src/ff.c **** 		cf |= NS_LFN;
1919:Core/Src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
1920:Core/Src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
1921:Core/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
1922:Core/Src/ff.c **** 	}
1923:Core/Src/ff.c **** 
1924:Core/Src/ff.c **** 	dp->fn[NS] = cf;	/* SFN is created */
1925:Core/Src/ff.c **** 
1926:Core/Src/ff.c **** 	return FR_OK;
1927:Core/Src/ff.c **** 
1928:Core/Src/ff.c **** 
1929:Core/Src/ff.c **** #else	/* Non-LFN configuration */
1930:Core/Src/ff.c **** 	BYTE b, c, d, *sfn;
1931:Core/Src/ff.c **** 	UINT ni, si, i;
1932:Core/Src/ff.c **** 	const char *p;
1933:Core/Src/ff.c **** 
1934:Core/Src/ff.c **** 	/* Create file name in directory form */
1935:Core/Src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
1936:Core/Src/ff.c **** 	sfn = dp->fn;
1937:Core/Src/ff.c **** 	mem_set(sfn, ' ', 11);
1938:Core/Src/ff.c **** 	si = i = b = 0; ni = 8;
1939:Core/Src/ff.c **** #if _FS_RPATH
1940:Core/Src/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
1941:Core/Src/ff.c **** 		for (;;) {
1942:Core/Src/ff.c **** 			c = (BYTE)p[si++];
1943:Core/Src/ff.c **** 			if (c != '.' || si >= 3) break;
1944:Core/Src/ff.c **** 			sfn[i++] = c;
1945:Core/Src/ff.c **** 		}
1946:Core/Src/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
1947:Core/Src/ff.c **** 		*path = &p[si];									/* Return pointer to the next segment */
1948:Core/Src/ff.c **** 		sfn[NS] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of path */
1949:Core/Src/ff.c **** 		return FR_OK;
1950:Core/Src/ff.c **** 	}
1951:Core/Src/ff.c **** #endif
1952:Core/Src/ff.c **** 	for (;;) {
1953:Core/Src/ff.c **** 		c = (BYTE)p[si++];
1954:Core/Src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
1955:Core/Src/ff.c **** 		if (c == '.' || i >= ni) {
1956:Core/Src/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
1957:Core/Src/ff.c **** 			i = 8; ni = 11;
1958:Core/Src/ff.c **** 			b <<= 2; continue;
1959:Core/Src/ff.c **** 		}
1960:Core/Src/ff.c **** 		if (c >= 0x80) {				/* Extended character? */
1961:Core/Src/ff.c **** 			b |= 3;						/* Eliminate NT flag */
1962:Core/Src/ff.c **** #ifdef _EXCVT
1963:Core/Src/ff.c **** 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
1964:Core/Src/ff.c **** #else
1965:Core/Src/ff.c **** #if !_DF1S
1966:Core/Src/ff.c **** 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII cfg) */
1967:Core/Src/ff.c **** #endif
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 53


1968:Core/Src/ff.c **** #endif
1969:Core/Src/ff.c **** 		}
1970:Core/Src/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
1971:Core/Src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
1972:Core/Src/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1)	/* Reject invalid DBC */
1973:Core/Src/ff.c **** 				return FR_INVALID_NAME;
1974:Core/Src/ff.c **** 			sfn[i++] = c;
1975:Core/Src/ff.c **** 			sfn[i++] = d;
1976:Core/Src/ff.c **** 		} else {						/* Single byte code */
1977:Core/Src/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))	/* Reject illegal chrs for SFN */
1978:Core/Src/ff.c **** 				return FR_INVALID_NAME;
1979:Core/Src/ff.c **** 			if (IsUpper(c)) {			/* ASCII large capital? */
1980:Core/Src/ff.c **** 				b |= 2;
1981:Core/Src/ff.c **** 			} else {
1982:Core/Src/ff.c **** 				if (IsLower(c)) {		/* ASCII small capital? */
1983:Core/Src/ff.c **** 					b |= 1; c -= 0x20;
1984:Core/Src/ff.c **** 				}
1985:Core/Src/ff.c **** 			}
1986:Core/Src/ff.c **** 			sfn[i++] = c;
1987:Core/Src/ff.c **** 		}
1988:Core/Src/ff.c **** 	}
1989:Core/Src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
1990:Core/Src/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
1991:Core/Src/ff.c **** 
1992:Core/Src/ff.c **** 	if (!i) return FR_INVALID_NAME;		/* Reject nul string */
1993:Core/Src/ff.c **** 	if (sfn[0] == DDE) sfn[0] = NDDE;	/* When first character collides with DDE, replace it with 0x05 
1994:Core/Src/ff.c **** 
1995:Core/Src/ff.c **** 	if (ni == 8) b <<= 2;
1996:Core/Src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
1997:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
1998:Core/Src/ff.c **** 
1999:Core/Src/ff.c **** 	sfn[NS] = c;		/* Store NT flag, File name is created */
2000:Core/Src/ff.c **** 
2001:Core/Src/ff.c **** 	return FR_OK;
2002:Core/Src/ff.c **** #endif
2003:Core/Src/ff.c **** }
2004:Core/Src/ff.c **** 
2005:Core/Src/ff.c **** 
2006:Core/Src/ff.c **** 
2007:Core/Src/ff.c **** 
2008:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2009:Core/Src/ff.c **** /* Follow a file path                                                    */
2010:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2011:Core/Src/ff.c **** 
2012:Core/Src/ff.c **** static
2013:Core/Src/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
2014:Core/Src/ff.c **** 	DIR* dp,			/* Directory object to return last directory and found object */
2015:Core/Src/ff.c **** 	const TCHAR* path	/* Full-path string to find a file or directory */
2016:Core/Src/ff.c **** )
2017:Core/Src/ff.c **** {
2018:Core/Src/ff.c **** 	FRESULT res;
2019:Core/Src/ff.c **** 	BYTE *dir, ns;
2020:Core/Src/ff.c **** 
2021:Core/Src/ff.c **** 
2022:Core/Src/ff.c **** #if _FS_RPATH
2023:Core/Src/ff.c **** 	if (*path == '/' || *path == '\\') {	/* There is a heading separator */
2024:Core/Src/ff.c **** 		path++;	dp->sclust = 0;				/* Strip it and start from the root directory */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 54


2025:Core/Src/ff.c **** 	} else {								/* No heading separator */
2026:Core/Src/ff.c **** 		dp->sclust = dp->fs->cdir;			/* Start from the current directory */
2027:Core/Src/ff.c **** 	}
2028:Core/Src/ff.c **** #else
2029:Core/Src/ff.c **** 	if (*path == '/' || *path == '\\')		/* Strip heading separator if exist */
2030:Core/Src/ff.c **** 		path++;
2031:Core/Src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
2032:Core/Src/ff.c **** #endif
2033:Core/Src/ff.c **** 
2034:Core/Src/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
2035:Core/Src/ff.c **** 		res = dir_sdi(dp, 0);
2036:Core/Src/ff.c **** 		dp->dir = 0;
2037:Core/Src/ff.c **** 	} else {								/* Follow path */
2038:Core/Src/ff.c **** 		for (;;) {
2039:Core/Src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
2040:Core/Src/ff.c **** 			if (res != FR_OK) break;
2041:Core/Src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
2042:Core/Src/ff.c **** 			ns = dp->fn[NS];
2043:Core/Src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
2044:Core/Src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
2045:Core/Src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
2046:Core/Src/ff.c **** 						dp->sclust = 0; dp->dir = 0;	/* it is the root directory and stay there */
2047:Core/Src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
2048:Core/Src/ff.c **** 						res = FR_OK;					/* Ended at the root directroy. Function completed. */
2049:Core/Src/ff.c **** 					} else {							/* Could not find the object */
2050:Core/Src/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
2051:Core/Src/ff.c **** 					}
2052:Core/Src/ff.c **** 				}
2053:Core/Src/ff.c **** 				break;
2054:Core/Src/ff.c **** 			}
2055:Core/Src/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
2056:Core/Src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
2057:Core/Src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
2058:Core/Src/ff.c **** 				res = FR_NO_PATH; break;
2059:Core/Src/ff.c **** 			}
2060:Core/Src/ff.c **** 			dp->sclust = ld_clust(dp->fs, dir);
2061:Core/Src/ff.c **** 		}
2062:Core/Src/ff.c **** 	}
2063:Core/Src/ff.c **** 
2064:Core/Src/ff.c **** 	return res;
2065:Core/Src/ff.c **** }
2066:Core/Src/ff.c **** 
2067:Core/Src/ff.c **** 
2068:Core/Src/ff.c **** 
2069:Core/Src/ff.c **** 
2070:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2071:Core/Src/ff.c **** /* Get logical drive number from path name                               */
2072:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2073:Core/Src/ff.c **** 
2074:Core/Src/ff.c **** static
2075:Core/Src/ff.c **** int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
2076:Core/Src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the path name */
2077:Core/Src/ff.c **** )
2078:Core/Src/ff.c **** {
 939              		.loc 1 2078 1 is_stmt 1 view -0
 940              		.cfi_startproc
 941              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 55


 942              		@ frame_needed = 0, uses_anonymous_args = 0
 943              		@ link register save eliminated.
 944              		.loc 1 2078 1 is_stmt 0 view .LVU298
 945 0000 0146     		mov	r1, r0
2079:Core/Src/ff.c **** 	const TCHAR *tp, *tt;
 946              		.loc 1 2079 2 is_stmt 1 view .LVU299
2080:Core/Src/ff.c **** 	UINT i;
 947              		.loc 1 2080 2 view .LVU300
2081:Core/Src/ff.c **** 	int vol = -1;
 948              		.loc 1 2081 2 view .LVU301
 949              	.LVL113:
2082:Core/Src/ff.c **** 
2083:Core/Src/ff.c **** 
2084:Core/Src/ff.c **** 	if (*path) {	/* If the pointer is not a null */
 950              		.loc 1 2084 2 view .LVU302
 951              		.loc 1 2084 6 is_stmt 0 view .LVU303
 952 0002 0068     		ldr	r0, [r0]
 953              	.LVL114:
 954              		.loc 1 2084 5 view .LVU304
 955 0004 38B1     		cbz	r0, .L83
2085:Core/Src/ff.c **** 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the pa
 956              		.loc 1 2085 11 view .LVU305
 957 0006 0246     		mov	r2, r0
 958              	.L73:
 959              	.LVL115:
 960              		.loc 1 2085 20 is_stmt 1 discriminator 1 view .LVU306
 961              		.loc 1 2085 26 is_stmt 0 discriminator 1 view .LVU307
 962 0008 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 963              		.loc 1 2085 3 discriminator 1 view .LVU308
 964 000a 1F2B     		cmp	r3, #31
 965 000c 06D9     		bls	.L75
 966              		.loc 1 2085 56 discriminator 3 view .LVU309
 967 000e 3A2B     		cmp	r3, #58
 968 0010 04D0     		beq	.L75
 969              		.loc 1 2085 77 is_stmt 1 discriminator 4 view .LVU310
 970              		.loc 1 2085 71 discriminator 4 view .LVU311
 971              		.loc 1 2085 73 is_stmt 0 discriminator 4 view .LVU312
 972 0012 0132     		adds	r2, r2, #1
 973              	.LVL116:
 974              		.loc 1 2085 73 discriminator 4 view .LVU313
 975 0014 F8E7     		b	.L73
 976              	.LVL117:
 977              	.L83:
2081:Core/Src/ff.c **** 	int vol = -1;
 978              		.loc 1 2081 6 view .LVU314
 979 0016 4FF0FF30 		mov	r0, #-1
 980 001a 7047     		bx	lr
 981              	.LVL118:
 982              	.L75:
2086:Core/Src/ff.c **** 		if (*tt == ':') {	/* If a ':' is exist in the path name */
 983              		.loc 1 2086 3 is_stmt 1 view .LVU315
 984              		.loc 1 2086 6 is_stmt 0 view .LVU316
 985 001c 3A2B     		cmp	r3, #58
 986 001e 01D0     		beq	.L84
2087:Core/Src/ff.c **** 			tp = *path;
2088:Core/Src/ff.c **** 			i = *tp++ - '0'; 
2089:Core/Src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 56


2090:Core/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2091:Core/Src/ff.c **** 					vol = (int)i;
2092:Core/Src/ff.c **** 					*path = ++tt;
2093:Core/Src/ff.c **** 				}
2094:Core/Src/ff.c **** 			} else {	/* No numeric drive number */
2095:Core/Src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
2096:Core/Src/ff.c **** 				static const char* const str[] = {_VOLUME_STRS};
2097:Core/Src/ff.c **** 				const char *sp;
2098:Core/Src/ff.c **** 				char c;
2099:Core/Src/ff.c **** 				TCHAR tc;
2100:Core/Src/ff.c **** 
2101:Core/Src/ff.c **** 				i = 0; tt++;
2102:Core/Src/ff.c **** 				do {
2103:Core/Src/ff.c **** 					sp = str[i]; tp = *path;
2104:Core/Src/ff.c **** 					do {	/* Compare a string drive id with path name */
2105:Core/Src/ff.c **** 						c = *sp++; tc = *tp++;
2106:Core/Src/ff.c **** 						if (IsLower(tc)) tc -= 0x20;
2107:Core/Src/ff.c **** 					} while (c && (TCHAR)c == tc);
2108:Core/Src/ff.c **** 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
2109:Core/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2110:Core/Src/ff.c **** 					vol = (int)i;
2111:Core/Src/ff.c **** 					*path = tt;
2112:Core/Src/ff.c **** 				}
2113:Core/Src/ff.c **** #endif
2114:Core/Src/ff.c **** 			}
2115:Core/Src/ff.c **** 			return vol;
2116:Core/Src/ff.c **** 		}
2117:Core/Src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
2118:Core/Src/ff.c **** 		vol = CurrVol;	/* Current drive */
2119:Core/Src/ff.c **** #else
2120:Core/Src/ff.c **** 		vol = 0;		/* Drive 0 */
 987              		.loc 1 2120 7 view .LVU317
 988 0020 0020     		movs	r0, #0
 989              	.LVL119:
2121:Core/Src/ff.c **** #endif
2122:Core/Src/ff.c **** 	}
2123:Core/Src/ff.c **** 	return vol;
2124:Core/Src/ff.c **** }
 990              		.loc 1 2124 1 view .LVU318
 991 0022 7047     		bx	lr
 992              	.LVL120:
 993              	.L84:
2087:Core/Src/ff.c **** 			tp = *path;
 994              		.loc 1 2087 4 is_stmt 1 view .LVU319
2088:Core/Src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 995              		.loc 1 2088 4 view .LVU320
2088:Core/Src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 996              		.loc 1 2088 11 is_stmt 0 view .LVU321
 997 0024 0346     		mov	r3, r0
 998              	.LVL121:
2088:Core/Src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 999              		.loc 1 2088 8 view .LVU322
 1000 0026 13F8010B 		ldrb	r0, [r3], #1	@ zero_extendqisi2
 1001              	.LVL122:
2088:Core/Src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1002              		.loc 1 2088 14 view .LVU323
 1003 002a 3038     		subs	r0, r0, #48
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 57


 1004              	.LVL123:
2089:Core/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1005              		.loc 1 2089 4 is_stmt 1 view .LVU324
2089:Core/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1006              		.loc 1 2089 7 is_stmt 0 view .LVU325
 1007 002c 0928     		cmp	r0, #9
 1008 002e 0CD8     		bhi	.L80
2089:Core/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1009              		.loc 1 2089 15 discriminator 1 view .LVU326
 1010 0030 9A42     		cmp	r2, r3
 1011 0032 02D0     		beq	.L85
2081:Core/Src/ff.c **** 
 1012              		.loc 1 2081 6 view .LVU327
 1013 0034 4FF0FF30 		mov	r0, #-1
 1014              	.LVL124:
2081:Core/Src/ff.c **** 
 1015              		.loc 1 2081 6 view .LVU328
 1016 0038 7047     		bx	lr
 1017              	.LVL125:
 1018              	.L85:
2090:Core/Src/ff.c **** 					vol = (int)i;
 1019              		.loc 1 2090 5 is_stmt 1 view .LVU329
2090:Core/Src/ff.c **** 					vol = (int)i;
 1020              		.loc 1 2090 8 is_stmt 0 view .LVU330
 1021 003a 0128     		cmp	r0, #1
 1022 003c 02D9     		bls	.L86
2081:Core/Src/ff.c **** 
 1023              		.loc 1 2081 6 view .LVU331
 1024 003e 4FF0FF30 		mov	r0, #-1
 1025              	.LVL126:
2114:Core/Src/ff.c **** 			return vol;
 1026              		.loc 1 2114 4 is_stmt 1 view .LVU332
2115:Core/Src/ff.c **** 		}
 1027              		.loc 1 2115 4 view .LVU333
2115:Core/Src/ff.c **** 		}
 1028              		.loc 1 2115 11 is_stmt 0 view .LVU334
 1029 0042 7047     		bx	lr
 1030              	.LVL127:
 1031              	.L86:
2091:Core/Src/ff.c **** 					*path = ++tt;
 1032              		.loc 1 2091 6 is_stmt 1 view .LVU335
2092:Core/Src/ff.c **** 				}
 1033              		.loc 1 2092 6 view .LVU336
2092:Core/Src/ff.c **** 				}
 1034              		.loc 1 2092 12 is_stmt 0 view .LVU337
 1035 0044 0132     		adds	r2, r2, #1
 1036              	.LVL128:
2092:Core/Src/ff.c **** 				}
 1037              		.loc 1 2092 12 view .LVU338
 1038 0046 0A60     		str	r2, [r1]
 1039 0048 7047     		bx	lr
 1040              	.LVL129:
 1041              	.L80:
2081:Core/Src/ff.c **** 
 1042              		.loc 1 2081 6 view .LVU339
 1043 004a 4FF0FF30 		mov	r0, #-1
 1044              	.LVL130:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 58


2081:Core/Src/ff.c **** 
 1045              		.loc 1 2081 6 view .LVU340
 1046 004e 7047     		bx	lr
 1047              		.cfi_endproc
 1048              	.LFE30:
 1050              		.section	.text.sync_window,"ax",%progbits
 1051              		.align	1
 1052              		.syntax unified
 1053              		.thumb
 1054              		.thumb_func
 1055              		.fpu fpv4-sp-d16
 1057              	sync_window:
 1058              	.LVL131:
 1059              	.LFB4:
 756:Core/Src/ff.c **** 	DWORD wsect;
 1060              		.loc 1 756 1 is_stmt 1 view -0
 1061              		.cfi_startproc
 1062              		@ args = 0, pretend = 0, frame = 0
 1063              		@ frame_needed = 0, uses_anonymous_args = 0
 756:Core/Src/ff.c **** 	DWORD wsect;
 1064              		.loc 1 756 1 is_stmt 0 view .LVU342
 1065 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1066              	.LCFI7:
 1067              		.cfi_def_cfa_offset 24
 1068              		.cfi_offset 4, -24
 1069              		.cfi_offset 5, -20
 1070              		.cfi_offset 6, -16
 1071              		.cfi_offset 7, -12
 1072              		.cfi_offset 8, -8
 1073              		.cfi_offset 14, -4
 757:Core/Src/ff.c **** 	UINT nf;
 1074              		.loc 1 757 2 is_stmt 1 view .LVU343
 758:Core/Src/ff.c **** 
 1075              		.loc 1 758 2 view .LVU344
 761:Core/Src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1076              		.loc 1 761 2 view .LVU345
 761:Core/Src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1077              		.loc 1 761 8 is_stmt 0 view .LVU346
 1078 0004 0579     		ldrb	r5, [r0, #4]	@ zero_extendqisi2
 761:Core/Src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1079              		.loc 1 761 5 view .LVU347
 1080 0006 15B9     		cbnz	r5, .L93
 1081              	.LVL132:
 1082              	.L88:
 774:Core/Src/ff.c **** #endif
 1083              		.loc 1 774 1 view .LVU348
 1084 0008 2846     		mov	r0, r5
 1085 000a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1086              	.LVL133:
 1087              	.L93:
 774:Core/Src/ff.c **** #endif
 1088              		.loc 1 774 1 view .LVU349
 1089 000e 0446     		mov	r4, r0
 762:Core/Src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1))
 1090              		.loc 1 762 3 is_stmt 1 view .LVU350
 762:Core/Src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1))
 1091              		.loc 1 762 9 is_stmt 0 view .LVU351
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 59


 1092 0010 C76A     		ldr	r7, [r0, #44]
 1093              	.LVL134:
 763:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1094              		.loc 1 763 3 is_stmt 1 view .LVU352
 763:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1095              		.loc 1 763 29 is_stmt 0 view .LVU353
 1096 0012 00F13008 		add	r8, r0, #48
 763:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1097              		.loc 1 763 7 view .LVU354
 1098 0016 0123     		movs	r3, #1
 1099 0018 3A46     		mov	r2, r7
 1100 001a 4146     		mov	r1, r8
 1101 001c 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1102              	.LVL135:
 763:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1103              		.loc 1 763 7 view .LVU355
 1104 001e FFF7FEFF 		bl	disk_write
 1105              	.LVL136:
 763:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1106              		.loc 1 763 6 view .LVU356
 1107 0022 0546     		mov	r5, r0
 1108 0024 A0B9     		cbnz	r0, .L91
 765:Core/Src/ff.c **** 		if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1109              		.loc 1 765 3 is_stmt 1 view .LVU357
 765:Core/Src/ff.c **** 		if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1110              		.loc 1 765 13 is_stmt 0 view .LVU358
 1111 0026 0023     		movs	r3, #0
 1112 0028 2371     		strb	r3, [r4, #4]
 766:Core/Src/ff.c **** 			for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1113              		.loc 1 766 3 is_stmt 1 view .LVU359
 766:Core/Src/ff.c **** 			for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1114              		.loc 1 766 17 is_stmt 0 view .LVU360
 1115 002a 236A     		ldr	r3, [r4, #32]
 766:Core/Src/ff.c **** 			for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1116              		.loc 1 766 13 view .LVU361
 1117 002c FB1A     		subs	r3, r7, r3
 766:Core/Src/ff.c **** 			for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1118              		.loc 1 766 31 view .LVU362
 1119 002e A269     		ldr	r2, [r4, #24]
 766:Core/Src/ff.c **** 			for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1120              		.loc 1 766 6 view .LVU363
 1121 0030 9342     		cmp	r3, r2
 1122 0032 E9D2     		bcs	.L88
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1123              		.loc 1 767 4 is_stmt 1 view .LVU364
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1124              		.loc 1 767 16 is_stmt 0 view .LVU365
 1125 0034 E678     		ldrb	r6, [r4, #3]	@ zero_extendqisi2
 1126              	.LVL137:
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1127              		.loc 1 767 4 view .LVU366
 1128 0036 08E0     		b	.L89
 1129              	.L90:
 768:Core/Src/ff.c **** 				disk_write(fs->drv, fs->win, wsect, 1);
 1130              		.loc 1 768 5 is_stmt 1 discriminator 3 view .LVU367
 768:Core/Src/ff.c **** 				disk_write(fs->drv, fs->win, wsect, 1);
 1131              		.loc 1 768 16 is_stmt 0 discriminator 3 view .LVU368
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 60


 1132 0038 A369     		ldr	r3, [r4, #24]
 768:Core/Src/ff.c **** 				disk_write(fs->drv, fs->win, wsect, 1);
 1133              		.loc 1 768 11 discriminator 3 view .LVU369
 1134 003a 1F44     		add	r7, r7, r3
 1135              	.LVL138:
 769:Core/Src/ff.c **** 			}
 1136              		.loc 1 769 5 is_stmt 1 discriminator 3 view .LVU370
 1137 003c 0123     		movs	r3, #1
 1138 003e 3A46     		mov	r2, r7
 1139 0040 4146     		mov	r1, r8
 1140 0042 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1141 0044 FFF7FEFF 		bl	disk_write
 1142              	.LVL139:
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1143              		.loc 1 767 35 discriminator 3 view .LVU371
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1144              		.loc 1 767 37 is_stmt 0 discriminator 3 view .LVU372
 1145 0048 013E     		subs	r6, r6, #1
 1146              	.LVL140:
 1147              	.L89:
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1148              		.loc 1 767 26 is_stmt 1 discriminator 1 view .LVU373
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1149              		.loc 1 767 4 is_stmt 0 discriminator 1 view .LVU374
 1150 004a 012E     		cmp	r6, #1
 1151 004c F4D8     		bhi	.L90
 767:Core/Src/ff.c **** 				wsect += fs->fsize;
 1152              		.loc 1 767 4 discriminator 1 view .LVU375
 1153 004e DBE7     		b	.L88
 1154              	.LVL141:
 1155              	.L91:
 764:Core/Src/ff.c **** 		fs->wflag = 0;
 1156              		.loc 1 764 11 view .LVU376
 1157 0050 0125     		movs	r5, #1
 1158 0052 D9E7     		b	.L88
 1159              		.cfi_endproc
 1160              	.LFE4:
 1162              		.section	.text.move_window,"ax",%progbits
 1163              		.align	1
 1164              		.syntax unified
 1165              		.thumb
 1166              		.thumb_func
 1167              		.fpu fpv4-sp-d16
 1169              	move_window:
 1170              	.LVL142:
 1171              	.LFB5:
 783:Core/Src/ff.c **** 	if (sector != fs->winsect) {	/* Changed current window */
 1172              		.loc 1 783 1 is_stmt 1 view -0
 1173              		.cfi_startproc
 1174              		@ args = 0, pretend = 0, frame = 0
 1175              		@ frame_needed = 0, uses_anonymous_args = 0
 783:Core/Src/ff.c **** 	if (sector != fs->winsect) {	/* Changed current window */
 1176              		.loc 1 783 1 is_stmt 0 view .LVU378
 1177 0000 38B5     		push	{r3, r4, r5, lr}
 1178              	.LCFI8:
 1179              		.cfi_def_cfa_offset 16
 1180              		.cfi_offset 3, -16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 61


 1181              		.cfi_offset 4, -12
 1182              		.cfi_offset 5, -8
 1183              		.cfi_offset 14, -4
 784:Core/Src/ff.c **** #if !_FS_READONLY
 1184              		.loc 1 784 2 is_stmt 1 view .LVU379
 784:Core/Src/ff.c **** #if !_FS_READONLY
 1185              		.loc 1 784 18 is_stmt 0 view .LVU380
 1186 0002 C36A     		ldr	r3, [r0, #44]
 784:Core/Src/ff.c **** #if !_FS_READONLY
 1187              		.loc 1 784 5 view .LVU381
 1188 0004 8B42     		cmp	r3, r1
 1189 0006 01D1     		bne	.L100
 794:Core/Src/ff.c **** }
 1190              		.loc 1 794 9 view .LVU382
 1191 0008 0020     		movs	r0, #0
 1192              	.LVL143:
 1193              	.L95:
 795:Core/Src/ff.c **** 
 1194              		.loc 1 795 1 view .LVU383
 1195 000a 38BD     		pop	{r3, r4, r5, pc}
 1196              	.LVL144:
 1197              	.L100:
 795:Core/Src/ff.c **** 
 1198              		.loc 1 795 1 view .LVU384
 1199 000c 0446     		mov	r4, r0
 1200 000e 0D46     		mov	r5, r1
 786:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1201              		.loc 1 786 3 is_stmt 1 view .LVU385
 786:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1202              		.loc 1 786 7 is_stmt 0 view .LVU386
 1203 0010 FFF7FEFF 		bl	sync_window
 1204              	.LVL145:
 786:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1205              		.loc 1 786 6 view .LVU387
 1206 0014 08B1     		cbz	r0, .L101
 787:Core/Src/ff.c **** #endif
 1207              		.loc 1 787 11 view .LVU388
 1208 0016 0120     		movs	r0, #1
 1209 0018 F7E7     		b	.L95
 1210              	.L101:
 789:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1211              		.loc 1 789 3 is_stmt 1 view .LVU389
 789:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1212              		.loc 1 789 7 is_stmt 0 view .LVU390
 1213 001a 0123     		movs	r3, #1
 1214 001c 2A46     		mov	r2, r5
 1215 001e 04F13001 		add	r1, r4, #48
 1216 0022 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1217 0024 FFF7FEFF 		bl	disk_read
 1218              	.LVL146:
 789:Core/Src/ff.c **** 			return FR_DISK_ERR;
 1219              		.loc 1 789 6 view .LVU391
 1220 0028 08B9     		cbnz	r0, .L98
 791:Core/Src/ff.c **** 	}
 1221              		.loc 1 791 3 is_stmt 1 view .LVU392
 791:Core/Src/ff.c **** 	}
 1222              		.loc 1 791 15 is_stmt 0 view .LVU393
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 62


 1223 002a E562     		str	r5, [r4, #44]
 1224 002c EDE7     		b	.L95
 1225              	.L98:
 790:Core/Src/ff.c **** 		fs->winsect = sector;
 1226              		.loc 1 790 11 view .LVU394
 1227 002e 0120     		movs	r0, #1
 1228 0030 EBE7     		b	.L95
 1229              		.cfi_endproc
 1230              	.LFE5:
 1232              		.section	.text.check_fs,"ax",%progbits
 1233              		.align	1
 1234              		.syntax unified
 1235              		.thumb
 1236              		.thumb_func
 1237              		.fpu fpv4-sp-d16
 1239              	check_fs:
 1240              	.LVL147:
 1241              	.LFB31:
2125:Core/Src/ff.c **** 
2126:Core/Src/ff.c **** 
2127:Core/Src/ff.c **** 
2128:Core/Src/ff.c **** 
2129:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2130:Core/Src/ff.c **** /* Load a sector and check if it is an FAT boot sector                   */
2131:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2132:Core/Src/ff.c **** 
2133:Core/Src/ff.c **** static
2134:Core/Src/ff.c **** BYTE check_fs (	/* 0:FAT boor sector, 1:Valid boor sector but not FAT, 2:Not a boot sector, 3:Disk 
2135:Core/Src/ff.c **** 	FATFS* fs,	/* File system object */
2136:Core/Src/ff.c **** 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
2137:Core/Src/ff.c **** )
2138:Core/Src/ff.c **** {
 1242              		.loc 1 2138 1 is_stmt 1 view -0
 1243              		.cfi_startproc
 1244              		@ args = 0, pretend = 0, frame = 0
 1245              		@ frame_needed = 0, uses_anonymous_args = 0
 1246              		.loc 1 2138 1 is_stmt 0 view .LVU396
 1247 0000 10B5     		push	{r4, lr}
 1248              	.LCFI9:
 1249              		.cfi_def_cfa_offset 8
 1250              		.cfi_offset 4, -8
 1251              		.cfi_offset 14, -4
 1252 0002 0446     		mov	r4, r0
2139:Core/Src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
 1253              		.loc 1 2139 2 is_stmt 1 view .LVU397
 1254              		.loc 1 2139 12 is_stmt 0 view .LVU398
 1255 0004 0023     		movs	r3, #0
 1256 0006 0371     		strb	r3, [r0, #4]
 1257              		.loc 1 2139 17 is_stmt 1 view .LVU399
 1258              		.loc 1 2139 29 is_stmt 0 view .LVU400
 1259 0008 4FF0FF33 		mov	r3, #-1
 1260 000c C362     		str	r3, [r0, #44]
2140:Core/Src/ff.c **** 	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
 1261              		.loc 1 2140 2 is_stmt 1 view .LVU401
 1262              		.loc 1 2140 6 is_stmt 0 view .LVU402
 1263 000e FFF7FEFF 		bl	move_window
 1264              	.LVL148:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 63


 1265              		.loc 1 2140 5 view .LVU403
 1266 0012 98BB     		cbnz	r0, .L104
 1267 0014 0246     		mov	r2, r0
2141:Core/Src/ff.c **** 		return 3;
2142:Core/Src/ff.c **** 
2143:Core/Src/ff.c **** 	if (LD_WORD(&fs->win[BS_55AA]) != 0xAA55)	/* Check boot record signature (always placed at offset 
 1268              		.loc 1 2143 2 is_stmt 1 view .LVU404
 1269              		.loc 1 2143 6 is_stmt 0 view .LVU405
 1270 0016 94F82F12 		ldrb	r1, [r4, #559]	@ zero_extendqisi2
 1271 001a 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 1272 001e 43EA0123 		orr	r3, r3, r1, lsl #8
 1273 0022 1BB2     		sxth	r3, r3
 1274              		.loc 1 2143 5 view .LVU406
 1275 0024 1749     		ldr	r1, .L107
 1276 0026 8B42     		cmp	r3, r1
 1277 0028 2AD1     		bne	.L105
2144:Core/Src/ff.c **** 		return 2;
2145:Core/Src/ff.c **** 
2146:Core/Src/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType]) & 0xFFFFFF) == 0x544146)		/* Check "FAT" string */
 1278              		.loc 1 2146 2 is_stmt 1 view .LVU407
 1279              		.loc 1 2146 7 is_stmt 0 view .LVU408
 1280 002a 94F86910 		ldrb	r1, [r4, #105]	@ zero_extendqisi2
 1281 002e 94F86830 		ldrb	r3, [r4, #104]	@ zero_extendqisi2
 1282 0032 1B04     		lsls	r3, r3, #16
 1283 0034 43EA0163 		orr	r3, r3, r1, lsl #24
 1284 0038 94F86710 		ldrb	r1, [r4, #103]	@ zero_extendqisi2
 1285 003c 43EA0123 		orr	r3, r3, r1, lsl #8
 1286 0040 94F86610 		ldrb	r1, [r4, #102]	@ zero_extendqisi2
 1287 0044 0B43     		orrs	r3, r3, r1
 1288              		.loc 1 2146 41 view .LVU409
 1289 0046 23F07F43 		bic	r3, r3, #-16777216
 1290              		.loc 1 2146 5 view .LVU410
 1291 004a 0F49     		ldr	r1, .L107+4
 1292 004c 8B42     		cmp	r3, r1
 1293 004e 13D0     		beq	.L103
2147:Core/Src/ff.c **** 		return 0;
2148:Core/Src/ff.c **** 	if ((LD_DWORD(&fs->win[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 1294              		.loc 1 2148 2 is_stmt 1 view .LVU411
 1295              		.loc 1 2148 7 is_stmt 0 view .LVU412
 1296 0050 94F88510 		ldrb	r1, [r4, #133]	@ zero_extendqisi2
 1297 0054 94F88430 		ldrb	r3, [r4, #132]	@ zero_extendqisi2
 1298 0058 1B04     		lsls	r3, r3, #16
 1299 005a 43EA0163 		orr	r3, r3, r1, lsl #24
 1300 005e 94F88310 		ldrb	r1, [r4, #131]	@ zero_extendqisi2
 1301 0062 43EA0123 		orr	r3, r3, r1, lsl #8
 1302 0066 94F88210 		ldrb	r1, [r4, #130]	@ zero_extendqisi2
 1303 006a 0B43     		orrs	r3, r3, r1
 1304              		.loc 1 2148 43 view .LVU413
 1305 006c 23F07F43 		bic	r3, r3, #-16777216
 1306              		.loc 1 2148 5 view .LVU414
 1307 0070 0549     		ldr	r1, .L107+4
 1308 0072 8B42     		cmp	r3, r1
 1309 0074 00D0     		beq	.L103
2149:Core/Src/ff.c **** 		return 0;
2150:Core/Src/ff.c **** 
2151:Core/Src/ff.c **** 	return 1;
 1310              		.loc 1 2151 9 view .LVU415
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 64


 1311 0076 0122     		movs	r2, #1
 1312              	.L103:
2152:Core/Src/ff.c **** }
 1313              		.loc 1 2152 1 view .LVU416
 1314 0078 1046     		mov	r0, r2
 1315 007a 10BD     		pop	{r4, pc}
 1316              	.LVL149:
 1317              	.L104:
2141:Core/Src/ff.c **** 
 1318              		.loc 1 2141 10 view .LVU417
 1319 007c 0322     		movs	r2, #3
 1320 007e FBE7     		b	.L103
 1321              	.L105:
2144:Core/Src/ff.c **** 
 1322              		.loc 1 2144 10 view .LVU418
 1323 0080 0222     		movs	r2, #2
 1324 0082 F9E7     		b	.L103
 1325              	.L108:
 1326              		.align	2
 1327              	.L107:
 1328 0084 55AAFFFF 		.word	-21931
 1329 0088 46415400 		.word	5521734
 1330              		.cfi_endproc
 1331              	.LFE31:
 1333              		.section	.text.validate,"ax",%progbits
 1334              		.align	1
 1335              		.syntax unified
 1336              		.thumb
 1337              		.thumb_func
 1338              		.fpu fpv4-sp-d16
 1340              	validate:
 1341              	.LVL150:
 1342              	.LFB33:
2153:Core/Src/ff.c **** 
2154:Core/Src/ff.c **** 
2155:Core/Src/ff.c **** 
2156:Core/Src/ff.c **** 
2157:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2158:Core/Src/ff.c **** /* Find logical drive and check if the volume is mounted                 */
2159:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2160:Core/Src/ff.c **** 
2161:Core/Src/ff.c **** static
2162:Core/Src/ff.c **** FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
2163:Core/Src/ff.c **** 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
2164:Core/Src/ff.c **** 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
2165:Core/Src/ff.c **** 	BYTE wmode			/* !=0: Check write protection for write access */
2166:Core/Src/ff.c **** )
2167:Core/Src/ff.c **** {
2168:Core/Src/ff.c **** 	BYTE fmt;
2169:Core/Src/ff.c **** 	int vol;
2170:Core/Src/ff.c **** 	DSTATUS stat;
2171:Core/Src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat;
2172:Core/Src/ff.c **** 	WORD nrsv;
2173:Core/Src/ff.c **** 	FATFS *fs;
2174:Core/Src/ff.c **** 
2175:Core/Src/ff.c **** 
2176:Core/Src/ff.c **** 	/* Get logical drive number from the path name */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 65


2177:Core/Src/ff.c **** 	*rfs = 0;
2178:Core/Src/ff.c **** 	vol = get_ldnumber(path);
2179:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
2180:Core/Src/ff.c **** 
2181:Core/Src/ff.c **** 	/* Check if the file system object is valid or not */
2182:Core/Src/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the file system object */
2183:Core/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
2184:Core/Src/ff.c **** 
2185:Core/Src/ff.c **** 	ENTER_FF(fs);						/* Lock the volume */
2186:Core/Src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
2187:Core/Src/ff.c **** 
2188:Core/Src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
2189:Core/Src/ff.c **** 		stat = disk_status(fs->drv);
2190:Core/Src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
2191:Core/Src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
2192:Core/Src/ff.c **** 				return FR_WRITE_PROTECTED;
2193:Core/Src/ff.c **** 			return FR_OK;				/* The file system object is valid */
2194:Core/Src/ff.c **** 		}
2195:Core/Src/ff.c **** 	}
2196:Core/Src/ff.c **** 
2197:Core/Src/ff.c **** 	/* The file system object is not valid. */
2198:Core/Src/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
2199:Core/Src/ff.c **** 
2200:Core/Src/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
2201:Core/Src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
2202:Core/Src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
2203:Core/Src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
2204:Core/Src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
2205:Core/Src/ff.c **** 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
2206:Core/Src/ff.c **** 		return FR_WRITE_PROTECTED;
2207:Core/Src/ff.c **** #if _MAX_SS != _MIN_SS						/* Get sector size (multiple sector size cfg only) */
2208:Core/Src/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK
2209:Core/Src/ff.c **** 		|| SS(fs) < _MIN_SS || SS(fs) > _MAX_SS) return FR_DISK_ERR;
2210:Core/Src/ff.c **** #endif
2211:Core/Src/ff.c **** 	/* Find an FAT partition on the drive. Supports only generic partitioning, FDISK and SFD. */
2212:Core/Src/ff.c **** 	bsect = 0;
2213:Core/Src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
2214:Core/Src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
2215:Core/Src/ff.c **** 		UINT i;
2216:Core/Src/ff.c **** 		DWORD br[4];
2217:Core/Src/ff.c **** 
2218:Core/Src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
2219:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
2220:Core/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
2221:Core/Src/ff.c **** 		}
2222:Core/Src/ff.c **** 		i = LD2PT(vol);						/* Partition number: 0:auto, 1-4:forced */
2223:Core/Src/ff.c **** 		if (i) i--;
2224:Core/Src/ff.c **** 		do {								/* Find an FAT volume */
2225:Core/Src/ff.c **** 			bsect = br[i];
2226:Core/Src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
2227:Core/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
2228:Core/Src/ff.c **** 	}
2229:Core/Src/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
2230:Core/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
2231:Core/Src/ff.c **** 
2232:Core/Src/ff.c **** 	/* An FAT volume is found. Following code initializes the file system object */
2233:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 66


2234:Core/Src/ff.c **** 	if (LD_WORD(fs->win+BPB_BytsPerSec) != SS(fs))		/* (BPB_BytsPerSec must be equal to the physical s
2235:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2236:Core/Src/ff.c **** 
2237:Core/Src/ff.c **** 	fasize = LD_WORD(fs->win+BPB_FATSz16);				/* Number of sectors per FAT */
2238:Core/Src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
2239:Core/Src/ff.c **** 	fs->fsize = fasize;
2240:Core/Src/ff.c **** 
2241:Core/Src/ff.c **** 	fs->n_fats = fs->win[BPB_NumFATs];					/* Number of FAT copies */
2242:Core/Src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
2243:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2244:Core/Src/ff.c **** 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
2245:Core/Src/ff.c **** 
2246:Core/Src/ff.c **** 	fs->csize = fs->win[BPB_SecPerClus];				/* Number of sectors per cluster */
2247:Core/Src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
2248:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2249:Core/Src/ff.c **** 
2250:Core/Src/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win+BPB_RootEntCnt);	/* Number of root directory entries */
2251:Core/Src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR))				/* (Must be sector aligned) */
2252:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2253:Core/Src/ff.c **** 
2254:Core/Src/ff.c **** 	tsect = LD_WORD(fs->win+BPB_TotSec16);				/* Number of sectors on the volume */
2255:Core/Src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
2256:Core/Src/ff.c **** 
2257:Core/Src/ff.c **** 	nrsv = LD_WORD(fs->win+BPB_RsvdSecCnt);				/* Number of reserved sectors */
2258:Core/Src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
2259:Core/Src/ff.c **** 
2260:Core/Src/ff.c **** 	/* Determine the FAT sub type */
2261:Core/Src/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIR);	/* RSV+FAT+DIR */
2262:Core/Src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
2263:Core/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
2264:Core/Src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
2265:Core/Src/ff.c **** 	fmt = FS_FAT12;
2266:Core/Src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
2267:Core/Src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
2268:Core/Src/ff.c **** 
2269:Core/Src/ff.c **** 	/* Boundaries and Limits */
2270:Core/Src/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
2271:Core/Src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
2272:Core/Src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
2273:Core/Src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
2274:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
2275:Core/Src/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
2276:Core/Src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
2277:Core/Src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
2278:Core/Src/ff.c **** 	} else {
2279:Core/Src/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
2280:Core/Src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
2281:Core/Src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
2282:Core/Src/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
2283:Core/Src/ff.c **** 	}
2284:Core/Src/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than needed) */
2285:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2286:Core/Src/ff.c **** 
2287:Core/Src/ff.c **** #if !_FS_READONLY
2288:Core/Src/ff.c **** 	/* Initialize cluster allocation information */
2289:Core/Src/ff.c **** 	fs->last_clust = fs->free_clust = 0xFFFFFFFF;
2290:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 67


2291:Core/Src/ff.c **** 	/* Get fsinfo if available */
2292:Core/Src/ff.c **** 	fs->fsi_flag = 0x80;
2293:Core/Src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
2294:Core/Src/ff.c **** 	if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo is 1 */
2295:Core/Src/ff.c **** 		&& LD_WORD(fs->win+BPB_FSInfo) == 1
2296:Core/Src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
2297:Core/Src/ff.c **** 	{
2298:Core/Src/ff.c **** 		fs->fsi_flag = 0;
2299:Core/Src/ff.c **** 		if (LD_WORD(fs->win+BS_55AA) == 0xAA55	/* Load FSINFO data if available */
2300:Core/Src/ff.c **** 			&& LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252
2301:Core/Src/ff.c **** 			&& LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272)
2302:Core/Src/ff.c **** 		{
2303:Core/Src/ff.c **** #if (_FS_NOFSINFO & 1) == 0
2304:Core/Src/ff.c **** 			fs->free_clust = LD_DWORD(fs->win+FSI_Free_Count);
2305:Core/Src/ff.c **** #endif
2306:Core/Src/ff.c **** #if (_FS_NOFSINFO & 2) == 0
2307:Core/Src/ff.c **** 			fs->last_clust = LD_DWORD(fs->win+FSI_Nxt_Free);
2308:Core/Src/ff.c **** #endif
2309:Core/Src/ff.c **** 		}
2310:Core/Src/ff.c **** 	}
2311:Core/Src/ff.c **** #endif
2312:Core/Src/ff.c **** #endif
2313:Core/Src/ff.c **** 	fs->fs_type = fmt;	/* FAT sub-type */
2314:Core/Src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
2315:Core/Src/ff.c **** #if _FS_RPATH
2316:Core/Src/ff.c **** 	fs->cdir = 0;		/* Set current directory to root */
2317:Core/Src/ff.c **** #endif
2318:Core/Src/ff.c **** #if _FS_LOCK			/* Clear file lock semaphores */
2319:Core/Src/ff.c **** 	clear_lock(fs);
2320:Core/Src/ff.c **** #endif
2321:Core/Src/ff.c **** 
2322:Core/Src/ff.c **** 	return FR_OK;
2323:Core/Src/ff.c **** }
2324:Core/Src/ff.c **** 
2325:Core/Src/ff.c **** 
2326:Core/Src/ff.c **** 
2327:Core/Src/ff.c **** 
2328:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2329:Core/Src/ff.c **** /* Check if the file/directory object is valid or not                    */
2330:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2331:Core/Src/ff.c **** 
2332:Core/Src/ff.c **** static
2333:Core/Src/ff.c **** FRESULT validate (	/* FR_OK(0): The object is valid, !=0: Invalid */
2334:Core/Src/ff.c **** 	void* obj		/* Pointer to the object FIL/DIR to check validity */
2335:Core/Src/ff.c **** )
2336:Core/Src/ff.c **** {
 1343              		.loc 1 2336 1 is_stmt 1 view -0
 1344              		.cfi_startproc
 1345              		@ args = 0, pretend = 0, frame = 0
 1346              		@ frame_needed = 0, uses_anonymous_args = 0
2337:Core/Src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
 1347              		.loc 1 2337 2 view .LVU420
2338:Core/Src/ff.c **** 
2339:Core/Src/ff.c **** 
2340:Core/Src/ff.c **** 	if (!fil || !fil->fs || !fil->fs->fs_type || fil->fs->id != fil->id)
 1348              		.loc 1 2340 2 view .LVU421
 1349              		.loc 1 2340 5 is_stmt 0 view .LVU422
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 68


 1350 0000 90B1     		cbz	r0, .L111
2336:Core/Src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
 1351              		.loc 1 2336 1 discriminator 1 view .LVU423
 1352 0002 08B5     		push	{r3, lr}
 1353              	.LCFI10:
 1354              		.cfi_def_cfa_offset 8
 1355              		.cfi_offset 3, -8
 1356              		.cfi_offset 14, -4
 1357              		.loc 1 2340 18 discriminator 1 view .LVU424
 1358 0004 0368     		ldr	r3, [r0]
 1359              		.loc 1 2340 11 discriminator 1 view .LVU425
 1360 0006 8BB1     		cbz	r3, .L112
 1361              		.loc 1 2340 34 discriminator 2 view .LVU426
 1362 0008 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 1363              		.loc 1 2340 23 discriminator 2 view .LVU427
 1364 000a 89B1     		cbz	r1, .L113
 1365              		.loc 1 2340 54 discriminator 3 view .LVU428
 1366 000c D988     		ldrh	r1, [r3, #6]
 1367              		.loc 1 2340 65 discriminator 3 view .LVU429
 1368 000e 8288     		ldrh	r2, [r0, #4]
 1369              		.loc 1 2340 44 discriminator 3 view .LVU430
 1370 0010 9142     		cmp	r1, r2
 1371 0012 01D0     		beq	.L120
2341:Core/Src/ff.c **** 		return FR_INVALID_OBJECT;
 1372              		.loc 1 2341 10 view .LVU431
 1373 0014 0920     		movs	r0, #9
 1374              	.LVL151:
 1375              	.L110:
2342:Core/Src/ff.c **** 
2343:Core/Src/ff.c **** 	ENTER_FF(fil->fs);		/* Lock file system */
2344:Core/Src/ff.c **** 
2345:Core/Src/ff.c **** 	if (disk_status(fil->fs->drv) & STA_NOINIT)
2346:Core/Src/ff.c **** 		return FR_NOT_READY;
2347:Core/Src/ff.c **** 
2348:Core/Src/ff.c **** 	return FR_OK;
2349:Core/Src/ff.c **** }
 1376              		.loc 1 2349 1 view .LVU432
 1377 0016 08BD     		pop	{r3, pc}
 1378              	.LVL152:
 1379              	.L120:
2343:Core/Src/ff.c **** 
 1380              		.loc 1 2343 19 is_stmt 1 view .LVU433
2345:Core/Src/ff.c **** 		return FR_NOT_READY;
 1381              		.loc 1 2345 2 view .LVU434
2345:Core/Src/ff.c **** 		return FR_NOT_READY;
 1382              		.loc 1 2345 6 is_stmt 0 view .LVU435
 1383 0018 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 1384              	.LVL153:
2345:Core/Src/ff.c **** 		return FR_NOT_READY;
 1385              		.loc 1 2345 6 view .LVU436
 1386 001a FFF7FEFF 		bl	disk_status
 1387              	.LVL154:
2345:Core/Src/ff.c **** 		return FR_NOT_READY;
 1388              		.loc 1 2345 5 view .LVU437
 1389 001e 10F00100 		ands	r0, r0, #1
 1390 0022 F8D0     		beq	.L110
2346:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 69


 1391              		.loc 1 2346 10 view .LVU438
 1392 0024 0320     		movs	r0, #3
 1393 0026 F6E7     		b	.L110
 1394              	.LVL155:
 1395              	.L111:
 1396              	.LCFI11:
 1397              		.cfi_def_cfa_offset 0
 1398              		.cfi_restore 3
 1399              		.cfi_restore 14
2341:Core/Src/ff.c **** 
 1400              		.loc 1 2341 10 view .LVU439
 1401 0028 0920     		movs	r0, #9
 1402              	.LVL156:
 1403              		.loc 1 2349 1 view .LVU440
 1404 002a 7047     		bx	lr
 1405              	.LVL157:
 1406              	.L112:
 1407              	.LCFI12:
 1408              		.cfi_def_cfa_offset 8
 1409              		.cfi_offset 3, -8
 1410              		.cfi_offset 14, -4
2341:Core/Src/ff.c **** 
 1411              		.loc 1 2341 10 view .LVU441
 1412 002c 0920     		movs	r0, #9
 1413              	.LVL158:
2341:Core/Src/ff.c **** 
 1414              		.loc 1 2341 10 view .LVU442
 1415 002e F2E7     		b	.L110
 1416              	.LVL159:
 1417              	.L113:
2341:Core/Src/ff.c **** 
 1418              		.loc 1 2341 10 view .LVU443
 1419 0030 0920     		movs	r0, #9
 1420              	.LVL160:
2341:Core/Src/ff.c **** 
 1421              		.loc 1 2341 10 view .LVU444
 1422 0032 F0E7     		b	.L110
 1423              		.cfi_endproc
 1424              	.LFE33:
 1426              		.section	.text.find_volume,"ax",%progbits
 1427              		.align	1
 1428              		.syntax unified
 1429              		.thumb
 1430              		.thumb_func
 1431              		.fpu fpv4-sp-d16
 1433              	find_volume:
 1434              	.LVL161:
 1435              	.LFB32:
2167:Core/Src/ff.c **** 	BYTE fmt;
 1436              		.loc 1 2167 1 is_stmt 1 view -0
 1437              		.cfi_startproc
 1438              		@ args = 0, pretend = 0, frame = 16
 1439              		@ frame_needed = 0, uses_anonymous_args = 0
2167:Core/Src/ff.c **** 	BYTE fmt;
 1440              		.loc 1 2167 1 is_stmt 0 view .LVU446
 1441 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1442              	.LCFI13:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 70


 1443              		.cfi_def_cfa_offset 28
 1444              		.cfi_offset 4, -28
 1445              		.cfi_offset 5, -24
 1446              		.cfi_offset 6, -20
 1447              		.cfi_offset 7, -16
 1448              		.cfi_offset 8, -12
 1449              		.cfi_offset 9, -8
 1450              		.cfi_offset 14, -4
 1451 0004 85B0     		sub	sp, sp, #20
 1452              	.LCFI14:
 1453              		.cfi_def_cfa_offset 48
 1454 0006 0546     		mov	r5, r0
 1455 0008 1746     		mov	r7, r2
2168:Core/Src/ff.c **** 	int vol;
 1456              		.loc 1 2168 2 is_stmt 1 view .LVU447
2169:Core/Src/ff.c **** 	DSTATUS stat;
 1457              		.loc 1 2169 2 view .LVU448
2170:Core/Src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat;
 1458              		.loc 1 2170 2 view .LVU449
2171:Core/Src/ff.c **** 	WORD nrsv;
 1459              		.loc 1 2171 2 view .LVU450
2172:Core/Src/ff.c **** 	FATFS *fs;
 1460              		.loc 1 2172 2 view .LVU451
2173:Core/Src/ff.c **** 
 1461              		.loc 1 2173 2 view .LVU452
2177:Core/Src/ff.c **** 	vol = get_ldnumber(path);
 1462              		.loc 1 2177 2 view .LVU453
2177:Core/Src/ff.c **** 	vol = get_ldnumber(path);
 1463              		.loc 1 2177 7 is_stmt 0 view .LVU454
 1464 000a 0023     		movs	r3, #0
 1465 000c 0360     		str	r3, [r0]
2178:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1466              		.loc 1 2178 2 is_stmt 1 view .LVU455
2178:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1467              		.loc 1 2178 8 is_stmt 0 view .LVU456
 1468 000e 0846     		mov	r0, r1
 1469              	.LVL162:
2178:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1470              		.loc 1 2178 8 view .LVU457
 1471 0010 FFF7FEFF 		bl	get_ldnumber
 1472              	.LVL163:
2179:Core/Src/ff.c **** 
 1473              		.loc 1 2179 2 is_stmt 1 view .LVU458
2179:Core/Src/ff.c **** 
 1474              		.loc 1 2179 5 is_stmt 0 view .LVU459
 1475 0014 061E     		subs	r6, r0, #0
 1476 0016 C0F29B81 		blt	.L140
2182:Core/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 1477              		.loc 1 2182 2 is_stmt 1 view .LVU460
2182:Core/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 1478              		.loc 1 2182 5 is_stmt 0 view .LVU461
 1479 001a C84B     		ldr	r3, .L169
 1480 001c 53F82640 		ldr	r4, [r3, r6, lsl #2]
 1481              	.LVL164:
2183:Core/Src/ff.c **** 
 1482              		.loc 1 2183 2 is_stmt 1 view .LVU462
2183:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 71


 1483              		.loc 1 2183 5 is_stmt 0 view .LVU463
 1484 0020 002C     		cmp	r4, #0
 1485 0022 00F09A81 		beq	.L141
2185:Core/Src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 1486              		.loc 1 2185 14 is_stmt 1 view .LVU464
2186:Core/Src/ff.c **** 
 1487              		.loc 1 2186 2 view .LVU465
2186:Core/Src/ff.c **** 
 1488              		.loc 1 2186 7 is_stmt 0 view .LVU466
 1489 0026 2C60     		str	r4, [r5]
2188:Core/Src/ff.c **** 		stat = disk_status(fs->drv);
 1490              		.loc 1 2188 2 is_stmt 1 view .LVU467
2188:Core/Src/ff.c **** 		stat = disk_status(fs->drv);
 1491              		.loc 1 2188 8 is_stmt 0 view .LVU468
 1492 0028 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
2188:Core/Src/ff.c **** 		stat = disk_status(fs->drv);
 1493              		.loc 1 2188 5 view .LVU469
 1494 002a 73B1     		cbz	r3, .L123
2189:Core/Src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1495              		.loc 1 2189 3 is_stmt 1 view .LVU470
2189:Core/Src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1496              		.loc 1 2189 10 is_stmt 0 view .LVU471
 1497 002c 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1498              	.LVL165:
2189:Core/Src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1499              		.loc 1 2189 10 view .LVU472
 1500 002e FFF7FEFF 		bl	disk_status
 1501              	.LVL166:
2190:Core/Src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
 1502              		.loc 1 2190 3 is_stmt 1 view .LVU473
2190:Core/Src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
 1503              		.loc 1 2190 6 is_stmt 0 view .LVU474
 1504 0032 10F00105 		ands	r5, r0, #1
 1505              	.LVL167:
2190:Core/Src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
 1506              		.loc 1 2190 6 view .LVU475
 1507 0036 08D1     		bne	.L123
2191:Core/Src/ff.c **** 				return FR_WRITE_PROTECTED;
 1508              		.loc 1 2191 4 is_stmt 1 view .LVU476
2191:Core/Src/ff.c **** 				return FR_WRITE_PROTECTED;
 1509              		.loc 1 2191 7 is_stmt 0 view .LVU477
 1510 0038 002F     		cmp	r7, #0
 1511 003a 00F08A81 		beq	.L122
2191:Core/Src/ff.c **** 				return FR_WRITE_PROTECTED;
 1512              		.loc 1 2191 31 discriminator 1 view .LVU478
 1513 003e 10F0040F 		tst	r0, #4
 1514 0042 00F08681 		beq	.L122
2192:Core/Src/ff.c **** 			return FR_OK;				/* The file system object is valid */
 1515              		.loc 1 2192 12 view .LVU479
 1516 0046 0A25     		movs	r5, #10
 1517 0048 83E1     		b	.L122
 1518              	.LVL168:
 1519              	.L123:
2200:Core/Src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 1520              		.loc 1 2200 2 is_stmt 1 view .LVU480
2200:Core/Src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 1521              		.loc 1 2200 14 is_stmt 0 view .LVU481
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 72


 1522 004a 0023     		movs	r3, #0
 1523 004c 2370     		strb	r3, [r4]
2201:Core/Src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 1524              		.loc 1 2201 2 is_stmt 1 view .LVU482
2201:Core/Src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 1525              		.loc 1 2201 12 is_stmt 0 view .LVU483
 1526 004e F0B2     		uxtb	r0, r6
2201:Core/Src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 1527              		.loc 1 2201 10 view .LVU484
 1528 0050 6070     		strb	r0, [r4, #1]
2202:Core/Src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 1529              		.loc 1 2202 2 is_stmt 1 view .LVU485
2202:Core/Src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 1530              		.loc 1 2202 9 is_stmt 0 view .LVU486
 1531 0052 FFF7FEFF 		bl	disk_initialize
 1532              	.LVL169:
2203:Core/Src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1533              		.loc 1 2203 2 is_stmt 1 view .LVU487
2203:Core/Src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1534              		.loc 1 2203 5 is_stmt 0 view .LVU488
 1535 0056 10F0010F 		tst	r0, #1
 1536 005a 40F08081 		bne	.L143
2205:Core/Src/ff.c **** 		return FR_WRITE_PROTECTED;
 1537              		.loc 1 2205 2 is_stmt 1 view .LVU489
2205:Core/Src/ff.c **** 		return FR_WRITE_PROTECTED;
 1538              		.loc 1 2205 5 is_stmt 0 view .LVU490
 1539 005e 1FB1     		cbz	r7, .L124
2205:Core/Src/ff.c **** 		return FR_WRITE_PROTECTED;
 1540              		.loc 1 2205 29 discriminator 1 view .LVU491
 1541 0060 10F0040F 		tst	r0, #4
 1542 0064 40F07D81 		bne	.L144
 1543              	.L124:
2212:Core/Src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
 1544              		.loc 1 2212 2 is_stmt 1 view .LVU492
 1545              	.LVL170:
2213:Core/Src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
 1546              		.loc 1 2213 2 view .LVU493
2213:Core/Src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
 1547              		.loc 1 2213 8 is_stmt 0 view .LVU494
 1548 0068 0021     		movs	r1, #0
 1549 006a 2046     		mov	r0, r4
 1550              	.LVL171:
2213:Core/Src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
 1551              		.loc 1 2213 8 view .LVU495
 1552 006c FFF7FEFF 		bl	check_fs
 1553              	.LVL172:
 1554 0070 0546     		mov	r5, r0
 1555              	.LVL173:
2214:Core/Src/ff.c **** 		UINT i;
 1556              		.loc 1 2214 2 is_stmt 1 view .LVU496
2214:Core/Src/ff.c **** 		UINT i;
 1557              		.loc 1 2214 5 is_stmt 0 view .LVU497
 1558 0072 0128     		cmp	r0, #1
 1559 0074 00F0D080 		beq	.L145
2212:Core/Src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
 1560              		.loc 1 2212 8 view .LVU498
 1561 0078 0027     		movs	r7, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 73


 1562              	.LVL174:
 1563              	.L126:
2229:Core/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 1564              		.loc 1 2229 2 is_stmt 1 view .LVU499
2229:Core/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 1565              		.loc 1 2229 5 is_stmt 0 view .LVU500
 1566 007a 032D     		cmp	r5, #3
 1567 007c 00F07381 		beq	.L148
2230:Core/Src/ff.c **** 
 1568              		.loc 1 2230 2 is_stmt 1 view .LVU501
2230:Core/Src/ff.c **** 
 1569              		.loc 1 2230 5 is_stmt 0 view .LVU502
 1570 0080 002D     		cmp	r5, #0
 1571 0082 40F07281 		bne	.L149
2234:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1572              		.loc 1 2234 2 is_stmt 1 view .LVU503
2234:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1573              		.loc 1 2234 6 is_stmt 0 view .LVU504
 1574 0086 94F83C20 		ldrb	r2, [r4, #60]	@ zero_extendqisi2
 1575 008a 94F83B30 		ldrb	r3, [r4, #59]	@ zero_extendqisi2
 1576 008e 43EA0223 		orr	r3, r3, r2, lsl #8
 1577 0092 1BB2     		sxth	r3, r3
2234:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1578              		.loc 1 2234 5 view .LVU505
 1579 0094 B3F5007F 		cmp	r3, #512
 1580 0098 40F06981 		bne	.L150
2237:Core/Src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 1581              		.loc 1 2237 2 is_stmt 1 view .LVU506
2237:Core/Src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win+BPB_FATSz32);
 1582              		.loc 1 2237 11 is_stmt 0 view .LVU507
 1583 009c 94F84720 		ldrb	r2, [r4, #71]	@ zero_extendqisi2
 1584 00a0 94F84630 		ldrb	r3, [r4, #70]	@ zero_extendqisi2
 1585              	.LVL175:
2238:Core/Src/ff.c **** 	fs->fsize = fasize;
 1586              		.loc 1 2238 2 is_stmt 1 view .LVU508
2238:Core/Src/ff.c **** 	fs->fsize = fasize;
 1587              		.loc 1 2238 5 is_stmt 0 view .LVU509
 1588 00a4 53EA0223 		orrs	r3, r3, r2, lsl #8
 1589              	.LVL176:
2238:Core/Src/ff.c **** 	fs->fsize = fasize;
 1590              		.loc 1 2238 5 view .LVU510
 1591 00a8 0DD1     		bne	.L132
2238:Core/Src/ff.c **** 	fs->fsize = fasize;
 1592              		.loc 1 2238 15 is_stmt 1 discriminator 1 view .LVU511
2238:Core/Src/ff.c **** 	fs->fsize = fasize;
 1593              		.loc 1 2238 24 is_stmt 0 discriminator 1 view .LVU512
 1594 00aa 94F85720 		ldrb	r2, [r4, #87]	@ zero_extendqisi2
 1595 00ae 94F85630 		ldrb	r3, [r4, #86]	@ zero_extendqisi2
 1596              	.LVL177:
2238:Core/Src/ff.c **** 	fs->fsize = fasize;
 1597              		.loc 1 2238 24 discriminator 1 view .LVU513
 1598 00b2 1B04     		lsls	r3, r3, #16
 1599 00b4 43EA0263 		orr	r3, r3, r2, lsl #24
 1600 00b8 94F85520 		ldrb	r2, [r4, #85]	@ zero_extendqisi2
 1601 00bc 43EA0223 		orr	r3, r3, r2, lsl #8
 1602 00c0 94F85420 		ldrb	r2, [r4, #84]	@ zero_extendqisi2
2238:Core/Src/ff.c **** 	fs->fsize = fasize;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 74


 1603              		.loc 1 2238 22 discriminator 1 view .LVU514
 1604 00c4 1343     		orrs	r3, r3, r2
 1605              	.LVL178:
 1606              	.L132:
2239:Core/Src/ff.c **** 
 1607              		.loc 1 2239 2 is_stmt 1 view .LVU515
2239:Core/Src/ff.c **** 
 1608              		.loc 1 2239 12 is_stmt 0 view .LVU516
 1609 00c6 A361     		str	r3, [r4, #24]
2241:Core/Src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
 1610              		.loc 1 2241 2 is_stmt 1 view .LVU517
2241:Core/Src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
 1611              		.loc 1 2241 22 is_stmt 0 view .LVU518
 1612 00c8 94F84010 		ldrb	r1, [r4, #64]	@ zero_extendqisi2
2241:Core/Src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
 1613              		.loc 1 2241 13 view .LVU519
 1614 00cc E170     		strb	r1, [r4, #3]
2242:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1615              		.loc 1 2242 2 is_stmt 1 view .LVU520
2242:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1616              		.loc 1 2242 22 is_stmt 0 view .LVU521
 1617 00ce 4A1E     		subs	r2, r1, #1
 1618 00d0 D2B2     		uxtb	r2, r2
2242:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1619              		.loc 1 2242 5 view .LVU522
 1620 00d2 012A     		cmp	r2, #1
 1621 00d4 00F24D81 		bhi	.L151
2244:Core/Src/ff.c **** 
 1622              		.loc 1 2244 2 is_stmt 1 view .LVU523
2244:Core/Src/ff.c **** 
 1623              		.loc 1 2244 9 is_stmt 0 view .LVU524
 1624 00d8 03FB01F1 		mul	r1, r3, r1
 1625              	.LVL179:
2246:Core/Src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
 1626              		.loc 1 2246 2 is_stmt 1 view .LVU525
2246:Core/Src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
 1627              		.loc 1 2246 21 is_stmt 0 view .LVU526
 1628 00dc 94F83D00 		ldrb	r0, [r4, #61]	@ zero_extendqisi2
2246:Core/Src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
 1629              		.loc 1 2246 12 view .LVU527
 1630 00e0 A070     		strb	r0, [r4, #2]
2247:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1631              		.loc 1 2247 2 is_stmt 1 view .LVU528
2247:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1632              		.loc 1 2247 5 is_stmt 0 view .LVU529
 1633 00e2 0028     		cmp	r0, #0
 1634 00e4 00F04781 		beq	.L152
2247:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1635              		.loc 1 2247 44 discriminator 1 view .LVU530
 1636 00e8 421E     		subs	r2, r0, #1
2247:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1637              		.loc 1 2247 17 discriminator 1 view .LVU531
 1638 00ea 1042     		tst	r0, r2
 1639 00ec 40F04581 		bne	.L153
2250:Core/Src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR))				/* (Must be sector aligned) */
 1640              		.loc 1 2250 2 is_stmt 1 view .LVU532
2250:Core/Src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR))				/* (Must be sector aligned) */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 75


 1641              		.loc 1 2250 18 is_stmt 0 view .LVU533
 1642 00f0 94F84220 		ldrb	r2, [r4, #66]	@ zero_extendqisi2
 1643 00f4 94F84160 		ldrb	r6, [r4, #65]	@ zero_extendqisi2
 1644 00f8 46EA0226 		orr	r6, r6, r2, lsl #8
2250:Core/Src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIR))				/* (Must be sector aligned) */
 1645              		.loc 1 2250 16 view .LVU534
 1646 00fc 2681     		strh	r6, [r4, #8]	@ movhi
2251:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1647              		.loc 1 2251 2 is_stmt 1 view .LVU535
2251:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1648              		.loc 1 2251 5 is_stmt 0 view .LVU536
 1649 00fe 16F00F0F 		tst	r6, #15
 1650 0102 40F03C81 		bne	.L154
2254:Core/Src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 1651              		.loc 1 2254 2 is_stmt 1 view .LVU537
2254:Core/Src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win+BPB_TotSec32);
 1652              		.loc 1 2254 10 is_stmt 0 view .LVU538
 1653 0106 94F844C0 		ldrb	ip, [r4, #68]	@ zero_extendqisi2
 1654 010a 94F84320 		ldrb	r2, [r4, #67]	@ zero_extendqisi2
 1655              	.LVL180:
2255:Core/Src/ff.c **** 
 1656              		.loc 1 2255 2 is_stmt 1 view .LVU539
2255:Core/Src/ff.c **** 
 1657              		.loc 1 2255 5 is_stmt 0 view .LVU540
 1658 010e 52EA0C22 		orrs	r2, r2, ip, lsl #8
 1659              	.LVL181:
2255:Core/Src/ff.c **** 
 1660              		.loc 1 2255 5 view .LVU541
 1661 0112 0ED1     		bne	.L133
2255:Core/Src/ff.c **** 
 1662              		.loc 1 2255 14 is_stmt 1 discriminator 1 view .LVU542
2255:Core/Src/ff.c **** 
 1663              		.loc 1 2255 22 is_stmt 0 discriminator 1 view .LVU543
 1664 0114 94F853C0 		ldrb	ip, [r4, #83]	@ zero_extendqisi2
 1665 0118 94F85220 		ldrb	r2, [r4, #82]	@ zero_extendqisi2
 1666              	.LVL182:
2255:Core/Src/ff.c **** 
 1667              		.loc 1 2255 22 discriminator 1 view .LVU544
 1668 011c 1204     		lsls	r2, r2, #16
 1669 011e 42EA0C62 		orr	r2, r2, ip, lsl #24
 1670 0122 94F851C0 		ldrb	ip, [r4, #81]	@ zero_extendqisi2
 1671 0126 42EA0C22 		orr	r2, r2, ip, lsl #8
 1672 012a 94F850C0 		ldrb	ip, [r4, #80]	@ zero_extendqisi2
2255:Core/Src/ff.c **** 
 1673              		.loc 1 2255 20 discriminator 1 view .LVU545
 1674 012e 42EA0C02 		orr	r2, r2, ip
 1675              	.LVL183:
 1676              	.L133:
2257:Core/Src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
 1677              		.loc 1 2257 2 is_stmt 1 view .LVU546
2257:Core/Src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
 1678              		.loc 1 2257 9 is_stmt 0 view .LVU547
 1679 0132 94F83FE0 		ldrb	lr, [r4, #63]	@ zero_extendqisi2
 1680 0136 94F83EC0 		ldrb	ip, [r4, #62]	@ zero_extendqisi2
 1681              	.LVL184:
2258:Core/Src/ff.c **** 
 1682              		.loc 1 2258 2 is_stmt 1 view .LVU548
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 76


2258:Core/Src/ff.c **** 
 1683              		.loc 1 2258 5 is_stmt 0 view .LVU549
 1684 013a 5CEA0E2C 		orrs	ip, ip, lr, lsl #8
 1685              	.LVL185:
2258:Core/Src/ff.c **** 
 1686              		.loc 1 2258 5 view .LVU550
 1687 013e 00F02081 		beq	.L155
2261:Core/Src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 1688              		.loc 1 2261 2 is_stmt 1 view .LVU551
2261:Core/Src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 1689              		.loc 1 2261 16 is_stmt 0 view .LVU552
 1690 0142 0CEB0109 		add	r9, ip, r1
2261:Core/Src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 1691              		.loc 1 2261 9 view .LVU553
 1692 0146 09EB1619 		add	r9, r9, r6, lsr #4
 1693              	.LVL186:
2262:Core/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 1694              		.loc 1 2262 2 is_stmt 1 view .LVU554
2262:Core/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 1695              		.loc 1 2262 5 is_stmt 0 view .LVU555
 1696 014a 4A45     		cmp	r2, r9
 1697 014c C0F01B81 		bcc	.L156
2263:Core/Src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 1698              		.loc 1 2263 2 is_stmt 1 view .LVU556
2263:Core/Src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 1699              		.loc 1 2263 17 is_stmt 0 view .LVU557
 1700 0150 A2EB0902 		sub	r2, r2, r9
 1701              	.LVL187:
2263:Core/Src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 1702              		.loc 1 2263 8 view .LVU558
 1703 0154 B2FBF0FE 		udiv	lr, r2, r0
 1704              	.LVL188:
2264:Core/Src/ff.c **** 	fmt = FS_FAT12;
 1705              		.loc 1 2264 2 is_stmt 1 view .LVU559
2264:Core/Src/ff.c **** 	fmt = FS_FAT12;
 1706              		.loc 1 2264 5 is_stmt 0 view .LVU560
 1707 0158 8242     		cmp	r2, r0
 1708 015a C0F01681 		bcc	.L157
2265:Core/Src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 1709              		.loc 1 2265 2 is_stmt 1 view .LVU561
 1710              	.LVL189:
2266:Core/Src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 1711              		.loc 1 2266 2 view .LVU562
2266:Core/Src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 1712              		.loc 1 2266 5 is_stmt 0 view .LVU563
 1713 015e 40F6F572 		movw	r2, #4085
 1714 0162 9645     		cmp	lr, r2
 1715 0164 71D8     		bhi	.L158
2265:Core/Src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 1716              		.loc 1 2265 6 view .LVU564
 1717 0166 4FF00108 		mov	r8, #1
 1718              	.L134:
 1719              	.LVL190:
2267:Core/Src/ff.c **** 
 1720              		.loc 1 2267 2 is_stmt 1 view .LVU565
2267:Core/Src/ff.c **** 
 1721              		.loc 1 2267 5 is_stmt 0 view .LVU566
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 77


 1722 016a 4FF6F572 		movw	r2, #65525
 1723 016e 9645     		cmp	lr, r2
 1724 0170 01D9     		bls	.L135
2267:Core/Src/ff.c **** 
 1725              		.loc 1 2267 30 view .LVU567
 1726 0172 4FF00308 		mov	r8, #3
 1727              	.LVL191:
 1728              	.L135:
2270:Core/Src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1729              		.loc 1 2270 2 is_stmt 1 view .LVU568
2270:Core/Src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1730              		.loc 1 2270 23 is_stmt 0 view .LVU569
 1731 0176 0EF1020E 		add	lr, lr, #2
 1732              	.LVL192:
2270:Core/Src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1733              		.loc 1 2270 15 view .LVU570
 1734 017a C4F814E0 		str	lr, [r4, #20]
2271:Core/Src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 1735              		.loc 1 2271 2 is_stmt 1 view .LVU571
2271:Core/Src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 1736              		.loc 1 2271 14 is_stmt 0 view .LVU572
 1737 017e E761     		str	r7, [r4, #28]
2272:Core/Src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1738              		.loc 1 2272 2 is_stmt 1 view .LVU573
2272:Core/Src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1739              		.loc 1 2272 22 is_stmt 0 view .LVU574
 1740 0180 0CEB0702 		add	r2, ip, r7
2272:Core/Src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1741              		.loc 1 2272 14 view .LVU575
 1742 0184 2262     		str	r2, [r4, #32]
2273:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
 1743              		.loc 1 2273 2 is_stmt 1 view .LVU576
2273:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
 1744              		.loc 1 2273 23 is_stmt 0 view .LVU577
 1745 0186 07EB0900 		add	r0, r7, r9
2273:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
 1746              		.loc 1 2273 15 view .LVU578
 1747 018a A062     		str	r0, [r4, #40]
2274:Core/Src/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 1748              		.loc 1 2274 2 is_stmt 1 view .LVU579
2274:Core/Src/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 1749              		.loc 1 2274 5 is_stmt 0 view .LVU580
 1750 018c B8F1030F 		cmp	r8, #3
 1751 0190 5ED0     		beq	.L164
2279:Core/Src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 1752              		.loc 1 2279 3 is_stmt 1 view .LVU581
2279:Core/Src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 1753              		.loc 1 2279 6 is_stmt 0 view .LVU582
 1754 0192 002E     		cmp	r6, #0
 1755 0194 00F0FD80 		beq	.L161
2280:Core/Src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 1756              		.loc 1 2280 3 is_stmt 1 view .LVU583
2280:Core/Src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 1757              		.loc 1 2280 29 is_stmt 0 view .LVU584
 1758 0198 1144     		add	r1, r1, r2
 1759              	.LVL193:
2280:Core/Src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 78


 1760              		.loc 1 2280 15 view .LVU585
 1761 019a 6162     		str	r1, [r4, #36]
2281:Core/Src/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 1762              		.loc 1 2281 3 is_stmt 1 view .LVU586
2282:Core/Src/ff.c **** 	}
 1763              		.loc 1 2282 21 is_stmt 0 view .LVU587
 1764 019c B8F1020F 		cmp	r8, #2
 1765 01a0 6BD0     		beq	.L165
2282:Core/Src/ff.c **** 	}
 1766              		.loc 1 2282 36 discriminator 2 view .LVU588
 1767 01a2 0EEB4E01 		add	r1, lr, lr, lsl #1
2282:Core/Src/ff.c **** 	}
 1768              		.loc 1 2282 60 discriminator 2 view .LVU589
 1769 01a6 0EF00102 		and	r2, lr, #1
2282:Core/Src/ff.c **** 	}
 1770              		.loc 1 2282 21 discriminator 2 view .LVU590
 1771 01aa 02EB5102 		add	r2, r2, r1, lsr #1
 1772              	.L137:
 1773              	.LVL194:
2284:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1774              		.loc 1 2284 2 is_stmt 1 view .LVU591
2284:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1775              		.loc 1 2284 26 is_stmt 0 view .LVU592
 1776 01ae 02F2FF12 		addw	r2, r2, #511
 1777              	.LVL195:
2284:Core/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1778              		.loc 1 2284 5 view .LVU593
 1779 01b2 B3EB522F 		cmp	r3, r2, lsr #9
 1780 01b6 C0F0EE80 		bcc	.L162
2289:Core/Src/ff.c **** 
 1781              		.loc 1 2289 2 is_stmt 1 view .LVU594
2289:Core/Src/ff.c **** 
 1782              		.loc 1 2289 34 is_stmt 0 view .LVU595
 1783 01ba 4FF0FF33 		mov	r3, #-1
 1784              	.LVL196:
2289:Core/Src/ff.c **** 
 1785              		.loc 1 2289 34 view .LVU596
 1786 01be 2361     		str	r3, [r4, #16]
2289:Core/Src/ff.c **** 
 1787              		.loc 1 2289 17 view .LVU597
 1788 01c0 E360     		str	r3, [r4, #12]
2292:Core/Src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1789              		.loc 1 2292 2 is_stmt 1 view .LVU598
2292:Core/Src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1790              		.loc 1 2292 15 is_stmt 0 view .LVU599
 1791 01c2 8023     		movs	r3, #128
 1792 01c4 6371     		strb	r3, [r4, #5]
2294:Core/Src/ff.c **** 		&& LD_WORD(fs->win+BPB_FSInfo) == 1
 1793              		.loc 1 2294 2 is_stmt 1 view .LVU600
2294:Core/Src/ff.c **** 		&& LD_WORD(fs->win+BPB_FSInfo) == 1
 1794              		.loc 1 2294 5 is_stmt 0 view .LVU601
 1795 01c6 B8F1030F 		cmp	r8, #3
 1796 01ca 59D0     		beq	.L166
 1797              	.LVL197:
 1798              	.L139:
2313:Core/Src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
 1799              		.loc 1 2313 2 is_stmt 1 view .LVU602
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 79


2313:Core/Src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
 1800              		.loc 1 2313 14 is_stmt 0 view .LVU603
 1801 01cc 84F80080 		strb	r8, [r4]
2314:Core/Src/ff.c **** #if _FS_RPATH
 1802              		.loc 1 2314 2 is_stmt 1 view .LVU604
2314:Core/Src/ff.c **** #if _FS_RPATH
 1803              		.loc 1 2314 11 is_stmt 0 view .LVU605
 1804 01d0 5B4A     		ldr	r2, .L169+4
 1805 01d2 1388     		ldrh	r3, [r2]
 1806 01d4 0133     		adds	r3, r3, #1
 1807 01d6 9BB2     		uxth	r3, r3
2314:Core/Src/ff.c **** #if _FS_RPATH
 1808              		.loc 1 2314 9 view .LVU606
 1809 01d8 1380     		strh	r3, [r2]	@ movhi
 1810 01da E380     		strh	r3, [r4, #6]	@ movhi
2322:Core/Src/ff.c **** }
 1811              		.loc 1 2322 2 is_stmt 1 view .LVU607
2322:Core/Src/ff.c **** }
 1812              		.loc 1 2322 9 is_stmt 0 view .LVU608
 1813 01dc B9E0     		b	.L122
 1814              	.LVL198:
 1815              	.L146:
 1816              	.LBB3:
 1817              	.LBB4:
2220:Core/Src/ff.c **** 		}
 1818              		.loc 1 2220 37 view .LVU609
 1819 01de 0023     		movs	r3, #0
 1820              	.LVL199:
 1821              	.L127:
2220:Core/Src/ff.c **** 		}
 1822              		.loc 1 2220 10 discriminator 4 view .LVU610
 1823 01e0 04AA     		add	r2, sp, #16
 1824 01e2 02EB8102 		add	r2, r2, r1, lsl #2
 1825 01e6 42F8103C 		str	r3, [r2, #-16]
 1826              	.LBE4:
2218:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
 1827              		.loc 1 2218 22 is_stmt 1 discriminator 4 view .LVU611
2218:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
 1828              		.loc 1 2218 23 is_stmt 0 discriminator 4 view .LVU612
 1829 01ea 0131     		adds	r1, r1, #1
 1830              	.LVL200:
 1831              	.L125:
2218:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
 1832              		.loc 1 2218 15 is_stmt 1 discriminator 2 view .LVU613
2218:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
 1833              		.loc 1 2218 3 is_stmt 0 discriminator 2 view .LVU614
 1834 01ec 0329     		cmp	r1, #3
 1835 01ee 15D8     		bhi	.L167
 1836              	.LBB5:
2219:Core/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
 1837              		.loc 1 2219 4 is_stmt 1 view .LVU615
2219:Core/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
 1838              		.loc 1 2219 15 is_stmt 0 view .LVU616
 1839 01f0 04F13003 		add	r3, r4, #48
2219:Core/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
 1840              		.loc 1 2219 37 view .LVU617
 1841 01f4 0A01     		lsls	r2, r1, #4
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 80


2219:Core/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
 1842              		.loc 1 2219 33 view .LVU618
 1843 01f6 02F5DF72 		add	r2, r2, #446
2219:Core/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
 1844              		.loc 1 2219 10 view .LVU619
 1845 01fa 1344     		add	r3, r3, r2
 1846              	.LVL201:
2220:Core/Src/ff.c **** 		}
 1847              		.loc 1 2220 4 is_stmt 1 view .LVU620
2220:Core/Src/ff.c **** 		}
 1848              		.loc 1 2220 14 is_stmt 0 view .LVU621
 1849 01fc 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
2220:Core/Src/ff.c **** 		}
 1850              		.loc 1 2220 37 view .LVU622
 1851 01fe 002A     		cmp	r2, #0
 1852 0200 EDD0     		beq	.L146
2220:Core/Src/ff.c **** 		}
 1853              		.loc 1 2220 20 discriminator 1 view .LVU623
 1854 0202 D87A     		ldrb	r0, [r3, #11]	@ zero_extendqisi2
 1855 0204 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 1856 0206 1204     		lsls	r2, r2, #16
 1857 0208 42EA0062 		orr	r2, r2, r0, lsl #24
 1858 020c 587A     		ldrb	r0, [r3, #9]	@ zero_extendqisi2
 1859 020e 42EA0022 		orr	r2, r2, r0, lsl #8
 1860 0212 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1861              	.LVL202:
2220:Core/Src/ff.c **** 		}
 1862              		.loc 1 2220 37 discriminator 1 view .LVU624
 1863 0214 1343     		orrs	r3, r3, r2
 1864 0216 E3E7     		b	.L127
 1865              	.LVL203:
 1866              	.L145:
2220:Core/Src/ff.c **** 		}
 1867              		.loc 1 2220 37 discriminator 1 view .LVU625
 1868              	.LBE5:
2218:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
 1869              		.loc 1 2218 10 view .LVU626
 1870 0218 0021     		movs	r1, #0
 1871 021a E7E7     		b	.L125
 1872              	.LVL204:
 1873              	.L167:
2218:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
 1874              		.loc 1 2218 10 view .LVU627
 1875 021c 0026     		movs	r6, #0
 1876              	.LVL205:
2218:Core/Src/ff.c **** 			BYTE *pt = fs->win+MBR_Table + i * SZ_PTE;
 1877              		.loc 1 2218 10 view .LVU628
 1878 021e 0BE0     		b	.L131
 1879              	.LVL206:
 1880              	.L168:
2226:Core/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1881              		.loc 1 2226 18 discriminator 1 view .LVU629
 1882 0220 3946     		mov	r1, r7
 1883 0222 2046     		mov	r0, r4
 1884 0224 FFF7FEFF 		bl	check_fs
 1885              	.LVL207:
2227:Core/Src/ff.c **** 	}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 81


 1886              		.loc 1 2227 11 is_stmt 1 discriminator 1 view .LVU630
2227:Core/Src/ff.c **** 	}
 1887              		.loc 1 2227 3 is_stmt 0 discriminator 1 view .LVU631
 1888 0228 0546     		mov	r5, r0
 1889 022a 0028     		cmp	r0, #0
 1890 022c 3FF425AF 		beq	.L126
 1891              	.LVL208:
 1892              	.L129:
2227:Core/Src/ff.c **** 	}
 1893              		.loc 1 2227 31 discriminator 1 view .LVU632
 1894 0230 0136     		adds	r6, r6, #1
 1895              	.LVL209:
2227:Core/Src/ff.c **** 	}
 1896              		.loc 1 2227 31 discriminator 1 view .LVU633
 1897 0232 032E     		cmp	r6, #3
 1898 0234 3FF621AF 		bhi	.L126
 1899              	.LVL210:
 1900              	.L131:
2224:Core/Src/ff.c **** 			bsect = br[i];
 1901              		.loc 1 2224 3 is_stmt 1 view .LVU634
2225:Core/Src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
 1902              		.loc 1 2225 4 view .LVU635
2225:Core/Src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
 1903              		.loc 1 2225 10 is_stmt 0 view .LVU636
 1904 0238 04AB     		add	r3, sp, #16
 1905 023a 03EB8603 		add	r3, r3, r6, lsl #2
 1906 023e 53F8107C 		ldr	r7, [r3, #-16]
 1907              	.LVL211:
2226:Core/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1908              		.loc 1 2226 4 is_stmt 1 view .LVU637
2226:Core/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1909              		.loc 1 2226 8 is_stmt 0 view .LVU638
 1910 0242 002F     		cmp	r7, #0
 1911 0244 ECD1     		bne	.L168
 1912 0246 0225     		movs	r5, #2
 1913 0248 F2E7     		b	.L129
 1914              	.LVL212:
 1915              	.L158:
2226:Core/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1916              		.loc 1 2226 8 view .LVU639
 1917              	.LBE3:
2266:Core/Src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 1918              		.loc 1 2266 30 view .LVU640
 1919 024a 4FF00208 		mov	r8, #2
 1920 024e 8CE7     		b	.L134
 1921              	.LVL213:
 1922              	.L164:
2275:Core/Src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 1923              		.loc 1 2275 3 is_stmt 1 view .LVU641
2275:Core/Src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 1924              		.loc 1 2275 6 is_stmt 0 view .LVU642
 1925 0250 002E     		cmp	r6, #0
 1926 0252 40F09C80 		bne	.L160
2276:Core/Src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
 1927              		.loc 1 2276 3 is_stmt 1 view .LVU643
2276:Core/Src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
 1928              		.loc 1 2276 17 is_stmt 0 view .LVU644
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 82


 1929 0256 94F85F10 		ldrb	r1, [r4, #95]	@ zero_extendqisi2
 1930              	.LVL214:
2276:Core/Src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
 1931              		.loc 1 2276 17 view .LVU645
 1932 025a 94F85E20 		ldrb	r2, [r4, #94]	@ zero_extendqisi2
 1933 025e 1204     		lsls	r2, r2, #16
 1934 0260 42EA0162 		orr	r2, r2, r1, lsl #24
 1935 0264 94F85D10 		ldrb	r1, [r4, #93]	@ zero_extendqisi2
 1936 0268 42EA0122 		orr	r2, r2, r1, lsl #8
 1937 026c 94F85C10 		ldrb	r1, [r4, #92]	@ zero_extendqisi2
 1938 0270 0A43     		orrs	r2, r2, r1
2276:Core/Src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
 1939              		.loc 1 2276 15 view .LVU646
 1940 0272 6262     		str	r2, [r4, #36]
2277:Core/Src/ff.c **** 	} else {
 1941              		.loc 1 2277 3 is_stmt 1 view .LVU647
2277:Core/Src/ff.c **** 	} else {
 1942              		.loc 1 2277 10 is_stmt 0 view .LVU648
 1943 0274 4FEA8E02 		lsl	r2, lr, #2
 1944              	.LVL215:
2277:Core/Src/ff.c **** 	} else {
 1945              		.loc 1 2277 10 view .LVU649
 1946 0278 99E7     		b	.L137
 1947              	.LVL216:
 1948              	.L165:
2282:Core/Src/ff.c **** 	}
 1949              		.loc 1 2282 21 discriminator 1 view .LVU650
 1950 027a 4FEA4E02 		lsl	r2, lr, #1
 1951 027e 96E7     		b	.L137
 1952              	.LVL217:
 1953              	.L166:
2295:Core/Src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1954              		.loc 1 2295 6 view .LVU651
 1955 0280 94F86120 		ldrb	r2, [r4, #97]	@ zero_extendqisi2
 1956              	.LVL218:
2295:Core/Src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1957              		.loc 1 2295 6 view .LVU652
 1958 0284 94F86030 		ldrb	r3, [r4, #96]	@ zero_extendqisi2
 1959 0288 43EA0223 		orr	r3, r3, r2, lsl #8
 1960 028c 1BB2     		sxth	r3, r3
2295:Core/Src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1961              		.loc 1 2295 3 view .LVU653
 1962 028e 012B     		cmp	r3, #1
 1963 0290 9CD1     		bne	.L139
2296:Core/Src/ff.c **** 	{
 1964              		.loc 1 2296 6 view .LVU654
 1965 0292 791C     		adds	r1, r7, #1
 1966 0294 2046     		mov	r0, r4
 1967 0296 FFF7FEFF 		bl	move_window
 1968              	.LVL219:
2296:Core/Src/ff.c **** 	{
 1969              		.loc 1 2296 3 view .LVU655
 1970 029a 0028     		cmp	r0, #0
 1971 029c 96D1     		bne	.L139
2298:Core/Src/ff.c **** 		if (LD_WORD(fs->win+BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 1972              		.loc 1 2298 3 is_stmt 1 view .LVU656
2298:Core/Src/ff.c **** 		if (LD_WORD(fs->win+BS_55AA) == 0xAA55	/* Load FSINFO data if available */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 83


 1973              		.loc 1 2298 16 is_stmt 0 view .LVU657
 1974 029e 0023     		movs	r3, #0
 1975 02a0 6371     		strb	r3, [r4, #5]
2299:Core/Src/ff.c **** 			&& LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252
 1976              		.loc 1 2299 3 is_stmt 1 view .LVU658
2299:Core/Src/ff.c **** 			&& LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252
 1977              		.loc 1 2299 7 is_stmt 0 view .LVU659
 1978 02a2 94F82F22 		ldrb	r2, [r4, #559]	@ zero_extendqisi2
 1979 02a6 94F82E32 		ldrb	r3, [r4, #558]	@ zero_extendqisi2
 1980 02aa 43EA0223 		orr	r3, r3, r2, lsl #8
 1981 02ae 1BB2     		sxth	r3, r3
2299:Core/Src/ff.c **** 			&& LD_DWORD(fs->win+FSI_LeadSig) == 0x41615252
 1982              		.loc 1 2299 6 view .LVU660
 1983 02b0 244A     		ldr	r2, .L169+8
 1984 02b2 9342     		cmp	r3, r2
 1985 02b4 8AD1     		bne	.L139
2300:Core/Src/ff.c **** 			&& LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272)
 1986              		.loc 1 2300 7 view .LVU661
 1987 02b6 94F83320 		ldrb	r2, [r4, #51]	@ zero_extendqisi2
 1988 02ba 94F83230 		ldrb	r3, [r4, #50]	@ zero_extendqisi2
 1989 02be 1B04     		lsls	r3, r3, #16
 1990 02c0 43EA0263 		orr	r3, r3, r2, lsl #24
 1991 02c4 94F83120 		ldrb	r2, [r4, #49]	@ zero_extendqisi2
 1992 02c8 43EA0223 		orr	r3, r3, r2, lsl #8
 1993 02cc 94F83020 		ldrb	r2, [r4, #48]	@ zero_extendqisi2
 1994 02d0 1343     		orrs	r3, r3, r2
2300:Core/Src/ff.c **** 			&& LD_DWORD(fs->win+FSI_StrucSig) == 0x61417272)
 1995              		.loc 1 2300 4 view .LVU662
 1996 02d2 1D4A     		ldr	r2, .L169+12
 1997 02d4 9342     		cmp	r3, r2
 1998 02d6 7FF479AF 		bne	.L139
2301:Core/Src/ff.c **** 		{
 1999              		.loc 1 2301 7 view .LVU663
 2000 02da 94F81722 		ldrb	r2, [r4, #535]	@ zero_extendqisi2
 2001 02de 94F81632 		ldrb	r3, [r4, #534]	@ zero_extendqisi2
 2002 02e2 1B04     		lsls	r3, r3, #16
 2003 02e4 43EA0263 		orr	r3, r3, r2, lsl #24
 2004 02e8 94F81522 		ldrb	r2, [r4, #533]	@ zero_extendqisi2
 2005 02ec 43EA0223 		orr	r3, r3, r2, lsl #8
 2006 02f0 94F81422 		ldrb	r2, [r4, #532]	@ zero_extendqisi2
 2007 02f4 1343     		orrs	r3, r3, r2
2301:Core/Src/ff.c **** 		{
 2008              		.loc 1 2301 4 view .LVU664
 2009 02f6 154A     		ldr	r2, .L169+16
 2010 02f8 9342     		cmp	r3, r2
 2011 02fa 7FF467AF 		bne	.L139
2304:Core/Src/ff.c **** #endif
 2012              		.loc 1 2304 4 is_stmt 1 view .LVU665
2304:Core/Src/ff.c **** #endif
 2013              		.loc 1 2304 21 is_stmt 0 view .LVU666
 2014 02fe 94F81B22 		ldrb	r2, [r4, #539]	@ zero_extendqisi2
 2015 0302 94F81A32 		ldrb	r3, [r4, #538]	@ zero_extendqisi2
 2016 0306 1B04     		lsls	r3, r3, #16
 2017 0308 43EA0263 		orr	r3, r3, r2, lsl #24
 2018 030c 94F81922 		ldrb	r2, [r4, #537]	@ zero_extendqisi2
 2019 0310 43EA0223 		orr	r3, r3, r2, lsl #8
 2020 0314 94F81822 		ldrb	r2, [r4, #536]	@ zero_extendqisi2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 84


 2021 0318 1343     		orrs	r3, r3, r2
2304:Core/Src/ff.c **** #endif
 2022              		.loc 1 2304 19 view .LVU667
 2023 031a 2361     		str	r3, [r4, #16]
2307:Core/Src/ff.c **** #endif
 2024              		.loc 1 2307 4 is_stmt 1 view .LVU668
2307:Core/Src/ff.c **** #endif
 2025              		.loc 1 2307 21 is_stmt 0 view .LVU669
 2026 031c 94F81F22 		ldrb	r2, [r4, #543]	@ zero_extendqisi2
 2027 0320 94F81E32 		ldrb	r3, [r4, #542]	@ zero_extendqisi2
 2028 0324 1B04     		lsls	r3, r3, #16
 2029 0326 43EA0263 		orr	r3, r3, r2, lsl #24
 2030 032a 94F81D22 		ldrb	r2, [r4, #541]	@ zero_extendqisi2
 2031 032e 43EA0223 		orr	r3, r3, r2, lsl #8
 2032 0332 94F81C22 		ldrb	r2, [r4, #540]	@ zero_extendqisi2
 2033 0336 1343     		orrs	r3, r3, r2
2307:Core/Src/ff.c **** #endif
 2034              		.loc 1 2307 19 view .LVU670
 2035 0338 E360     		str	r3, [r4, #12]
 2036 033a 47E7     		b	.L139
 2037              	.L170:
 2038              		.align	2
 2039              	.L169:
 2040 033c 00000000 		.word	.LANCHOR1
 2041 0340 00000000 		.word	.LANCHOR2
 2042 0344 55AAFFFF 		.word	-21931
 2043 0348 52526141 		.word	1096897106
 2044 034c 72724161 		.word	1631679090
 2045              	.LVL220:
 2046              	.L140:
2179:Core/Src/ff.c **** 
 2047              		.loc 1 2179 22 view .LVU671
 2048 0350 0B25     		movs	r5, #11
 2049              	.LVL221:
 2050              	.L122:
2323:Core/Src/ff.c **** 
 2051              		.loc 1 2323 1 view .LVU672
 2052 0352 2846     		mov	r0, r5
 2053 0354 05B0     		add	sp, sp, #20
 2054              	.LCFI15:
 2055              		.cfi_remember_state
 2056              		.cfi_def_cfa_offset 28
 2057              		@ sp needed
 2058 0356 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 2059              	.LVL222:
 2060              	.L141:
 2061              	.LCFI16:
 2062              		.cfi_restore_state
2183:Core/Src/ff.c **** 
 2063              		.loc 1 2183 18 view .LVU673
 2064 035a 0C25     		movs	r5, #12
 2065              	.LVL223:
2183:Core/Src/ff.c **** 
 2066              		.loc 1 2183 18 view .LVU674
 2067 035c F9E7     		b	.L122
 2068              	.LVL224:
 2069              	.L143:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 85


2204:Core/Src/ff.c **** 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 2070              		.loc 1 2204 10 view .LVU675
 2071 035e 0325     		movs	r5, #3
 2072 0360 F7E7     		b	.L122
 2073              	.L144:
2206:Core/Src/ff.c **** #if _MAX_SS != _MIN_SS						/* Get sector size (multiple sector size cfg only) */
 2074              		.loc 1 2206 10 view .LVU676
 2075 0362 0A25     		movs	r5, #10
 2076 0364 F5E7     		b	.L122
 2077              	.LVL225:
 2078              	.L148:
2229:Core/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 2079              		.loc 1 2229 23 view .LVU677
 2080 0366 0125     		movs	r5, #1
 2081              	.LVL226:
2229:Core/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 2082              		.loc 1 2229 23 view .LVU678
 2083 0368 F3E7     		b	.L122
 2084              	.LVL227:
 2085              	.L149:
2230:Core/Src/ff.c **** 
 2086              		.loc 1 2230 18 view .LVU679
 2087 036a 0D25     		movs	r5, #13
 2088              	.LVL228:
2230:Core/Src/ff.c **** 
 2089              		.loc 1 2230 18 view .LVU680
 2090 036c F1E7     		b	.L122
 2091              	.LVL229:
 2092              	.L150:
2235:Core/Src/ff.c **** 
 2093              		.loc 1 2235 10 view .LVU681
 2094 036e 0D25     		movs	r5, #13
 2095              	.LVL230:
2235:Core/Src/ff.c **** 
 2096              		.loc 1 2235 10 view .LVU682
 2097 0370 EFE7     		b	.L122
 2098              	.LVL231:
 2099              	.L151:
2243:Core/Src/ff.c **** 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
 2100              		.loc 1 2243 10 view .LVU683
 2101 0372 0D25     		movs	r5, #13
 2102              	.LVL232:
2243:Core/Src/ff.c **** 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
 2103              		.loc 1 2243 10 view .LVU684
 2104 0374 EDE7     		b	.L122
 2105              	.LVL233:
 2106              	.L152:
2248:Core/Src/ff.c **** 
 2107              		.loc 1 2248 10 view .LVU685
 2108 0376 0D25     		movs	r5, #13
 2109              	.LVL234:
2248:Core/Src/ff.c **** 
 2110              		.loc 1 2248 10 view .LVU686
 2111 0378 EBE7     		b	.L122
 2112              	.LVL235:
 2113              	.L153:
2248:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 86


 2114              		.loc 1 2248 10 view .LVU687
 2115 037a 0D25     		movs	r5, #13
 2116              	.LVL236:
2248:Core/Src/ff.c **** 
 2117              		.loc 1 2248 10 view .LVU688
 2118 037c E9E7     		b	.L122
 2119              	.LVL237:
 2120              	.L154:
2252:Core/Src/ff.c **** 
 2121              		.loc 1 2252 10 view .LVU689
 2122 037e 0D25     		movs	r5, #13
 2123              	.LVL238:
2252:Core/Src/ff.c **** 
 2124              		.loc 1 2252 10 view .LVU690
 2125 0380 E7E7     		b	.L122
 2126              	.LVL239:
 2127              	.L155:
2258:Core/Src/ff.c **** 
 2128              		.loc 1 2258 20 view .LVU691
 2129 0382 0D25     		movs	r5, #13
 2130              	.LVL240:
2258:Core/Src/ff.c **** 
 2131              		.loc 1 2258 20 view .LVU692
 2132 0384 E5E7     		b	.L122
 2133              	.LVL241:
 2134              	.L156:
2262:Core/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 2135              		.loc 1 2262 29 view .LVU693
 2136 0386 0D25     		movs	r5, #13
 2137              	.LVL242:
2262:Core/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 2138              		.loc 1 2262 29 view .LVU694
 2139 0388 E3E7     		b	.L122
 2140              	.LVL243:
 2141              	.L157:
2264:Core/Src/ff.c **** 	fmt = FS_FAT12;
 2142              		.loc 1 2264 21 view .LVU695
 2143 038a 0D25     		movs	r5, #13
 2144              	.LVL244:
2264:Core/Src/ff.c **** 	fmt = FS_FAT12;
 2145              		.loc 1 2264 21 view .LVU696
 2146 038c E1E7     		b	.L122
 2147              	.LVL245:
 2148              	.L160:
2275:Core/Src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win+BPB_RootClus);	/* Root directory start cluster */
 2149              		.loc 1 2275 29 view .LVU697
 2150 038e 0D25     		movs	r5, #13
 2151 0390 DFE7     		b	.L122
 2152              	.L161:
2279:Core/Src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 2153              		.loc 1 2279 30 view .LVU698
 2154 0392 0D25     		movs	r5, #13
 2155 0394 DDE7     		b	.L122
 2156              	.LVL246:
 2157              	.L162:
2285:Core/Src/ff.c **** 
 2158              		.loc 1 2285 10 view .LVU699
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 87


 2159 0396 0D25     		movs	r5, #13
 2160 0398 DBE7     		b	.L122
 2161              		.cfi_endproc
 2162              	.LFE32:
 2164 039a 00BF     		.section	.text.get_fileinfo,"ax",%progbits
 2165              		.align	1
 2166              		.syntax unified
 2167              		.thumb
 2168              		.thumb_func
 2169              		.fpu fpv4-sp-d16
 2171              	get_fileinfo:
 2172              	.LVL247:
 2173              	.LFB27:
1737:Core/Src/ff.c **** 	UINT i;
 2174              		.loc 1 1737 1 is_stmt 1 view -0
 2175              		.cfi_startproc
 2176              		@ args = 0, pretend = 0, frame = 0
 2177              		@ frame_needed = 0, uses_anonymous_args = 0
1737:Core/Src/ff.c **** 	UINT i;
 2178              		.loc 1 1737 1 is_stmt 0 view .LVU701
 2179 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2180              	.LCFI17:
 2181              		.cfi_def_cfa_offset 24
 2182              		.cfi_offset 3, -24
 2183              		.cfi_offset 4, -20
 2184              		.cfi_offset 5, -16
 2185              		.cfi_offset 6, -12
 2186              		.cfi_offset 7, -8
 2187              		.cfi_offset 14, -4
 2188 0002 0C46     		mov	r4, r1
1738:Core/Src/ff.c **** 	TCHAR *p, c;
 2189              		.loc 1 1738 2 is_stmt 1 view .LVU702
1739:Core/Src/ff.c **** 
 2190              		.loc 1 1739 2 view .LVU703
1742:Core/Src/ff.c **** 	if (dp->sect) {		/* Get SFN */
 2191              		.loc 1 1742 2 view .LVU704
1742:Core/Src/ff.c **** 	if (dp->sect) {		/* Get SFN */
 2192              		.loc 1 1742 4 is_stmt 0 view .LVU705
 2193 0004 01F1090C 		add	ip, r1, #9
 2194              	.LVL248:
1743:Core/Src/ff.c **** 		BYTE *dir = dp->dir;
 2195              		.loc 1 1743 2 is_stmt 1 view .LVU706
1743:Core/Src/ff.c **** 		BYTE *dir = dp->dir;
 2196              		.loc 1 1743 8 is_stmt 0 view .LVU707
 2197 0008 0369     		ldr	r3, [r0, #16]
1743:Core/Src/ff.c **** 		BYTE *dir = dp->dir;
 2198              		.loc 1 1743 5 view .LVU708
 2199 000a 002B     		cmp	r3, #0
 2200 000c 3ED0     		beq	.L172
 2201              	.LBB6:
1744:Core/Src/ff.c **** 
 2202              		.loc 1 1744 3 is_stmt 1 view .LVU709
1744:Core/Src/ff.c **** 
 2203              		.loc 1 1744 9 is_stmt 0 view .LVU710
 2204 000e 4169     		ldr	r1, [r0, #20]
 2205              	.LVL249:
1746:Core/Src/ff.c **** 		while (i < 11) {		/* Copy name body and extension */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 88


 2206              		.loc 1 1746 3 is_stmt 1 view .LVU711
1747:Core/Src/ff.c **** 			c = (TCHAR)dir[i++];
 2207              		.loc 1 1747 3 view .LVU712
1746:Core/Src/ff.c **** 		while (i < 11) {		/* Copy name body and extension */
 2208              		.loc 1 1746 5 is_stmt 0 view .LVU713
 2209 0010 0023     		movs	r3, #0
1747:Core/Src/ff.c **** 			c = (TCHAR)dir[i++];
 2210              		.loc 1 1747 9 view .LVU714
 2211 0012 0AE0     		b	.L173
 2212              	.LVL250:
 2213              	.L192:
1750:Core/Src/ff.c **** 			if (i == 9) *p++ = '.';			/* Insert a . if extension is exist */
 2214              		.loc 1 1750 21 view .LVU715
 2215 0014 E523     		movs	r3, #229
 2216              	.LVL251:
1750:Core/Src/ff.c **** 			if (i == 9) *p++ = '.';			/* Insert a . if extension is exist */
 2217              		.loc 1 1750 21 view .LVU716
 2218 0016 10E0     		b	.L175
 2219              	.LVL252:
 2220              	.L193:
1751:Core/Src/ff.c **** #if _USE_LFN
 2221              		.loc 1 1751 16 is_stmt 1 discriminator 1 view .LVU717
1751:Core/Src/ff.c **** #if _USE_LFN
 2222              		.loc 1 1751 21 is_stmt 0 discriminator 1 view .LVU718
 2223 0018 2E25     		movs	r5, #46
 2224 001a 0CF8015B 		strb	r5, [ip], #1
 2225              	.LVL253:
1751:Core/Src/ff.c **** #if _USE_LFN
 2226              		.loc 1 1751 21 discriminator 1 view .LVU719
 2227 001e 0EE0     		b	.L176
 2228              	.L194:
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2229              		.loc 1 1753 57 view .LVU720
 2230 0020 1025     		movs	r5, #16
 2231 0022 17E0     		b	.L178
 2232              	.L177:
1762:Core/Src/ff.c **** 		}
 2233              		.loc 1 1762 4 is_stmt 1 view .LVU721
 2234              	.LVL254:
1762:Core/Src/ff.c **** 		}
 2235              		.loc 1 1762 9 is_stmt 0 view .LVU722
 2236 0024 0CF8013B 		strb	r3, [ip], #1
 2237              	.LVL255:
 2238              	.L174:
1762:Core/Src/ff.c **** 		}
 2239              		.loc 1 1762 6 view .LVU723
 2240 0028 1346     		mov	r3, r2
 2241              	.LVL256:
 2242              	.L173:
1747:Core/Src/ff.c **** 			c = (TCHAR)dir[i++];
 2243              		.loc 1 1747 9 is_stmt 1 view .LVU724
 2244 002a 0A2B     		cmp	r3, #10
 2245 002c 17D8     		bhi	.L191
1748:Core/Src/ff.c **** 			if (c == ' ') continue;			/* Skip padding spaces */
 2246              		.loc 1 1748 4 view .LVU725
1748:Core/Src/ff.c **** 			if (c == ' ') continue;			/* Skip padding spaces */
 2247              		.loc 1 1748 20 is_stmt 0 view .LVU726
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 89


 2248 002e 5A1C     		adds	r2, r3, #1
 2249              	.LVL257:
1748:Core/Src/ff.c **** 			if (c == ' ') continue;			/* Skip padding spaces */
 2250              		.loc 1 1748 6 view .LVU727
 2251 0030 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 2252              	.LVL258:
1749:Core/Src/ff.c **** 			if (c == NDDE) c = (TCHAR)DDE;	/* Restore replaced DDE character */
 2253              		.loc 1 1749 4 is_stmt 1 view .LVU728
1749:Core/Src/ff.c **** 			if (c == NDDE) c = (TCHAR)DDE;	/* Restore replaced DDE character */
 2254              		.loc 1 1749 7 is_stmt 0 view .LVU729
 2255 0032 202B     		cmp	r3, #32
 2256 0034 F8D0     		beq	.L174
1750:Core/Src/ff.c **** 			if (i == 9) *p++ = '.';			/* Insert a . if extension is exist */
 2257              		.loc 1 1750 4 is_stmt 1 view .LVU730
1750:Core/Src/ff.c **** 			if (i == 9) *p++ = '.';			/* Insert a . if extension is exist */
 2258              		.loc 1 1750 7 is_stmt 0 view .LVU731
 2259 0036 052B     		cmp	r3, #5
 2260 0038 ECD0     		beq	.L192
 2261              	.LVL259:
 2262              	.L175:
1751:Core/Src/ff.c **** #if _USE_LFN
 2263              		.loc 1 1751 4 is_stmt 1 view .LVU732
1751:Core/Src/ff.c **** #if _USE_LFN
 2264              		.loc 1 1751 7 is_stmt 0 view .LVU733
 2265 003a 092A     		cmp	r2, #9
 2266 003c ECD0     		beq	.L193
 2267              	.L176:
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2268              		.loc 1 1753 4 is_stmt 1 view .LVU734
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2269              		.loc 1 1753 8 is_stmt 0 view .LVU735
 2270 003e A3F1410E 		sub	lr, r3, #65
 2271 0042 5FFA8EFE 		uxtb	lr, lr
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2272              		.loc 1 1753 7 view .LVU736
 2273 0046 BEF1190F 		cmp	lr, #25
 2274 004a EBD8     		bhi	.L177
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2275              		.loc 1 1753 26 discriminator 1 view .LVU737
 2276 004c 0E7B     		ldrb	r6, [r1, #12]	@ zero_extendqisi2
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2277              		.loc 1 1753 57 discriminator 1 view .LVU738
 2278 004e 082A     		cmp	r2, #8
 2279 0050 E6D8     		bhi	.L194
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2280              		.loc 1 1753 57 view .LVU739
 2281 0052 0825     		movs	r5, #8
 2282              	.L178:
1753:Core/Src/ff.c **** 				c += 0x20;			/* To lower */
 2283              		.loc 1 1753 19 discriminator 5 view .LVU740
 2284 0054 2E42     		tst	r6, r5
 2285 0056 E5D0     		beq	.L177
1754:Core/Src/ff.c **** #if _LFN_UNICODE
 2286              		.loc 1 1754 5 is_stmt 1 view .LVU741
1754:Core/Src/ff.c **** #if _LFN_UNICODE
 2287              		.loc 1 1754 7 is_stmt 0 view .LVU742
 2288 0058 2033     		adds	r3, r3, #32
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 90


 2289              	.LVL260:
1754:Core/Src/ff.c **** #if _LFN_UNICODE
 2290              		.loc 1 1754 7 view .LVU743
 2291 005a DBB2     		uxtb	r3, r3
 2292              	.LVL261:
1754:Core/Src/ff.c **** #if _LFN_UNICODE
 2293              		.loc 1 1754 7 view .LVU744
 2294 005c E2E7     		b	.L177
 2295              	.LVL262:
 2296              	.L191:
1764:Core/Src/ff.c **** 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
 2297              		.loc 1 1764 3 is_stmt 1 view .LVU745
1764:Core/Src/ff.c **** 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
 2298              		.loc 1 1764 16 is_stmt 0 view .LVU746
 2299 005e CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 2300              	.LVL263:
1764:Core/Src/ff.c **** 		fno->fsize = LD_DWORD(dir+DIR_FileSize);	/* Size */
 2301              		.loc 1 1764 16 view .LVU747
 2302 0060 2372     		strb	r3, [r4, #8]
1765:Core/Src/ff.c **** 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
 2303              		.loc 1 1765 3 is_stmt 1 view .LVU748
1765:Core/Src/ff.c **** 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
 2304              		.loc 1 1765 16 is_stmt 0 view .LVU749
 2305 0062 CA7F     		ldrb	r2, [r1, #31]	@ zero_extendqisi2
 2306 0064 8B7F     		ldrb	r3, [r1, #30]	@ zero_extendqisi2
 2307 0066 1B04     		lsls	r3, r3, #16
 2308 0068 43EA0263 		orr	r3, r3, r2, lsl #24
 2309 006c 4A7F     		ldrb	r2, [r1, #29]	@ zero_extendqisi2
 2310 006e 43EA0223 		orr	r3, r3, r2, lsl #8
 2311 0072 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 2312 0074 1343     		orrs	r3, r3, r2
1765:Core/Src/ff.c **** 		fno->fdate = LD_WORD(dir+DIR_WrtDate);		/* Date */
 2313              		.loc 1 1765 14 view .LVU750
 2314 0076 2360     		str	r3, [r4]
1766:Core/Src/ff.c **** 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
 2315              		.loc 1 1766 3 is_stmt 1 view .LVU751
1766:Core/Src/ff.c **** 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
 2316              		.loc 1 1766 16 is_stmt 0 view .LVU752
 2317 0078 4A7E     		ldrb	r2, [r1, #25]	@ zero_extendqisi2
 2318 007a 0B7E     		ldrb	r3, [r1, #24]	@ zero_extendqisi2
 2319 007c 43EA0223 		orr	r3, r3, r2, lsl #8
1766:Core/Src/ff.c **** 		fno->ftime = LD_WORD(dir+DIR_WrtTime);		/* Time */
 2320              		.loc 1 1766 14 view .LVU753
 2321 0080 A380     		strh	r3, [r4, #4]	@ movhi
1767:Core/Src/ff.c **** 	}
 2322              		.loc 1 1767 3 is_stmt 1 view .LVU754
1767:Core/Src/ff.c **** 	}
 2323              		.loc 1 1767 16 is_stmt 0 view .LVU755
 2324 0082 CA7D     		ldrb	r2, [r1, #23]	@ zero_extendqisi2
 2325 0084 8B7D     		ldrb	r3, [r1, #22]	@ zero_extendqisi2
 2326 0086 43EA0223 		orr	r3, r3, r2, lsl #8
1767:Core/Src/ff.c **** 	}
 2327              		.loc 1 1767 14 view .LVU756
 2328 008a E380     		strh	r3, [r4, #6]	@ movhi
 2329              	.LVL264:
 2330              	.L172:
1767:Core/Src/ff.c **** 	}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 91


 2331              		.loc 1 1767 14 view .LVU757
 2332              	.LBE6:
1769:Core/Src/ff.c **** 
 2333              		.loc 1 1769 2 is_stmt 1 view .LVU758
1769:Core/Src/ff.c **** 
 2334              		.loc 1 1769 5 is_stmt 0 view .LVU759
 2335 008c 0023     		movs	r3, #0
 2336 008e 8CF80030 		strb	r3, [ip]
1772:Core/Src/ff.c **** 		WCHAR w, *lfn;
 2337              		.loc 1 1772 2 is_stmt 1 view .LVU760
1772:Core/Src/ff.c **** 		WCHAR w, *lfn;
 2338              		.loc 1 1772 9 is_stmt 0 view .LVU761
 2339 0092 A769     		ldr	r7, [r4, #24]
1772:Core/Src/ff.c **** 		WCHAR w, *lfn;
 2340              		.loc 1 1772 5 view .LVU762
 2341 0094 1FB3     		cbz	r7, .L171
 2342              	.LBB7:
1773:Core/Src/ff.c **** 
 2343              		.loc 1 1773 3 is_stmt 1 view .LVU763
1775:Core/Src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
 2344              		.loc 1 1775 3 view .LVU764
 2345              	.LVL265:
1775:Core/Src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
 2346              		.loc 1 1775 10 view .LVU765
1776:Core/Src/ff.c **** 			lfn = dp->lfn;
 2347              		.loc 1 1776 3 view .LVU766
1776:Core/Src/ff.c **** 			lfn = dp->lfn;
 2348              		.loc 1 1776 9 is_stmt 0 view .LVU767
 2349 0096 0569     		ldr	r5, [r0, #16]
1776:Core/Src/ff.c **** 			lfn = dp->lfn;
 2350              		.loc 1 1776 6 view .LVU768
 2351 0098 FDB1     		cbz	r5, .L181
1776:Core/Src/ff.c **** 			lfn = dp->lfn;
 2352              		.loc 1 1776 22 discriminator 1 view .LVU769
 2353 009a E569     		ldr	r5, [r4, #28]
1776:Core/Src/ff.c **** 			lfn = dp->lfn;
 2354              		.loc 1 1776 16 discriminator 1 view .LVU770
 2355 009c EDB1     		cbz	r5, .L181
1776:Core/Src/ff.c **** 			lfn = dp->lfn;
 2356              		.loc 1 1776 36 discriminator 2 view .LVU771
 2357 009e 028C     		ldrh	r2, [r0, #32]
1776:Core/Src/ff.c **** 			lfn = dp->lfn;
 2358              		.loc 1 1776 31 discriminator 2 view .LVU772
 2359 00a0 4FF6FF73 		movw	r3, #65535
 2360 00a4 9A42     		cmp	r2, r3
 2361 00a6 17D0     		beq	.L187
1777:Core/Src/ff.c **** 			while ((w = *lfn++) != 0) {		/* Get an LFN character */
 2362              		.loc 1 1777 4 is_stmt 1 view .LVU773
1777:Core/Src/ff.c **** 			while ((w = *lfn++) != 0) {		/* Get an LFN character */
 2363              		.loc 1 1777 8 is_stmt 0 view .LVU774
 2364 00a8 C669     		ldr	r6, [r0, #28]
 2365              	.LVL266:
1778:Core/Src/ff.c **** #if !_LFN_UNICODE
 2366              		.loc 1 1778 4 is_stmt 1 view .LVU775
1775:Core/Src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
 2367              		.loc 1 1775 5 is_stmt 0 view .LVU776
 2368 00aa 0025     		movs	r5, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 92


1778:Core/Src/ff.c **** #if !_LFN_UNICODE
 2369              		.loc 1 1778 10 view .LVU777
 2370 00ac 05E0     		b	.L182
 2371              	.LVL267:
 2372              	.L183:
1785:Core/Src/ff.c **** 				p[i++] = (TCHAR)w;
 2373              		.loc 1 1785 5 is_stmt 1 view .LVU778
1785:Core/Src/ff.c **** 				p[i++] = (TCHAR)w;
 2374              		.loc 1 1785 17 is_stmt 0 view .LVU779
 2375 00ae E369     		ldr	r3, [r4, #28]
1785:Core/Src/ff.c **** 				p[i++] = (TCHAR)w;
 2376              		.loc 1 1785 26 view .LVU780
 2377 00b0 013B     		subs	r3, r3, #1
1785:Core/Src/ff.c **** 				p[i++] = (TCHAR)w;
 2378              		.loc 1 1785 8 view .LVU781
 2379 00b2 AB42     		cmp	r3, r5
 2380 00b4 16D9     		bls	.L189
1786:Core/Src/ff.c **** 			}
 2381              		.loc 1 1786 5 is_stmt 1 view .LVU782
 2382              	.LVL268:
1786:Core/Src/ff.c **** 			}
 2383              		.loc 1 1786 12 is_stmt 0 view .LVU783
 2384 00b6 7A55     		strb	r2, [r7, r5]
1786:Core/Src/ff.c **** 			}
 2385              		.loc 1 1786 8 view .LVU784
 2386 00b8 0135     		adds	r5, r5, #1
 2387              	.LVL269:
 2388              	.L182:
1778:Core/Src/ff.c **** #if !_LFN_UNICODE
 2389              		.loc 1 1778 10 is_stmt 1 view .LVU785
1778:Core/Src/ff.c **** #if !_LFN_UNICODE
 2390              		.loc 1 1778 14 is_stmt 0 view .LVU786
 2391 00ba 36F8020B 		ldrh	r0, [r6], #2
 2392              	.LVL270:
1778:Core/Src/ff.c **** #if !_LFN_UNICODE
 2393              		.loc 1 1778 10 view .LVU787
 2394 00be 60B1     		cbz	r0, .L181
1780:Core/Src/ff.c **** 				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
 2395              		.loc 1 1780 5 is_stmt 1 view .LVU788
1780:Core/Src/ff.c **** 				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
 2396              		.loc 1 1780 9 is_stmt 0 view .LVU789
 2397 00c0 0021     		movs	r1, #0
 2398 00c2 FFF7FEFF 		bl	ff_convert
 2399              	.LVL271:
1781:Core/Src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
 2400              		.loc 1 1781 5 is_stmt 1 view .LVU790
1781:Core/Src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
 2401              		.loc 1 1781 8 is_stmt 0 view .LVU791
 2402 00c6 0246     		mov	r2, r0
 2403 00c8 50B1     		cbz	r0, .L188
1782:Core/Src/ff.c **** 					p[i++] = (TCHAR)(w >> 8);
 2404              		.loc 1 1782 5 is_stmt 1 view .LVU792
1782:Core/Src/ff.c **** 					p[i++] = (TCHAR)(w >> 8);
 2405              		.loc 1 1782 8 is_stmt 0 view .LVU793
 2406 00ca FF28     		cmp	r0, #255
 2407 00cc EFD9     		bls	.L183
1783:Core/Src/ff.c **** #endif
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 93


 2408              		.loc 1 1783 6 is_stmt 1 view .LVU794
 2409              	.LVL272:
1783:Core/Src/ff.c **** #endif
 2410              		.loc 1 1783 15 is_stmt 0 view .LVU795
 2411 00ce C0F30723 		ubfx	r3, r0, #8, #8
1783:Core/Src/ff.c **** #endif
 2412              		.loc 1 1783 13 view .LVU796
 2413 00d2 7B55     		strb	r3, [r7, r5]
1783:Core/Src/ff.c **** #endif
 2414              		.loc 1 1783 9 view .LVU797
 2415 00d4 0135     		adds	r5, r5, #1
 2416              	.LVL273:
1783:Core/Src/ff.c **** #endif
 2417              		.loc 1 1783 9 view .LVU798
 2418 00d6 EAE7     		b	.L183
 2419              	.LVL274:
 2420              	.L187:
1775:Core/Src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
 2421              		.loc 1 1775 5 view .LVU799
 2422 00d8 0025     		movs	r5, #0
 2423              	.LVL275:
 2424              	.L181:
1789:Core/Src/ff.c **** 	}
 2425              		.loc 1 1789 3 is_stmt 1 view .LVU800
1789:Core/Src/ff.c **** 	}
 2426              		.loc 1 1789 8 is_stmt 0 view .LVU801
 2427 00da 0023     		movs	r3, #0
 2428 00dc 7B55     		strb	r3, [r7, r5]
 2429              	.LVL276:
 2430              	.L171:
1789:Core/Src/ff.c **** 	}
 2431              		.loc 1 1789 8 view .LVU802
 2432              	.LBE7:
1792:Core/Src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2*/
 2433              		.loc 1 1792 1 view .LVU803
 2434 00de F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2435              	.LVL277:
 2436              	.L188:
 2437              	.LBB8:
1781:Core/Src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
 2438              		.loc 1 1781 17 view .LVU804
 2439 00e0 0025     		movs	r5, #0
 2440              	.LVL278:
1781:Core/Src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
 2441              		.loc 1 1781 17 view .LVU805
 2442 00e2 FAE7     		b	.L181
 2443              	.LVL279:
 2444              	.L189:
1785:Core/Src/ff.c **** 				p[i++] = (TCHAR)w;
 2445              		.loc 1 1785 35 view .LVU806
 2446 00e4 0025     		movs	r5, #0
 2447              	.LVL280:
1785:Core/Src/ff.c **** 				p[i++] = (TCHAR)w;
 2448              		.loc 1 1785 35 view .LVU807
 2449 00e6 F8E7     		b	.L181
 2450              	.LBE8:
 2451              		.cfi_endproc
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 94


 2452              	.LFE27:
 2454              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 2455              		.align	2
 2456              	.LC0:
 2457 0000 222A3A3C 		.ascii	"\"*:<>?|\177\000"
 2457      3E3F7C7F 
 2457      00
 2458 0009 000000   		.align	2
 2459              	.LC1:
 2460 000c 2B2C3B3D 		.ascii	"+,;=[]\000"
 2460      5B5D00
 2461              		.section	.text.create_name,"ax",%progbits
 2462              		.align	1
 2463              		.syntax unified
 2464              		.thumb
 2465              		.thumb_func
 2466              		.fpu fpv4-sp-d16
 2468              	create_name:
 2469              	.LVL281:
 2470              	.LFB28:
1807:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 2471              		.loc 1 1807 1 is_stmt 1 view -0
 2472              		.cfi_startproc
 2473              		@ args = 0, pretend = 0, frame = 8
 2474              		@ frame_needed = 0, uses_anonymous_args = 0
1807:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 2475              		.loc 1 1807 1 is_stmt 0 view .LVU809
 2476 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2477              	.LCFI18:
 2478              		.cfi_def_cfa_offset 36
 2479              		.cfi_offset 4, -36
 2480              		.cfi_offset 5, -32
 2481              		.cfi_offset 6, -28
 2482              		.cfi_offset 7, -24
 2483              		.cfi_offset 8, -20
 2484              		.cfi_offset 9, -16
 2485              		.cfi_offset 10, -12
 2486              		.cfi_offset 11, -8
 2487              		.cfi_offset 14, -4
 2488 0004 83B0     		sub	sp, sp, #12
 2489              	.LCFI19:
 2490              		.cfi_def_cfa_offset 48
 2491 0006 0746     		mov	r7, r0
 2492 0008 8946     		mov	r9, r1
1809:Core/Src/ff.c **** 	WCHAR w, *lfn;
 2493              		.loc 1 1809 2 is_stmt 1 view .LVU810
1810:Core/Src/ff.c **** 	UINT i, ni, si, di;
 2494              		.loc 1 1810 2 view .LVU811
1811:Core/Src/ff.c **** 	const TCHAR *p;
 2495              		.loc 1 1811 2 view .LVU812
1812:Core/Src/ff.c **** 
 2496              		.loc 1 1812 2 view .LVU813
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2497              		.loc 1 1815 2 view .LVU814
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2498              		.loc 1 1815 9 is_stmt 0 view .LVU815
 2499 000a 0E68     		ldr	r6, [r1]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 95


 2500              	.LVL282:
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2501              		.loc 1 1815 2 view .LVU816
 2502 000c 00E0     		b	.L196
 2503              	.L197:
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2504              		.loc 1 1815 48 is_stmt 1 discriminator 5 view .LVU817
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2505              		.loc 1 1815 43 discriminator 5 view .LVU818
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2506              		.loc 1 1815 44 is_stmt 0 discriminator 5 view .LVU819
 2507 000e 0136     		adds	r6, r6, #1
 2508              	.LVL283:
 2509              	.L196:
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2510              		.loc 1 1815 18 is_stmt 1 discriminator 1 view .LVU820
 2511 0010 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2512              		.loc 1 1815 2 is_stmt 0 discriminator 1 view .LVU821
 2513 0012 2F2B     		cmp	r3, #47
 2514 0014 FBD0     		beq	.L197
1815:Core/Src/ff.c **** 	lfn = dp->lfn;
 2515              		.loc 1 1815 28 discriminator 4 view .LVU822
 2516 0016 5C2B     		cmp	r3, #92
 2517 0018 F9D0     		beq	.L197
1816:Core/Src/ff.c **** 	si = di = 0;
 2518              		.loc 1 1816 2 is_stmt 1 view .LVU823
1816:Core/Src/ff.c **** 	si = di = 0;
 2519              		.loc 1 1816 6 is_stmt 0 view .LVU824
 2520 001a FD69     		ldr	r5, [r7, #28]
 2521              	.LVL284:
1817:Core/Src/ff.c **** 	for (;;) {
 2522              		.loc 1 1817 2 is_stmt 1 view .LVU825
1817:Core/Src/ff.c **** 	for (;;) {
 2523              		.loc 1 1817 10 is_stmt 0 view .LVU826
 2524 001c 0024     		movs	r4, #0
1817:Core/Src/ff.c **** 	for (;;) {
 2525              		.loc 1 1817 5 view .LVU827
 2526 001e A046     		mov	r8, r4
 2527 0020 0FE0     		b	.L203
 2528              	.LVL285:
 2529              	.L201:
1829:Core/Src/ff.c **** 		}
 2530              		.loc 1 1829 4 is_stmt 1 view .LVU828
1829:Core/Src/ff.c **** 		}
 2531              		.loc 1 1829 11 is_stmt 0 view .LVU829
 2532 0022 0002     		lsls	r0, r0, #8
 2533              	.LVL286:
1829:Core/Src/ff.c **** 		}
 2534              		.loc 1 1829 11 view .LVU830
 2535 0024 80B2     		uxth	r0, r0
1829:Core/Src/ff.c **** 		}
 2536              		.loc 1 1829 6 view .LVU831
 2537 0026 1844     		add	r0, r0, r3
 2538 0028 80B2     		uxth	r0, r0
 2539              	.LVL287:
 2540              	.L200:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 96


1831:Core/Src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
 2541              		.loc 1 1831 3 is_stmt 1 view .LVU832
1831:Core/Src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
 2542              		.loc 1 1831 7 is_stmt 0 view .LVU833
 2543 002a 0121     		movs	r1, #1
 2544 002c FFF7FEFF 		bl	ff_convert
 2545              	.LVL288:
1832:Core/Src/ff.c **** #endif
 2546              		.loc 1 1832 3 is_stmt 1 view .LVU834
1832:Core/Src/ff.c **** #endif
 2547              		.loc 1 1832 6 is_stmt 0 view .LVU835
 2548 0030 8246     		mov	r10, r0
 2549 0032 0028     		cmp	r0, #0
 2550 0034 00F01381 		beq	.L240
1834:Core/Src/ff.c **** 			return FR_INVALID_NAME;
 2551              		.loc 1 1834 3 is_stmt 1 view .LVU836
1834:Core/Src/ff.c **** 			return FR_INVALID_NAME;
 2552              		.loc 1 1834 6 is_stmt 0 view .LVU837
 2553 0038 7F28     		cmp	r0, #127
 2554 003a 24D9     		bls	.L247
 2555              	.LVL289:
 2556              	.L202:
1836:Core/Src/ff.c **** 	}
 2557              		.loc 1 1836 3 is_stmt 1 view .LVU838
1836:Core/Src/ff.c **** 	}
 2558              		.loc 1 1836 13 is_stmt 0 view .LVU839
 2559 003c 25F814A0 		strh	r10, [r5, r4, lsl #1]	@ movhi
1818:Core/Src/ff.c **** 		w = p[si++];					/* Get a character */
 2560              		.loc 1 1818 8 is_stmt 1 view .LVU840
1836:Core/Src/ff.c **** 	}
 2561              		.loc 1 1836 9 is_stmt 0 view .LVU841
 2562 0040 0134     		adds	r4, r4, #1
 2563              	.LVL290:
 2564              	.L203:
1818:Core/Src/ff.c **** 		w = p[si++];					/* Get a character */
 2565              		.loc 1 1818 2 is_stmt 1 view .LVU842
1819:Core/Src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 2566              		.loc 1 1819 3 view .LVU843
1819:Core/Src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 2567              		.loc 1 1819 11 is_stmt 0 view .LVU844
 2568 0042 08F10102 		add	r2, r8, #1
 2569              	.LVL291:
1819:Core/Src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 2570              		.loc 1 1819 8 view .LVU845
 2571 0046 16F80830 		ldrb	r3, [r6, r8]	@ zero_extendqisi2
1819:Core/Src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 2572              		.loc 1 1819 5 view .LVU846
 2573 004a 98B2     		uxth	r0, r3
 2574              	.LVL292:
1820:Core/Src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
 2575              		.loc 1 1820 3 is_stmt 1 view .LVU847
1820:Core/Src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
 2576              		.loc 1 1820 6 is_stmt 0 view .LVU848
 2577 004c 1F28     		cmp	r0, #31
 2578 004e 22D9     		bls	.L198
1820:Core/Src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
 2579              		.loc 1 1820 15 discriminator 1 view .LVU849
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 97


 2580 0050 2F28     		cmp	r0, #47
 2581 0052 20D0     		beq	.L198
1820:Core/Src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
 2582              		.loc 1 1820 27 discriminator 2 view .LVU850
 2583 0054 5C28     		cmp	r0, #92
 2584 0056 1ED0     		beq	.L198
1821:Core/Src/ff.c **** 			return FR_INVALID_NAME;
 2585              		.loc 1 1821 3 is_stmt 1 view .LVU851
1821:Core/Src/ff.c **** 			return FR_INVALID_NAME;
 2586              		.loc 1 1821 6 is_stmt 0 view .LVU852
 2587 0058 FE2C     		cmp	r4, #254
 2588 005a 00F2FE80 		bhi	.L237
1824:Core/Src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
 2589              		.loc 1 1824 3 is_stmt 1 view .LVU853
1825:Core/Src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
 2590              		.loc 1 1825 3 view .LVU854
1825:Core/Src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
 2591              		.loc 1 1825 7 is_stmt 0 view .LVU855
 2592 005e 7F33     		adds	r3, r3, #127
 2593 0060 DBB2     		uxtb	r3, r3
1825:Core/Src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
 2594              		.loc 1 1825 6 view .LVU856
 2595 0062 7D2B     		cmp	r3, #125
 2596 0064 0DD8     		bhi	.L238
1826:Core/Src/ff.c **** 			if (!IsDBCS2(b))
 2597              		.loc 1 1826 4 is_stmt 1 view .LVU857
1826:Core/Src/ff.c **** 			if (!IsDBCS2(b))
 2598              		.loc 1 1826 18 is_stmt 0 view .LVU858
 2599 0066 08F10208 		add	r8, r8, #2
 2600              	.LVL293:
1826:Core/Src/ff.c **** 			if (!IsDBCS2(b))
 2601              		.loc 1 1826 6 view .LVU859
 2602 006a B35C     		ldrb	r3, [r6, r2]	@ zero_extendqisi2
 2603              	.LVL294:
1827:Core/Src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
 2604              		.loc 1 1827 4 is_stmt 1 view .LVU860
1827:Core/Src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
 2605              		.loc 1 1827 9 is_stmt 0 view .LVU861
 2606 006c A3F14002 		sub	r2, r3, #64
 2607 0070 D2B2     		uxtb	r2, r2
1827:Core/Src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
 2608              		.loc 1 1827 7 view .LVU862
 2609 0072 3E2A     		cmp	r2, #62
 2610 0074 D5D9     		bls	.L201
1827:Core/Src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
 2611              		.loc 1 1827 9 discriminator 1 view .LVU863
 2612 0076 83F08002 		eor	r2, r3, #128
1827:Core/Src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
 2613              		.loc 1 1827 8 discriminator 1 view .LVU864
 2614 007a 7E2A     		cmp	r2, #126
 2615 007c D1D9     		bls	.L201
1828:Core/Src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
 2616              		.loc 1 1828 12 view .LVU865
 2617 007e 0620     		movs	r0, #6
 2618              	.LVL295:
1828:Core/Src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
 2619              		.loc 1 1828 12 view .LVU866
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 98


 2620 0080 96E0     		b	.L199
 2621              	.LVL296:
 2622              	.L238:
1819:Core/Src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
 2623              		.loc 1 1819 11 view .LVU867
 2624 0082 9046     		mov	r8, r2
 2625 0084 D1E7     		b	.L200
 2626              	.LVL297:
 2627              	.L247:
1834:Core/Src/ff.c **** 			return FR_INVALID_NAME;
 2628              		.loc 1 1834 19 discriminator 1 view .LVU868
 2629 0086 0146     		mov	r1, r0
 2630 0088 7748     		ldr	r0, .L258
 2631              	.LVL298:
1834:Core/Src/ff.c **** 			return FR_INVALID_NAME;
 2632              		.loc 1 1834 19 discriminator 1 view .LVU869
 2633 008a FFF7FEFF 		bl	chk_chr
 2634              	.LVL299:
1834:Core/Src/ff.c **** 			return FR_INVALID_NAME;
 2635              		.loc 1 1834 16 discriminator 1 view .LVU870
 2636 008e 0028     		cmp	r0, #0
 2637 0090 D4D0     		beq	.L202
1835:Core/Src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
 2638              		.loc 1 1835 11 view .LVU871
 2639 0092 0620     		movs	r0, #6
 2640 0094 8CE0     		b	.L199
 2641              	.LVL300:
 2642              	.L198:
1838:Core/Src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 2643              		.loc 1 1838 2 is_stmt 1 view .LVU872
1838:Core/Src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 2644              		.loc 1 1838 10 is_stmt 0 view .LVU873
 2645 0096 1644     		add	r6, r6, r2
 2646              	.LVL301:
1838:Core/Src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 2647              		.loc 1 1838 8 view .LVU874
 2648 0098 C9F80060 		str	r6, [r9]
1839:Core/Src/ff.c **** #if _FS_RPATH
 2649              		.loc 1 1839 2 is_stmt 1 view .LVU875
1839:Core/Src/ff.c **** #if _FS_RPATH
 2650              		.loc 1 1839 5 is_stmt 0 view .LVU876
 2651 009c 1F28     		cmp	r0, #31
 2652 009e 02D8     		bhi	.L242
 2653 00a0 4FF00408 		mov	r8, #4
 2654 00a4 03E0     		b	.L205
 2655              	.L242:
 2656 00a6 4FF00008 		mov	r8, #0
 2657              	.LVL302:
1850:Core/Src/ff.c **** 		w = lfn[di-1];
 2658              		.loc 1 1850 2 is_stmt 1 view .LVU877
1850:Core/Src/ff.c **** 		w = lfn[di-1];
 2659              		.loc 1 1850 8 is_stmt 0 view .LVU878
 2660 00aa 00E0     		b	.L205
 2661              	.LVL303:
 2662              	.L206:
1853:Core/Src/ff.c **** 	}
 2663              		.loc 1 1853 3 is_stmt 1 view .LVU879
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 99


1853:Core/Src/ff.c **** 	}
 2664              		.loc 1 1853 5 is_stmt 0 view .LVU880
 2665 00ac 013C     		subs	r4, r4, #1
 2666              	.LVL304:
 2667              	.L205:
1850:Core/Src/ff.c **** 		w = lfn[di-1];
 2668              		.loc 1 1850 8 is_stmt 1 view .LVU881
 2669 00ae 44B1     		cbz	r4, .L207
1851:Core/Src/ff.c **** 		if (w != ' ' && w != '.') break;
 2670              		.loc 1 1851 3 view .LVU882
1851:Core/Src/ff.c **** 		if (w != ' ' && w != '.') break;
 2671              		.loc 1 1851 10 is_stmt 0 view .LVU883
 2672 00b0 04F10043 		add	r3, r4, #-2147483648
 2673 00b4 013B     		subs	r3, r3, #1
1851:Core/Src/ff.c **** 		if (w != ' ' && w != '.') break;
 2674              		.loc 1 1851 5 view .LVU884
 2675 00b6 35F81330 		ldrh	r3, [r5, r3, lsl #1]
 2676              	.LVL305:
1852:Core/Src/ff.c **** 		di--;
 2677              		.loc 1 1852 3 is_stmt 1 view .LVU885
1852:Core/Src/ff.c **** 		di--;
 2678              		.loc 1 1852 6 is_stmt 0 view .LVU886
 2679 00ba 202B     		cmp	r3, #32
 2680 00bc F6D0     		beq	.L206
1852:Core/Src/ff.c **** 		di--;
 2681              		.loc 1 1852 16 discriminator 1 view .LVU887
 2682 00be 2E2B     		cmp	r3, #46
 2683 00c0 F4D0     		beq	.L206
 2684              	.LVL306:
 2685              	.L207:
1855:Core/Src/ff.c **** 
 2686              		.loc 1 1855 2 is_stmt 1 view .LVU888
1855:Core/Src/ff.c **** 
 2687              		.loc 1 1855 5 is_stmt 0 view .LVU889
 2688 00c2 002C     		cmp	r4, #0
 2689 00c4 00F0CD80 		beq	.L243
1857:Core/Src/ff.c **** 
 2690              		.loc 1 1857 2 is_stmt 1 view .LVU890
1857:Core/Src/ff.c **** 
 2691              		.loc 1 1857 10 is_stmt 0 view .LVU891
 2692 00c8 0026     		movs	r6, #0
 2693 00ca 25F81460 		strh	r6, [r5, r4, lsl #1]	@ movhi
1860:Core/Src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
 2694              		.loc 1 1860 2 is_stmt 1 view .LVU892
 2695 00ce 0B22     		movs	r2, #11
 2696              	.LVL307:
1860:Core/Src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
 2697              		.loc 1 1860 2 is_stmt 0 view .LVU893
 2698 00d0 2021     		movs	r1, #32
 2699 00d2 B869     		ldr	r0, [r7, #24]
 2700 00d4 FFF7FEFF 		bl	mem_set
 2701              	.LVL308:
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2702              		.loc 1 1861 2 is_stmt 1 view .LVU894
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2703              		.loc 1 1861 2 is_stmt 0 view .LVU895
 2704 00d8 00E0     		b	.L209
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 100


 2705              	.LVL309:
 2706              	.L210:
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2707              		.loc 1 1861 55 is_stmt 1 discriminator 5 view .LVU896
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2708              		.loc 1 1861 49 discriminator 5 view .LVU897
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2709              		.loc 1 1861 51 is_stmt 0 discriminator 5 view .LVU898
 2710 00da 0136     		adds	r6, r6, #1
 2711              	.LVL310:
 2712              	.L209:
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2713              		.loc 1 1861 15 is_stmt 1 discriminator 1 view .LVU899
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2714              		.loc 1 1861 18 is_stmt 0 discriminator 1 view .LVU900
 2715 00dc 35F81620 		ldrh	r2, [r5, r6, lsl #1]
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2716              		.loc 1 1861 2 discriminator 1 view .LVU901
 2717 00e0 202A     		cmp	r2, #32
 2718 00e2 FAD0     		beq	.L210
1861:Core/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
 2719              		.loc 1 1861 30 discriminator 4 view .LVU902
 2720 00e4 2E2A     		cmp	r2, #46
 2721 00e6 F8D0     		beq	.L210
1862:Core/Src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 2722              		.loc 1 1862 2 is_stmt 1 view .LVU903
1862:Core/Src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 2723              		.loc 1 1862 5 is_stmt 0 view .LVU904
 2724 00e8 1EB1     		cbz	r6, .L212
1862:Core/Src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 2725              		.loc 1 1862 10 is_stmt 1 discriminator 1 view .LVU905
1862:Core/Src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 2726              		.loc 1 1862 13 is_stmt 0 discriminator 1 view .LVU906
 2727 00ea 48F00308 		orr	r8, r8, #3
 2728              	.LVL311:
1862:Core/Src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
 2729              		.loc 1 1862 13 discriminator 1 view .LVU907
 2730 00ee 00E0     		b	.L212
 2731              	.L214:
1863:Core/Src/ff.c **** 
 2732              		.loc 1 1863 35 is_stmt 1 discriminator 3 view .LVU908
1863:Core/Src/ff.c **** 
 2733              		.loc 1 1863 37 is_stmt 0 discriminator 3 view .LVU909
 2734 00f0 013C     		subs	r4, r4, #1
 2735              	.LVL312:
 2736              	.L212:
1863:Core/Src/ff.c **** 
 2737              		.loc 1 1863 8 is_stmt 1 discriminator 1 view .LVU910
 2738 00f2 64B1     		cbz	r4, .L244
1863:Core/Src/ff.c **** 
 2739              		.loc 1 1863 18 is_stmt 0 discriminator 2 view .LVU911
 2740 00f4 04F10042 		add	r2, r4, #-2147483648
 2741 00f8 013A     		subs	r2, r2, #1
 2742 00fa 35F81220 		ldrh	r2, [r5, r2, lsl #1]
1863:Core/Src/ff.c **** 
 2743              		.loc 1 1863 12 discriminator 2 view .LVU912
 2744 00fe 2E2A     		cmp	r2, #46
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 101


 2745 0100 F6D1     		bne	.L214
 2746 0102 4FF0080B 		mov	fp, #8
 2747 0106 0023     		movs	r3, #0
 2748 0108 0193     		str	r3, [sp, #4]
 2749 010a 9A46     		mov	r10, r3
 2750 010c 0AE0     		b	.L215
 2751              	.L244:
1863:Core/Src/ff.c **** 
 2752              		.loc 1 1863 12 discriminator 2 view .LVU913
 2753 010e 0194     		str	r4, [sp, #4]
 2754 0110 4FF0080B 		mov	fp, #8
 2755 0114 4FF0000A 		mov	r10, #0
 2756 0118 04E0     		b	.L215
 2757              	.LVL313:
 2758              	.L248:
1869:Core/Src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
 2759              		.loc 1 1869 29 discriminator 2 view .LVU914
 2760 011a 4C45     		cmp	r4, r9
 2761 011c 0BD0     		beq	.L218
 2762              	.L217:
1870:Core/Src/ff.c **** 		}
 2763              		.loc 1 1870 4 is_stmt 1 view .LVU915
1870:Core/Src/ff.c **** 		}
 2764              		.loc 1 1870 7 is_stmt 0 view .LVU916
 2765 011e 48F00308 		orr	r8, r8, #3
 2766              	.LVL314:
1870:Core/Src/ff.c **** 		}
 2767              		.loc 1 1870 28 is_stmt 1 view .LVU917
1867:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 2768              		.loc 1 1867 13 is_stmt 0 view .LVU918
 2769 0122 4E46     		mov	r6, r9
 2770              	.LVL315:
 2771              	.L215:
1866:Core/Src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
 2772              		.loc 1 1866 2 is_stmt 1 view .LVU919
1867:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 2773              		.loc 1 1867 3 view .LVU920
1867:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 2774              		.loc 1 1867 13 is_stmt 0 view .LVU921
 2775 0124 06F10109 		add	r9, r6, #1
 2776              	.LVL316:
1867:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 2777              		.loc 1 1867 5 view .LVU922
 2778 0128 35F81660 		ldrh	r6, [r5, r6, lsl #1]
 2779              	.LVL317:
1868:Core/Src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
 2780              		.loc 1 1868 3 is_stmt 1 view .LVU923
1868:Core/Src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
 2781              		.loc 1 1868 6 is_stmt 0 view .LVU924
 2782 012c 0EB3     		cbz	r6, .L216
1869:Core/Src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
 2783              		.loc 1 1869 3 is_stmt 1 view .LVU925
1869:Core/Src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
 2784              		.loc 1 1869 6 is_stmt 0 view .LVU926
 2785 012e 202E     		cmp	r6, #32
 2786 0130 F5D0     		beq	.L217
1869:Core/Src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 102


 2787              		.loc 1 1869 16 discriminator 1 view .LVU927
 2788 0132 2E2E     		cmp	r6, #46
 2789 0134 F1D0     		beq	.L248
 2790              	.L218:
1873:Core/Src/ff.c **** 			if (ni == 11) {				/* Long extension */
 2791              		.loc 1 1873 3 is_stmt 1 view .LVU928
1873:Core/Src/ff.c **** 			if (ni == 11) {				/* Long extension */
 2792              		.loc 1 1873 6 is_stmt 0 view .LVU929
 2793 0136 019B     		ldr	r3, [sp, #4]
 2794 0138 5B45     		cmp	r3, fp
 2795 013a 11D2     		bcs	.L220
1873:Core/Src/ff.c **** 			if (ni == 11) {				/* Long extension */
 2796              		.loc 1 1873 15 discriminator 1 view .LVU930
 2797 013c 4C45     		cmp	r4, r9
 2798 013e 0FD0     		beq	.L220
1883:Core/Src/ff.c **** #ifdef _EXCVT
 2799              		.loc 1 1883 3 is_stmt 1 view .LVU931
1883:Core/Src/ff.c **** #ifdef _EXCVT
 2800              		.loc 1 1883 6 is_stmt 0 view .LVU932
 2801 0140 7F2E     		cmp	r6, #127
 2802 0142 45D8     		bhi	.L249
 2803              	.L224:
1893:Core/Src/ff.c **** 			if (i >= ni - 1) {
 2804              		.loc 1 1893 3 is_stmt 1 view .LVU933
1893:Core/Src/ff.c **** 			if (i >= ni - 1) {
 2805              		.loc 1 1893 6 is_stmt 0 view .LVU934
 2806 0144 FF2E     		cmp	r6, #255
 2807 0146 53D9     		bls	.L225
1894:Core/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
 2808              		.loc 1 1894 4 is_stmt 1 view .LVU935
1894:Core/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
 2809              		.loc 1 1894 16 is_stmt 0 view .LVU936
 2810 0148 0BF1FF33 		add	r3, fp, #-1
1894:Core/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
 2811              		.loc 1 1894 7 view .LVU937
 2812 014c 019A     		ldr	r2, [sp, #4]
 2813 014e 9342     		cmp	r3, r2
 2814 0150 48D9     		bls	.L250
1897:Core/Src/ff.c **** 		} else {						/* Single byte character */
 2815              		.loc 1 1897 4 is_stmt 1 view .LVU938
1897:Core/Src/ff.c **** 		} else {						/* Single byte character */
 2816              		.loc 1 1897 6 is_stmt 0 view .LVU939
 2817 0152 BA69     		ldr	r2, [r7, #24]
1897:Core/Src/ff.c **** 		} else {						/* Single byte character */
 2818              		.loc 1 1897 12 view .LVU940
 2819 0154 0198     		ldr	r0, [sp, #4]
 2820 0156 431C     		adds	r3, r0, #1
 2821              	.LVL318:
1897:Core/Src/ff.c **** 		} else {						/* Single byte character */
 2822              		.loc 1 1897 18 view .LVU941
 2823 0158 C6F30721 		ubfx	r1, r6, #8, #8
1897:Core/Src/ff.c **** 		} else {						/* Single byte character */
 2824              		.loc 1 1897 16 view .LVU942
 2825 015c 1154     		strb	r1, [r2, r0]
 2826 015e 4CE0     		b	.L227
 2827              	.LVL319:
 2828              	.L220:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 103


1874:Core/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
 2829              		.loc 1 1874 4 is_stmt 1 view .LVU943
1874:Core/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
 2830              		.loc 1 1874 7 is_stmt 0 view .LVU944
 2831 0160 BBF10B0F 		cmp	fp, #11
 2832 0164 27D0     		beq	.L251
1877:Core/Src/ff.c **** 			if (si > di) break;			/* No extension */
 2833              		.loc 1 1877 4 is_stmt 1 view .LVU945
1877:Core/Src/ff.c **** 			if (si > di) break;			/* No extension */
 2834              		.loc 1 1877 7 is_stmt 0 view .LVU946
 2835 0166 4C45     		cmp	r4, r9
 2836 0168 01D0     		beq	.L223
1877:Core/Src/ff.c **** 			if (si > di) break;			/* No extension */
 2837              		.loc 1 1877 18 is_stmt 1 discriminator 1 view .LVU947
1877:Core/Src/ff.c **** 			if (si > di) break;			/* No extension */
 2838              		.loc 1 1877 21 is_stmt 0 discriminator 1 view .LVU948
 2839 016a 48F00308 		orr	r8, r8, #3
 2840              	.LVL320:
 2841              	.L223:
1878:Core/Src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
 2842              		.loc 1 1878 4 is_stmt 1 view .LVU949
1878:Core/Src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
 2843              		.loc 1 1878 7 is_stmt 0 view .LVU950
 2844 016e 4C45     		cmp	r4, r9
 2845 0170 24D2     		bcs	.L252
 2846              	.L216:
1914:Core/Src/ff.c **** 
 2847              		.loc 1 1914 2 is_stmt 1 view .LVU951
1914:Core/Src/ff.c **** 
 2848              		.loc 1 1914 8 is_stmt 0 view .LVU952
 2849 0172 BB69     		ldr	r3, [r7, #24]
1914:Core/Src/ff.c **** 
 2850              		.loc 1 1914 12 view .LVU953
 2851 0174 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
1914:Core/Src/ff.c **** 
 2852              		.loc 1 1914 5 view .LVU954
 2853 0176 E52A     		cmp	r2, #229
 2854 0178 61D0     		beq	.L253
 2855              	.L231:
1916:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
 2856              		.loc 1 1916 2 is_stmt 1 view .LVU955
1916:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
 2857              		.loc 1 1916 5 is_stmt 0 view .LVU956
 2858 017a BBF1080F 		cmp	fp, #8
 2859 017e 61D0     		beq	.L254
 2860              	.L232:
1917:Core/Src/ff.c **** 		cf |= NS_LFN;
 2861              		.loc 1 1917 2 is_stmt 1 view .LVU957
 2862 0180 0AF00C03 		and	r3, r10, #12
1917:Core/Src/ff.c **** 		cf |= NS_LFN;
 2863              		.loc 1 1917 5 is_stmt 0 view .LVU958
 2864 0184 0C2B     		cmp	r3, #12
 2865 0186 03D0     		beq	.L233
1917:Core/Src/ff.c **** 		cf |= NS_LFN;
 2866              		.loc 1 1917 25 discriminator 1 view .LVU959
 2867 0188 0AF00302 		and	r2, r10, #3
 2868 018c 032A     		cmp	r2, #3
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 104


 2869 018e 01D1     		bne	.L234
 2870              	.L233:
1918:Core/Src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
 2871              		.loc 1 1918 3 is_stmt 1 view .LVU960
1918:Core/Src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
 2872              		.loc 1 1918 6 is_stmt 0 view .LVU961
 2873 0190 48F00208 		orr	r8, r8, #2
 2874              	.LVL321:
 2875              	.L234:
1919:Core/Src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
 2876              		.loc 1 1919 2 is_stmt 1 view .LVU962
1919:Core/Src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
 2877              		.loc 1 1919 5 is_stmt 0 view .LVU963
 2878 0194 18F0020F 		tst	r8, #2
 2879 0198 06D1     		bne	.L235
1920:Core/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 2880              		.loc 1 1920 3 is_stmt 1 view .LVU964
1920:Core/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 2881              		.loc 1 1920 6 is_stmt 0 view .LVU965
 2882 019a 0AF0030A 		and	r10, r10, #3
 2883              	.LVL322:
1920:Core/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 2884              		.loc 1 1920 6 view .LVU966
 2885 019e BAF1010F 		cmp	r10, #1
 2886 01a2 54D0     		beq	.L255
 2887              	.L236:
1921:Core/Src/ff.c **** 	}
 2888              		.loc 1 1921 3 is_stmt 1 view .LVU967
1921:Core/Src/ff.c **** 	}
 2889              		.loc 1 1921 6 is_stmt 0 view .LVU968
 2890 01a4 042B     		cmp	r3, #4
 2891 01a6 55D0     		beq	.L256
 2892              	.L235:
1924:Core/Src/ff.c **** 
 2893              		.loc 1 1924 2 is_stmt 1 view .LVU969
1924:Core/Src/ff.c **** 
 2894              		.loc 1 1924 4 is_stmt 0 view .LVU970
 2895 01a8 BB69     		ldr	r3, [r7, #24]
1924:Core/Src/ff.c **** 
 2896              		.loc 1 1924 13 view .LVU971
 2897 01aa 83F80B80 		strb	r8, [r3, #11]
1926:Core/Src/ff.c **** 
 2898              		.loc 1 1926 2 is_stmt 1 view .LVU972
1926:Core/Src/ff.c **** 
 2899              		.loc 1 1926 9 is_stmt 0 view .LVU973
 2900 01ae 0020     		movs	r0, #0
 2901              	.LVL323:
 2902              	.L199:
2003:Core/Src/ff.c **** 
 2903              		.loc 1 2003 1 view .LVU974
 2904 01b0 03B0     		add	sp, sp, #12
 2905              	.LCFI20:
 2906              		.cfi_remember_state
 2907              		.cfi_def_cfa_offset 36
 2908              		@ sp needed
 2909 01b2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2910              	.LVL324:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 105


 2911              	.L251:
 2912              	.LCFI21:
 2913              		.cfi_restore_state
1875:Core/Src/ff.c **** 			}
 2914              		.loc 1 1875 5 is_stmt 1 view .LVU975
1875:Core/Src/ff.c **** 			}
 2915              		.loc 1 1875 8 is_stmt 0 view .LVU976
 2916 01b6 48F00308 		orr	r8, r8, #3
 2917              	.LVL325:
1875:Core/Src/ff.c **** 			}
 2918              		.loc 1 1875 29 is_stmt 1 view .LVU977
1875:Core/Src/ff.c **** 			}
 2919              		.loc 1 1875 5 is_stmt 0 view .LVU978
 2920 01ba DAE7     		b	.L216
 2921              	.L252:
1879:Core/Src/ff.c **** 			b <<= 2; continue;
 2922              		.loc 1 1879 4 is_stmt 1 view .LVU979
 2923              	.LVL326:
1879:Core/Src/ff.c **** 			b <<= 2; continue;
 2924              		.loc 1 1879 13 view .LVU980
1879:Core/Src/ff.c **** 			b <<= 2; continue;
 2925              		.loc 1 1879 20 view .LVU981
1880:Core/Src/ff.c **** 		}
 2926              		.loc 1 1880 4 view .LVU982
1880:Core/Src/ff.c **** 		}
 2927              		.loc 1 1880 6 is_stmt 0 view .LVU983
 2928 01bc 4FEA8A0A 		lsl	r10, r10, #2
 2929              	.LVL327:
1880:Core/Src/ff.c **** 		}
 2930              		.loc 1 1880 6 view .LVU984
 2931 01c0 5FFA8AFA 		uxtb	r10, r10
 2932              	.LVL328:
1880:Core/Src/ff.c **** 		}
 2933              		.loc 1 1880 13 is_stmt 1 view .LVU985
1879:Core/Src/ff.c **** 			b <<= 2; continue;
 2934              		.loc 1 1879 7 is_stmt 0 view .LVU986
 2935 01c4 2646     		mov	r6, r4
 2936              	.LVL329:
1879:Core/Src/ff.c **** 			b <<= 2; continue;
 2937              		.loc 1 1879 23 view .LVU987
 2938 01c6 4FF00B0B 		mov	fp, #11
1879:Core/Src/ff.c **** 			b <<= 2; continue;
 2939              		.loc 1 1879 15 view .LVU988
 2940 01ca 0823     		movs	r3, #8
 2941 01cc 0193     		str	r3, [sp, #4]
1880:Core/Src/ff.c **** 		}
 2942              		.loc 1 1880 4 view .LVU989
 2943 01ce A9E7     		b	.L215
 2944              	.LVL330:
 2945              	.L249:
1888:Core/Src/ff.c **** #endif
 2946              		.loc 1 1888 4 is_stmt 1 view .LVU990
1888:Core/Src/ff.c **** #endif
 2947              		.loc 1 1888 8 is_stmt 0 view .LVU991
 2948 01d0 3046     		mov	r0, r6
 2949 01d2 FFF7FEFF 		bl	ff_wtoupper
 2950              	.LVL331:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 106


 2951 01d6 0021     		movs	r1, #0
 2952 01d8 FFF7FEFF 		bl	ff_convert
 2953              	.LVL332:
 2954 01dc 0646     		mov	r6, r0
 2955              	.LVL333:
1890:Core/Src/ff.c **** 		}
 2956              		.loc 1 1890 4 is_stmt 1 view .LVU992
1890:Core/Src/ff.c **** 		}
 2957              		.loc 1 1890 7 is_stmt 0 view .LVU993
 2958 01de 48F00208 		orr	r8, r8, #2
 2959              	.LVL334:
1890:Core/Src/ff.c **** 		}
 2960              		.loc 1 1890 7 view .LVU994
 2961 01e2 AFE7     		b	.L224
 2962              	.L250:
1895:Core/Src/ff.c **** 			}
 2963              		.loc 1 1895 5 is_stmt 1 view .LVU995
1895:Core/Src/ff.c **** 			}
 2964              		.loc 1 1895 8 is_stmt 0 view .LVU996
 2965 01e4 48F00308 		orr	r8, r8, #3
 2966              	.LVL335:
1895:Core/Src/ff.c **** 			}
 2967              		.loc 1 1895 29 is_stmt 1 view .LVU997
1895:Core/Src/ff.c **** 			}
 2968              		.loc 1 1895 37 view .LVU998
1867:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 2969              		.loc 1 1867 13 is_stmt 0 view .LVU999
 2970 01e8 4E46     		mov	r6, r9
 2971              	.LVL336:
1895:Core/Src/ff.c **** 			}
 2972              		.loc 1 1895 31 view .LVU1000
 2973 01ea CDF804B0 		str	fp, [sp, #4]
1895:Core/Src/ff.c **** 			}
 2974              		.loc 1 1895 5 view .LVU1001
 2975 01ee 99E7     		b	.L215
 2976              	.LVL337:
 2977              	.L225:
1899:Core/Src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 2978              		.loc 1 1899 4 is_stmt 1 view .LVU1002
1899:Core/Src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 2979              		.loc 1 1899 7 is_stmt 0 view .LVU1003
 2980 01f0 4EB9     		cbnz	r6, .L257
 2981              	.L228:
1900:Core/Src/ff.c **** 			} else {
 2982              		.loc 1 1900 5 is_stmt 1 view .LVU1004
 2983              	.LVL338:
1900:Core/Src/ff.c **** 			} else {
 2984              		.loc 1 1900 14 view .LVU1005
1900:Core/Src/ff.c **** 			} else {
 2985              		.loc 1 1900 17 is_stmt 0 view .LVU1006
 2986 01f2 48F00308 		orr	r8, r8, #3
 2987              	.LVL339:
1900:Core/Src/ff.c **** 			} else {
 2988              		.loc 1 1900 17 view .LVU1007
 2989 01f6 019B     		ldr	r3, [sp, #4]
1900:Core/Src/ff.c **** 			} else {
 2990              		.loc 1 1900 7 view .LVU1008
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 107


 2991 01f8 5F26     		movs	r6, #95
 2992              	.LVL340:
 2993              	.L227:
1911:Core/Src/ff.c **** 	}
 2994              		.loc 1 1911 3 is_stmt 1 view .LVU1009
1911:Core/Src/ff.c **** 	}
 2995              		.loc 1 1911 5 is_stmt 0 view .LVU1010
 2996 01fa BA69     		ldr	r2, [r7, #24]
1911:Core/Src/ff.c **** 	}
 2997              		.loc 1 1911 11 view .LVU1011
 2998 01fc 591C     		adds	r1, r3, #1
 2999 01fe 0191     		str	r1, [sp, #4]
 3000              	.LVL341:
1911:Core/Src/ff.c **** 	}
 3001              		.loc 1 1911 15 view .LVU1012
 3002 0200 D654     		strb	r6, [r2, r3]
1867:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 3003              		.loc 1 1867 13 view .LVU1013
 3004 0202 4E46     		mov	r6, r9
 3005              	.LVL342:
1867:Core/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
 3006              		.loc 1 1867 13 view .LVU1014
 3007 0204 8EE7     		b	.L215
 3008              	.LVL343:
 3009              	.L257:
1899:Core/Src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 3010              		.loc 1 1899 14 discriminator 1 view .LVU1015
 3011 0206 3146     		mov	r1, r6
 3012 0208 1848     		ldr	r0, .L258+4
 3013 020a FFF7FEFF 		bl	chk_chr
 3014              	.LVL344:
1899:Core/Src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
 3015              		.loc 1 1899 11 discriminator 1 view .LVU1016
 3016 020e 0028     		cmp	r0, #0
 3017 0210 EFD1     		bne	.L228
1902:Core/Src/ff.c **** 					b |= 2;
 3018              		.loc 1 1902 5 is_stmt 1 view .LVU1017
1902:Core/Src/ff.c **** 					b |= 2;
 3019              		.loc 1 1902 9 is_stmt 0 view .LVU1018
 3020 0212 A6F14103 		sub	r3, r6, #65
 3021 0216 9BB2     		uxth	r3, r3
1902:Core/Src/ff.c **** 					b |= 2;
 3022              		.loc 1 1902 8 view .LVU1019
 3023 0218 192B     		cmp	r3, #25
 3024 021a 03D8     		bhi	.L230
1903:Core/Src/ff.c **** 				} else {
 3025              		.loc 1 1903 6 is_stmt 1 view .LVU1020
1903:Core/Src/ff.c **** 				} else {
 3026              		.loc 1 1903 8 is_stmt 0 view .LVU1021
 3027 021c 4AF0020A 		orr	r10, r10, #2
 3028              	.LVL345:
1903:Core/Src/ff.c **** 				} else {
 3029              		.loc 1 1903 8 view .LVU1022
 3030 0220 019B     		ldr	r3, [sp, #4]
 3031 0222 EAE7     		b	.L227
 3032              	.L230:
1905:Core/Src/ff.c **** 						b |= 1; w -= 0x20;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 108


 3033              		.loc 1 1905 6 is_stmt 1 view .LVU1023
1905:Core/Src/ff.c **** 						b |= 1; w -= 0x20;
 3034              		.loc 1 1905 10 is_stmt 0 view .LVU1024
 3035 0224 A6F16103 		sub	r3, r6, #97
 3036 0228 9BB2     		uxth	r3, r3
1905:Core/Src/ff.c **** 						b |= 1; w -= 0x20;
 3037              		.loc 1 1905 9 view .LVU1025
 3038 022a 192B     		cmp	r3, #25
 3039 022c 05D8     		bhi	.L245
1906:Core/Src/ff.c **** 					}
 3040              		.loc 1 1906 7 is_stmt 1 view .LVU1026
1906:Core/Src/ff.c **** 					}
 3041              		.loc 1 1906 9 is_stmt 0 view .LVU1027
 3042 022e 4AF0010A 		orr	r10, r10, #1
 3043              	.LVL346:
1906:Core/Src/ff.c **** 					}
 3044              		.loc 1 1906 15 is_stmt 1 view .LVU1028
1906:Core/Src/ff.c **** 					}
 3045              		.loc 1 1906 17 is_stmt 0 view .LVU1029
 3046 0232 203E     		subs	r6, r6, #32
 3047              	.LVL347:
1906:Core/Src/ff.c **** 					}
 3048              		.loc 1 1906 17 view .LVU1030
 3049 0234 B6B2     		uxth	r6, r6
 3050              	.LVL348:
1906:Core/Src/ff.c **** 					}
 3051              		.loc 1 1906 17 view .LVU1031
 3052 0236 019B     		ldr	r3, [sp, #4]
 3053 0238 DFE7     		b	.L227
 3054              	.L245:
1906:Core/Src/ff.c **** 					}
 3055              		.loc 1 1906 17 view .LVU1032
 3056 023a 019B     		ldr	r3, [sp, #4]
 3057 023c DDE7     		b	.L227
 3058              	.L253:
1914:Core/Src/ff.c **** 
 3059              		.loc 1 1914 24 is_stmt 1 discriminator 1 view .LVU1033
1914:Core/Src/ff.c **** 
 3060              		.loc 1 1914 34 is_stmt 0 discriminator 1 view .LVU1034
 3061 023e 0522     		movs	r2, #5
 3062 0240 1A70     		strb	r2, [r3]
 3063 0242 9AE7     		b	.L231
 3064              	.L254:
1916:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
 3065              		.loc 1 1916 15 is_stmt 1 discriminator 1 view .LVU1035
1916:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
 3066              		.loc 1 1916 17 is_stmt 0 discriminator 1 view .LVU1036
 3067 0244 4FEA8A0A 		lsl	r10, r10, #2
 3068              	.LVL349:
1916:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
 3069              		.loc 1 1916 17 discriminator 1 view .LVU1037
 3070 0248 5FFA8AFA 		uxtb	r10, r10
 3071              	.LVL350:
1916:Core/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
 3072              		.loc 1 1916 17 discriminator 1 view .LVU1038
 3073 024c 98E7     		b	.L232
 3074              	.LVL351:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 109


 3075              	.L255:
1920:Core/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 3076              		.loc 1 1920 27 is_stmt 1 discriminator 1 view .LVU1039
1920:Core/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 3077              		.loc 1 1920 30 is_stmt 0 discriminator 1 view .LVU1040
 3078 024e 48F01008 		orr	r8, r8, #16
 3079              	.LVL352:
1920:Core/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
 3080              		.loc 1 1920 30 discriminator 1 view .LVU1041
 3081 0252 A7E7     		b	.L236
 3082              	.L256:
1921:Core/Src/ff.c **** 	}
 3083              		.loc 1 1921 27 is_stmt 1 discriminator 1 view .LVU1042
1921:Core/Src/ff.c **** 	}
 3084              		.loc 1 1921 30 is_stmt 0 discriminator 1 view .LVU1043
 3085 0254 48F00808 		orr	r8, r8, #8
 3086              	.LVL353:
1921:Core/Src/ff.c **** 	}
 3087              		.loc 1 1921 30 discriminator 1 view .LVU1044
 3088 0258 A6E7     		b	.L235
 3089              	.LVL354:
 3090              	.L237:
1822:Core/Src/ff.c **** #if !_LFN_UNICODE
 3091              		.loc 1 1822 11 view .LVU1045
 3092 025a 0620     		movs	r0, #6
 3093              	.LVL355:
1822:Core/Src/ff.c **** #if !_LFN_UNICODE
 3094              		.loc 1 1822 11 view .LVU1046
 3095 025c A8E7     		b	.L199
 3096              	.LVL356:
 3097              	.L240:
1832:Core/Src/ff.c **** #endif
 3098              		.loc 1 1832 18 view .LVU1047
 3099 025e 0620     		movs	r0, #6
 3100              	.LVL357:
1832:Core/Src/ff.c **** #endif
 3101              		.loc 1 1832 18 view .LVU1048
 3102 0260 A6E7     		b	.L199
 3103              	.LVL358:
 3104              	.L243:
1855:Core/Src/ff.c **** 
 3105              		.loc 1 1855 18 view .LVU1049
 3106 0262 0620     		movs	r0, #6
 3107 0264 A4E7     		b	.L199
 3108              	.L259:
 3109 0266 00BF     		.align	2
 3110              	.L258:
 3111 0268 00000000 		.word	.LC0
 3112 026c 0C000000 		.word	.LC1
 3113              		.cfi_endproc
 3114              	.LFE28:
 3116              		.section	.text.cmp_lfn,"ax",%progbits
 3117              		.align	1
 3118              		.syntax unified
 3119              		.thumb
 3120              		.thumb_func
 3121              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 110


 3123              	cmp_lfn:
 3124              	.LVL359:
 3125              	.LFB18:
1311:Core/Src/ff.c **** 	UINT i, s;
 3126              		.loc 1 1311 1 is_stmt 1 view -0
 3127              		.cfi_startproc
 3128              		@ args = 0, pretend = 0, frame = 0
 3129              		@ frame_needed = 0, uses_anonymous_args = 0
1311:Core/Src/ff.c **** 	UINT i, s;
 3130              		.loc 1 1311 1 is_stmt 0 view .LVU1051
 3131 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 3132              	.LCFI22:
 3133              		.cfi_def_cfa_offset 32
 3134              		.cfi_offset 3, -32
 3135              		.cfi_offset 4, -28
 3136              		.cfi_offset 5, -24
 3137              		.cfi_offset 6, -20
 3138              		.cfi_offset 7, -16
 3139              		.cfi_offset 8, -12
 3140              		.cfi_offset 9, -8
 3141              		.cfi_offset 14, -4
 3142 0004 8046     		mov	r8, r0
 3143 0006 0D46     		mov	r5, r1
1312:Core/Src/ff.c **** 	WCHAR wc, uc;
 3144              		.loc 1 1312 2 is_stmt 1 view .LVU1052
1313:Core/Src/ff.c **** 
 3145              		.loc 1 1313 2 view .LVU1053
1316:Core/Src/ff.c **** 	s = 0; wc = 1;
 3146              		.loc 1 1316 2 view .LVU1054
1316:Core/Src/ff.c **** 	s = 0; wc = 1;
 3147              		.loc 1 1316 11 is_stmt 0 view .LVU1055
 3148 0008 0F78     		ldrb	r7, [r1]	@ zero_extendqisi2
1316:Core/Src/ff.c **** 	s = 0; wc = 1;
 3149              		.loc 1 1316 22 view .LVU1056
 3150 000a 27F04007 		bic	r7, r7, #64
1316:Core/Src/ff.c **** 	s = 0; wc = 1;
 3151              		.loc 1 1316 30 view .LVU1057
 3152 000e 013F     		subs	r7, r7, #1
1316:Core/Src/ff.c **** 	s = 0; wc = 1;
 3153              		.loc 1 1316 35 view .LVU1058
 3154 0010 07EB4703 		add	r3, r7, r7, lsl #1
1316:Core/Src/ff.c **** 	s = 0; wc = 1;
 3155              		.loc 1 1316 4 view .LVU1059
 3156 0014 07EB8307 		add	r7, r7, r3, lsl #2
 3157              	.LVL360:
1317:Core/Src/ff.c **** 	do {
 3158              		.loc 1 1317 2 is_stmt 1 view .LVU1060
1317:Core/Src/ff.c **** 	do {
 3159              		.loc 1 1317 9 view .LVU1061
1317:Core/Src/ff.c **** 	do {
 3160              		.loc 1 1317 12 is_stmt 0 view .LVU1062
 3161 0018 0126     		movs	r6, #1
1317:Core/Src/ff.c **** 	do {
 3162              		.loc 1 1317 4 view .LVU1063
 3163 001a 0024     		movs	r4, #0
 3164 001c 10E0     		b	.L265
 3165              	.LVL361:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 111


 3166              	.L273:
1321:Core/Src/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
 3167              		.loc 1 1321 4 is_stmt 1 view .LVU1064
1321:Core/Src/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
 3168              		.loc 1 1321 9 is_stmt 0 view .LVU1065
 3169 001e FFF7FEFF 		bl	ff_wtoupper
 3170              	.LVL362:
1321:Core/Src/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
 3171              		.loc 1 1321 9 view .LVU1066
 3172 0022 0646     		mov	r6, r0
 3173              	.LVL363:
1322:Core/Src/ff.c **** 				return 0;				/* Not matched */
 3174              		.loc 1 1322 4 is_stmt 1 view .LVU1067
1322:Core/Src/ff.c **** 				return 0;				/* Not matched */
 3175              		.loc 1 1322 7 is_stmt 0 view .LVU1068
 3176 0024 FE2F     		cmp	r7, #254
 3177 0026 1AD8     		bhi	.L262
1322:Core/Src/ff.c **** 				return 0;				/* Not matched */
 3178              		.loc 1 1322 51 discriminator 1 view .LVU1069
 3179 0028 07F10109 		add	r9, r7, #1
 3180              	.LVL364:
1322:Core/Src/ff.c **** 				return 0;				/* Not matched */
 3181              		.loc 1 1322 31 discriminator 1 view .LVU1070
 3182 002c 38F81700 		ldrh	r0, [r8, r7, lsl #1]
 3183 0030 FFF7FEFF 		bl	ff_wtoupper
 3184              	.LVL365:
1322:Core/Src/ff.c **** 				return 0;				/* Not matched */
 3185              		.loc 1 1322 22 discriminator 1 view .LVU1071
 3186 0034 B042     		cmp	r0, r6
 3187 0036 12D1     		bne	.L262
1322:Core/Src/ff.c **** 				return 0;				/* Not matched */
 3188              		.loc 1 1322 51 view .LVU1072
 3189 0038 4F46     		mov	r7, r9
 3190              	.LVL366:
 3191              	.L263:
1327:Core/Src/ff.c **** 
 3192              		.loc 1 1327 10 is_stmt 1 view .LVU1073
1327:Core/Src/ff.c **** 
 3193              		.loc 1 1327 2 is_stmt 0 view .LVU1074
 3194 003a 0134     		adds	r4, r4, #1
 3195              	.LVL367:
1327:Core/Src/ff.c **** 
 3196              		.loc 1 1327 2 view .LVU1075
 3197 003c 0C2C     		cmp	r4, #12
 3198 003e 10D8     		bhi	.L272
 3199              	.LVL368:
 3200              	.L265:
1318:Core/Src/ff.c **** 		uc = LD_WORD(dir+LfnOfs[s]);	/* Pick an LFN character from the entry */
 3201              		.loc 1 1318 2 is_stmt 1 view .LVU1076
1319:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
 3202              		.loc 1 1319 3 view .LVU1077
1319:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
 3203              		.loc 1 1319 8 is_stmt 0 view .LVU1078
 3204 0040 104B     		ldr	r3, .L274
 3205 0042 1B5D     		ldrb	r3, [r3, r4]	@ zero_extendqisi2
 3206 0044 5A1C     		adds	r2, r3, #1
 3207 0046 AA5C     		ldrb	r2, [r5, r2]	@ zero_extendqisi2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 112


 3208 0048 E85C     		ldrb	r0, [r5, r3]	@ zero_extendqisi2
1319:Core/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
 3209              		.loc 1 1319 6 view .LVU1079
 3210 004a 40EA0220 		orr	r0, r0, r2, lsl #8
 3211              	.LVL369:
1320:Core/Src/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
 3212              		.loc 1 1320 3 is_stmt 1 view .LVU1080
1320:Core/Src/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
 3213              		.loc 1 1320 6 is_stmt 0 view .LVU1081
 3214 004e 002E     		cmp	r6, #0
 3215 0050 E5D1     		bne	.L273
1325:Core/Src/ff.c **** 		}
 3216              		.loc 1 1325 4 is_stmt 1 view .LVU1082
1325:Core/Src/ff.c **** 		}
 3217              		.loc 1 1325 7 is_stmt 0 view .LVU1083
 3218 0052 4FF6FF73 		movw	r3, #65535
 3219 0056 9842     		cmp	r0, r3
 3220 0058 EFD0     		beq	.L263
1325:Core/Src/ff.c **** 		}
 3221              		.loc 1 1325 29 view .LVU1084
 3222 005a 0020     		movs	r0, #0
 3223              	.LVL370:
1325:Core/Src/ff.c **** 		}
 3224              		.loc 1 1325 29 view .LVU1085
 3225 005c 0CE0     		b	.L260
 3226              	.LVL371:
 3227              	.L262:
1323:Core/Src/ff.c **** 		} else {
 3228              		.loc 1 1323 5 is_stmt 1 view .LVU1086
1323:Core/Src/ff.c **** 		} else {
 3229              		.loc 1 1323 12 is_stmt 0 view .LVU1087
 3230 005e 0020     		movs	r0, #0
 3231 0060 0AE0     		b	.L260
 3232              	.LVL372:
 3233              	.L272:
1329:Core/Src/ff.c **** 		return 0;
 3234              		.loc 1 1329 2 is_stmt 1 view .LVU1088
1329:Core/Src/ff.c **** 		return 0;
 3235              		.loc 1 1329 10 is_stmt 0 view .LVU1089
 3236 0062 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
1329:Core/Src/ff.c **** 		return 0;
 3237              		.loc 1 1329 5 view .LVU1090
 3238 0064 13F0400F 		tst	r3, #64
 3239 0068 05D0     		beq	.L268
1329:Core/Src/ff.c **** 		return 0;
 3240              		.loc 1 1329 28 discriminator 1 view .LVU1091
 3241 006a 3EB1     		cbz	r6, .L269
1329:Core/Src/ff.c **** 		return 0;
 3242              		.loc 1 1329 43 discriminator 2 view .LVU1092
 3243 006c 38F81730 		ldrh	r3, [r8, r7, lsl #1]
1329:Core/Src/ff.c **** 		return 0;
 3244              		.loc 1 1329 34 discriminator 2 view .LVU1093
 3245 0070 33B9     		cbnz	r3, .L270
1332:Core/Src/ff.c **** }
 3246              		.loc 1 1332 9 view .LVU1094
 3247 0072 0120     		movs	r0, #1
 3248 0074 00E0     		b	.L260
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 113


 3249              	.L268:
1332:Core/Src/ff.c **** }
 3250              		.loc 1 1332 9 view .LVU1095
 3251 0076 0120     		movs	r0, #1
 3252              	.LVL373:
 3253              	.L260:
1333:Core/Src/ff.c **** 
 3254              		.loc 1 1333 1 view .LVU1096
 3255 0078 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 3256              	.LVL374:
 3257              	.L269:
1332:Core/Src/ff.c **** }
 3258              		.loc 1 1332 9 view .LVU1097
 3259 007c 0120     		movs	r0, #1
 3260 007e FBE7     		b	.L260
 3261              	.L270:
1330:Core/Src/ff.c **** 
 3262              		.loc 1 1330 10 view .LVU1098
 3263 0080 0020     		movs	r0, #0
 3264 0082 F9E7     		b	.L260
 3265              	.L275:
 3266              		.align	2
 3267              	.L274:
 3268 0084 00000000 		.word	.LANCHOR0
 3269              		.cfi_endproc
 3270              	.LFE18:
 3272              		.section	.text.sync_fs,"ax",%progbits
 3273              		.align	1
 3274              		.syntax unified
 3275              		.thumb
 3276              		.thumb_func
 3277              		.fpu fpv4-sp-d16
 3279              	sync_fs:
 3280              	.LVL375:
 3281              	.LFB6:
 808:Core/Src/ff.c **** 	FRESULT res;
 3282              		.loc 1 808 1 is_stmt 1 view -0
 3283              		.cfi_startproc
 3284              		@ args = 0, pretend = 0, frame = 0
 3285              		@ frame_needed = 0, uses_anonymous_args = 0
 808:Core/Src/ff.c **** 	FRESULT res;
 3286              		.loc 1 808 1 is_stmt 0 view .LVU1100
 3287 0000 70B5     		push	{r4, r5, r6, lr}
 3288              	.LCFI23:
 3289              		.cfi_def_cfa_offset 16
 3290              		.cfi_offset 4, -16
 3291              		.cfi_offset 5, -12
 3292              		.cfi_offset 6, -8
 3293              		.cfi_offset 14, -4
 3294 0002 0446     		mov	r4, r0
 809:Core/Src/ff.c **** 
 3295              		.loc 1 809 2 is_stmt 1 view .LVU1101
 812:Core/Src/ff.c **** 	if (res == FR_OK) {
 3296              		.loc 1 812 2 view .LVU1102
 812:Core/Src/ff.c **** 	if (res == FR_OK) {
 3297              		.loc 1 812 8 is_stmt 0 view .LVU1103
 3298 0004 FFF7FEFF 		bl	sync_window
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 114


 3299              	.LVL376:
 813:Core/Src/ff.c **** 		/* Update FSINFO sector if needed */
 3300              		.loc 1 813 2 is_stmt 1 view .LVU1104
 813:Core/Src/ff.c **** 		/* Update FSINFO sector if needed */
 3301              		.loc 1 813 5 is_stmt 0 view .LVU1105
 3302 0008 0546     		mov	r5, r0
 3303 000a 48B9     		cbnz	r0, .L277
 815:Core/Src/ff.c **** 			/* Create FSINFO structure */
 3304              		.loc 1 815 3 is_stmt 1 view .LVU1106
 815:Core/Src/ff.c **** 			/* Create FSINFO structure */
 3305              		.loc 1 815 9 is_stmt 0 view .LVU1107
 3306 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 815:Core/Src/ff.c **** 			/* Create FSINFO structure */
 3307              		.loc 1 815 6 view .LVU1108
 3308 000e 032B     		cmp	r3, #3
 3309 0010 08D0     		beq	.L281
 3310              	.LVL377:
 3311              	.L278:
 829:Core/Src/ff.c **** 			res = FR_DISK_ERR;
 3312              		.loc 1 829 3 is_stmt 1 view .LVU1109
 829:Core/Src/ff.c **** 			res = FR_DISK_ERR;
 3313              		.loc 1 829 7 is_stmt 0 view .LVU1110
 3314 0012 0022     		movs	r2, #0
 3315 0014 1146     		mov	r1, r2
 3316 0016 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 3317 0018 FFF7FEFF 		bl	disk_ioctl
 3318              	.LVL378:
 829:Core/Src/ff.c **** 			res = FR_DISK_ERR;
 3319              		.loc 1 829 6 view .LVU1111
 3320 001c 00B1     		cbz	r0, .L277
 830:Core/Src/ff.c **** 	}
 3321              		.loc 1 830 8 view .LVU1112
 3322 001e 0125     		movs	r5, #1
 3323              	.L277:
 3324              	.LVL379:
 833:Core/Src/ff.c **** }
 3325              		.loc 1 833 2 is_stmt 1 view .LVU1113
 834:Core/Src/ff.c **** #endif
 3326              		.loc 1 834 1 is_stmt 0 view .LVU1114
 3327 0020 2846     		mov	r0, r5
 3328 0022 70BD     		pop	{r4, r5, r6, pc}
 3329              	.LVL380:
 3330              	.L281:
 815:Core/Src/ff.c **** 			/* Create FSINFO structure */
 3331              		.loc 1 815 36 discriminator 1 view .LVU1115
 3332 0024 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 815:Core/Src/ff.c **** 			/* Create FSINFO structure */
 3333              		.loc 1 815 31 discriminator 1 view .LVU1116
 3334 0026 012B     		cmp	r3, #1
 3335 0028 F3D1     		bne	.L278
 817:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 3336              		.loc 1 817 4 is_stmt 1 view .LVU1117
 817:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 3337              		.loc 1 817 14 is_stmt 0 view .LVU1118
 3338 002a 04F13006 		add	r6, r4, #48
 817:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 3339              		.loc 1 817 4 view .LVU1119
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 115


 3340 002e 4FF40072 		mov	r2, #512
 3341 0032 0021     		movs	r1, #0
 3342 0034 3046     		mov	r0, r6
 3343              	.LVL381:
 817:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);
 3344              		.loc 1 817 4 view .LVU1120
 3345 0036 FFF7FEFF 		bl	mem_set
 3346              	.LVL382:
 818:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 3347              		.loc 1 818 4 is_stmt 1 view .LVU1121
 3348 003a 5523     		movs	r3, #85
 3349 003c 84F82E32 		strb	r3, [r4, #558]
 818:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_LeadSig, 0x41615252);
 3350              		.loc 1 818 4 view .LVU1122
 3351 0040 AA23     		movs	r3, #170
 3352 0042 84F82F32 		strb	r3, [r4, #559]
 819:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 3353              		.loc 1 819 4 view .LVU1123
 3354 0046 5223     		movs	r3, #82
 3355 0048 84F83030 		strb	r3, [r4, #48]
 819:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 3356              		.loc 1 819 4 view .LVU1124
 3357 004c 84F83130 		strb	r3, [r4, #49]
 819:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 3358              		.loc 1 819 4 view .LVU1125
 3359 0050 6123     		movs	r3, #97
 3360 0052 84F83230 		strb	r3, [r4, #50]
 819:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_StrucSig, 0x61417272);
 3361              		.loc 1 819 4 view .LVU1126
 3362 0056 4122     		movs	r2, #65
 3363 0058 84F83320 		strb	r2, [r4, #51]
 820:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 3364              		.loc 1 820 4 view .LVU1127
 3365 005c 7221     		movs	r1, #114
 3366 005e 84F81412 		strb	r1, [r4, #532]
 820:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 3367              		.loc 1 820 4 view .LVU1128
 3368 0062 84F81512 		strb	r1, [r4, #533]
 820:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 3369              		.loc 1 820 4 view .LVU1129
 3370 0066 84F81622 		strb	r2, [r4, #534]
 820:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Free_Count, fs->free_clust);
 3371              		.loc 1 820 4 view .LVU1130
 3372 006a 84F81732 		strb	r3, [r4, #535]
 821:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 3373              		.loc 1 821 4 view .LVU1131
 3374 006e 2369     		ldr	r3, [r4, #16]
 3375 0070 84F81832 		strb	r3, [r4, #536]
 821:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 3376              		.loc 1 821 4 view .LVU1132
 3377 0074 C3F30722 		ubfx	r2, r3, #8, #8
 3378 0078 84F81922 		strb	r2, [r4, #537]
 821:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
 3379              		.loc 1 821 4 view .LVU1133
 3380 007c C3F30742 		ubfx	r2, r3, #16, #8
 3381 0080 84F81A22 		strb	r2, [r4, #538]
 821:Core/Src/ff.c **** 			ST_DWORD(fs->win+FSI_Nxt_Free, fs->last_clust);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 116


 3382              		.loc 1 821 4 view .LVU1134
 3383 0084 1B0E     		lsrs	r3, r3, #24
 3384 0086 84F81B32 		strb	r3, [r4, #539]
 822:Core/Src/ff.c **** 			/* Write it into the FSINFO sector */
 3385              		.loc 1 822 4 view .LVU1135
 3386 008a E368     		ldr	r3, [r4, #12]
 3387 008c 84F81C32 		strb	r3, [r4, #540]
 822:Core/Src/ff.c **** 			/* Write it into the FSINFO sector */
 3388              		.loc 1 822 4 view .LVU1136
 3389 0090 C3F30722 		ubfx	r2, r3, #8, #8
 3390 0094 84F81D22 		strb	r2, [r4, #541]
 822:Core/Src/ff.c **** 			/* Write it into the FSINFO sector */
 3391              		.loc 1 822 4 view .LVU1137
 3392 0098 C3F30742 		ubfx	r2, r3, #16, #8
 3393 009c 84F81E22 		strb	r2, [r4, #542]
 822:Core/Src/ff.c **** 			/* Write it into the FSINFO sector */
 3394              		.loc 1 822 4 view .LVU1138
 3395 00a0 1B0E     		lsrs	r3, r3, #24
 3396 00a2 84F81F32 		strb	r3, [r4, #543]
 824:Core/Src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 3397              		.loc 1 824 4 view .LVU1139
 824:Core/Src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 3398              		.loc 1 824 20 is_stmt 0 view .LVU1140
 3399 00a6 E269     		ldr	r2, [r4, #28]
 824:Core/Src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 3400              		.loc 1 824 30 view .LVU1141
 3401 00a8 0132     		adds	r2, r2, #1
 824:Core/Src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 3402              		.loc 1 824 16 view .LVU1142
 3403 00aa E262     		str	r2, [r4, #44]
 825:Core/Src/ff.c **** 			fs->fsi_flag = 0;
 3404              		.loc 1 825 4 is_stmt 1 view .LVU1143
 3405 00ac 0123     		movs	r3, #1
 3406 00ae 3146     		mov	r1, r6
 3407 00b0 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 3408 00b2 FFF7FEFF 		bl	disk_write
 3409              	.LVL383:
 826:Core/Src/ff.c **** 		}
 3410              		.loc 1 826 4 view .LVU1144
 826:Core/Src/ff.c **** 		}
 3411              		.loc 1 826 17 is_stmt 0 view .LVU1145
 3412 00b6 0023     		movs	r3, #0
 3413 00b8 6371     		strb	r3, [r4, #5]
 3414 00ba AAE7     		b	.L278
 3415              		.cfi_endproc
 3416              	.LFE6:
 3418              		.section	.text.clust2sect,"ax",%progbits
 3419              		.align	1
 3420              		.global	clust2sect
 3421              		.syntax unified
 3422              		.thumb
 3423              		.thumb_func
 3424              		.fpu fpv4-sp-d16
 3426              	clust2sect:
 3427              	.LVL384:
 3428              	.LFB7:
 849:Core/Src/ff.c **** 	clst -= 2;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 117


 3429              		.loc 1 849 1 is_stmt 1 view -0
 3430              		.cfi_startproc
 3431              		@ args = 0, pretend = 0, frame = 0
 3432              		@ frame_needed = 0, uses_anonymous_args = 0
 3433              		@ link register save eliminated.
 850:Core/Src/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 3434              		.loc 1 850 2 view .LVU1147
 850:Core/Src/ff.c **** 	if (clst >= (fs->n_fatent - 2)) return 0;		/* Invalid cluster# */
 3435              		.loc 1 850 7 is_stmt 0 view .LVU1148
 3436 0000 0239     		subs	r1, r1, #2
 3437              	.LVL385:
 851:Core/Src/ff.c **** 	return clst * fs->csize + fs->database;
 3438              		.loc 1 851 2 is_stmt 1 view .LVU1149
 851:Core/Src/ff.c **** 	return clst * fs->csize + fs->database;
 3439              		.loc 1 851 17 is_stmt 0 view .LVU1150
 3440 0002 4369     		ldr	r3, [r0, #20]
 851:Core/Src/ff.c **** 	return clst * fs->csize + fs->database;
 3441              		.loc 1 851 28 view .LVU1151
 3442 0004 023B     		subs	r3, r3, #2
 851:Core/Src/ff.c **** 	return clst * fs->csize + fs->database;
 3443              		.loc 1 851 5 view .LVU1152
 3444 0006 8B42     		cmp	r3, r1
 3445 0008 04D9     		bls	.L284
 852:Core/Src/ff.c **** }
 3446              		.loc 1 852 2 is_stmt 1 view .LVU1153
 852:Core/Src/ff.c **** }
 3447              		.loc 1 852 18 is_stmt 0 view .LVU1154
 3448 000a 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 852:Core/Src/ff.c **** }
 3449              		.loc 1 852 30 view .LVU1155
 3450 000c 806A     		ldr	r0, [r0, #40]
 3451              	.LVL386:
 852:Core/Src/ff.c **** }
 3452              		.loc 1 852 26 view .LVU1156
 3453 000e 01FB0300 		mla	r0, r1, r3, r0
 3454 0012 7047     		bx	lr
 3455              	.LVL387:
 3456              	.L284:
 851:Core/Src/ff.c **** 	return clst * fs->csize + fs->database;
 3457              		.loc 1 851 41 view .LVU1157
 3458 0014 0020     		movs	r0, #0
 3459              	.LVL388:
 853:Core/Src/ff.c **** 
 3460              		.loc 1 853 1 view .LVU1158
 3461 0016 7047     		bx	lr
 3462              		.cfi_endproc
 3463              	.LFE7:
 3465              		.section	.text.get_fat,"ax",%progbits
 3466              		.align	1
 3467              		.global	get_fat
 3468              		.syntax unified
 3469              		.thumb
 3470              		.thumb_func
 3471              		.fpu fpv4-sp-d16
 3473              	get_fat:
 3474              	.LVL389:
 3475              	.LFB8:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 118


 867:Core/Src/ff.c **** 	UINT wc, bc;
 3476              		.loc 1 867 1 is_stmt 1 view -0
 3477              		.cfi_startproc
 3478              		@ args = 0, pretend = 0, frame = 0
 3479              		@ frame_needed = 0, uses_anonymous_args = 0
 868:Core/Src/ff.c **** 	BYTE *p;
 3480              		.loc 1 868 2 view .LVU1160
 869:Core/Src/ff.c **** 
 3481              		.loc 1 869 2 view .LVU1161
 872:Core/Src/ff.c **** 		return 1;
 3482              		.loc 1 872 2 view .LVU1162
 872:Core/Src/ff.c **** 		return 1;
 3483              		.loc 1 872 5 is_stmt 0 view .LVU1163
 3484 0000 0129     		cmp	r1, #1
 3485 0002 64D9     		bls	.L290
 867:Core/Src/ff.c **** 	UINT wc, bc;
 3486              		.loc 1 867 1 discriminator 1 view .LVU1164
 3487 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3488              	.LCFI24:
 3489              		.cfi_def_cfa_offset 24
 3490              		.cfi_offset 3, -24
 3491              		.cfi_offset 4, -20
 3492              		.cfi_offset 5, -16
 3493              		.cfi_offset 6, -12
 3494              		.cfi_offset 7, -8
 3495              		.cfi_offset 14, -4
 3496 0006 0546     		mov	r5, r0
 3497 0008 0C46     		mov	r4, r1
 872:Core/Src/ff.c **** 		return 1;
 3498              		.loc 1 872 28 discriminator 1 view .LVU1165
 3499 000a 4369     		ldr	r3, [r0, #20]
 872:Core/Src/ff.c **** 		return 1;
 3500              		.loc 1 872 15 discriminator 1 view .LVU1166
 3501 000c 8B42     		cmp	r3, r1
 3502 000e 60D9     		bls	.L291
 875:Core/Src/ff.c **** 	case FS_FAT12 :
 3503              		.loc 1 875 2 is_stmt 1 view .LVU1167
 875:Core/Src/ff.c **** 	case FS_FAT12 :
 3504              		.loc 1 875 12 is_stmt 0 view .LVU1168
 3505 0010 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 875:Core/Src/ff.c **** 	case FS_FAT12 :
 3506              		.loc 1 875 2 view .LVU1169
 3507 0012 022B     		cmp	r3, #2
 3508 0014 2DD0     		beq	.L287
 3509 0016 032B     		cmp	r3, #3
 3510 0018 3ED0     		beq	.L288
 3511 001a 012B     		cmp	r3, #1
 3512 001c 01D0     		beq	.L301
 3513 001e 0120     		movs	r0, #1
 3514              	.LVL390:
 3515              	.L285:
 899:Core/Src/ff.c **** 
 3516              		.loc 1 899 1 view .LVU1170
 3517 0020 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3518              	.LVL391:
 3519              	.L301:
 877:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 119


 3520              		.loc 1 877 3 is_stmt 1 view .LVU1171
 877:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3521              		.loc 1 877 20 view .LVU1172
 877:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3522              		.loc 1 877 23 is_stmt 0 view .LVU1173
 3523 0022 01EB5107 		add	r7, r1, r1, lsr #1
 3524              	.LVL392:
 878:Core/Src/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 3525              		.loc 1 878 3 is_stmt 1 view .LVU1174
 878:Core/Src/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 3526              		.loc 1 878 25 is_stmt 0 view .LVU1175
 3527 0026 016A     		ldr	r1, [r0, #32]
 3528              	.LVL393:
 878:Core/Src/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 3529              		.loc 1 878 7 view .LVU1176
 3530 0028 01EB5721 		add	r1, r1, r7, lsr #9
 3531 002c FFF7FEFF 		bl	move_window
 3532              	.LVL394:
 878:Core/Src/ff.c **** 		wc = fs->win[bc % SS(fs)]; bc++;
 3533              		.loc 1 878 6 view .LVU1177
 3534 0030 10B1     		cbz	r0, .L302
 898:Core/Src/ff.c **** }
 3535              		.loc 1 898 9 view .LVU1178
 3536 0032 4FF0FF30 		mov	r0, #-1
 3537 0036 F3E7     		b	.L285
 3538              	.L302:
 879:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3539              		.loc 1 879 3 is_stmt 1 view .LVU1179
 879:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3540              		.loc 1 879 19 is_stmt 0 view .LVU1180
 3541 0038 C7F30803 		ubfx	r3, r7, #0, #9
 879:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3542              		.loc 1 879 15 view .LVU1181
 3543 003c 2B44     		add	r3, r3, r5
 3544 003e 93F83060 		ldrb	r6, [r3, #48]	@ zero_extendqisi2
 3545              	.LVL395:
 879:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3546              		.loc 1 879 30 is_stmt 1 view .LVU1182
 879:Core/Src/ff.c **** 		if (move_window(fs, fs->fatbase + (bc / SS(fs)))) break;
 3547              		.loc 1 879 32 is_stmt 0 view .LVU1183
 3548 0042 0137     		adds	r7, r7, #1
 3549              	.LVL396:
 880:Core/Src/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 3550              		.loc 1 880 3 is_stmt 1 view .LVU1184
 880:Core/Src/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 3551              		.loc 1 880 25 is_stmt 0 view .LVU1185
 3552 0044 296A     		ldr	r1, [r5, #32]
 880:Core/Src/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 3553              		.loc 1 880 7 view .LVU1186
 3554 0046 01EB5721 		add	r1, r1, r7, lsr #9
 3555 004a 2846     		mov	r0, r5
 3556 004c FFF7FEFF 		bl	move_window
 3557              	.LVL397:
 880:Core/Src/ff.c **** 		wc |= fs->win[bc % SS(fs)] << 8;
 3558              		.loc 1 880 6 view .LVU1187
 3559 0050 0028     		cmp	r0, #0
 3560 0052 40D1     		bne	.L294
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 120


 881:Core/Src/ff.c **** 		return clst & 1 ? wc >> 4 : (wc & 0xFFF);
 3561              		.loc 1 881 3 is_stmt 1 view .LVU1188
 881:Core/Src/ff.c **** 		return clst & 1 ? wc >> 4 : (wc & 0xFFF);
 3562              		.loc 1 881 20 is_stmt 0 view .LVU1189
 3563 0054 C7F30807 		ubfx	r7, r7, #0, #9
 3564              	.LVL398:
 881:Core/Src/ff.c **** 		return clst & 1 ? wc >> 4 : (wc & 0xFFF);
 3565              		.loc 1 881 16 view .LVU1190
 3566 0058 3D44     		add	r5, r5, r7
 3567              	.LVL399:
 881:Core/Src/ff.c **** 		return clst & 1 ? wc >> 4 : (wc & 0xFFF);
 3568              		.loc 1 881 16 view .LVU1191
 3569 005a 95F83000 		ldrb	r0, [r5, #48]	@ zero_extendqisi2
 881:Core/Src/ff.c **** 		return clst & 1 ? wc >> 4 : (wc & 0xFFF);
 3570              		.loc 1 881 6 view .LVU1192
 3571 005e 46EA0020 		orr	r0, r6, r0, lsl #8
 3572              	.LVL400:
 882:Core/Src/ff.c **** 
 3573              		.loc 1 882 3 is_stmt 1 view .LVU1193
 882:Core/Src/ff.c **** 
 3574              		.loc 1 882 29 is_stmt 0 view .LVU1194
 3575 0062 14F0010F 		tst	r4, #1
 3576 0066 01D0     		beq	.L289
 882:Core/Src/ff.c **** 
 3577              		.loc 1 882 29 discriminator 1 view .LVU1195
 3578 0068 0009     		lsrs	r0, r0, #4
 3579              	.LVL401:
 882:Core/Src/ff.c **** 
 3580              		.loc 1 882 29 discriminator 1 view .LVU1196
 3581 006a D9E7     		b	.L285
 3582              	.LVL402:
 3583              	.L289:
 882:Core/Src/ff.c **** 
 3584              		.loc 1 882 29 discriminator 2 view .LVU1197
 3585 006c C0F30B00 		ubfx	r0, r0, #0, #12
 3586              	.LVL403:
 882:Core/Src/ff.c **** 
 3587              		.loc 1 882 29 discriminator 2 view .LVU1198
 3588 0070 D6E7     		b	.L285
 3589              	.LVL404:
 3590              	.L287:
 885:Core/Src/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 3591              		.loc 1 885 3 is_stmt 1 view .LVU1199
 885:Core/Src/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 3592              		.loc 1 885 25 is_stmt 0 view .LVU1200
 3593 0072 016A     		ldr	r1, [r0, #32]
 3594              	.LVL405:
 885:Core/Src/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 3595              		.loc 1 885 7 view .LVU1201
 3596 0074 01EB1421 		add	r1, r1, r4, lsr #8
 3597 0078 FFF7FEFF 		bl	move_window
 3598              	.LVL406:
 885:Core/Src/ff.c **** 		p = &fs->win[clst * 2 % SS(fs)];
 3599              		.loc 1 885 6 view .LVU1202
 3600 007c 70BB     		cbnz	r0, .L295
 886:Core/Src/ff.c **** 		return LD_WORD(p);
 3601              		.loc 1 886 3 is_stmt 1 view .LVU1203
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 121


 886:Core/Src/ff.c **** 		return LD_WORD(p);
 3602              		.loc 1 886 21 is_stmt 0 view .LVU1204
 3603 007e 6400     		lsls	r4, r4, #1
 3604              	.LVL407:
 886:Core/Src/ff.c **** 		return LD_WORD(p);
 3605              		.loc 1 886 25 view .LVU1205
 3606 0080 04F4FF74 		and	r4, r4, #510
 886:Core/Src/ff.c **** 		return LD_WORD(p);
 3607              		.loc 1 886 5 view .LVU1206
 3608 0084 04F13003 		add	r3, r4, #48
 3609 0088 2B44     		add	r3, r3, r5
 3610              	.LVL408:
 887:Core/Src/ff.c **** 
 3611              		.loc 1 887 3 is_stmt 1 view .LVU1207
 887:Core/Src/ff.c **** 
 3612              		.loc 1 887 10 is_stmt 0 view .LVU1208
 3613 008a 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3614              	.LVL409:
 887:Core/Src/ff.c **** 
 3615              		.loc 1 887 10 view .LVU1209
 3616 008c 2C44     		add	r4, r4, r5
 3617              	.LVL410:
 887:Core/Src/ff.c **** 
 3618              		.loc 1 887 10 view .LVU1210
 3619 008e 94F83000 		ldrb	r0, [r4, #48]	@ zero_extendqisi2
 3620 0092 40EA0320 		orr	r0, r0, r3, lsl #8
 3621 0096 C3E7     		b	.L285
 3622              	.LVL411:
 3623              	.L288:
 890:Core/Src/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 3624              		.loc 1 890 3 is_stmt 1 view .LVU1211
 890:Core/Src/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 3625              		.loc 1 890 25 is_stmt 0 view .LVU1212
 3626 0098 016A     		ldr	r1, [r0, #32]
 3627              	.LVL412:
 890:Core/Src/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 3628              		.loc 1 890 7 view .LVU1213
 3629 009a 01EBD411 		add	r1, r1, r4, lsr #7
 3630 009e FFF7FEFF 		bl	move_window
 3631              	.LVL413:
 890:Core/Src/ff.c **** 		p = &fs->win[clst * 4 % SS(fs)];
 3632              		.loc 1 890 6 view .LVU1214
 3633 00a2 F0B9     		cbnz	r0, .L296
 891:Core/Src/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 3634              		.loc 1 891 3 is_stmt 1 view .LVU1215
 891:Core/Src/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 3635              		.loc 1 891 21 is_stmt 0 view .LVU1216
 3636 00a4 A400     		lsls	r4, r4, #2
 3637              	.LVL414:
 891:Core/Src/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 3638              		.loc 1 891 25 view .LVU1217
 3639 00a6 04F4FE74 		and	r4, r4, #508
 891:Core/Src/ff.c **** 		return LD_DWORD(p) & 0x0FFFFFFF;
 3640              		.loc 1 891 5 view .LVU1218
 3641 00aa 04F13003 		add	r3, r4, #48
 3642 00ae 2B44     		add	r3, r3, r5
 3643              	.LVL415:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 122


 892:Core/Src/ff.c **** 
 3644              		.loc 1 892 3 is_stmt 1 view .LVU1219
 892:Core/Src/ff.c **** 
 3645              		.loc 1 892 10 is_stmt 0 view .LVU1220
 3646 00b0 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3647 00b2 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 3648 00b4 0004     		lsls	r0, r0, #16
 3649 00b6 40EA0260 		orr	r0, r0, r2, lsl #24
 3650 00ba 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3651              	.LVL416:
 892:Core/Src/ff.c **** 
 3652              		.loc 1 892 10 view .LVU1221
 3653 00bc 40EA0320 		orr	r0, r0, r3, lsl #8
 3654 00c0 2C44     		add	r4, r4, r5
 3655              	.LVL417:
 892:Core/Src/ff.c **** 
 3656              		.loc 1 892 10 view .LVU1222
 3657 00c2 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 3658 00c6 1843     		orrs	r0, r0, r3
 892:Core/Src/ff.c **** 
 3659              		.loc 1 892 22 view .LVU1223
 3660 00c8 20F07040 		bic	r0, r0, #-268435456
 3661 00cc A8E7     		b	.L285
 3662              	.LVL418:
 3663              	.L290:
 3664              	.LCFI25:
 3665              		.cfi_def_cfa_offset 0
 3666              		.cfi_restore 3
 3667              		.cfi_restore 4
 3668              		.cfi_restore 5
 3669              		.cfi_restore 6
 3670              		.cfi_restore 7
 3671              		.cfi_restore 14
 873:Core/Src/ff.c **** 
 3672              		.loc 1 873 10 view .LVU1224
 3673 00ce 0120     		movs	r0, #1
 3674              	.LVL419:
 899:Core/Src/ff.c **** 
 3675              		.loc 1 899 1 view .LVU1225
 3676 00d0 7047     		bx	lr
 3677              	.LVL420:
 3678              	.L291:
 3679              	.LCFI26:
 3680              		.cfi_def_cfa_offset 24
 3681              		.cfi_offset 3, -24
 3682              		.cfi_offset 4, -20
 3683              		.cfi_offset 5, -16
 3684              		.cfi_offset 6, -12
 3685              		.cfi_offset 7, -8
 3686              		.cfi_offset 14, -4
 873:Core/Src/ff.c **** 
 3687              		.loc 1 873 10 view .LVU1226
 3688 00d2 0120     		movs	r0, #1
 3689              	.LVL421:
 873:Core/Src/ff.c **** 
 3690              		.loc 1 873 10 view .LVU1227
 3691 00d4 A4E7     		b	.L285
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 123


 3692              	.LVL422:
 3693              	.L294:
 898:Core/Src/ff.c **** }
 3694              		.loc 1 898 9 view .LVU1228
 3695 00d6 4FF0FF30 		mov	r0, #-1
 3696 00da A1E7     		b	.L285
 3697              	.LVL423:
 3698              	.L295:
 898:Core/Src/ff.c **** }
 3699              		.loc 1 898 9 view .LVU1229
 3700 00dc 4FF0FF30 		mov	r0, #-1
 3701 00e0 9EE7     		b	.L285
 3702              	.L296:
 898:Core/Src/ff.c **** }
 3703              		.loc 1 898 9 view .LVU1230
 3704 00e2 4FF0FF30 		mov	r0, #-1
 3705 00e6 9BE7     		b	.L285
 3706              		.cfi_endproc
 3707              	.LFE8:
 3709              		.section	.text.put_fat,"ax",%progbits
 3710              		.align	1
 3711              		.global	put_fat
 3712              		.syntax unified
 3713              		.thumb
 3714              		.thumb_func
 3715              		.fpu fpv4-sp-d16
 3717              	put_fat:
 3718              	.LVL424:
 3719              	.LFB9:
 914:Core/Src/ff.c **** 	UINT bc;
 3720              		.loc 1 914 1 is_stmt 1 view -0
 3721              		.cfi_startproc
 3722              		@ args = 0, pretend = 0, frame = 0
 3723              		@ frame_needed = 0, uses_anonymous_args = 0
 915:Core/Src/ff.c **** 	BYTE *p;
 3724              		.loc 1 915 2 view .LVU1232
 916:Core/Src/ff.c **** 	FRESULT res;
 3725              		.loc 1 916 2 view .LVU1233
 917:Core/Src/ff.c **** 
 3726              		.loc 1 917 2 view .LVU1234
 920:Core/Src/ff.c **** 		res = FR_INT_ERR;
 3727              		.loc 1 920 2 view .LVU1235
 920:Core/Src/ff.c **** 		res = FR_INT_ERR;
 3728              		.loc 1 920 5 is_stmt 0 view .LVU1236
 3729 0000 0129     		cmp	r1, #1
 3730 0002 40F28280 		bls	.L312
 914:Core/Src/ff.c **** 	UINT bc;
 3731              		.loc 1 914 1 discriminator 1 view .LVU1237
 3732 0006 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3733              	.LCFI27:
 3734              		.cfi_def_cfa_offset 24
 3735              		.cfi_offset 3, -24
 3736              		.cfi_offset 4, -20
 3737              		.cfi_offset 5, -16
 3738              		.cfi_offset 6, -12
 3739              		.cfi_offset 7, -8
 3740              		.cfi_offset 14, -4
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 124


 3741 0008 0546     		mov	r5, r0
 3742 000a 0C46     		mov	r4, r1
 3743 000c 1646     		mov	r6, r2
 920:Core/Src/ff.c **** 		res = FR_INT_ERR;
 3744              		.loc 1 920 28 discriminator 1 view .LVU1238
 3745 000e 4369     		ldr	r3, [r0, #20]
 920:Core/Src/ff.c **** 		res = FR_INT_ERR;
 3746              		.loc 1 920 15 discriminator 1 view .LVU1239
 3747 0010 8B42     		cmp	r3, r1
 3748 0012 7CD9     		bls	.L313
 924:Core/Src/ff.c **** 		case FS_FAT12 :
 3749              		.loc 1 924 3 is_stmt 1 view .LVU1240
 924:Core/Src/ff.c **** 		case FS_FAT12 :
 3750              		.loc 1 924 13 is_stmt 0 view .LVU1241
 3751 0014 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 924:Core/Src/ff.c **** 		case FS_FAT12 :
 3752              		.loc 1 924 3 view .LVU1242
 3753 0016 022B     		cmp	r3, #2
 3754 0018 42D0     		beq	.L305
 3755 001a 032B     		cmp	r3, #3
 3756 001c 54D0     		beq	.L306
 3757 001e 012B     		cmp	r3, #1
 3758 0020 03D0     		beq	.L319
 3759 0022 0220     		movs	r0, #2
 3760              	.LVL425:
 3761              	.L307:
 957:Core/Src/ff.c **** 	}
 3762              		.loc 1 957 3 is_stmt 1 view .LVU1243
 957:Core/Src/ff.c **** 	}
 3763              		.loc 1 957 13 is_stmt 0 view .LVU1244
 3764 0024 0123     		movs	r3, #1
 3765 0026 2B71     		strb	r3, [r5, #4]
 3766              	.LVL426:
 3767              	.L304:
 960:Core/Src/ff.c **** }
 3768              		.loc 1 960 2 is_stmt 1 view .LVU1245
 961:Core/Src/ff.c **** #endif /* !_FS_READONLY */
 3769              		.loc 1 961 1 is_stmt 0 view .LVU1246
 3770 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3771              	.LVL427:
 3772              	.L319:
 926:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 3773              		.loc 1 926 4 is_stmt 1 view .LVU1247
 926:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 3774              		.loc 1 926 21 view .LVU1248
 926:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 3775              		.loc 1 926 24 is_stmt 0 view .LVU1249
 3776 002a 01EB5107 		add	r7, r1, r1, lsr #1
 3777              	.LVL428:
 927:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3778              		.loc 1 927 4 is_stmt 1 view .LVU1250
 927:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3779              		.loc 1 927 28 is_stmt 0 view .LVU1251
 3780 002e 016A     		ldr	r1, [r0, #32]
 3781              	.LVL429:
 927:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3782              		.loc 1 927 10 view .LVU1252
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 125


 3783 0030 01EB5721 		add	r1, r1, r7, lsr #9
 3784 0034 FFF7FEFF 		bl	move_window
 3785              	.LVL430:
 928:Core/Src/ff.c **** 			p = &fs->win[bc % SS(fs)];
 3786              		.loc 1 928 4 is_stmt 1 view .LVU1253
 928:Core/Src/ff.c **** 			p = &fs->win[bc % SS(fs)];
 3787              		.loc 1 928 7 is_stmt 0 view .LVU1254
 3788 0038 0028     		cmp	r0, #0
 3789 003a F3D1     		bne	.L307
 929:Core/Src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 3790              		.loc 1 929 4 is_stmt 1 view .LVU1255
 929:Core/Src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 3791              		.loc 1 929 20 is_stmt 0 view .LVU1256
 3792 003c C7F30802 		ubfx	r2, r7, #0, #9
 3793              	.LVL431:
 930:Core/Src/ff.c **** 			bc++;
 3794              		.loc 1 930 4 is_stmt 1 view .LVU1257
 930:Core/Src/ff.c **** 			bc++;
 3795              		.loc 1 930 7 is_stmt 0 view .LVU1258
 3796 0040 14F00104 		ands	r4, r4, #1
 3797              	.LVL432:
 930:Core/Src/ff.c **** 			bc++;
 3798              		.loc 1 930 7 view .LVU1259
 3799 0044 20D0     		beq	.L308
 930:Core/Src/ff.c **** 			bc++;
 3800              		.loc 1 930 24 discriminator 1 view .LVU1260
 3801 0046 AB18     		adds	r3, r5, r2
 3802 0048 93F93030 		ldrsb	r3, [r3, #48]
 930:Core/Src/ff.c **** 			bc++;
 3803              		.loc 1 930 27 discriminator 1 view .LVU1261
 3804 004c 03F00F03 		and	r3, r3, #15
 930:Core/Src/ff.c **** 			bc++;
 3805              		.loc 1 930 48 discriminator 1 view .LVU1262
 3806 0050 3101     		lsls	r1, r6, #4
 3807 0052 01F47F61 		and	r1, r1, #4080
 930:Core/Src/ff.c **** 			bc++;
 3808              		.loc 1 930 35 discriminator 1 view .LVU1263
 3809 0056 0B43     		orrs	r3, r3, r1
 930:Core/Src/ff.c **** 			bc++;
 3810              		.loc 1 930 7 discriminator 1 view .LVU1264
 3811 0058 DBB2     		uxtb	r3, r3
 3812              	.L309:
 930:Core/Src/ff.c **** 			bc++;
 3813              		.loc 1 930 7 discriminator 4 view .LVU1265
 3814 005a 2A44     		add	r2, r2, r5
 3815              	.LVL433:
 930:Core/Src/ff.c **** 			bc++;
 3816              		.loc 1 930 7 discriminator 4 view .LVU1266
 3817 005c 82F83030 		strb	r3, [r2, #48]
 931:Core/Src/ff.c **** 			fs->wflag = 1;
 3818              		.loc 1 931 4 is_stmt 1 discriminator 4 view .LVU1267
 931:Core/Src/ff.c **** 			fs->wflag = 1;
 3819              		.loc 1 931 6 is_stmt 0 discriminator 4 view .LVU1268
 3820 0060 0137     		adds	r7, r7, #1
 3821              	.LVL434:
 932:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 3822              		.loc 1 932 4 is_stmt 1 discriminator 4 view .LVU1269
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 126


 932:Core/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 3823              		.loc 1 932 14 is_stmt 0 discriminator 4 view .LVU1270
 3824 0062 0123     		movs	r3, #1
 3825 0064 2B71     		strb	r3, [r5, #4]
 933:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3826              		.loc 1 933 4 is_stmt 1 discriminator 4 view .LVU1271
 933:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3827              		.loc 1 933 28 is_stmt 0 discriminator 4 view .LVU1272
 3828 0066 296A     		ldr	r1, [r5, #32]
 933:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3829              		.loc 1 933 10 discriminator 4 view .LVU1273
 3830 0068 01EB5721 		add	r1, r1, r7, lsr #9
 3831 006c 2846     		mov	r0, r5
 3832              	.LVL435:
 933:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3833              		.loc 1 933 10 discriminator 4 view .LVU1274
 3834 006e FFF7FEFF 		bl	move_window
 3835              	.LVL436:
 934:Core/Src/ff.c **** 			p = &fs->win[bc % SS(fs)];
 3836              		.loc 1 934 4 is_stmt 1 discriminator 4 view .LVU1275
 934:Core/Src/ff.c **** 			p = &fs->win[bc % SS(fs)];
 3837              		.loc 1 934 7 is_stmt 0 discriminator 4 view .LVU1276
 3838 0072 0028     		cmp	r0, #0
 3839 0074 D6D1     		bne	.L307
 935:Core/Src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 3840              		.loc 1 935 4 is_stmt 1 view .LVU1277
 935:Core/Src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 3841              		.loc 1 935 20 is_stmt 0 view .LVU1278
 3842 0076 C7F30807 		ubfx	r7, r7, #0, #9
 3843              	.LVL437:
 936:Core/Src/ff.c **** 			break;
 3844              		.loc 1 936 4 is_stmt 1 view .LVU1279
 936:Core/Src/ff.c **** 			break;
 3845              		.loc 1 936 7 is_stmt 0 view .LVU1280
 3846 007a 3CB1     		cbz	r4, .L310
 936:Core/Src/ff.c **** 			break;
 3847              		.loc 1 936 7 discriminator 1 view .LVU1281
 3848 007c C6F30712 		ubfx	r2, r6, #4, #8
 3849              	.LVL438:
 3850              	.L311:
 936:Core/Src/ff.c **** 			break;
 3851              		.loc 1 936 7 discriminator 4 view .LVU1282
 3852 0080 2F44     		add	r7, r7, r5
 3853              	.LVL439:
 936:Core/Src/ff.c **** 			break;
 3854              		.loc 1 936 7 discriminator 4 view .LVU1283
 3855 0082 87F83020 		strb	r2, [r7, #48]
 937:Core/Src/ff.c **** 
 3856              		.loc 1 937 4 is_stmt 1 discriminator 4 view .LVU1284
 3857 0086 CDE7     		b	.L307
 3858              	.LVL440:
 3859              	.L308:
 930:Core/Src/ff.c **** 			bc++;
 3860              		.loc 1 930 7 is_stmt 0 discriminator 2 view .LVU1285
 3861 0088 F3B2     		uxtb	r3, r6
 3862 008a E6E7     		b	.L309
 3863              	.LVL441:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 127


 3864              	.L310:
 936:Core/Src/ff.c **** 			break;
 3865              		.loc 1 936 43 discriminator 2 view .LVU1286
 3866 008c EB19     		adds	r3, r5, r7
 3867 008e 93F93020 		ldrsb	r2, [r3, #48]
 936:Core/Src/ff.c **** 			break;
 3868              		.loc 1 936 46 discriminator 2 view .LVU1287
 3869 0092 22F00F02 		bic	r2, r2, #15
 936:Core/Src/ff.c **** 			break;
 3870              		.loc 1 936 74 discriminator 2 view .LVU1288
 3871 0096 C6F30326 		ubfx	r6, r6, #8, #4
 3872              	.LVL442:
 936:Core/Src/ff.c **** 			break;
 3873              		.loc 1 936 54 discriminator 2 view .LVU1289
 3874 009a 3243     		orrs	r2, r2, r6
 936:Core/Src/ff.c **** 			break;
 3875              		.loc 1 936 7 discriminator 2 view .LVU1290
 3876 009c D2B2     		uxtb	r2, r2
 3877 009e EFE7     		b	.L311
 3878              	.LVL443:
 3879              	.L305:
 940:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3880              		.loc 1 940 4 is_stmt 1 view .LVU1291
 940:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3881              		.loc 1 940 28 is_stmt 0 view .LVU1292
 3882 00a0 016A     		ldr	r1, [r0, #32]
 3883              	.LVL444:
 940:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3884              		.loc 1 940 10 view .LVU1293
 3885 00a2 01EB1421 		add	r1, r1, r4, lsr #8
 3886 00a6 FFF7FEFF 		bl	move_window
 3887              	.LVL445:
 941:Core/Src/ff.c **** 			p = &fs->win[clst * 2 % SS(fs)];
 3888              		.loc 1 941 4 is_stmt 1 view .LVU1294
 941:Core/Src/ff.c **** 			p = &fs->win[clst * 2 % SS(fs)];
 3889              		.loc 1 941 7 is_stmt 0 view .LVU1295
 3890 00aa 0028     		cmp	r0, #0
 3891 00ac BAD1     		bne	.L307
 942:Core/Src/ff.c **** 			ST_WORD(p, (WORD)val);
 3892              		.loc 1 942 4 is_stmt 1 view .LVU1296
 942:Core/Src/ff.c **** 			ST_WORD(p, (WORD)val);
 3893              		.loc 1 942 22 is_stmt 0 view .LVU1297
 3894 00ae 6400     		lsls	r4, r4, #1
 3895              	.LVL446:
 942:Core/Src/ff.c **** 			ST_WORD(p, (WORD)val);
 3896              		.loc 1 942 26 view .LVU1298
 3897 00b0 04F4FF74 		and	r4, r4, #510
 942:Core/Src/ff.c **** 			ST_WORD(p, (WORD)val);
 3898              		.loc 1 942 6 view .LVU1299
 3899 00b4 04F13003 		add	r3, r4, #48
 3900 00b8 2B44     		add	r3, r3, r5
 3901              	.LVL447:
 943:Core/Src/ff.c **** 			break;
 3902              		.loc 1 943 4 is_stmt 1 view .LVU1300
 3903 00ba 2C44     		add	r4, r4, r5
 3904 00bc 84F83060 		strb	r6, [r4, #48]
 943:Core/Src/ff.c **** 			break;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 128


 3905              		.loc 1 943 4 view .LVU1301
 3906 00c0 C6F30722 		ubfx	r2, r6, #8, #8
 3907 00c4 5A70     		strb	r2, [r3, #1]
 944:Core/Src/ff.c **** 
 3908              		.loc 1 944 4 view .LVU1302
 3909 00c6 ADE7     		b	.L307
 3910              	.LVL448:
 3911              	.L306:
 947:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3912              		.loc 1 947 4 view .LVU1303
 947:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3913              		.loc 1 947 28 is_stmt 0 view .LVU1304
 3914 00c8 016A     		ldr	r1, [r0, #32]
 3915              	.LVL449:
 947:Core/Src/ff.c **** 			if (res != FR_OK) break;
 3916              		.loc 1 947 10 view .LVU1305
 3917 00ca 01EBD411 		add	r1, r1, r4, lsr #7
 3918 00ce FFF7FEFF 		bl	move_window
 3919              	.LVL450:
 948:Core/Src/ff.c **** 			p = &fs->win[clst * 4 % SS(fs)];
 3920              		.loc 1 948 4 is_stmt 1 view .LVU1306
 948:Core/Src/ff.c **** 			p = &fs->win[clst * 4 % SS(fs)];
 3921              		.loc 1 948 7 is_stmt 0 view .LVU1307
 3922 00d2 0028     		cmp	r0, #0
 3923 00d4 A6D1     		bne	.L307
 949:Core/Src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 3924              		.loc 1 949 4 is_stmt 1 view .LVU1308
 949:Core/Src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 3925              		.loc 1 949 22 is_stmt 0 view .LVU1309
 3926 00d6 A400     		lsls	r4, r4, #2
 3927              	.LVL451:
 949:Core/Src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 3928              		.loc 1 949 26 view .LVU1310
 3929 00d8 04F4FE74 		and	r4, r4, #508
 949:Core/Src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 3930              		.loc 1 949 6 view .LVU1311
 3931 00dc 04F13001 		add	r1, r4, #48
 3932 00e0 2944     		add	r1, r1, r5
 3933              	.LVL452:
 950:Core/Src/ff.c **** 			ST_DWORD(p, val);
 3934              		.loc 1 950 4 is_stmt 1 view .LVU1312
 950:Core/Src/ff.c **** 			ST_DWORD(p, val);
 3935              		.loc 1 950 11 is_stmt 0 view .LVU1313
 3936 00e2 CA78     		ldrb	r2, [r1, #3]	@ zero_extendqisi2
 3937 00e4 8B78     		ldrb	r3, [r1, #2]	@ zero_extendqisi2
 3938 00e6 1B04     		lsls	r3, r3, #16
 3939 00e8 43EA0263 		orr	r3, r3, r2, lsl #24
 3940 00ec 2C44     		add	r4, r4, r5
 950:Core/Src/ff.c **** 			ST_DWORD(p, val);
 3941              		.loc 1 950 23 view .LVU1314
 3942 00ee 03F07043 		and	r3, r3, #-268435456
 950:Core/Src/ff.c **** 			ST_DWORD(p, val);
 3943              		.loc 1 950 8 view .LVU1315
 3944 00f2 3343     		orrs	r3, r3, r6
 3945              	.LVL453:
 951:Core/Src/ff.c **** 			break;
 3946              		.loc 1 951 4 is_stmt 1 view .LVU1316
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 129


 3947 00f4 84F83060 		strb	r6, [r4, #48]
 951:Core/Src/ff.c **** 			break;
 3948              		.loc 1 951 4 view .LVU1317
 3949 00f8 C6F30722 		ubfx	r2, r6, #8, #8
 3950 00fc 4A70     		strb	r2, [r1, #1]
 951:Core/Src/ff.c **** 			break;
 3951              		.loc 1 951 4 view .LVU1318
 3952 00fe C6F30742 		ubfx	r2, r6, #16, #8
 3953 0102 8A70     		strb	r2, [r1, #2]
 951:Core/Src/ff.c **** 			break;
 3954              		.loc 1 951 4 view .LVU1319
 3955 0104 1B0E     		lsrs	r3, r3, #24
 3956              	.LVL454:
 951:Core/Src/ff.c **** 			break;
 3957              		.loc 1 951 4 is_stmt 0 view .LVU1320
 3958 0106 CB70     		strb	r3, [r1, #3]
 952:Core/Src/ff.c **** 
 3959              		.loc 1 952 4 is_stmt 1 view .LVU1321
 3960 0108 8CE7     		b	.L307
 3961              	.LVL455:
 3962              	.L312:
 3963              	.LCFI28:
 3964              		.cfi_def_cfa_offset 0
 3965              		.cfi_restore 3
 3966              		.cfi_restore 4
 3967              		.cfi_restore 5
 3968              		.cfi_restore 6
 3969              		.cfi_restore 7
 3970              		.cfi_restore 14
 921:Core/Src/ff.c **** 
 3971              		.loc 1 921 7 is_stmt 0 view .LVU1322
 3972 010a 0220     		movs	r0, #2
 3973              	.LVL456:
 960:Core/Src/ff.c **** }
 3974              		.loc 1 960 2 is_stmt 1 view .LVU1323
 961:Core/Src/ff.c **** #endif /* !_FS_READONLY */
 3975              		.loc 1 961 1 is_stmt 0 view .LVU1324
 3976 010c 7047     		bx	lr
 3977              	.LVL457:
 3978              	.L313:
 3979              	.LCFI29:
 3980              		.cfi_def_cfa_offset 24
 3981              		.cfi_offset 3, -24
 3982              		.cfi_offset 4, -20
 3983              		.cfi_offset 5, -16
 3984              		.cfi_offset 6, -12
 3985              		.cfi_offset 7, -8
 3986              		.cfi_offset 14, -4
 921:Core/Src/ff.c **** 
 3987              		.loc 1 921 7 view .LVU1325
 3988 010e 0220     		movs	r0, #2
 3989              	.LVL458:
 921:Core/Src/ff.c **** 
 3990              		.loc 1 921 7 view .LVU1326
 3991 0110 8AE7     		b	.L304
 3992              		.cfi_endproc
 3993              	.LFE9:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 130


 3995              		.section	.text.create_chain,"ax",%progbits
 3996              		.align	1
 3997              		.syntax unified
 3998              		.thumb
 3999              		.thumb_func
 4000              		.fpu fpv4-sp-d16
 4002              	create_chain:
 4003              	.LVL459:
 4004              	.LFB11:
1029:Core/Src/ff.c **** 	DWORD cs, ncl, scl;
 4005              		.loc 1 1029 1 is_stmt 1 view -0
 4006              		.cfi_startproc
 4007              		@ args = 0, pretend = 0, frame = 0
 4008              		@ frame_needed = 0, uses_anonymous_args = 0
1029:Core/Src/ff.c **** 	DWORD cs, ncl, scl;
 4009              		.loc 1 1029 1 is_stmt 0 view .LVU1328
 4010 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4011              	.LCFI30:
 4012              		.cfi_def_cfa_offset 24
 4013              		.cfi_offset 3, -24
 4014              		.cfi_offset 4, -20
 4015              		.cfi_offset 5, -16
 4016              		.cfi_offset 6, -12
 4017              		.cfi_offset 7, -8
 4018              		.cfi_offset 14, -4
 4019 0002 0546     		mov	r5, r0
1030:Core/Src/ff.c **** 	FRESULT res;
 4020              		.loc 1 1030 2 is_stmt 1 view .LVU1329
1031:Core/Src/ff.c **** 
 4021              		.loc 1 1031 2 view .LVU1330
1034:Core/Src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 4022              		.loc 1 1034 2 view .LVU1331
1034:Core/Src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 4023              		.loc 1 1034 5 is_stmt 0 view .LVU1332
 4024 0004 0F46     		mov	r7, r1
 4025 0006 31B9     		cbnz	r1, .L321
1035:Core/Src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 4026              		.loc 1 1035 3 is_stmt 1 view .LVU1333
1035:Core/Src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 4027              		.loc 1 1035 7 is_stmt 0 view .LVU1334
 4028 0008 C668     		ldr	r6, [r0, #12]
 4029              	.LVL460:
1036:Core/Src/ff.c **** 	}
 4030              		.loc 1 1036 3 is_stmt 1 view .LVU1335
1036:Core/Src/ff.c **** 	}
 4031              		.loc 1 1036 6 is_stmt 0 view .LVU1336
 4032 000a 8EB1     		cbz	r6, .L329
1036:Core/Src/ff.c **** 	}
 4033              		.loc 1 1036 24 discriminator 2 view .LVU1337
 4034 000c 4369     		ldr	r3, [r0, #20]
1036:Core/Src/ff.c **** 	}
 4035              		.loc 1 1036 12 discriminator 2 view .LVU1338
 4036 000e B342     		cmp	r3, r6
 4037 0010 0FD8     		bhi	.L322
1036:Core/Src/ff.c **** 	}
 4038              		.loc 1 1036 40 view .LVU1339
 4039 0012 0126     		movs	r6, #1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 131


 4040              	.LVL461:
1036:Core/Src/ff.c **** 	}
 4041              		.loc 1 1036 40 view .LVU1340
 4042 0014 0DE0     		b	.L322
 4043              	.LVL462:
 4044              	.L321:
1039:Core/Src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
 4045              		.loc 1 1039 3 is_stmt 1 view .LVU1341
1039:Core/Src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
 4046              		.loc 1 1039 8 is_stmt 0 view .LVU1342
 4047 0016 FFF7FEFF 		bl	get_fat
 4048              	.LVL463:
1039:Core/Src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
 4049              		.loc 1 1039 8 view .LVU1343
 4050 001a 0346     		mov	r3, r0
 4051              	.LVL464:
1040:Core/Src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 4052              		.loc 1 1040 3 is_stmt 1 view .LVU1344
1040:Core/Src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 4053              		.loc 1 1040 6 is_stmt 0 view .LVU1345
 4054 001c 0128     		cmp	r0, #1
 4055 001e 44D9     		bls	.L331
1041:Core/Src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 4056              		.loc 1 1041 3 is_stmt 1 view .LVU1346
1041:Core/Src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 4057              		.loc 1 1041 6 is_stmt 0 view .LVU1347
 4058 0020 B0F1FF3F 		cmp	r0, #-1
 4059 0024 46D0     		beq	.L320
1042:Core/Src/ff.c **** 		scl = clst;
 4060              		.loc 1 1042 3 is_stmt 1 view .LVU1348
1042:Core/Src/ff.c **** 		scl = clst;
 4061              		.loc 1 1042 14 is_stmt 0 view .LVU1349
 4062 0026 6A69     		ldr	r2, [r5, #20]
1042:Core/Src/ff.c **** 		scl = clst;
 4063              		.loc 1 1042 6 view .LVU1350
 4064 0028 8242     		cmp	r2, r0
 4065 002a 43D8     		bhi	.L320
1043:Core/Src/ff.c **** 	}
 4066              		.loc 1 1043 7 view .LVU1351
 4067 002c 3E46     		mov	r6, r7
 4068 002e 00E0     		b	.L322
 4069              	.LVL465:
 4070              	.L329:
1036:Core/Src/ff.c **** 	}
 4071              		.loc 1 1036 40 view .LVU1352
 4072 0030 0126     		movs	r6, #1
 4073              	.LVL466:
 4074              	.L322:
1046:Core/Src/ff.c **** 	for (;;) {
 4075              		.loc 1 1046 2 is_stmt 1 view .LVU1353
1046:Core/Src/ff.c **** 	for (;;) {
 4076              		.loc 1 1046 6 is_stmt 0 view .LVU1354
 4077 0032 3446     		mov	r4, r6
 4078 0034 0CE0     		b	.L326
 4079              	.LVL467:
 4080              	.L324:
1053:Core/Src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 132


 4081              		.loc 1 1053 3 is_stmt 1 view .LVU1355
1053:Core/Src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 4082              		.loc 1 1053 8 is_stmt 0 view .LVU1356
 4083 0036 2146     		mov	r1, r4
 4084 0038 2846     		mov	r0, r5
 4085 003a FFF7FEFF 		bl	get_fat
 4086              	.LVL468:
1054:Core/Src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 4087              		.loc 1 1054 3 is_stmt 1 view .LVU1357
1054:Core/Src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 4088              		.loc 1 1054 6 is_stmt 0 view .LVU1358
 4089 003e 0346     		mov	r3, r0
 4090 0040 70B1     		cbz	r0, .L325
1055:Core/Src/ff.c **** 			return cs;
 4091              		.loc 1 1055 3 is_stmt 1 view .LVU1359
1055:Core/Src/ff.c **** 			return cs;
 4092              		.loc 1 1055 6 is_stmt 0 view .LVU1360
 4093 0042 B0F1FF3F 		cmp	r0, #-1
 4094 0046 35D0     		beq	.L320
1055:Core/Src/ff.c **** 			return cs;
 4095              		.loc 1 1055 24 discriminator 1 view .LVU1361
 4096 0048 0128     		cmp	r0, #1
 4097 004a 33D0     		beq	.L320
1057:Core/Src/ff.c **** 	}
 4098              		.loc 1 1057 3 is_stmt 1 view .LVU1362
1057:Core/Src/ff.c **** 	}
 4099              		.loc 1 1057 6 is_stmt 0 view .LVU1363
 4100 004c B442     		cmp	r4, r6
 4101 004e 30D0     		beq	.L337
 4102              	.LVL469:
 4103              	.L326:
1047:Core/Src/ff.c **** 		ncl++;							/* Next cluster */
 4104              		.loc 1 1047 2 is_stmt 1 view .LVU1364
1048:Core/Src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
 4105              		.loc 1 1048 3 view .LVU1365
1048:Core/Src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
 4106              		.loc 1 1048 6 is_stmt 0 view .LVU1366
 4107 0050 0134     		adds	r4, r4, #1
 4108              	.LVL470:
1049:Core/Src/ff.c **** 			ncl = 2;
 4109              		.loc 1 1049 3 is_stmt 1 view .LVU1367
1049:Core/Src/ff.c **** 			ncl = 2;
 4110              		.loc 1 1049 16 is_stmt 0 view .LVU1368
 4111 0052 6B69     		ldr	r3, [r5, #20]
1049:Core/Src/ff.c **** 			ncl = 2;
 4112              		.loc 1 1049 6 view .LVU1369
 4113 0054 A342     		cmp	r3, r4
 4114 0056 EED8     		bhi	.L324
1050:Core/Src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 4115              		.loc 1 1050 4 is_stmt 1 view .LVU1370
 4116              	.LVL471:
1051:Core/Src/ff.c **** 		}
 4117              		.loc 1 1051 4 view .LVU1371
1051:Core/Src/ff.c **** 		}
 4118              		.loc 1 1051 7 is_stmt 0 view .LVU1372
 4119 0058 012E     		cmp	r6, #1
 4120 005a 28D9     		bls	.L332
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 133


1050:Core/Src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 4121              		.loc 1 1050 8 view .LVU1373
 4122 005c 0224     		movs	r4, #2
 4123 005e EAE7     		b	.L324
 4124              	.LVL472:
 4125              	.L325:
1060:Core/Src/ff.c **** 	if (res == FR_OK && clst != 0) {
 4126              		.loc 1 1060 2 is_stmt 1 view .LVU1374
1060:Core/Src/ff.c **** 	if (res == FR_OK && clst != 0) {
 4127              		.loc 1 1060 8 is_stmt 0 view .LVU1375
 4128 0060 6FF07042 		mvn	r2, #-268435456
 4129 0064 2146     		mov	r1, r4
 4130 0066 2846     		mov	r0, r5
 4131              	.LVL473:
1060:Core/Src/ff.c **** 	if (res == FR_OK && clst != 0) {
 4132              		.loc 1 1060 8 view .LVU1376
 4133 0068 FFF7FEFF 		bl	put_fat
 4134              	.LVL474:
1061:Core/Src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 4135              		.loc 1 1061 2 is_stmt 1 view .LVU1377
1061:Core/Src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 4136              		.loc 1 1061 5 is_stmt 0 view .LVU1378
 4137 006c 0346     		mov	r3, r0
 4138 006e 00B9     		cbnz	r0, .L327
1061:Core/Src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 4139              		.loc 1 1061 19 discriminator 1 view .LVU1379
 4140 0070 6FB9     		cbnz	r7, .L338
 4141              	.LVL475:
 4142              	.L327:
1064:Core/Src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 4143              		.loc 1 1064 2 is_stmt 1 view .LVU1380
1064:Core/Src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 4144              		.loc 1 1064 5 is_stmt 0 view .LVU1381
 4145 0072 9BB9     		cbnz	r3, .L328
1065:Core/Src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 4146              		.loc 1 1065 3 is_stmt 1 view .LVU1382
1065:Core/Src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 4147              		.loc 1 1065 18 is_stmt 0 view .LVU1383
 4148 0074 EC60     		str	r4, [r5, #12]
1066:Core/Src/ff.c **** 			fs->free_clust--;
 4149              		.loc 1 1066 3 is_stmt 1 view .LVU1384
1066:Core/Src/ff.c **** 			fs->free_clust--;
 4150              		.loc 1 1066 9 is_stmt 0 view .LVU1385
 4151 0076 2B69     		ldr	r3, [r5, #16]
 4152              	.LVL476:
1066:Core/Src/ff.c **** 			fs->free_clust--;
 4153              		.loc 1 1066 6 view .LVU1386
 4154 0078 B3F1FF3F 		cmp	r3, #-1
 4155 007c 1CD0     		beq	.L334
1067:Core/Src/ff.c **** 			fs->fsi_flag |= 1;
 4156              		.loc 1 1067 4 is_stmt 1 view .LVU1387
1067:Core/Src/ff.c **** 			fs->fsi_flag |= 1;
 4157              		.loc 1 1067 18 is_stmt 0 view .LVU1388
 4158 007e 013B     		subs	r3, r3, #1
 4159 0080 2B61     		str	r3, [r5, #16]
1068:Core/Src/ff.c **** 		}
 4160              		.loc 1 1068 4 is_stmt 1 view .LVU1389
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 134


1068:Core/Src/ff.c **** 		}
 4161              		.loc 1 1068 17 is_stmt 0 view .LVU1390
 4162 0082 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
 4163 0084 43F00103 		orr	r3, r3, #1
 4164 0088 6B71     		strb	r3, [r5, #5]
 4165 008a 2346     		mov	r3, r4
 4166 008c 12E0     		b	.L320
 4167              	.LVL477:
 4168              	.L338:
1062:Core/Src/ff.c **** 	}
 4169              		.loc 1 1062 3 is_stmt 1 view .LVU1391
1062:Core/Src/ff.c **** 	}
 4170              		.loc 1 1062 9 is_stmt 0 view .LVU1392
 4171 008e 2246     		mov	r2, r4
 4172 0090 3946     		mov	r1, r7
 4173 0092 2846     		mov	r0, r5
 4174              	.LVL478:
1062:Core/Src/ff.c **** 	}
 4175              		.loc 1 1062 9 view .LVU1393
 4176 0094 FFF7FEFF 		bl	put_fat
 4177              	.LVL479:
 4178 0098 0346     		mov	r3, r0
 4179              	.LVL480:
1062:Core/Src/ff.c **** 	}
 4180              		.loc 1 1062 9 view .LVU1394
 4181 009a EAE7     		b	.L327
 4182              	.L328:
1071:Core/Src/ff.c **** 	}
 4183              		.loc 1 1071 3 is_stmt 1 view .LVU1395
1071:Core/Src/ff.c **** 	}
 4184              		.loc 1 1071 43 is_stmt 0 view .LVU1396
 4185 009c 012B     		cmp	r3, #1
 4186 009e 01D0     		beq	.L339
 4187 00a0 0123     		movs	r3, #1
 4188              	.LVL481:
1071:Core/Src/ff.c **** 	}
 4189              		.loc 1 1071 43 view .LVU1397
 4190 00a2 07E0     		b	.L320
 4191              	.LVL482:
 4192              	.L339:
1071:Core/Src/ff.c **** 	}
 4193              		.loc 1 1071 43 view .LVU1398
 4194 00a4 4FF0FF33 		mov	r3, #-1
 4195              	.LVL483:
1071:Core/Src/ff.c **** 	}
 4196              		.loc 1 1071 43 view .LVU1399
 4197 00a8 04E0     		b	.L320
 4198              	.LVL484:
 4199              	.L331:
1040:Core/Src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 4200              		.loc 1 1040 22 view .LVU1400
 4201 00aa 0123     		movs	r3, #1
 4202 00ac 02E0     		b	.L320
 4203              	.LVL485:
 4204              	.L332:
1051:Core/Src/ff.c **** 		}
 4205              		.loc 1 1051 26 view .LVU1401
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 135


 4206 00ae 0023     		movs	r3, #0
 4207 00b0 00E0     		b	.L320
 4208              	.LVL486:
 4209              	.L337:
1057:Core/Src/ff.c **** 	}
 4210              		.loc 1 1057 26 view .LVU1402
 4211 00b2 0023     		movs	r3, #0
 4212              	.LVL487:
 4213              	.L320:
1075:Core/Src/ff.c **** #endif /* !_FS_READONLY */
 4214              		.loc 1 1075 1 view .LVU1403
 4215 00b4 1846     		mov	r0, r3
 4216 00b6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4217              	.LVL488:
 4218              	.L334:
1075:Core/Src/ff.c **** #endif /* !_FS_READONLY */
 4219              		.loc 1 1075 1 view .LVU1404
 4220 00b8 2346     		mov	r3, r4
 4221 00ba FBE7     		b	.L320
 4222              		.cfi_endproc
 4223              	.LFE11:
 4225              		.section	.text.dir_next,"ax",%progbits
 4226              		.align	1
 4227              		.syntax unified
 4228              		.thumb
 4229              		.thumb_func
 4230              		.fpu fpv4-sp-d16
 4232              	dir_next:
 4233              	.LVL489:
 4234              	.LFB14:
1167:Core/Src/ff.c **** 	DWORD clst;
 4235              		.loc 1 1167 1 is_stmt 1 view -0
 4236              		.cfi_startproc
 4237              		@ args = 0, pretend = 0, frame = 0
 4238              		@ frame_needed = 0, uses_anonymous_args = 0
1167:Core/Src/ff.c **** 	DWORD clst;
 4239              		.loc 1 1167 1 is_stmt 0 view .LVU1406
 4240 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 4241              	.LCFI31:
 4242              		.cfi_def_cfa_offset 32
 4243              		.cfi_offset 3, -32
 4244              		.cfi_offset 4, -28
 4245              		.cfi_offset 5, -24
 4246              		.cfi_offset 6, -20
 4247              		.cfi_offset 7, -16
 4248              		.cfi_offset 8, -12
 4249              		.cfi_offset 9, -8
 4250              		.cfi_offset 14, -4
1168:Core/Src/ff.c **** 	UINT i;
 4251              		.loc 1 1168 2 is_stmt 1 view .LVU1407
1169:Core/Src/ff.c **** 
 4252              		.loc 1 1169 2 view .LVU1408
1172:Core/Src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
 4253              		.loc 1 1172 2 view .LVU1409
1172:Core/Src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
 4254              		.loc 1 1172 8 is_stmt 0 view .LVU1410
 4255 0004 C588     		ldrh	r5, [r0, #6]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 136


1172:Core/Src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
 4256              		.loc 1 1172 16 view .LVU1411
 4257 0006 6B1C     		adds	r3, r5, #1
 4258              	.LVL490:
1173:Core/Src/ff.c **** 		return FR_NO_FILE;
 4259              		.loc 1 1173 2 is_stmt 1 view .LVU1412
1173:Core/Src/ff.c **** 		return FR_NO_FILE;
 4260              		.loc 1 1173 10 is_stmt 0 view .LVU1413
 4261 0008 9AB2     		uxth	r2, r3
1173:Core/Src/ff.c **** 		return FR_NO_FILE;
 4262              		.loc 1 1173 5 view .LVU1414
 4263 000a 002A     		cmp	r2, #0
 4264 000c 68D0     		beq	.L347
 4265 000e 0446     		mov	r4, r0
 4266 0010 0F46     		mov	r7, r1
1173:Core/Src/ff.c **** 		return FR_NO_FILE;
 4267              		.loc 1 1173 26 discriminator 1 view .LVU1415
 4268 0012 0269     		ldr	r2, [r0, #16]
1173:Core/Src/ff.c **** 		return FR_NO_FILE;
 4269              		.loc 1 1173 20 discriminator 1 view .LVU1416
 4270 0014 002A     		cmp	r2, #0
 4271 0016 65D0     		beq	.L348
1176:Core/Src/ff.c **** 		dp->sect++;					/* Next sector */
 4272              		.loc 1 1176 2 is_stmt 1 view .LVU1417
1176:Core/Src/ff.c **** 		dp->sect++;					/* Next sector */
 4273              		.loc 1 1176 5 is_stmt 0 view .LVU1418
 4274 0018 13F00F06 		ands	r6, r3, #15
 4275 001c 07D1     		bne	.L342
1177:Core/Src/ff.c **** 
 4276              		.loc 1 1177 3 is_stmt 1 view .LVU1419
1177:Core/Src/ff.c **** 
 4277              		.loc 1 1177 11 is_stmt 0 view .LVU1420
 4278 001e 0132     		adds	r2, r2, #1
 4279 0020 0261     		str	r2, [r0, #16]
1179:Core/Src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
 4280              		.loc 1 1179 3 is_stmt 1 view .LVU1421
1179:Core/Src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
 4281              		.loc 1 1179 10 is_stmt 0 view .LVU1422
 4282 0022 C168     		ldr	r1, [r0, #12]
 4283              	.LVL491:
1179:Core/Src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
 4284              		.loc 1 1179 6 view .LVU1423
 4285 0024 69B9     		cbnz	r1, .L343
1180:Core/Src/ff.c **** 				return FR_NO_FILE;
 4286              		.loc 1 1180 4 is_stmt 1 view .LVU1424
1180:Core/Src/ff.c **** 				return FR_NO_FILE;
 4287              		.loc 1 1180 15 is_stmt 0 view .LVU1425
 4288 0026 0268     		ldr	r2, [r0]
1180:Core/Src/ff.c **** 				return FR_NO_FILE;
 4289              		.loc 1 1180 19 view .LVU1426
 4290 0028 1289     		ldrh	r2, [r2, #8]
1180:Core/Src/ff.c **** 				return FR_NO_FILE;
 4291              		.loc 1 1180 7 view .LVU1427
 4292 002a 9A42     		cmp	r2, r3
 4293 002c 5CD9     		bls	.L359
 4294              	.LVL492:
 4295              	.L342:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 137


1217:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (i % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Current entry in the window */
 4296              		.loc 1 1217 2 is_stmt 1 view .LVU1428
1217:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (i % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Current entry in the window */
 4297              		.loc 1 1217 14 is_stmt 0 view .LVU1429
 4298 002e 0135     		adds	r5, r5, #1
 4299              	.LVL493:
1217:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (i % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Current entry in the window */
 4300              		.loc 1 1217 12 view .LVU1430
 4301 0030 E580     		strh	r5, [r4, #6]	@ movhi
1218:Core/Src/ff.c **** 
 4302              		.loc 1 1218 2 is_stmt 1 view .LVU1431
1218:Core/Src/ff.c **** 
 4303              		.loc 1 1218 14 is_stmt 0 view .LVU1432
 4304 0032 2368     		ldr	r3, [r4]
1218:Core/Src/ff.c **** 
 4305              		.loc 1 1218 12 view .LVU1433
 4306 0034 3033     		adds	r3, r3, #48
1218:Core/Src/ff.c **** 
 4307              		.loc 1 1218 24 view .LVU1434
 4308 0036 03EB4613 		add	r3, r3, r6, lsl #5
1218:Core/Src/ff.c **** 
 4309              		.loc 1 1218 10 view .LVU1435
 4310 003a 6361     		str	r3, [r4, #20]
1220:Core/Src/ff.c **** }
 4311              		.loc 1 1220 2 is_stmt 1 view .LVU1436
1220:Core/Src/ff.c **** }
 4312              		.loc 1 1220 9 is_stmt 0 view .LVU1437
 4313 003c 0020     		movs	r0, #0
 4314              	.LVL494:
 4315              	.L341:
1221:Core/Src/ff.c **** 
 4316              		.loc 1 1221 1 view .LVU1438
 4317 003e BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 4318              	.LVL495:
 4319              	.L343:
1184:Core/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 4320              		.loc 1 1184 4 is_stmt 1 view .LVU1439
1184:Core/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 4321              		.loc 1 1184 42 is_stmt 0 view .LVU1440
 4322 0042 0068     		ldr	r0, [r0]
 4323              	.LVL496:
1184:Core/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 4324              		.loc 1 1184 46 view .LVU1441
 4325 0044 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
1184:Core/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 4326              		.loc 1 1184 54 view .LVU1442
 4327 0046 013A     		subs	r2, r2, #1
1184:Core/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 4328              		.loc 1 1184 7 view .LVU1443
 4329 0048 12EA1318 		ands	r8, r2, r3, lsr #4
 4330 004c EFD1     		bne	.L342
1185:Core/Src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 4331              		.loc 1 1185 5 is_stmt 1 view .LVU1444
1185:Core/Src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 4332              		.loc 1 1185 12 is_stmt 0 view .LVU1445
 4333 004e FFF7FEFF 		bl	get_fat
 4334              	.LVL497:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 138


1185:Core/Src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 4335              		.loc 1 1185 12 view .LVU1446
 4336 0052 8146     		mov	r9, r0
 4337              	.LVL498:
1186:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4338              		.loc 1 1186 5 is_stmt 1 view .LVU1447
1186:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4339              		.loc 1 1186 8 is_stmt 0 view .LVU1448
 4340 0054 0128     		cmp	r0, #1
 4341 0056 49D9     		bls	.L350
1187:Core/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 4342              		.loc 1 1187 5 is_stmt 1 view .LVU1449
1187:Core/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 4343              		.loc 1 1187 8 is_stmt 0 view .LVU1450
 4344 0058 B0F1FF3F 		cmp	r0, #-1
 4345 005c 48D0     		beq	.L351
1188:Core/Src/ff.c **** #if !_FS_READONLY
 4346              		.loc 1 1188 5 is_stmt 1 view .LVU1451
1188:Core/Src/ff.c **** #if !_FS_READONLY
 4347              		.loc 1 1188 19 is_stmt 0 view .LVU1452
 4348 005e 2068     		ldr	r0, [r4]
 4349              	.LVL499:
1188:Core/Src/ff.c **** #if !_FS_READONLY
 4350              		.loc 1 1188 23 view .LVU1453
 4351 0060 4369     		ldr	r3, [r0, #20]
1188:Core/Src/ff.c **** #if !_FS_READONLY
 4352              		.loc 1 1188 8 view .LVU1454
 4353 0062 4B45     		cmp	r3, r9
 4354 0064 34D8     		bhi	.L344
 4355              	.LBB9:
1190:Core/Src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
 4356              		.loc 1 1190 6 is_stmt 1 view .LVU1455
1191:Core/Src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
 4357              		.loc 1 1191 6 view .LVU1456
1191:Core/Src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
 4358              		.loc 1 1191 9 is_stmt 0 view .LVU1457
 4359 0066 002F     		cmp	r7, #0
 4360 0068 44D0     		beq	.L352
1192:Core/Src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4361              		.loc 1 1192 6 is_stmt 1 view .LVU1458
1192:Core/Src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 4362              		.loc 1 1192 13 is_stmt 0 view .LVU1459
 4363 006a E168     		ldr	r1, [r4, #12]
 4364 006c FFF7FEFF 		bl	create_chain
 4365              	.LVL500:
1193:Core/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 4366              		.loc 1 1193 6 is_stmt 1 view .LVU1460
1193:Core/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 4367              		.loc 1 1193 9 is_stmt 0 view .LVU1461
 4368 0070 8146     		mov	r9, r0
 4369 0072 0028     		cmp	r0, #0
 4370 0074 40D0     		beq	.L353
1194:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4371              		.loc 1 1194 6 is_stmt 1 view .LVU1462
1194:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4372              		.loc 1 1194 9 is_stmt 0 view .LVU1463
 4373 0076 0128     		cmp	r0, #1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 139


 4374 0078 40D0     		beq	.L354
1195:Core/Src/ff.c **** 					/* Clean-up stretched table */
 4375              		.loc 1 1195 6 is_stmt 1 view .LVU1464
1195:Core/Src/ff.c **** 					/* Clean-up stretched table */
 4376              		.loc 1 1195 9 is_stmt 0 view .LVU1465
 4377 007a B0F1FF3F 		cmp	r0, #-1
 4378 007e 3FD0     		beq	.L355
1197:Core/Src/ff.c **** 					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
 4379              		.loc 1 1197 6 is_stmt 1 view .LVU1466
1197:Core/Src/ff.c **** 					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
 4380              		.loc 1 1197 10 is_stmt 0 view .LVU1467
 4381 0080 2068     		ldr	r0, [r4]
 4382              	.LVL501:
1197:Core/Src/ff.c **** 					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
 4383              		.loc 1 1197 10 view .LVU1468
 4384 0082 FFF7FEFF 		bl	sync_window
 4385              	.LVL502:
1197:Core/Src/ff.c **** 					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
 4386              		.loc 1 1197 9 view .LVU1469
 4387 0086 08B1     		cbz	r0, .L360
1197:Core/Src/ff.c **** 					mem_set(dp->fs->win, 0, SS(dp->fs));		/* Clear window buffer */
 4388              		.loc 1 1197 38 view .LVU1470
 4389 0088 0120     		movs	r0, #1
 4390 008a D8E7     		b	.L341
 4391              	.L360:
1198:Core/Src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
 4392              		.loc 1 1198 6 is_stmt 1 view .LVU1471
1198:Core/Src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
 4393              		.loc 1 1198 16 is_stmt 0 view .LVU1472
 4394 008c 2068     		ldr	r0, [r4]
1198:Core/Src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
 4395              		.loc 1 1198 6 view .LVU1473
 4396 008e 4FF40072 		mov	r2, #512
 4397 0092 0021     		movs	r1, #0
 4398 0094 3030     		adds	r0, r0, #48
 4399 0096 FFF7FEFF 		bl	mem_set
 4400              	.LVL503:
1199:Core/Src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 4401              		.loc 1 1199 6 is_stmt 1 view .LVU1474
1199:Core/Src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 4402              		.loc 1 1199 24 is_stmt 0 view .LVU1475
 4403 009a 2768     		ldr	r7, [r4]
 4404              	.LVL504:
1199:Core/Src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 4405              		.loc 1 1199 24 view .LVU1476
 4406 009c 4946     		mov	r1, r9
 4407 009e 3846     		mov	r0, r7
 4408 00a0 FFF7FEFF 		bl	clust2sect
 4409              	.LVL505:
1199:Core/Src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 4410              		.loc 1 1199 22 view .LVU1477
 4411 00a4 F862     		str	r0, [r7, #44]
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
 4412              		.loc 1 1200 6 is_stmt 1 view .LVU1478
 4413              	.LVL506:
 4414              	.L345:
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 140


 4415              		.loc 1 1200 18 discriminator 1 view .LVU1479
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
 4416              		.loc 1 1200 24 is_stmt 0 discriminator 1 view .LVU1480
 4417 00a6 2368     		ldr	r3, [r4]
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
 4418              		.loc 1 1200 28 discriminator 1 view .LVU1481
 4419 00a8 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
 4420              		.loc 1 1200 6 discriminator 1 view .LVU1482
 4421 00aa 4245     		cmp	r2, r8
 4422 00ac 0CD9     		bls	.L361
1201:Core/Src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
 4423              		.loc 1 1201 7 is_stmt 1 view .LVU1483
1201:Core/Src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
 4424              		.loc 1 1201 21 is_stmt 0 view .LVU1484
 4425 00ae 0122     		movs	r2, #1
 4426 00b0 1A71     		strb	r2, [r3, #4]
1202:Core/Src/ff.c **** 						dp->fs->winsect++;
 4427              		.loc 1 1202 7 is_stmt 1 view .LVU1485
1202:Core/Src/ff.c **** 						dp->fs->winsect++;
 4428              		.loc 1 1202 11 is_stmt 0 view .LVU1486
 4429 00b2 2068     		ldr	r0, [r4]
 4430 00b4 FFF7FEFF 		bl	sync_window
 4431              	.LVL507:
1202:Core/Src/ff.c **** 						dp->fs->winsect++;
 4432              		.loc 1 1202 10 view .LVU1487
 4433 00b8 20BB     		cbnz	r0, .L357
1203:Core/Src/ff.c **** 					}
 4434              		.loc 1 1203 7 is_stmt 1 discriminator 2 view .LVU1488
1203:Core/Src/ff.c **** 					}
 4435              		.loc 1 1203 9 is_stmt 0 discriminator 2 view .LVU1489
 4436 00ba 2268     		ldr	r2, [r4]
1203:Core/Src/ff.c **** 					}
 4437              		.loc 1 1203 13 discriminator 2 view .LVU1490
 4438 00bc D36A     		ldr	r3, [r2, #44]
1203:Core/Src/ff.c **** 					}
 4439              		.loc 1 1203 22 discriminator 2 view .LVU1491
 4440 00be 0133     		adds	r3, r3, #1
 4441 00c0 D362     		str	r3, [r2, #44]
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
 4442              		.loc 1 1200 37 is_stmt 1 discriminator 2 view .LVU1492
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
 4443              		.loc 1 1200 38 is_stmt 0 discriminator 2 view .LVU1493
 4444 00c2 08F10108 		add	r8, r8, #1
 4445              	.LVL508:
1200:Core/Src/ff.c **** 						dp->fs->wflag = 1;
 4446              		.loc 1 1200 38 discriminator 2 view .LVU1494
 4447 00c6 EEE7     		b	.L345
 4448              	.L361:
1205:Core/Src/ff.c **** #else
 4449              		.loc 1 1205 6 is_stmt 1 view .LVU1495
1205:Core/Src/ff.c **** #else
 4450              		.loc 1 1205 22 is_stmt 0 view .LVU1496
 4451 00c8 DA6A     		ldr	r2, [r3, #44]
 4452 00ca A2EB0802 		sub	r2, r2, r8
 4453 00ce DA62     		str	r2, [r3, #44]
 4454              	.LVL509:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 141


 4455              	.L344:
1205:Core/Src/ff.c **** #else
 4456              		.loc 1 1205 22 view .LVU1497
 4457              	.LBE9:
1211:Core/Src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
 4458              		.loc 1 1211 5 is_stmt 1 view .LVU1498
1211:Core/Src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
 4459              		.loc 1 1211 15 is_stmt 0 view .LVU1499
 4460 00d0 C4F80C90 		str	r9, [r4, #12]
1212:Core/Src/ff.c **** 			}
 4461              		.loc 1 1212 5 is_stmt 1 view .LVU1500
1212:Core/Src/ff.c **** 			}
 4462              		.loc 1 1212 16 is_stmt 0 view .LVU1501
 4463 00d4 4946     		mov	r1, r9
 4464 00d6 2068     		ldr	r0, [r4]
 4465 00d8 FFF7FEFF 		bl	clust2sect
 4466              	.LVL510:
1212:Core/Src/ff.c **** 			}
 4467              		.loc 1 1212 14 view .LVU1502
 4468 00dc 2061     		str	r0, [r4, #16]
 4469 00de A6E7     		b	.L342
 4470              	.LVL511:
 4471              	.L347:
1174:Core/Src/ff.c **** 
 4472              		.loc 1 1174 10 view .LVU1503
 4473 00e0 0420     		movs	r0, #4
 4474              	.LVL512:
1174:Core/Src/ff.c **** 
 4475              		.loc 1 1174 10 view .LVU1504
 4476 00e2 ACE7     		b	.L341
 4477              	.LVL513:
 4478              	.L348:
1174:Core/Src/ff.c **** 
 4479              		.loc 1 1174 10 view .LVU1505
 4480 00e4 0420     		movs	r0, #4
 4481              	.LVL514:
1174:Core/Src/ff.c **** 
 4482              		.loc 1 1174 10 view .LVU1506
 4483 00e6 AAE7     		b	.L341
 4484              	.LVL515:
 4485              	.L359:
1181:Core/Src/ff.c **** 		}
 4486              		.loc 1 1181 12 view .LVU1507
 4487 00e8 0420     		movs	r0, #4
 4488              	.LVL516:
1181:Core/Src/ff.c **** 		}
 4489              		.loc 1 1181 12 view .LVU1508
 4490 00ea A8E7     		b	.L341
 4491              	.LVL517:
 4492              	.L350:
1186:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4493              		.loc 1 1186 27 view .LVU1509
 4494 00ec 0220     		movs	r0, #2
 4495              	.LVL518:
1186:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4496              		.loc 1 1186 27 view .LVU1510
 4497 00ee A6E7     		b	.L341
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 142


 4498              	.LVL519:
 4499              	.L351:
1187:Core/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 4500              		.loc 1 1187 36 view .LVU1511
 4501 00f0 0120     		movs	r0, #1
 4502              	.LVL520:
1187:Core/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 4503              		.loc 1 1187 36 view .LVU1512
 4504 00f2 A4E7     		b	.L341
 4505              	.L352:
 4506              	.LBB10:
1191:Core/Src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
 4507              		.loc 1 1191 27 view .LVU1513
 4508 00f4 0420     		movs	r0, #4
 4509 00f6 A2E7     		b	.L341
 4510              	.LVL521:
 4511              	.L353:
1193:Core/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 4512              		.loc 1 1193 28 view .LVU1514
 4513 00f8 0720     		movs	r0, #7
 4514              	.LVL522:
1193:Core/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 4515              		.loc 1 1193 28 view .LVU1515
 4516 00fa A0E7     		b	.L341
 4517              	.LVL523:
 4518              	.L354:
1194:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4519              		.loc 1 1194 28 view .LVU1516
 4520 00fc 0220     		movs	r0, #2
 4521              	.LVL524:
1194:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 4522              		.loc 1 1194 28 view .LVU1517
 4523 00fe 9EE7     		b	.L341
 4524              	.LVL525:
 4525              	.L355:
1195:Core/Src/ff.c **** 					/* Clean-up stretched table */
 4526              		.loc 1 1195 37 view .LVU1518
 4527 0100 0120     		movs	r0, #1
 4528              	.LVL526:
1195:Core/Src/ff.c **** 					/* Clean-up stretched table */
 4529              		.loc 1 1195 37 view .LVU1519
 4530 0102 9CE7     		b	.L341
 4531              	.LVL527:
 4532              	.L357:
1202:Core/Src/ff.c **** 						dp->fs->winsect++;
 4533              		.loc 1 1202 39 view .LVU1520
 4534 0104 0120     		movs	r0, #1
 4535 0106 9AE7     		b	.L341
 4536              	.LBE10:
 4537              		.cfi_endproc
 4538              	.LFE14:
 4540              		.section	.text.dir_read,"ax",%progbits
 4541              		.align	1
 4542              		.syntax unified
 4543              		.thumb
 4544              		.thumb_func
 4545              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 143


 4547              	dir_read:
 4548              	.LVL528:
 4549              	.LFB24:
1553:Core/Src/ff.c **** 	FRESULT res;
 4550              		.loc 1 1553 1 is_stmt 1 view -0
 4551              		.cfi_startproc
 4552              		@ args = 0, pretend = 0, frame = 0
 4553              		@ frame_needed = 0, uses_anonymous_args = 0
1553:Core/Src/ff.c **** 	FRESULT res;
 4554              		.loc 1 1553 1 is_stmt 0 view .LVU1522
 4555 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4556              	.LCFI32:
 4557              		.cfi_def_cfa_offset 24
 4558              		.cfi_offset 4, -24
 4559              		.cfi_offset 5, -20
 4560              		.cfi_offset 6, -16
 4561              		.cfi_offset 7, -12
 4562              		.cfi_offset 8, -8
 4563              		.cfi_offset 14, -4
 4564 0004 0446     		mov	r4, r0
 4565 0006 0F46     		mov	r7, r1
1554:Core/Src/ff.c **** 	BYTE a, c, *dir;
 4566              		.loc 1 1554 2 is_stmt 1 view .LVU1523
1555:Core/Src/ff.c **** #if _USE_LFN
 4567              		.loc 1 1555 2 view .LVU1524
1557:Core/Src/ff.c **** #endif
 4568              		.loc 1 1557 2 view .LVU1525
 4569              	.LVL529:
1560:Core/Src/ff.c **** 	while (dp->sect) {
 4570              		.loc 1 1560 2 view .LVU1526
1561:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 4571              		.loc 1 1561 2 view .LVU1527
1557:Core/Src/ff.c **** #endif
 4572              		.loc 1 1557 19 is_stmt 0 view .LVU1528
 4573 0008 4FF0FF08 		mov	r8, #255
1557:Core/Src/ff.c **** #endif
 4574              		.loc 1 1557 7 view .LVU1529
 4575 000c 4646     		mov	r6, r8
1560:Core/Src/ff.c **** 	while (dp->sect) {
 4576              		.loc 1 1560 6 view .LVU1530
 4577 000e 0425     		movs	r5, #4
1561:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 4578              		.loc 1 1561 8 view .LVU1531
 4579 0010 2EE0     		b	.L363
 4580              	.LVL530:
 4581              	.L381:
1572:Core/Src/ff.c **** 				if (c & LLE) {			/* Is it start of LFN sequence? */
 4582              		.loc 1 1572 4 is_stmt 1 view .LVU1532
1572:Core/Src/ff.c **** 				if (c & LLE) {			/* Is it start of LFN sequence? */
 4583              		.loc 1 1572 7 is_stmt 0 view .LVU1533
 4584 0012 0F2A     		cmp	r2, #15
 4585 0014 19D1     		bne	.L366
1573:Core/Src/ff.c **** 					sum = dir[LDIR_Chksum];
 4586              		.loc 1 1573 5 is_stmt 1 view .LVU1534
1573:Core/Src/ff.c **** 					sum = dir[LDIR_Chksum];
 4587              		.loc 1 1573 8 is_stmt 0 view .LVU1535
 4588 0016 13F0400F 		tst	r3, #64
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 144


 4589 001a 06D0     		beq	.L367
1574:Core/Src/ff.c **** 					c &= ~LLE; ord = c;
 4590              		.loc 1 1574 6 is_stmt 1 view .LVU1536
1574:Core/Src/ff.c **** 					c &= ~LLE; ord = c;
 4591              		.loc 1 1574 10 is_stmt 0 view .LVU1537
 4592 001c 91F80D80 		ldrb	r8, [r1, #13]	@ zero_extendqisi2
 4593              	.LVL531:
1575:Core/Src/ff.c **** 					dp->lfn_idx = dp->index;
 4594              		.loc 1 1575 6 is_stmt 1 view .LVU1538
1575:Core/Src/ff.c **** 					dp->lfn_idx = dp->index;
 4595              		.loc 1 1575 8 is_stmt 0 view .LVU1539
 4596 0020 03F0BF03 		and	r3, r3, #191
 4597              	.LVL532:
1575:Core/Src/ff.c **** 					dp->lfn_idx = dp->index;
 4598              		.loc 1 1575 17 is_stmt 1 view .LVU1540
1576:Core/Src/ff.c **** 				}
 4599              		.loc 1 1576 6 view .LVU1541
1576:Core/Src/ff.c **** 				}
 4600              		.loc 1 1576 22 is_stmt 0 view .LVU1542
 4601 0024 E288     		ldrh	r2, [r4, #6]
 4602              	.LVL533:
1576:Core/Src/ff.c **** 				}
 4603              		.loc 1 1576 18 view .LVU1543
 4604 0026 2284     		strh	r2, [r4, #32]	@ movhi
 4605              	.LVL534:
1575:Core/Src/ff.c **** 					dp->lfn_idx = dp->index;
 4606              		.loc 1 1575 21 view .LVU1544
 4607 0028 1E46     		mov	r6, r3
 4608              	.LVL535:
 4609              	.L367:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4610              		.loc 1 1579 5 is_stmt 1 view .LVU1545
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4611              		.loc 1 1579 9 is_stmt 0 view .LVU1546
 4612 002a B342     		cmp	r3, r6
 4613 002c 01D0     		beq	.L379
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4614              		.loc 1 1579 9 view .LVU1547
 4615 002e FF26     		movs	r6, #255
 4616              	.LVL536:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4617              		.loc 1 1579 9 view .LVU1548
 4618 0030 18E0     		b	.L365
 4619              	.LVL537:
 4620              	.L379:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4621              		.loc 1 1579 34 discriminator 1 view .LVU1549
 4622 0032 4B7B     		ldrb	r3, [r1, #13]	@ zero_extendqisi2
 4623              	.LVL538:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4624              		.loc 1 1579 21 discriminator 1 view .LVU1550
 4625 0034 4345     		cmp	r3, r8
 4626 0036 01D0     		beq	.L380
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4627              		.loc 1 1579 9 view .LVU1551
 4628 0038 FF26     		movs	r6, #255
 4629              	.LVL539:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 145


1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4630              		.loc 1 1579 9 view .LVU1552
 4631 003a 13E0     		b	.L365
 4632              	.LVL540:
 4633              	.L380:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4634              		.loc 1 1579 51 discriminator 3 view .LVU1553
 4635 003c E069     		ldr	r0, [r4, #28]
 4636 003e FFF7FEFF 		bl	pick_lfn
 4637              	.LVL541:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4638              		.loc 1 1579 48 discriminator 3 view .LVU1554
 4639 0042 70B3     		cbz	r0, .L377
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4640              		.loc 1 1579 9 discriminator 5 view .LVU1555
 4641 0044 013E     		subs	r6, r6, #1
 4642              	.LVL542:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4643              		.loc 1 1579 9 discriminator 5 view .LVU1556
 4644 0046 F6B2     		uxtb	r6, r6
 4645 0048 0CE0     		b	.L365
 4646              	.LVL543:
 4647              	.L366:
1581:Core/Src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
 4648              		.loc 1 1581 5 is_stmt 1 view .LVU1557
1581:Core/Src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
 4649              		.loc 1 1581 8 is_stmt 0 view .LVU1558
 4650 004a 26B9     		cbnz	r6, .L368
1581:Core/Src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
 4651              		.loc 1 1581 23 discriminator 1 view .LVU1559
 4652 004c 0846     		mov	r0, r1
 4653 004e FFF7FEFF 		bl	sum_sfn
 4654              	.LVL544:
1581:Core/Src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
 4655              		.loc 1 1581 13 discriminator 1 view .LVU1560
 4656 0052 4045     		cmp	r0, r8
 4657 0054 28D0     		beq	.L364
 4658              	.L368:
1582:Core/Src/ff.c **** 				break;
 4659              		.loc 1 1582 6 is_stmt 1 view .LVU1561
1582:Core/Src/ff.c **** 				break;
 4660              		.loc 1 1582 18 is_stmt 0 view .LVU1562
 4661 0056 4FF6FF73 		movw	r3, #65535
 4662 005a 2384     		strh	r3, [r4, #32]	@ movhi
 4663 005c 24E0     		b	.L364
 4664              	.LVL545:
 4665              	.L372:
1570:Core/Src/ff.c **** 		} else {
 4666              		.loc 1 1570 8 view .LVU1563
 4667 005e FF26     		movs	r6, #255
 4668              	.LVL546:
1570:Core/Src/ff.c **** 		} else {
 4669              		.loc 1 1570 8 view .LVU1564
 4670 0060 00E0     		b	.L365
 4671              	.LVL547:
 4672              	.L373:
1570:Core/Src/ff.c **** 		} else {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 146


 4673              		.loc 1 1570 8 view .LVU1565
 4674 0062 FF26     		movs	r6, #255
 4675              	.LVL548:
 4676              	.L365:
1590:Core/Src/ff.c **** 		if (res != FR_OK) break;
 4677              		.loc 1 1590 3 is_stmt 1 view .LVU1566
1590:Core/Src/ff.c **** 		if (res != FR_OK) break;
 4678              		.loc 1 1590 9 is_stmt 0 view .LVU1567
 4679 0064 0021     		movs	r1, #0
 4680 0066 2046     		mov	r0, r4
 4681 0068 FFF7FEFF 		bl	dir_next
 4682              	.LVL549:
1591:Core/Src/ff.c **** 	}
 4683              		.loc 1 1591 3 is_stmt 1 view .LVU1568
1591:Core/Src/ff.c **** 	}
 4684              		.loc 1 1591 6 is_stmt 0 view .LVU1569
 4685 006c 0546     		mov	r5, r0
 4686 006e D8B9     		cbnz	r0, .L364
 4687              	.LVL550:
 4688              	.L363:
1561:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 4689              		.loc 1 1561 8 is_stmt 1 view .LVU1570
1561:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 4690              		.loc 1 1561 11 is_stmt 0 view .LVU1571
 4691 0070 2169     		ldr	r1, [r4, #16]
1561:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 4692              		.loc 1 1561 8 view .LVU1572
 4693 0072 C9B1     		cbz	r1, .L364
1562:Core/Src/ff.c **** 		if (res != FR_OK) break;
 4694              		.loc 1 1562 3 is_stmt 1 view .LVU1573
1562:Core/Src/ff.c **** 		if (res != FR_OK) break;
 4695              		.loc 1 1562 9 is_stmt 0 view .LVU1574
 4696 0074 2068     		ldr	r0, [r4]
 4697 0076 FFF7FEFF 		bl	move_window
 4698              	.LVL551:
1563:Core/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 4699              		.loc 1 1563 3 is_stmt 1 view .LVU1575
1563:Core/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 4700              		.loc 1 1563 6 is_stmt 0 view .LVU1576
 4701 007a 0546     		mov	r5, r0
 4702 007c A0B9     		cbnz	r0, .L364
1564:Core/Src/ff.c **** 		c = dir[DIR_Name];
 4703              		.loc 1 1564 3 is_stmt 1 view .LVU1577
1564:Core/Src/ff.c **** 		c = dir[DIR_Name];
 4704              		.loc 1 1564 7 is_stmt 0 view .LVU1578
 4705 007e 6169     		ldr	r1, [r4, #20]
 4706              	.LVL552:
1565:Core/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4707              		.loc 1 1565 3 is_stmt 1 view .LVU1579
1565:Core/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4708              		.loc 1 1565 5 is_stmt 0 view .LVU1580
 4709 0080 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 4710              	.LVL553:
1566:Core/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 4711              		.loc 1 1566 3 is_stmt 1 view .LVU1581
1566:Core/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 4712              		.loc 1 1566 6 is_stmt 0 view .LVU1582
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 147


 4713 0082 83B1     		cbz	r3, .L371
1567:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 4714              		.loc 1 1567 3 is_stmt 1 view .LVU1583
1567:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 4715              		.loc 1 1567 10 is_stmt 0 view .LVU1584
 4716 0084 CA7A     		ldrb	r2, [r1, #11]	@ zero_extendqisi2
1567:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 4717              		.loc 1 1567 5 view .LVU1585
 4718 0086 02F03F02 		and	r2, r2, #63
 4719              	.LVL554:
1569:Core/Src/ff.c **** 			ord = 0xFF;
 4720              		.loc 1 1569 3 is_stmt 1 view .LVU1586
1569:Core/Src/ff.c **** 			ord = 0xFF;
 4721              		.loc 1 1569 6 is_stmt 0 view .LVU1587
 4722 008a E52B     		cmp	r3, #229
 4723 008c E7D0     		beq	.L372
1569:Core/Src/ff.c **** 			ord = 0xFF;
 4724              		.loc 1 1569 16 discriminator 1 view .LVU1588
 4725 008e 2E2B     		cmp	r3, #46
 4726 0090 E7D0     		beq	.L373
1569:Core/Src/ff.c **** 			ord = 0xFF;
 4727              		.loc 1 1569 47 discriminator 2 view .LVU1589
 4728 0092 082A     		cmp	r2, #8
 4729 0094 14BF     		ite	ne
 4730 0096 0020     		movne	r0, #0
 4731              	.LVL555:
1569:Core/Src/ff.c **** 			ord = 0xFF;
 4732              		.loc 1 1569 47 discriminator 2 view .LVU1590
 4733 0098 0120     		moveq	r0, #1
1569:Core/Src/ff.c **** 			ord = 0xFF;
 4734              		.loc 1 1569 44 discriminator 2 view .LVU1591
 4735 009a B842     		cmp	r0, r7
 4736 009c B9D0     		beq	.L381
1570:Core/Src/ff.c **** 		} else {
 4737              		.loc 1 1570 8 view .LVU1592
 4738 009e FF26     		movs	r6, #255
 4739              	.LVL556:
1570:Core/Src/ff.c **** 		} else {
 4740              		.loc 1 1570 8 view .LVU1593
 4741 00a0 E0E7     		b	.L365
 4742              	.LVL557:
 4743              	.L377:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4744              		.loc 1 1579 9 view .LVU1594
 4745 00a2 FF26     		movs	r6, #255
 4746              	.LVL558:
1579:Core/Src/ff.c **** 			} else {					/* An SFN entry is found */
 4747              		.loc 1 1579 9 view .LVU1595
 4748 00a4 DEE7     		b	.L365
 4749              	.LVL559:
 4750              	.L371:
1566:Core/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 4751              		.loc 1 1566 21 view .LVU1596
 4752 00a6 0425     		movs	r5, #4
 4753              	.LVL560:
 4754              	.L364:
1594:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 148


 4755              		.loc 1 1594 2 is_stmt 1 view .LVU1597
1594:Core/Src/ff.c **** 
 4756              		.loc 1 1594 5 is_stmt 0 view .LVU1598
 4757 00a8 0DB1     		cbz	r5, .L370
1594:Core/Src/ff.c **** 
 4758              		.loc 1 1594 20 is_stmt 1 discriminator 1 view .LVU1599
1594:Core/Src/ff.c **** 
 4759              		.loc 1 1594 29 is_stmt 0 discriminator 1 view .LVU1600
 4760 00aa 0023     		movs	r3, #0
 4761 00ac 2361     		str	r3, [r4, #16]
 4762              	.L370:
1596:Core/Src/ff.c **** }
 4763              		.loc 1 1596 2 is_stmt 1 view .LVU1601
1597:Core/Src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
 4764              		.loc 1 1597 1 is_stmt 0 view .LVU1602
 4765 00ae 2846     		mov	r0, r5
 4766 00b0 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
1597:Core/Src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
 4767              		.loc 1 1597 1 view .LVU1603
 4768              		.cfi_endproc
 4769              	.LFE24:
 4771              		.section	.text.remove_chain,"ax",%progbits
 4772              		.align	1
 4773              		.syntax unified
 4774              		.thumb
 4775              		.thumb_func
 4776              		.fpu fpv4-sp-d16
 4778              	remove_chain:
 4779              	.LVL561:
 4780              	.LFB10:
 976:Core/Src/ff.c **** 	FRESULT res;
 4781              		.loc 1 976 1 is_stmt 1 view -0
 4782              		.cfi_startproc
 4783              		@ args = 0, pretend = 0, frame = 0
 4784              		@ frame_needed = 0, uses_anonymous_args = 0
 976:Core/Src/ff.c **** 	FRESULT res;
 4785              		.loc 1 976 1 is_stmt 0 view .LVU1605
 4786 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4787              	.LCFI33:
 4788              		.cfi_def_cfa_offset 24
 4789              		.cfi_offset 3, -24
 4790              		.cfi_offset 4, -20
 4791              		.cfi_offset 5, -16
 4792              		.cfi_offset 6, -12
 4793              		.cfi_offset 7, -8
 4794              		.cfi_offset 14, -4
 977:Core/Src/ff.c **** 	DWORD nxt;
 4795              		.loc 1 977 2 is_stmt 1 view .LVU1606
 978:Core/Src/ff.c **** #if _USE_ERASE
 4796              		.loc 1 978 2 view .LVU1607
 983:Core/Src/ff.c **** 		res = FR_INT_ERR;
 4797              		.loc 1 983 2 view .LVU1608
 983:Core/Src/ff.c **** 		res = FR_INT_ERR;
 4798              		.loc 1 983 5 is_stmt 0 view .LVU1609
 4799 0002 0129     		cmp	r1, #1
 4800 0004 27D9     		bls	.L387
 4801 0006 0446     		mov	r4, r0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 149


 4802 0008 0D46     		mov	r5, r1
 983:Core/Src/ff.c **** 		res = FR_INT_ERR;
 4803              		.loc 1 983 28 discriminator 1 view .LVU1610
 4804 000a 4369     		ldr	r3, [r0, #20]
 983:Core/Src/ff.c **** 		res = FR_INT_ERR;
 4805              		.loc 1 983 15 discriminator 1 view .LVU1611
 4806 000c 8B42     		cmp	r3, r1
 4807 000e 25D9     		bls	.L388
 987:Core/Src/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
 4808              		.loc 1 987 7 view .LVU1612
 4809 0010 0027     		movs	r7, #0
 4810 0012 00E0     		b	.L384
 4811              	.LVL562:
 4812              	.L385:
 976:Core/Src/ff.c **** 	FRESULT res;
 4813              		.loc 1 976 1 view .LVU1613
 4814 0014 3546     		mov	r5, r6
 4815              	.LVL563:
 4816              	.L384:
 988:Core/Src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 4817              		.loc 1 988 9 is_stmt 1 view .LVU1614
 988:Core/Src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 4818              		.loc 1 988 19 is_stmt 0 view .LVU1615
 4819 0016 6369     		ldr	r3, [r4, #20]
 988:Core/Src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 4820              		.loc 1 988 9 view .LVU1616
 4821 0018 AB42     		cmp	r3, r5
 4822 001a 1DD9     		bls	.L383
 989:Core/Src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 4823              		.loc 1 989 4 is_stmt 1 view .LVU1617
 989:Core/Src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 4824              		.loc 1 989 10 is_stmt 0 view .LVU1618
 4825 001c 2946     		mov	r1, r5
 4826 001e 2046     		mov	r0, r4
 4827 0020 FFF7FEFF 		bl	get_fat
 4828              	.LVL564:
 990:Core/Src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 4829              		.loc 1 990 4 is_stmt 1 view .LVU1619
 990:Core/Src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 4830              		.loc 1 990 7 is_stmt 0 view .LVU1620
 4831 0024 0646     		mov	r6, r0
 4832 0026 B8B1     		cbz	r0, .L383
 991:Core/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 4833              		.loc 1 991 4 is_stmt 1 view .LVU1621
 991:Core/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 4834              		.loc 1 991 7 is_stmt 0 view .LVU1622
 4835 0028 0128     		cmp	r0, #1
 4836 002a 19D0     		beq	.L389
 992:Core/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 4837              		.loc 1 992 4 is_stmt 1 view .LVU1623
 992:Core/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 4838              		.loc 1 992 7 is_stmt 0 view .LVU1624
 4839 002c B0F1FF3F 		cmp	r0, #-1
 4840 0030 18D0     		beq	.L390
 993:Core/Src/ff.c **** 			if (res != FR_OK) break;
 4841              		.loc 1 993 4 is_stmt 1 view .LVU1625
 993:Core/Src/ff.c **** 			if (res != FR_OK) break;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 150


 4842              		.loc 1 993 10 is_stmt 0 view .LVU1626
 4843 0032 0022     		movs	r2, #0
 4844 0034 2946     		mov	r1, r5
 4845 0036 2046     		mov	r0, r4
 4846              	.LVL565:
 993:Core/Src/ff.c **** 			if (res != FR_OK) break;
 4847              		.loc 1 993 10 view .LVU1627
 4848 0038 FFF7FEFF 		bl	put_fat
 4849              	.LVL566:
 994:Core/Src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
 4850              		.loc 1 994 4 is_stmt 1 view .LVU1628
 994:Core/Src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
 4851              		.loc 1 994 7 is_stmt 0 view .LVU1629
 4852 003c 0746     		mov	r7, r0
 4853 003e 58B9     		cbnz	r0, .L383
 995:Core/Src/ff.c **** 				fs->free_clust++;
 4854              		.loc 1 995 4 is_stmt 1 view .LVU1630
 995:Core/Src/ff.c **** 				fs->free_clust++;
 4855              		.loc 1 995 10 is_stmt 0 view .LVU1631
 4856 0040 2369     		ldr	r3, [r4, #16]
 995:Core/Src/ff.c **** 				fs->free_clust++;
 4857              		.loc 1 995 7 view .LVU1632
 4858 0042 B3F1FF3F 		cmp	r3, #-1
 4859 0046 E5D0     		beq	.L385
 996:Core/Src/ff.c **** 				fs->fsi_flag |= 1;
 4860              		.loc 1 996 5 is_stmt 1 view .LVU1633
 996:Core/Src/ff.c **** 				fs->fsi_flag |= 1;
 4861              		.loc 1 996 19 is_stmt 0 view .LVU1634
 4862 0048 0133     		adds	r3, r3, #1
 4863 004a 2361     		str	r3, [r4, #16]
 997:Core/Src/ff.c **** 			}
 4864              		.loc 1 997 5 is_stmt 1 view .LVU1635
 997:Core/Src/ff.c **** 			}
 4865              		.loc 1 997 18 is_stmt 0 view .LVU1636
 4866 004c 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 4867 004e 43F00103 		orr	r3, r3, #1
 4868 0052 6371     		strb	r3, [r4, #5]
 4869 0054 DEE7     		b	.L385
 4870              	.LVL567:
 4871              	.L387:
 984:Core/Src/ff.c **** 
 4872              		.loc 1 984 7 view .LVU1637
 4873 0056 0227     		movs	r7, #2
 4874              	.LVL568:
 4875              	.L383:
1013:Core/Src/ff.c **** }
 4876              		.loc 1 1013 2 is_stmt 1 view .LVU1638
1014:Core/Src/ff.c **** #endif
 4877              		.loc 1 1014 1 is_stmt 0 view .LVU1639
 4878 0058 3846     		mov	r0, r7
 4879 005a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4880              	.LVL569:
 4881              	.L388:
 984:Core/Src/ff.c **** 
 4882              		.loc 1 984 7 view .LVU1640
 4883 005c 0227     		movs	r7, #2
 4884 005e FBE7     		b	.L383
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 151


 4885              	.LVL570:
 4886              	.L389:
 991:Core/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 4887              		.loc 1 991 24 view .LVU1641
 4888 0060 0227     		movs	r7, #2
 4889              	.LVL571:
 991:Core/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 4890              		.loc 1 991 24 view .LVU1642
 4891 0062 F9E7     		b	.L383
 4892              	.LVL572:
 4893              	.L390:
 992:Core/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 4894              		.loc 1 992 33 view .LVU1643
 4895 0064 0127     		movs	r7, #1
 4896              	.LVL573:
 992:Core/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 4897              		.loc 1 992 33 view .LVU1644
 4898 0066 F7E7     		b	.L383
 4899              		.cfi_endproc
 4900              	.LFE10:
 4902              		.section	.text.dir_sdi,"ax",%progbits
 4903              		.align	1
 4904              		.global	dir_sdi
 4905              		.syntax unified
 4906              		.thumb
 4907              		.thumb_func
 4908              		.fpu fpv4-sp-d16
 4910              	dir_sdi:
 4911              	.LVL574:
 4912              	.LFB13:
1119:Core/Src/ff.c **** 	DWORD clst, sect;
 4913              		.loc 1 1119 1 is_stmt 1 view -0
 4914              		.cfi_startproc
 4915              		@ args = 0, pretend = 0, frame = 0
 4916              		@ frame_needed = 0, uses_anonymous_args = 0
1119:Core/Src/ff.c **** 	DWORD clst, sect;
 4917              		.loc 1 1119 1 is_stmt 0 view .LVU1646
 4918 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4919              	.LCFI34:
 4920              		.cfi_def_cfa_offset 24
 4921              		.cfi_offset 3, -24
 4922              		.cfi_offset 4, -20
 4923              		.cfi_offset 5, -16
 4924              		.cfi_offset 6, -12
 4925              		.cfi_offset 7, -8
 4926              		.cfi_offset 14, -4
 4927 0002 0746     		mov	r7, r0
1120:Core/Src/ff.c **** 	UINT ic;
 4928              		.loc 1 1120 2 is_stmt 1 view .LVU1647
1121:Core/Src/ff.c **** 
 4929              		.loc 1 1121 2 view .LVU1648
1124:Core/Src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
 4930              		.loc 1 1124 2 view .LVU1649
1124:Core/Src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
 4931              		.loc 1 1124 12 is_stmt 0 view .LVU1650
 4932 0004 C180     		strh	r1, [r0, #6]	@ movhi
1125:Core/Src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 152


 4933              		.loc 1 1125 2 is_stmt 1 view .LVU1651
1125:Core/Src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
 4934              		.loc 1 1125 7 is_stmt 0 view .LVU1652
 4935 0006 8468     		ldr	r4, [r0, #8]
 4936              	.LVL575:
1126:Core/Src/ff.c **** 		return FR_INT_ERR;
 4937              		.loc 1 1126 2 is_stmt 1 view .LVU1653
1126:Core/Src/ff.c **** 		return FR_INT_ERR;
 4938              		.loc 1 1126 5 is_stmt 0 view .LVU1654
 4939 0008 012C     		cmp	r4, #1
 4940 000a 36D0     		beq	.L399
 4941 000c 0E46     		mov	r6, r1
1126:Core/Src/ff.c **** 		return FR_INT_ERR;
 4942              		.loc 1 1126 29 discriminator 1 view .LVU1655
 4943 000e 0368     		ldr	r3, [r0]
1126:Core/Src/ff.c **** 		return FR_INT_ERR;
 4944              		.loc 1 1126 33 discriminator 1 view .LVU1656
 4945 0010 5A69     		ldr	r2, [r3, #20]
1126:Core/Src/ff.c **** 		return FR_INT_ERR;
 4946              		.loc 1 1126 16 discriminator 1 view .LVU1657
 4947 0012 A242     		cmp	r2, r4
 4948 0014 33D9     		bls	.L400
1128:Core/Src/ff.c **** 		clst = dp->fs->dirbase;
 4949              		.loc 1 1128 2 is_stmt 1 view .LVU1658
1128:Core/Src/ff.c **** 		clst = dp->fs->dirbase;
 4950              		.loc 1 1128 5 is_stmt 0 view .LVU1659
 4951 0016 14B9     		cbnz	r4, .L394
1128:Core/Src/ff.c **** 		clst = dp->fs->dirbase;
 4952              		.loc 1 1128 21 discriminator 1 view .LVU1660
 4953 0018 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
1128:Core/Src/ff.c **** 		clst = dp->fs->dirbase;
 4954              		.loc 1 1128 12 discriminator 1 view .LVU1661
 4955 001a 032A     		cmp	r2, #3
 4956 001c 12D0     		beq	.L407
 4957              	.L394:
1131:Core/Src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
 4958              		.loc 1 1131 2 is_stmt 1 view .LVU1662
1131:Core/Src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
 4959              		.loc 1 1131 5 is_stmt 0 view .LVU1663
 4960 001e 9CB9     		cbnz	r4, .L395
1132:Core/Src/ff.c **** 			return FR_INT_ERR;
 4961              		.loc 1 1132 3 is_stmt 1 view .LVU1664
1132:Core/Src/ff.c **** 			return FR_INT_ERR;
 4962              		.loc 1 1132 20 is_stmt 0 view .LVU1665
 4963 0020 1A89     		ldrh	r2, [r3, #8]
1132:Core/Src/ff.c **** 			return FR_INT_ERR;
 4964              		.loc 1 1132 6 view .LVU1666
 4965 0022 B242     		cmp	r2, r6
 4966 0024 2DD9     		bls	.L401
1134:Core/Src/ff.c **** 	}
 4967              		.loc 1 1134 3 is_stmt 1 view .LVU1667
1134:Core/Src/ff.c **** 	}
 4968              		.loc 1 1134 8 is_stmt 0 view .LVU1668
 4969 0026 586A     		ldr	r0, [r3, #36]
 4970              	.LVL576:
 4971              	.L396:
1147:Core/Src/ff.c **** 	if (!sect) return FR_INT_ERR;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 153


 4972              		.loc 1 1147 2 is_stmt 1 view .LVU1669
1147:Core/Src/ff.c **** 	if (!sect) return FR_INT_ERR;
 4973              		.loc 1 1147 12 is_stmt 0 view .LVU1670
 4974 0028 FC60     		str	r4, [r7, #12]
1148:Core/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIR);					/* Sector# of the directory entry */
 4975              		.loc 1 1148 2 is_stmt 1 view .LVU1671
1148:Core/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIR);					/* Sector# of the directory entry */
 4976              		.loc 1 1148 5 is_stmt 0 view .LVU1672
 4977 002a 90B3     		cbz	r0, .L405
1149:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (idx % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 4978              		.loc 1 1149 2 is_stmt 1 view .LVU1673
1149:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (idx % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 4979              		.loc 1 1149 18 is_stmt 0 view .LVU1674
 4980 002c 00EB1610 		add	r0, r0, r6, lsr #4
 4981              	.LVL577:
1149:Core/Src/ff.c **** 	dp->dir = dp->fs->win + (idx % (SS(dp->fs) / SZ_DIR)) * SZ_DIR;	/* Ptr to the entry in the sector 
 4982              		.loc 1 1149 11 view .LVU1675
 4983 0030 3861     		str	r0, [r7, #16]
1150:Core/Src/ff.c **** 
 4984              		.loc 1 1150 2 is_stmt 1 view .LVU1676
1150:Core/Src/ff.c **** 
 4985              		.loc 1 1150 14 is_stmt 0 view .LVU1677
 4986 0032 3B68     		ldr	r3, [r7]
1150:Core/Src/ff.c **** 
 4987              		.loc 1 1150 12 view .LVU1678
 4988 0034 3033     		adds	r3, r3, #48
1150:Core/Src/ff.c **** 
 4989              		.loc 1 1150 31 view .LVU1679
 4990 0036 06F00F01 		and	r1, r6, #15
1150:Core/Src/ff.c **** 
 4991              		.loc 1 1150 24 view .LVU1680
 4992 003a 03EB4111 		add	r1, r3, r1, lsl #5
1150:Core/Src/ff.c **** 
 4993              		.loc 1 1150 10 view .LVU1681
 4994 003e 7961     		str	r1, [r7, #20]
1152:Core/Src/ff.c **** }
 4995              		.loc 1 1152 2 is_stmt 1 view .LVU1682
1152:Core/Src/ff.c **** }
 4996              		.loc 1 1152 9 is_stmt 0 view .LVU1683
 4997 0040 0020     		movs	r0, #0
 4998              	.LVL578:
 4999              	.L393:
1153:Core/Src/ff.c **** 
 5000              		.loc 1 1153 1 view .LVU1684
 5001 0042 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5002              	.LVL579:
 5003              	.L407:
1129:Core/Src/ff.c **** 
 5004              		.loc 1 1129 3 is_stmt 1 view .LVU1685
1129:Core/Src/ff.c **** 
 5005              		.loc 1 1129 8 is_stmt 0 view .LVU1686
 5006 0044 5C6A     		ldr	r4, [r3, #36]
 5007              	.LVL580:
1129:Core/Src/ff.c **** 
 5008              		.loc 1 1129 8 view .LVU1687
 5009 0046 EAE7     		b	.L394
 5010              	.L395:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 154


1137:Core/Src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 5011              		.loc 1 1137 3 is_stmt 1 view .LVU1688
1137:Core/Src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 5012              		.loc 1 1137 36 is_stmt 0 view .LVU1689
 5013 0048 9D78     		ldrb	r5, [r3, #2]	@ zero_extendqisi2
1137:Core/Src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 5014              		.loc 1 1137 6 view .LVU1690
 5015 004a 2D01     		lsls	r5, r5, #4
 5016              	.LVL581:
1138:Core/Src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
 5017              		.loc 1 1138 3 is_stmt 1 view .LVU1691
 5018              	.L397:
1138:Core/Src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
 5019              		.loc 1 1138 9 view .LVU1692
 5020 004c AE42     		cmp	r6, r5
 5021 004e 0FD3     		bcc	.L408
1139:Core/Src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 5022              		.loc 1 1139 4 view .LVU1693
1139:Core/Src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 5023              		.loc 1 1139 11 is_stmt 0 view .LVU1694
 5024 0050 2146     		mov	r1, r4
 5025 0052 3868     		ldr	r0, [r7]
 5026 0054 FFF7FEFF 		bl	get_fat
 5027              	.LVL582:
 5028 0058 0446     		mov	r4, r0
 5029              	.LVL583:
1140:Core/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 5030              		.loc 1 1140 4 is_stmt 1 view .LVU1695
1140:Core/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 5031              		.loc 1 1140 7 is_stmt 0 view .LVU1696
 5032 005a B0F1FF3F 		cmp	r0, #-1
 5033 005e 12D0     		beq	.L402
1141:Core/Src/ff.c **** 				return FR_INT_ERR;
 5034              		.loc 1 1141 4 is_stmt 1 view .LVU1697
1141:Core/Src/ff.c **** 				return FR_INT_ERR;
 5035              		.loc 1 1141 7 is_stmt 0 view .LVU1698
 5036 0060 0128     		cmp	r0, #1
 5037 0062 12D9     		bls	.L403
1141:Core/Src/ff.c **** 				return FR_INT_ERR;
 5038              		.loc 1 1141 30 discriminator 1 view .LVU1699
 5039 0064 3B68     		ldr	r3, [r7]
1141:Core/Src/ff.c **** 				return FR_INT_ERR;
 5040              		.loc 1 1141 34 discriminator 1 view .LVU1700
 5041 0066 5B69     		ldr	r3, [r3, #20]
1141:Core/Src/ff.c **** 				return FR_INT_ERR;
 5042              		.loc 1 1141 17 discriminator 1 view .LVU1701
 5043 0068 8342     		cmp	r3, r0
 5044 006a 10D9     		bls	.L404
1143:Core/Src/ff.c **** 		}
 5045              		.loc 1 1143 4 is_stmt 1 view .LVU1702
1143:Core/Src/ff.c **** 		}
 5046              		.loc 1 1143 8 is_stmt 0 view .LVU1703
 5047 006c 761B     		subs	r6, r6, r5
 5048              	.LVL584:
1143:Core/Src/ff.c **** 		}
 5049              		.loc 1 1143 8 view .LVU1704
 5050 006e EDE7     		b	.L397
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 155


 5051              	.LVL585:
 5052              	.L408:
1145:Core/Src/ff.c **** 	}
 5053              		.loc 1 1145 3 is_stmt 1 view .LVU1705
1145:Core/Src/ff.c **** 	}
 5054              		.loc 1 1145 10 is_stmt 0 view .LVU1706
 5055 0070 2146     		mov	r1, r4
 5056 0072 3868     		ldr	r0, [r7]
 5057 0074 FFF7FEFF 		bl	clust2sect
 5058              	.LVL586:
1145:Core/Src/ff.c **** 	}
 5059              		.loc 1 1145 10 view .LVU1707
 5060 0078 D6E7     		b	.L396
 5061              	.LVL587:
 5062              	.L399:
1127:Core/Src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 5063              		.loc 1 1127 10 view .LVU1708
 5064 007a 0220     		movs	r0, #2
 5065              	.LVL588:
1127:Core/Src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 5066              		.loc 1 1127 10 view .LVU1709
 5067 007c E1E7     		b	.L393
 5068              	.LVL589:
 5069              	.L400:
1127:Core/Src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 5070              		.loc 1 1127 10 view .LVU1710
 5071 007e 0220     		movs	r0, #2
 5072              	.LVL590:
1127:Core/Src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 5073              		.loc 1 1127 10 view .LVU1711
 5074 0080 DFE7     		b	.L393
 5075              	.LVL591:
 5076              	.L401:
1133:Core/Src/ff.c **** 		sect = dp->fs->dirbase;
 5077              		.loc 1 1133 11 view .LVU1712
 5078 0082 0220     		movs	r0, #2
 5079              	.LVL592:
1133:Core/Src/ff.c **** 		sect = dp->fs->dirbase;
 5080              		.loc 1 1133 11 view .LVU1713
 5081 0084 DDE7     		b	.L393
 5082              	.LVL593:
 5083              	.L402:
1140:Core/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 5084              		.loc 1 1140 35 view .LVU1714
 5085 0086 0120     		movs	r0, #1
 5086              	.LVL594:
1140:Core/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 5087              		.loc 1 1140 35 view .LVU1715
 5088 0088 DBE7     		b	.L393
 5089              	.LVL595:
 5090              	.L403:
1142:Core/Src/ff.c **** 			idx -= ic;
 5091              		.loc 1 1142 12 view .LVU1716
 5092 008a 0220     		movs	r0, #2
 5093              	.LVL596:
1142:Core/Src/ff.c **** 			idx -= ic;
 5094              		.loc 1 1142 12 view .LVU1717
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 156


 5095 008c D9E7     		b	.L393
 5096              	.LVL597:
 5097              	.L404:
1142:Core/Src/ff.c **** 			idx -= ic;
 5098              		.loc 1 1142 12 view .LVU1718
 5099 008e 0220     		movs	r0, #2
 5100              	.LVL598:
1142:Core/Src/ff.c **** 			idx -= ic;
 5101              		.loc 1 1142 12 view .LVU1719
 5102 0090 D7E7     		b	.L393
 5103              	.LVL599:
 5104              	.L405:
1148:Core/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIR);					/* Sector# of the directory entry */
 5105              		.loc 1 1148 20 view .LVU1720
 5106 0092 0220     		movs	r0, #2
 5107              	.LVL600:
1148:Core/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIR);					/* Sector# of the directory entry */
 5108              		.loc 1 1148 20 view .LVU1721
 5109 0094 D5E7     		b	.L393
 5110              		.cfi_endproc
 5111              	.LFE13:
 5113              		.section	.text.dir_find,"ax",%progbits
 5114              		.align	1
 5115              		.syntax unified
 5116              		.thumb
 5117              		.thumb_func
 5118              		.fpu fpv4-sp-d16
 5120              	dir_find:
 5121              	.LVL601:
 5122              	.LFB23:
1491:Core/Src/ff.c **** 	FRESULT res;
 5123              		.loc 1 1491 1 is_stmt 1 view -0
 5124              		.cfi_startproc
 5125              		@ args = 0, pretend = 0, frame = 0
 5126              		@ frame_needed = 0, uses_anonymous_args = 0
1491:Core/Src/ff.c **** 	FRESULT res;
 5127              		.loc 1 1491 1 is_stmt 0 view .LVU1723
 5128 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 5129              	.LCFI35:
 5130              		.cfi_def_cfa_offset 24
 5131              		.cfi_offset 4, -24
 5132              		.cfi_offset 5, -20
 5133              		.cfi_offset 6, -16
 5134              		.cfi_offset 7, -12
 5135              		.cfi_offset 8, -8
 5136              		.cfi_offset 14, -4
 5137 0004 0446     		mov	r4, r0
1492:Core/Src/ff.c **** 	BYTE c, *dir;
 5138              		.loc 1 1492 2 is_stmt 1 view .LVU1724
1493:Core/Src/ff.c **** #if _USE_LFN
 5139              		.loc 1 1493 2 view .LVU1725
1495:Core/Src/ff.c **** #endif
 5140              		.loc 1 1495 2 view .LVU1726
1498:Core/Src/ff.c **** 	if (res != FR_OK) return res;
 5141              		.loc 1 1498 2 view .LVU1727
1498:Core/Src/ff.c **** 	if (res != FR_OK) return res;
 5142              		.loc 1 1498 8 is_stmt 0 view .LVU1728
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 157


 5143 0006 0021     		movs	r1, #0
 5144 0008 FFF7FEFF 		bl	dir_sdi
 5145              	.LVL602:
1499:Core/Src/ff.c **** 
 5146              		.loc 1 1499 2 is_stmt 1 view .LVU1729
1499:Core/Src/ff.c **** 
 5147              		.loc 1 1499 5 is_stmt 0 view .LVU1730
 5148 000c 0646     		mov	r6, r0
 5149 000e 0028     		cmp	r0, #0
 5150 0010 58D1     		bne	.L410
1502:Core/Src/ff.c **** #endif
 5151              		.loc 1 1502 12 view .LVU1731
 5152 0012 4FF0FF08 		mov	r8, #255
1502:Core/Src/ff.c **** #endif
 5153              		.loc 1 1502 6 view .LVU1732
 5154 0016 4746     		mov	r7, r8
 5155 0018 3AE0     		b	.L416
 5156              	.LVL603:
 5157              	.L412:
1515:Core/Src/ff.c **** 				if (dp->lfn) {
 5158              		.loc 1 1515 4 is_stmt 1 view .LVU1733
1515:Core/Src/ff.c **** 				if (dp->lfn) {
 5159              		.loc 1 1515 7 is_stmt 0 view .LVU1734
 5160 001a 0F29     		cmp	r1, #15
 5161 001c 15D0     		beq	.L425
1526:Core/Src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 5162              		.loc 1 1526 5 is_stmt 1 view .LVU1735
1526:Core/Src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 5163              		.loc 1 1526 8 is_stmt 0 view .LVU1736
 5164 001e 27B9     		cbnz	r7, .L415
1526:Core/Src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 5165              		.loc 1 1526 24 discriminator 1 view .LVU1737
 5166 0020 2846     		mov	r0, r5
 5167              	.LVL604:
1526:Core/Src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 5168              		.loc 1 1526 24 discriminator 1 view .LVU1738
 5169 0022 FFF7FEFF 		bl	sum_sfn
 5170              	.LVL605:
1526:Core/Src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
 5171              		.loc 1 1526 14 discriminator 1 view .LVU1739
 5172 0026 4045     		cmp	r0, r8
 5173 0028 4CD0     		beq	.L410
 5174              	.L415:
1527:Core/Src/ff.c **** 				if (!(dp->fn[NS] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
 5175              		.loc 1 1527 5 is_stmt 1 view .LVU1740
 5176              	.LVL606:
1527:Core/Src/ff.c **** 				if (!(dp->fn[NS] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
 5177              		.loc 1 1527 17 view .LVU1741
1527:Core/Src/ff.c **** 				if (!(dp->fn[NS] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
 5178              		.loc 1 1527 29 is_stmt 0 view .LVU1742
 5179 002a 4FF6FF73 		movw	r3, #65535
 5180 002e 2384     		strh	r3, [r4, #32]	@ movhi
1528:Core/Src/ff.c **** 			}
 5181              		.loc 1 1528 5 is_stmt 1 view .LVU1743
1528:Core/Src/ff.c **** 			}
 5182              		.loc 1 1528 13 is_stmt 0 view .LVU1744
 5183 0030 A169     		ldr	r1, [r4, #24]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 158


1528:Core/Src/ff.c **** 			}
 5184              		.loc 1 1528 17 view .LVU1745
 5185 0032 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
1528:Core/Src/ff.c **** 			}
 5186              		.loc 1 1528 8 view .LVU1746
 5187 0034 13F0010F 		tst	r3, #1
 5188 0038 41D1     		bne	.L423
1528:Core/Src/ff.c **** 			}
 5189              		.loc 1 1528 37 discriminator 1 view .LVU1747
 5190 003a 0B22     		movs	r2, #11
 5191 003c 2846     		mov	r0, r5
 5192 003e FFF7FEFF 		bl	mem_cmp
 5193              	.LVL607:
1528:Core/Src/ff.c **** 			}
 5194              		.loc 1 1528 33 discriminator 1 view .LVU1748
 5195 0042 0028     		cmp	r0, #0
 5196 0044 3ED0     		beq	.L410
1527:Core/Src/ff.c **** 				if (!(dp->fn[NS] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
 5197              		.loc 1 1527 9 view .LVU1749
 5198 0046 FF27     		movs	r7, #255
 5199 0048 1CE0     		b	.L411
 5200              	.LVL608:
 5201              	.L425:
1516:Core/Src/ff.c **** 					if (c & LLE) {		/* Is it start of LFN sequence? */
 5202              		.loc 1 1516 5 is_stmt 1 view .LVU1750
1516:Core/Src/ff.c **** 					if (c & LLE) {		/* Is it start of LFN sequence? */
 5203              		.loc 1 1516 11 is_stmt 0 view .LVU1751
 5204 004a E069     		ldr	r0, [r4, #28]
 5205              	.LVL609:
1516:Core/Src/ff.c **** 					if (c & LLE) {		/* Is it start of LFN sequence? */
 5206              		.loc 1 1516 8 view .LVU1752
 5207 004c D0B1     		cbz	r0, .L411
1517:Core/Src/ff.c **** 						sum = dir[LDIR_Chksum];
 5208              		.loc 1 1517 6 is_stmt 1 view .LVU1753
1517:Core/Src/ff.c **** 						sum = dir[LDIR_Chksum];
 5209              		.loc 1 1517 9 is_stmt 0 view .LVU1754
 5210 004e 13F0400F 		tst	r3, #64
 5211 0052 06D0     		beq	.L414
1518:Core/Src/ff.c **** 						c &= ~LLE; ord = c;	/* LFN start order */
 5212              		.loc 1 1518 7 is_stmt 1 view .LVU1755
1518:Core/Src/ff.c **** 						c &= ~LLE; ord = c;	/* LFN start order */
 5213              		.loc 1 1518 11 is_stmt 0 view .LVU1756
 5214 0054 95F80D80 		ldrb	r8, [r5, #13]	@ zero_extendqisi2
 5215              	.LVL610:
1519:Core/Src/ff.c **** 						dp->lfn_idx = dp->index;
 5216              		.loc 1 1519 7 is_stmt 1 view .LVU1757
1519:Core/Src/ff.c **** 						dp->lfn_idx = dp->index;
 5217              		.loc 1 1519 9 is_stmt 0 view .LVU1758
 5218 0058 03F0BF03 		and	r3, r3, #191
 5219              	.LVL611:
1519:Core/Src/ff.c **** 						dp->lfn_idx = dp->index;
 5220              		.loc 1 1519 18 is_stmt 1 view .LVU1759
1520:Core/Src/ff.c **** 					}
 5221              		.loc 1 1520 7 view .LVU1760
1520:Core/Src/ff.c **** 					}
 5222              		.loc 1 1520 23 is_stmt 0 view .LVU1761
 5223 005c E288     		ldrh	r2, [r4, #6]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 159


1520:Core/Src/ff.c **** 					}
 5224              		.loc 1 1520 19 view .LVU1762
 5225 005e 2284     		strh	r2, [r4, #32]	@ movhi
1519:Core/Src/ff.c **** 						dp->lfn_idx = dp->index;
 5226              		.loc 1 1519 22 view .LVU1763
 5227 0060 1F46     		mov	r7, r3
 5228              	.LVL612:
 5229              	.L414:
1523:Core/Src/ff.c **** 				}
 5230              		.loc 1 1523 6 is_stmt 1 view .LVU1764
1523:Core/Src/ff.c **** 				}
 5231              		.loc 1 1523 10 is_stmt 0 view .LVU1765
 5232 0062 BB42     		cmp	r3, r7
 5233 0064 01D0     		beq	.L426
1523:Core/Src/ff.c **** 				}
 5234              		.loc 1 1523 10 view .LVU1766
 5235 0066 FF27     		movs	r7, #255
 5236              	.LVL613:
1523:Core/Src/ff.c **** 				}
 5237              		.loc 1 1523 10 view .LVU1767
 5238 0068 0CE0     		b	.L411
 5239              	.LVL614:
 5240              	.L426:
1523:Core/Src/ff.c **** 				}
 5241              		.loc 1 1523 35 discriminator 1 view .LVU1768
 5242 006a 6B7B     		ldrb	r3, [r5, #13]	@ zero_extendqisi2
 5243              	.LVL615:
1523:Core/Src/ff.c **** 				}
 5244              		.loc 1 1523 22 discriminator 1 view .LVU1769
 5245 006c 4345     		cmp	r3, r8
 5246 006e 01D0     		beq	.L427
1523:Core/Src/ff.c **** 				}
 5247              		.loc 1 1523 10 view .LVU1770
 5248 0070 FF27     		movs	r7, #255
 5249              	.LVL616:
1523:Core/Src/ff.c **** 				}
 5250              		.loc 1 1523 10 view .LVU1771
 5251 0072 07E0     		b	.L411
 5252              	.LVL617:
 5253              	.L427:
1523:Core/Src/ff.c **** 				}
 5254              		.loc 1 1523 52 discriminator 3 view .LVU1772
 5255 0074 2946     		mov	r1, r5
 5256              	.LVL618:
1523:Core/Src/ff.c **** 				}
 5257              		.loc 1 1523 52 discriminator 3 view .LVU1773
 5258 0076 FFF7FEFF 		bl	cmp_lfn
 5259              	.LVL619:
1523:Core/Src/ff.c **** 				}
 5260              		.loc 1 1523 49 discriminator 3 view .LVU1774
 5261 007a F0B1     		cbz	r0, .L422
1523:Core/Src/ff.c **** 				}
 5262              		.loc 1 1523 10 discriminator 5 view .LVU1775
 5263 007c 013F     		subs	r7, r7, #1
 5264              	.LVL620:
1523:Core/Src/ff.c **** 				}
 5265              		.loc 1 1523 10 discriminator 5 view .LVU1776
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 160


 5266 007e FFB2     		uxtb	r7, r7
 5267 0080 00E0     		b	.L411
 5268              	.LVL621:
 5269              	.L418:
1513:Core/Src/ff.c **** 		} else {
 5270              		.loc 1 1513 8 view .LVU1777
 5271 0082 FF27     		movs	r7, #255
 5272              	.LVL622:
 5273              	.L411:
1535:Core/Src/ff.c **** 	} while (res == FR_OK);
 5274              		.loc 1 1535 3 is_stmt 1 view .LVU1778
1535:Core/Src/ff.c **** 	} while (res == FR_OK);
 5275              		.loc 1 1535 9 is_stmt 0 view .LVU1779
 5276 0084 0021     		movs	r1, #0
 5277 0086 2046     		mov	r0, r4
 5278 0088 FFF7FEFF 		bl	dir_next
 5279              	.LVL623:
1536:Core/Src/ff.c **** 
 5280              		.loc 1 1536 10 is_stmt 1 view .LVU1780
1536:Core/Src/ff.c **** 
 5281              		.loc 1 1536 2 is_stmt 0 view .LVU1781
 5282 008c 0646     		mov	r6, r0
 5283 008e C8B9     		cbnz	r0, .L410
 5284              	.LVL624:
 5285              	.L416:
1504:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 5286              		.loc 1 1504 2 is_stmt 1 view .LVU1782
1505:Core/Src/ff.c **** 		if (res != FR_OK) break;
 5287              		.loc 1 1505 3 view .LVU1783
1505:Core/Src/ff.c **** 		if (res != FR_OK) break;
 5288              		.loc 1 1505 9 is_stmt 0 view .LVU1784
 5289 0090 2169     		ldr	r1, [r4, #16]
 5290 0092 2068     		ldr	r0, [r4]
 5291              	.LVL625:
1505:Core/Src/ff.c **** 		if (res != FR_OK) break;
 5292              		.loc 1 1505 9 view .LVU1785
 5293 0094 FFF7FEFF 		bl	move_window
 5294              	.LVL626:
1506:Core/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 5295              		.loc 1 1506 3 is_stmt 1 view .LVU1786
1506:Core/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 5296              		.loc 1 1506 6 is_stmt 0 view .LVU1787
 5297 0098 0646     		mov	r6, r0
 5298 009a 98B9     		cbnz	r0, .L410
1507:Core/Src/ff.c **** 		c = dir[DIR_Name];
 5299              		.loc 1 1507 3 is_stmt 1 view .LVU1788
1507:Core/Src/ff.c **** 		c = dir[DIR_Name];
 5300              		.loc 1 1507 7 is_stmt 0 view .LVU1789
 5301 009c 6569     		ldr	r5, [r4, #20]
 5302              	.LVL627:
1508:Core/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5303              		.loc 1 1508 3 is_stmt 1 view .LVU1790
1508:Core/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 5304              		.loc 1 1508 5 is_stmt 0 view .LVU1791
 5305 009e 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 5306              	.LVL628:
1509:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 161


 5307              		.loc 1 1509 3 is_stmt 1 view .LVU1792
1509:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 5308              		.loc 1 1509 6 is_stmt 0 view .LVU1793
 5309 00a0 7BB1     		cbz	r3, .L417
1511:Core/Src/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5310              		.loc 1 1511 3 is_stmt 1 view .LVU1794
1511:Core/Src/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5311              		.loc 1 1511 10 is_stmt 0 view .LVU1795
 5312 00a2 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
1511:Core/Src/ff.c **** 		if (c == DDE || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
 5313              		.loc 1 1511 5 view .LVU1796
 5314 00a4 02F03F01 		and	r1, r2, #63
 5315              	.LVL629:
1512:Core/Src/ff.c **** 			ord = 0xFF;
 5316              		.loc 1 1512 3 is_stmt 1 view .LVU1797
1512:Core/Src/ff.c **** 			ord = 0xFF;
 5317              		.loc 1 1512 6 is_stmt 0 view .LVU1798
 5318 00a8 E52B     		cmp	r3, #229
 5319 00aa EAD0     		beq	.L418
1512:Core/Src/ff.c **** 			ord = 0xFF;
 5320              		.loc 1 1512 16 discriminator 1 view .LVU1799
 5321 00ac 12F0080F 		tst	r2, #8
 5322 00b0 B3D0     		beq	.L412
1512:Core/Src/ff.c **** 			ord = 0xFF;
 5323              		.loc 1 1512 33 discriminator 2 view .LVU1800
 5324 00b2 0F29     		cmp	r1, #15
 5325 00b4 B1D0     		beq	.L412
1513:Core/Src/ff.c **** 		} else {
 5326              		.loc 1 1513 8 view .LVU1801
 5327 00b6 FF27     		movs	r7, #255
 5328              	.LVL630:
1513:Core/Src/ff.c **** 		} else {
 5329              		.loc 1 1513 8 view .LVU1802
 5330 00b8 E4E7     		b	.L411
 5331              	.LVL631:
 5332              	.L422:
1523:Core/Src/ff.c **** 				}
 5333              		.loc 1 1523 10 view .LVU1803
 5334 00ba FF27     		movs	r7, #255
 5335              	.LVL632:
1523:Core/Src/ff.c **** 				}
 5336              		.loc 1 1523 10 view .LVU1804
 5337 00bc E2E7     		b	.L411
 5338              	.LVL633:
 5339              	.L423:
1527:Core/Src/ff.c **** 				if (!(dp->fn[NS] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
 5340              		.loc 1 1527 9 view .LVU1805
 5341 00be FF27     		movs	r7, #255
 5342 00c0 E0E7     		b	.L411
 5343              	.LVL634:
 5344              	.L417:
1509:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 5345              		.loc 1 1509 21 view .LVU1806
 5346 00c2 0426     		movs	r6, #4
 5347              	.LVL635:
 5348              	.L410:
1539:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 162


 5349              		.loc 1 1539 1 view .LVU1807
 5350 00c4 3046     		mov	r0, r6
 5351 00c6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
1539:Core/Src/ff.c **** 
 5352              		.loc 1 1539 1 view .LVU1808
 5353              		.cfi_endproc
 5354              	.LFE23:
 5356              		.section	.text.follow_path,"ax",%progbits
 5357              		.align	1
 5358              		.syntax unified
 5359              		.thumb
 5360              		.thumb_func
 5361              		.fpu fpv4-sp-d16
 5363              	follow_path:
 5364              	.LVL636:
 5365              	.LFB29:
2017:Core/Src/ff.c **** 	FRESULT res;
 5366              		.loc 1 2017 1 is_stmt 1 view -0
 5367              		.cfi_startproc
 5368              		@ args = 0, pretend = 0, frame = 8
 5369              		@ frame_needed = 0, uses_anonymous_args = 0
2017:Core/Src/ff.c **** 	FRESULT res;
 5370              		.loc 1 2017 1 is_stmt 0 view .LVU1810
 5371 0000 10B5     		push	{r4, lr}
 5372              	.LCFI36:
 5373              		.cfi_def_cfa_offset 8
 5374              		.cfi_offset 4, -8
 5375              		.cfi_offset 14, -4
 5376 0002 82B0     		sub	sp, sp, #8
 5377              	.LCFI37:
 5378              		.cfi_def_cfa_offset 16
 5379 0004 0446     		mov	r4, r0
 5380 0006 0191     		str	r1, [sp, #4]
2018:Core/Src/ff.c **** 	BYTE *dir, ns;
 5381              		.loc 1 2018 2 is_stmt 1 view .LVU1811
2019:Core/Src/ff.c **** 
 5382              		.loc 1 2019 2 view .LVU1812
2029:Core/Src/ff.c **** 		path++;
 5383              		.loc 1 2029 2 view .LVU1813
2029:Core/Src/ff.c **** 		path++;
 5384              		.loc 1 2029 6 is_stmt 0 view .LVU1814
 5385 0008 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
2029:Core/Src/ff.c **** 		path++;
 5386              		.loc 1 2029 5 view .LVU1815
 5387 000a 2F2B     		cmp	r3, #47
 5388 000c 01D0     		beq	.L429
2029:Core/Src/ff.c **** 		path++;
 5389              		.loc 1 2029 19 discriminator 1 view .LVU1816
 5390 000e 5C2B     		cmp	r3, #92
 5391 0010 01D1     		bne	.L430
 5392              	.L429:
2030:Core/Src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
 5393              		.loc 1 2030 3 is_stmt 1 view .LVU1817
2030:Core/Src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
 5394              		.loc 1 2030 7 is_stmt 0 view .LVU1818
 5395 0012 0131     		adds	r1, r1, #1
 5396              	.LVL637:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 163


2030:Core/Src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
 5397              		.loc 1 2030 7 view .LVU1819
 5398 0014 0191     		str	r1, [sp, #4]
 5399              	.LVL638:
 5400              	.L430:
2031:Core/Src/ff.c **** #endif
 5401              		.loc 1 2031 2 is_stmt 1 view .LVU1820
2031:Core/Src/ff.c **** #endif
 5402              		.loc 1 2031 13 is_stmt 0 view .LVU1821
 5403 0016 0023     		movs	r3, #0
 5404 0018 A360     		str	r3, [r4, #8]
2034:Core/Src/ff.c **** 		res = dir_sdi(dp, 0);
 5405              		.loc 1 2034 2 is_stmt 1 view .LVU1822
2034:Core/Src/ff.c **** 		res = dir_sdi(dp, 0);
 5406              		.loc 1 2034 12 is_stmt 0 view .LVU1823
 5407 001a 019B     		ldr	r3, [sp, #4]
 5408 001c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
2034:Core/Src/ff.c **** 		res = dir_sdi(dp, 0);
 5409              		.loc 1 2034 5 view .LVU1824
 5410 001e 1F2B     		cmp	r3, #31
 5411 0020 19D9     		bls	.L437
 5412              	.LVL639:
 5413              	.L431:
2038:Core/Src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 5414              		.loc 1 2038 3 is_stmt 1 view .LVU1825
2039:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5415              		.loc 1 2039 4 view .LVU1826
2039:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5416              		.loc 1 2039 10 is_stmt 0 view .LVU1827
 5417 0022 01A9     		add	r1, sp, #4
 5418 0024 2046     		mov	r0, r4
 5419 0026 FFF7FEFF 		bl	create_name
 5420              	.LVL640:
2040:Core/Src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
 5421              		.loc 1 2040 4 is_stmt 1 view .LVU1828
2040:Core/Src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
 5422              		.loc 1 2040 7 is_stmt 0 view .LVU1829
 5423 002a 0346     		mov	r3, r0
 5424 002c D0B9     		cbnz	r0, .L432
2041:Core/Src/ff.c **** 			ns = dp->fn[NS];
 5425              		.loc 1 2041 4 is_stmt 1 view .LVU1830
2041:Core/Src/ff.c **** 			ns = dp->fn[NS];
 5426              		.loc 1 2041 10 is_stmt 0 view .LVU1831
 5427 002e 2046     		mov	r0, r4
 5428              	.LVL641:
2041:Core/Src/ff.c **** 			ns = dp->fn[NS];
 5429              		.loc 1 2041 10 view .LVU1832
 5430 0030 FFF7FEFF 		bl	dir_find
 5431              	.LVL642:
2042:Core/Src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 5432              		.loc 1 2042 4 is_stmt 1 view .LVU1833
2042:Core/Src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 5433              		.loc 1 2042 11 is_stmt 0 view .LVU1834
 5434 0034 A369     		ldr	r3, [r4, #24]
2042:Core/Src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 5435              		.loc 1 2042 7 view .LVU1835
 5436 0036 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 164


 5437              	.LVL643:
2043:Core/Src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 5438              		.loc 1 2043 4 is_stmt 1 view .LVU1836
2043:Core/Src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 5439              		.loc 1 2043 7 is_stmt 0 view .LVU1837
 5440 0038 0346     		mov	r3, r0
 5441 003a B0B9     		cbnz	r0, .L438
2055:Core/Src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
 5442              		.loc 1 2055 4 is_stmt 1 view .LVU1838
2055:Core/Src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
 5443              		.loc 1 2055 7 is_stmt 0 view .LVU1839
 5444 003c 12F0040F 		tst	r2, #4
 5445 0040 10D1     		bne	.L432
2056:Core/Src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
 5446              		.loc 1 2056 4 is_stmt 1 view .LVU1840
2056:Core/Src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
 5447              		.loc 1 2056 8 is_stmt 0 view .LVU1841
 5448 0042 6169     		ldr	r1, [r4, #20]
 5449              	.LVL644:
2057:Core/Src/ff.c **** 				res = FR_NO_PATH; break;
 5450              		.loc 1 2057 4 is_stmt 1 view .LVU1842
2057:Core/Src/ff.c **** 				res = FR_NO_PATH; break;
 5451              		.loc 1 2057 13 is_stmt 0 view .LVU1843
 5452 0044 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
2057:Core/Src/ff.c **** 				res = FR_NO_PATH; break;
 5453              		.loc 1 2057 7 view .LVU1844
 5454 0046 13F0100F 		tst	r3, #16
 5455 004a 15D0     		beq	.L435
2060:Core/Src/ff.c **** 		}
 5456              		.loc 1 2060 4 is_stmt 1 view .LVU1845
2060:Core/Src/ff.c **** 		}
 5457              		.loc 1 2060 17 is_stmt 0 view .LVU1846
 5458 004c 2068     		ldr	r0, [r4]
 5459              	.LVL645:
2060:Core/Src/ff.c **** 		}
 5460              		.loc 1 2060 17 view .LVU1847
 5461 004e FFF7FEFF 		bl	ld_clust
 5462              	.LVL646:
2060:Core/Src/ff.c **** 		}
 5463              		.loc 1 2060 15 view .LVU1848
 5464 0052 A060     		str	r0, [r4, #8]
2038:Core/Src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 5465              		.loc 1 2038 9 is_stmt 1 view .LVU1849
2039:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5466              		.loc 1 2039 8 is_stmt 0 view .LVU1850
 5467 0054 E5E7     		b	.L431
 5468              	.LVL647:
 5469              	.L437:
2035:Core/Src/ff.c **** 		dp->dir = 0;
 5470              		.loc 1 2035 3 is_stmt 1 view .LVU1851
2035:Core/Src/ff.c **** 		dp->dir = 0;
 5471              		.loc 1 2035 9 is_stmt 0 view .LVU1852
 5472 0056 0021     		movs	r1, #0
 5473 0058 2046     		mov	r0, r4
 5474              	.LVL648:
2035:Core/Src/ff.c **** 		dp->dir = 0;
 5475              		.loc 1 2035 9 view .LVU1853
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 165


 5476 005a FFF7FEFF 		bl	dir_sdi
 5477              	.LVL649:
 5478 005e 0346     		mov	r3, r0
 5479              	.LVL650:
2036:Core/Src/ff.c **** 	} else {								/* Follow path */
 5480              		.loc 1 2036 3 is_stmt 1 view .LVU1854
2036:Core/Src/ff.c **** 	} else {								/* Follow path */
 5481              		.loc 1 2036 11 is_stmt 0 view .LVU1855
 5482 0060 0022     		movs	r2, #0
 5483 0062 6261     		str	r2, [r4, #20]
 5484              	.LVL651:
 5485              	.L432:
2064:Core/Src/ff.c **** }
 5486              		.loc 1 2064 2 is_stmt 1 view .LVU1856
2065:Core/Src/ff.c **** 
 5487              		.loc 1 2065 1 is_stmt 0 view .LVU1857
 5488 0064 1846     		mov	r0, r3
 5489 0066 02B0     		add	sp, sp, #8
 5490              	.LCFI38:
 5491              		.cfi_remember_state
 5492              		.cfi_def_cfa_offset 8
 5493              		@ sp needed
 5494 0068 10BD     		pop	{r4, pc}
 5495              	.LVL652:
 5496              	.L438:
 5497              	.LCFI39:
 5498              		.cfi_restore_state
2044:Core/Src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
 5499              		.loc 1 2044 5 is_stmt 1 view .LVU1858
2044:Core/Src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
 5500              		.loc 1 2044 8 is_stmt 0 view .LVU1859
 5501 006a 0428     		cmp	r0, #4
 5502 006c FAD1     		bne	.L432
2045:Core/Src/ff.c **** 						dp->sclust = 0; dp->dir = 0;	/* it is the root directory and stay there */
 5503              		.loc 1 2045 6 is_stmt 1 view .LVU1860
2050:Core/Src/ff.c **** 					}
 5504              		.loc 1 2050 7 view .LVU1861
2050:Core/Src/ff.c **** 					}
 5505              		.loc 1 2050 10 is_stmt 0 view .LVU1862
 5506 006e 12F0040F 		tst	r2, #4
 5507 0072 F7D1     		bne	.L432
2050:Core/Src/ff.c **** 					}
 5508              		.loc 1 2050 32 view .LVU1863
 5509 0074 0523     		movs	r3, #5
 5510 0076 F5E7     		b	.L432
 5511              	.LVL653:
 5512              	.L435:
2058:Core/Src/ff.c **** 			}
 5513              		.loc 1 2058 9 view .LVU1864
 5514 0078 0523     		movs	r3, #5
 5515 007a F3E7     		b	.L432
 5516              		.cfi_endproc
 5517              	.LFE29:
 5519              		.section	.text.dir_alloc,"ax",%progbits
 5520              		.align	1
 5521              		.syntax unified
 5522              		.thumb
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 166


 5523              		.thumb_func
 5524              		.fpu fpv4-sp-d16
 5526              	dir_alloc:
 5527              	.LVL654:
 5528              	.LFB15:
1236:Core/Src/ff.c **** 	FRESULT res;
 5529              		.loc 1 1236 1 is_stmt 1 view -0
 5530              		.cfi_startproc
 5531              		@ args = 0, pretend = 0, frame = 0
 5532              		@ frame_needed = 0, uses_anonymous_args = 0
1236:Core/Src/ff.c **** 	FRESULT res;
 5533              		.loc 1 1236 1 is_stmt 0 view .LVU1866
 5534 0000 70B5     		push	{r4, r5, r6, lr}
 5535              	.LCFI40:
 5536              		.cfi_def_cfa_offset 16
 5537              		.cfi_offset 4, -16
 5538              		.cfi_offset 5, -12
 5539              		.cfi_offset 6, -8
 5540              		.cfi_offset 14, -4
 5541 0002 0446     		mov	r4, r0
 5542 0004 0E46     		mov	r6, r1
1237:Core/Src/ff.c **** 	UINT n;
 5543              		.loc 1 1237 2 is_stmt 1 view .LVU1867
1238:Core/Src/ff.c **** 
 5544              		.loc 1 1238 2 view .LVU1868
1241:Core/Src/ff.c **** 	if (res == FR_OK) {
 5545              		.loc 1 1241 2 view .LVU1869
1241:Core/Src/ff.c **** 	if (res == FR_OK) {
 5546              		.loc 1 1241 8 is_stmt 0 view .LVU1870
 5547 0006 0021     		movs	r1, #0
 5548              	.LVL655:
1241:Core/Src/ff.c **** 	if (res == FR_OK) {
 5549              		.loc 1 1241 8 view .LVU1871
 5550 0008 FFF7FEFF 		bl	dir_sdi
 5551              	.LVL656:
1242:Core/Src/ff.c **** 		n = 0;
 5552              		.loc 1 1242 2 is_stmt 1 view .LVU1872
1242:Core/Src/ff.c **** 		n = 0;
 5553              		.loc 1 1242 5 is_stmt 0 view .LVU1873
 5554 000c 0246     		mov	r2, r0
 5555 000e C0B9     		cbnz	r0, .L440
1243:Core/Src/ff.c **** 		do {
 5556              		.loc 1 1243 5 view .LVU1874
 5557 0010 0025     		movs	r5, #0
 5558 0012 08E0     		b	.L443
 5559              	.LVL657:
 5560              	.L441:
1248:Core/Src/ff.c **** 			} else {
 5561              		.loc 1 1248 5 is_stmt 1 view .LVU1875
1248:Core/Src/ff.c **** 			} else {
 5562              		.loc 1 1248 8 is_stmt 0 view .LVU1876
 5563 0014 0135     		adds	r5, r5, #1
 5564              	.LVL658:
1248:Core/Src/ff.c **** 			} else {
 5565              		.loc 1 1248 8 view .LVU1877
 5566 0016 B542     		cmp	r5, r6
 5567 0018 13D0     		beq	.L440
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 167


 5568              	.LVL659:
 5569              	.L442:
1252:Core/Src/ff.c **** 		} while (res == FR_OK);
 5570              		.loc 1 1252 4 is_stmt 1 view .LVU1878
1252:Core/Src/ff.c **** 		} while (res == FR_OK);
 5571              		.loc 1 1252 10 is_stmt 0 view .LVU1879
 5572 001a 0121     		movs	r1, #1
 5573 001c 2046     		mov	r0, r4
 5574              	.LVL660:
1252:Core/Src/ff.c **** 		} while (res == FR_OK);
 5575              		.loc 1 1252 10 view .LVU1880
 5576 001e FFF7FEFF 		bl	dir_next
 5577              	.LVL661:
1253:Core/Src/ff.c **** 	}
 5578              		.loc 1 1253 11 is_stmt 1 view .LVU1881
1253:Core/Src/ff.c **** 	}
 5579              		.loc 1 1253 3 is_stmt 0 view .LVU1882
 5580 0022 0246     		mov	r2, r0
 5581 0024 68B9     		cbnz	r0, .L440
 5582              	.LVL662:
 5583              	.L443:
1244:Core/Src/ff.c **** 			res = move_window(dp->fs, dp->sect);
 5584              		.loc 1 1244 3 is_stmt 1 view .LVU1883
1245:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5585              		.loc 1 1245 4 view .LVU1884
1245:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5586              		.loc 1 1245 10 is_stmt 0 view .LVU1885
 5587 0026 2169     		ldr	r1, [r4, #16]
 5588 0028 2068     		ldr	r0, [r4]
 5589              	.LVL663:
1245:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5590              		.loc 1 1245 10 view .LVU1886
 5591 002a FFF7FEFF 		bl	move_window
 5592              	.LVL664:
1246:Core/Src/ff.c **** 			if (dp->dir[0] == DDE || dp->dir[0] == 0) {	/* Is it a blank entry? */
 5593              		.loc 1 1246 4 is_stmt 1 view .LVU1887
1246:Core/Src/ff.c **** 			if (dp->dir[0] == DDE || dp->dir[0] == 0) {	/* Is it a blank entry? */
 5594              		.loc 1 1246 7 is_stmt 0 view .LVU1888
 5595 002e 0246     		mov	r2, r0
 5596 0030 38B9     		cbnz	r0, .L440
1247:Core/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous entries is found */
 5597              		.loc 1 1247 4 is_stmt 1 view .LVU1889
1247:Core/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous entries is found */
 5598              		.loc 1 1247 10 is_stmt 0 view .LVU1890
 5599 0032 6369     		ldr	r3, [r4, #20]
1247:Core/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous entries is found */
 5600              		.loc 1 1247 15 view .LVU1891
 5601 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1247:Core/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous entries is found */
 5602              		.loc 1 1247 7 view .LVU1892
 5603 0036 E52B     		cmp	r3, #229
 5604 0038 ECD0     		beq	.L441
1247:Core/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous entries is found */
 5605              		.loc 1 1247 26 discriminator 1 view .LVU1893
 5606 003a 002B     		cmp	r3, #0
 5607 003c EAD0     		beq	.L441
1250:Core/Src/ff.c **** 			}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 168


 5608              		.loc 1 1250 7 view .LVU1894
 5609 003e 0025     		movs	r5, #0
 5610              	.LVL665:
1250:Core/Src/ff.c **** 			}
 5611              		.loc 1 1250 7 view .LVU1895
 5612 0040 EBE7     		b	.L442
 5613              	.L440:
 5614              	.LVL666:
1255:Core/Src/ff.c **** 	return res;
 5615              		.loc 1 1255 2 is_stmt 1 view .LVU1896
1255:Core/Src/ff.c **** 	return res;
 5616              		.loc 1 1255 5 is_stmt 0 view .LVU1897
 5617 0042 042A     		cmp	r2, #4
 5618 0044 01D0     		beq	.L448
 5619              	.LVL667:
 5620              	.L444:
1256:Core/Src/ff.c **** }
 5621              		.loc 1 1256 2 is_stmt 1 view .LVU1898
1257:Core/Src/ff.c **** #endif
 5622              		.loc 1 1257 1 is_stmt 0 view .LVU1899
 5623 0046 1046     		mov	r0, r2
 5624 0048 70BD     		pop	{r4, r5, r6, pc}
 5625              	.LVL668:
 5626              	.L448:
1255:Core/Src/ff.c **** 	return res;
 5627              		.loc 1 1255 29 view .LVU1900
 5628 004a 0722     		movs	r2, #7
 5629              	.LVL669:
1255:Core/Src/ff.c **** 	return res;
 5630              		.loc 1 1255 29 view .LVU1901
 5631 004c FBE7     		b	.L444
 5632              		.cfi_endproc
 5633              	.LFE15:
 5635              		.section	.text.dir_register,"ax",%progbits
 5636              		.align	1
 5637              		.syntax unified
 5638              		.thumb
 5639              		.thumb_func
 5640              		.fpu fpv4-sp-d16
 5642              	dir_register:
 5643              	.LVL670:
 5644              	.LFB25:
1611:Core/Src/ff.c **** 	FRESULT res;
 5645              		.loc 1 1611 1 is_stmt 1 view -0
 5646              		.cfi_startproc
 5647              		@ args = 0, pretend = 0, frame = 16
 5648              		@ frame_needed = 0, uses_anonymous_args = 0
1611:Core/Src/ff.c **** 	FRESULT res;
 5649              		.loc 1 1611 1 is_stmt 0 view .LVU1903
 5650 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 5651              	.LCFI41:
 5652              		.cfi_def_cfa_offset 24
 5653              		.cfi_offset 4, -24
 5654              		.cfi_offset 5, -20
 5655              		.cfi_offset 6, -16
 5656              		.cfi_offset 7, -12
 5657              		.cfi_offset 8, -8
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 169


 5658              		.cfi_offset 14, -4
 5659 0004 84B0     		sub	sp, sp, #16
 5660              	.LCFI42:
 5661              		.cfi_def_cfa_offset 40
 5662 0006 0546     		mov	r5, r0
1612:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 5663              		.loc 1 1612 2 is_stmt 1 view .LVU1904
1614:Core/Src/ff.c **** 	BYTE sn[12], *fn, sum;
 5664              		.loc 1 1614 2 view .LVU1905
1615:Core/Src/ff.c **** 	WCHAR *lfn;
 5665              		.loc 1 1615 2 view .LVU1906
1616:Core/Src/ff.c **** 
 5666              		.loc 1 1616 2 view .LVU1907
1619:Core/Src/ff.c **** 	mem_cpy(sn, fn, 12);
 5667              		.loc 1 1619 2 view .LVU1908
1619:Core/Src/ff.c **** 	mem_cpy(sn, fn, 12);
 5668              		.loc 1 1619 5 is_stmt 0 view .LVU1909
 5669 0008 D0F81880 		ldr	r8, [r0, #24]
 5670              	.LVL671:
1619:Core/Src/ff.c **** 	mem_cpy(sn, fn, 12);
 5671              		.loc 1 1619 15 is_stmt 1 view .LVU1910
1619:Core/Src/ff.c **** 	mem_cpy(sn, fn, 12);
 5672              		.loc 1 1619 19 is_stmt 0 view .LVU1911
 5673 000c C669     		ldr	r6, [r0, #28]
 5674              	.LVL672:
1620:Core/Src/ff.c **** 
 5675              		.loc 1 1620 2 is_stmt 1 view .LVU1912
 5676 000e 0C22     		movs	r2, #12
 5677 0010 4146     		mov	r1, r8
 5678 0012 01A8     		add	r0, sp, #4
 5679              	.LVL673:
1620:Core/Src/ff.c **** 
 5680              		.loc 1 1620 2 is_stmt 0 view .LVU1913
 5681 0014 FFF7FEFF 		bl	mem_cpy
 5682              	.LVL674:
1622:Core/Src/ff.c **** 		return FR_INVALID_NAME;
 5683              		.loc 1 1622 2 is_stmt 1 view .LVU1914
1625:Core/Src/ff.c **** 		fn[NS] = 0; dp->lfn = 0;			/* Find only SFN */
 5684              		.loc 1 1625 2 view .LVU1915
1625:Core/Src/ff.c **** 		fn[NS] = 0; dp->lfn = 0;			/* Find only SFN */
 5685              		.loc 1 1625 8 is_stmt 0 view .LVU1916
 5686 0018 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
1625:Core/Src/ff.c **** 		fn[NS] = 0; dp->lfn = 0;			/* Find only SFN */
 5687              		.loc 1 1625 5 view .LVU1917
 5688 001c 13F0010F 		tst	r3, #1
 5689 0020 1CD0     		beq	.L450
1626:Core/Src/ff.c **** 		for (n = 1; n < 100; n++) {
 5690              		.loc 1 1626 3 is_stmt 1 view .LVU1918
1626:Core/Src/ff.c **** 		for (n = 1; n < 100; n++) {
 5691              		.loc 1 1626 10 is_stmt 0 view .LVU1919
 5692 0022 0023     		movs	r3, #0
 5693 0024 88F80B30 		strb	r3, [r8, #11]
1626:Core/Src/ff.c **** 		for (n = 1; n < 100; n++) {
 5694              		.loc 1 1626 15 is_stmt 1 view .LVU1920
1626:Core/Src/ff.c **** 		for (n = 1; n < 100; n++) {
 5695              		.loc 1 1626 23 is_stmt 0 view .LVU1921
 5696 0028 EB61     		str	r3, [r5, #28]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 170


1627:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
 5697              		.loc 1 1627 3 is_stmt 1 view .LVU1922
 5698              	.LVL675:
1627:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
 5699              		.loc 1 1627 10 is_stmt 0 view .LVU1923
 5700 002a 0124     		movs	r4, #1
 5701              	.LVL676:
 5702              	.L451:
1627:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
 5703              		.loc 1 1627 15 is_stmt 1 discriminator 1 view .LVU1924
1627:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
 5704              		.loc 1 1627 3 is_stmt 0 discriminator 1 view .LVU1925
 5705 002c 632C     		cmp	r4, #99
 5706 002e 0CD8     		bhi	.L452
1628:Core/Src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
 5707              		.loc 1 1628 4 is_stmt 1 view .LVU1926
 5708 0030 2346     		mov	r3, r4
 5709 0032 3246     		mov	r2, r6
 5710 0034 01A9     		add	r1, sp, #4
 5711 0036 4046     		mov	r0, r8
 5712 0038 FFF7FEFF 		bl	gen_numname
 5713              	.LVL677:
1629:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5714              		.loc 1 1629 4 view .LVU1927
1629:Core/Src/ff.c **** 			if (res != FR_OK) break;
 5715              		.loc 1 1629 10 is_stmt 0 view .LVU1928
 5716 003c 2846     		mov	r0, r5
 5717 003e FFF7FEFF 		bl	dir_find
 5718              	.LVL678:
1630:Core/Src/ff.c **** 		}
 5719              		.loc 1 1630 4 is_stmt 1 view .LVU1929
1630:Core/Src/ff.c **** 		}
 5720              		.loc 1 1630 7 is_stmt 0 view .LVU1930
 5721 0042 0746     		mov	r7, r0
 5722 0044 08B9     		cbnz	r0, .L452
1627:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
 5723              		.loc 1 1627 24 is_stmt 1 discriminator 2 view .LVU1931
1627:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
 5724              		.loc 1 1627 25 is_stmt 0 discriminator 2 view .LVU1932
 5725 0046 0134     		adds	r4, r4, #1
 5726              	.LVL679:
1627:Core/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
 5727              		.loc 1 1627 25 discriminator 2 view .LVU1933
 5728 0048 F0E7     		b	.L451
 5729              	.LVL680:
 5730              	.L452:
1632:Core/Src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 5731              		.loc 1 1632 3 is_stmt 1 view .LVU1934
1632:Core/Src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 5732              		.loc 1 1632 6 is_stmt 0 view .LVU1935
 5733 004a 642C     		cmp	r4, #100
 5734 004c 69D0     		beq	.L460
1633:Core/Src/ff.c **** 		fn[NS] = sn[NS]; dp->lfn = lfn;
 5735              		.loc 1 1633 3 is_stmt 1 view .LVU1936
1633:Core/Src/ff.c **** 		fn[NS] = sn[NS]; dp->lfn = lfn;
 5736              		.loc 1 1633 6 is_stmt 0 view .LVU1937
 5737 004e 042F     		cmp	r7, #4
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 171


 5738 0050 14D1     		bne	.L454
1634:Core/Src/ff.c **** 	}
 5739              		.loc 1 1634 3 is_stmt 1 view .LVU1938
1634:Core/Src/ff.c **** 	}
 5740              		.loc 1 1634 14 is_stmt 0 view .LVU1939
 5741 0052 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
1634:Core/Src/ff.c **** 	}
 5742              		.loc 1 1634 10 view .LVU1940
 5743 0056 88F80B30 		strb	r3, [r8, #11]
1634:Core/Src/ff.c **** 	}
 5744              		.loc 1 1634 20 is_stmt 1 view .LVU1941
1634:Core/Src/ff.c **** 	}
 5745              		.loc 1 1634 28 is_stmt 0 view .LVU1942
 5746 005a EE61     		str	r6, [r5, #28]
 5747              	.LVL681:
 5748              	.L450:
1637:Core/Src/ff.c **** 		for (n = 0; lfn[n]; n++) ;
 5749              		.loc 1 1637 2 is_stmt 1 view .LVU1943
1637:Core/Src/ff.c **** 		for (n = 0; lfn[n]; n++) ;
 5750              		.loc 1 1637 8 is_stmt 0 view .LVU1944
 5751 005c 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
1637:Core/Src/ff.c **** 		for (n = 0; lfn[n]; n++) ;
 5752              		.loc 1 1637 5 view .LVU1945
 5753 0060 13F0020F 		tst	r3, #2
 5754 0064 1AD1     		bne	.L461
1641:Core/Src/ff.c **** 	}
 5755              		.loc 1 1641 8 view .LVU1946
 5756 0066 0124     		movs	r4, #1
 5757              	.L456:
 5758              	.LVL682:
1643:Core/Src/ff.c **** 
 5759              		.loc 1 1643 2 is_stmt 1 view .LVU1947
1643:Core/Src/ff.c **** 
 5760              		.loc 1 1643 8 is_stmt 0 view .LVU1948
 5761 0068 2146     		mov	r1, r4
 5762 006a 2846     		mov	r0, r5
 5763 006c FFF7FEFF 		bl	dir_alloc
 5764              	.LVL683:
1645:Core/Src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
 5765              		.loc 1 1645 2 is_stmt 1 view .LVU1949
1645:Core/Src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
 5766              		.loc 1 1645 5 is_stmt 0 view .LVU1950
 5767 0070 0746     		mov	r7, r0
 5768 0072 08B9     		cbnz	r0, .L458
 5769              	.LVL684:
1645:Core/Src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
 5770              		.loc 1 1645 19 discriminator 1 view .LVU1951
 5771 0074 013C     		subs	r4, r4, #1
 5772              	.LVL685:
1645:Core/Src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
 5773              		.loc 1 1645 19 discriminator 1 view .LVU1952
 5774 0076 13D1     		bne	.L463
 5775              	.LVL686:
 5776              	.L458:
1662:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 5777              		.loc 1 1662 2 is_stmt 1 view .LVU1953
1662:Core/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 172


 5778              		.loc 1 1662 5 is_stmt 0 view .LVU1954
 5779 0078 002F     		cmp	r7, #0
 5780 007a 37D0     		beq	.L464
 5781              	.LVL687:
 5782              	.L454:
1675:Core/Src/ff.c **** #endif /* !_FS_READONLY */
 5783              		.loc 1 1675 1 view .LVU1955
 5784 007c 3846     		mov	r0, r7
 5785 007e 04B0     		add	sp, sp, #16
 5786              	.LCFI43:
 5787              		.cfi_remember_state
 5788              		.cfi_def_cfa_offset 24
 5789              		@ sp needed
 5790 0080 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 5791              	.LVL688:
 5792              	.L457:
 5793              	.LCFI44:
 5794              		.cfi_restore_state
1638:Core/Src/ff.c **** 		nent = (n + 25) / 13;
 5795              		.loc 1 1638 28 is_stmt 1 discriminator 3 view .LVU1956
1638:Core/Src/ff.c **** 		nent = (n + 25) / 13;
 5796              		.loc 1 1638 23 discriminator 3 view .LVU1957
1638:Core/Src/ff.c **** 		nent = (n + 25) / 13;
 5797              		.loc 1 1638 24 is_stmt 0 discriminator 3 view .LVU1958
 5798 0084 0133     		adds	r3, r3, #1
 5799              	.LVL689:
 5800              	.L455:
1638:Core/Src/ff.c **** 		nent = (n + 25) / 13;
 5801              		.loc 1 1638 15 is_stmt 1 discriminator 1 view .LVU1959
1638:Core/Src/ff.c **** 		nent = (n + 25) / 13;
 5802              		.loc 1 1638 18 is_stmt 0 discriminator 1 view .LVU1960
 5803 0086 36F81320 		ldrh	r2, [r6, r3, lsl #1]
1638:Core/Src/ff.c **** 		nent = (n + 25) / 13;
 5804              		.loc 1 1638 3 discriminator 1 view .LVU1961
 5805 008a 002A     		cmp	r2, #0
 5806 008c FAD1     		bne	.L457
1639:Core/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
 5807              		.loc 1 1639 3 is_stmt 1 view .LVU1962
1639:Core/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
 5808              		.loc 1 1639 13 is_stmt 0 view .LVU1963
 5809 008e 03F11904 		add	r4, r3, #25
1639:Core/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
 5810              		.loc 1 1639 8 view .LVU1964
 5811 0092 254B     		ldr	r3, .L465
 5812              	.LVL690:
1639:Core/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
 5813              		.loc 1 1639 8 view .LVU1965
 5814 0094 A3FB0434 		umull	r3, r4, r3, r4
 5815              	.LVL691:
1639:Core/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
 5816              		.loc 1 1639 8 view .LVU1966
 5817 0098 A408     		lsrs	r4, r4, #2
 5818              	.LVL692:
1639:Core/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
 5819              		.loc 1 1639 8 view .LVU1967
 5820 009a E5E7     		b	.L456
 5821              	.LVL693:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 173


 5822              	.L461:
1638:Core/Src/ff.c **** 		nent = (n + 25) / 13;
 5823              		.loc 1 1638 10 view .LVU1968
 5824 009c 0023     		movs	r3, #0
 5825 009e F2E7     		b	.L455
 5826              	.LVL694:
 5827              	.L463:
1646:Core/Src/ff.c **** 		if (res == FR_OK) {
 5828              		.loc 1 1646 3 is_stmt 1 view .LVU1969
1646:Core/Src/ff.c **** 		if (res == FR_OK) {
 5829              		.loc 1 1646 23 is_stmt 0 view .LVU1970
 5830 00a0 E988     		ldrh	r1, [r5, #6]
1646:Core/Src/ff.c **** 		if (res == FR_OK) {
 5831              		.loc 1 1646 9 view .LVU1971
 5832 00a2 091B     		subs	r1, r1, r4
 5833 00a4 2846     		mov	r0, r5
 5834              	.LVL695:
1646:Core/Src/ff.c **** 		if (res == FR_OK) {
 5835              		.loc 1 1646 9 view .LVU1972
 5836 00a6 FFF7FEFF 		bl	dir_sdi
 5837              	.LVL696:
1647:Core/Src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
 5838              		.loc 1 1647 3 is_stmt 1 view .LVU1973
1647:Core/Src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
 5839              		.loc 1 1647 6 is_stmt 0 view .LVU1974
 5840 00aa 0746     		mov	r7, r0
 5841 00ac 0028     		cmp	r0, #0
 5842 00ae E3D1     		bne	.L458
1648:Core/Src/ff.c **** 			do {					/* Store LFN entries in bottom first */
 5843              		.loc 1 1648 4 is_stmt 1 view .LVU1975
1648:Core/Src/ff.c **** 			do {					/* Store LFN entries in bottom first */
 5844              		.loc 1 1648 10 is_stmt 0 view .LVU1976
 5845 00b0 A869     		ldr	r0, [r5, #24]
 5846              	.LVL697:
1648:Core/Src/ff.c **** 			do {					/* Store LFN entries in bottom first */
 5847              		.loc 1 1648 10 view .LVU1977
 5848 00b2 FFF7FEFF 		bl	sum_sfn
 5849              	.LVL698:
 5850 00b6 0646     		mov	r6, r0
 5851              	.LVL699:
 5852              	.L459:
1649:Core/Src/ff.c **** 				res = move_window(dp->fs, dp->sect);
 5853              		.loc 1 1649 4 is_stmt 1 view .LVU1978
1650:Core/Src/ff.c **** 				if (res != FR_OK) break;
 5854              		.loc 1 1650 5 view .LVU1979
1650:Core/Src/ff.c **** 				if (res != FR_OK) break;
 5855              		.loc 1 1650 11 is_stmt 0 view .LVU1980
 5856 00b8 2969     		ldr	r1, [r5, #16]
 5857 00ba 2868     		ldr	r0, [r5]
 5858 00bc FFF7FEFF 		bl	move_window
 5859              	.LVL700:
1651:Core/Src/ff.c **** 				fit_lfn(dp->lfn, dp->dir, (BYTE)nent, sum);
 5860              		.loc 1 1651 5 is_stmt 1 view .LVU1981
1651:Core/Src/ff.c **** 				fit_lfn(dp->lfn, dp->dir, (BYTE)nent, sum);
 5861              		.loc 1 1651 8 is_stmt 0 view .LVU1982
 5862 00c0 0746     		mov	r7, r0
 5863 00c2 0028     		cmp	r0, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 174


 5864 00c4 D8D1     		bne	.L458
1652:Core/Src/ff.c **** 				dp->fs->wflag = 1;
 5865              		.loc 1 1652 5 is_stmt 1 view .LVU1983
 5866 00c6 3346     		mov	r3, r6
 5867 00c8 E2B2     		uxtb	r2, r4
 5868 00ca 6969     		ldr	r1, [r5, #20]
 5869 00cc E869     		ldr	r0, [r5, #28]
 5870              	.LVL701:
1652:Core/Src/ff.c **** 				dp->fs->wflag = 1;
 5871              		.loc 1 1652 5 is_stmt 0 view .LVU1984
 5872 00ce FFF7FEFF 		bl	fit_lfn
 5873              	.LVL702:
1653:Core/Src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 5874              		.loc 1 1653 5 is_stmt 1 view .LVU1985
1653:Core/Src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 5875              		.loc 1 1653 7 is_stmt 0 view .LVU1986
 5876 00d2 2B68     		ldr	r3, [r5]
1653:Core/Src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
 5877              		.loc 1 1653 19 view .LVU1987
 5878 00d4 0122     		movs	r2, #1
 5879 00d6 1A71     		strb	r2, [r3, #4]
1654:Core/Src/ff.c **** 			} while (res == FR_OK && --nent);
 5880              		.loc 1 1654 5 is_stmt 1 view .LVU1988
1654:Core/Src/ff.c **** 			} while (res == FR_OK && --nent);
 5881              		.loc 1 1654 11 is_stmt 0 view .LVU1989
 5882 00d8 0021     		movs	r1, #0
 5883 00da 2846     		mov	r0, r5
 5884 00dc FFF7FEFF 		bl	dir_next
 5885              	.LVL703:
1655:Core/Src/ff.c **** 		}
 5886              		.loc 1 1655 12 is_stmt 1 view .LVU1990
1655:Core/Src/ff.c **** 		}
 5887              		.loc 1 1655 4 is_stmt 0 view .LVU1991
 5888 00e0 0746     		mov	r7, r0
 5889 00e2 0028     		cmp	r0, #0
 5890 00e4 C8D1     		bne	.L458
 5891              	.LVL704:
1655:Core/Src/ff.c **** 		}
 5892              		.loc 1 1655 26 discriminator 1 view .LVU1992
 5893 00e6 013C     		subs	r4, r4, #1
 5894              	.LVL705:
1655:Core/Src/ff.c **** 		}
 5895              		.loc 1 1655 26 discriminator 1 view .LVU1993
 5896 00e8 E6D1     		bne	.L459
 5897 00ea C5E7     		b	.L458
 5898              	.LVL706:
 5899              	.L464:
1663:Core/Src/ff.c **** 		if (res == FR_OK) {
 5900              		.loc 1 1663 3 is_stmt 1 view .LVU1994
1663:Core/Src/ff.c **** 		if (res == FR_OK) {
 5901              		.loc 1 1663 9 is_stmt 0 view .LVU1995
 5902 00ec 2969     		ldr	r1, [r5, #16]
 5903 00ee 2868     		ldr	r0, [r5]
 5904 00f0 FFF7FEFF 		bl	move_window
 5905              	.LVL707:
1664:Core/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIR);	/* Clean the entry */
 5906              		.loc 1 1664 3 is_stmt 1 view .LVU1996
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 175


1664:Core/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIR);	/* Clean the entry */
 5907              		.loc 1 1664 6 is_stmt 0 view .LVU1997
 5908 00f4 0746     		mov	r7, r0
 5909 00f6 0028     		cmp	r0, #0
 5910 00f8 C0D1     		bne	.L454
1665:Core/Src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
 5911              		.loc 1 1665 4 is_stmt 1 view .LVU1998
 5912 00fa 2022     		movs	r2, #32
 5913 00fc 0021     		movs	r1, #0
 5914 00fe 6869     		ldr	r0, [r5, #20]
 5915              	.LVL708:
1665:Core/Src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
 5916              		.loc 1 1665 4 is_stmt 0 view .LVU1999
 5917 0100 FFF7FEFF 		bl	mem_set
 5918              	.LVL709:
1666:Core/Src/ff.c **** #if _USE_LFN
 5919              		.loc 1 1666 4 is_stmt 1 view .LVU2000
 5920 0104 0B22     		movs	r2, #11
 5921 0106 A969     		ldr	r1, [r5, #24]
 5922 0108 6869     		ldr	r0, [r5, #20]
 5923 010a FFF7FEFF 		bl	mem_cpy
 5924              	.LVL710:
1668:Core/Src/ff.c **** #endif
 5925              		.loc 1 1668 4 view .LVU2001
1668:Core/Src/ff.c **** #endif
 5926              		.loc 1 1668 27 is_stmt 0 view .LVU2002
 5927 010e AB69     		ldr	r3, [r5, #24]
1668:Core/Src/ff.c **** #endif
 5928              		.loc 1 1668 31 view .LVU2003
 5929 0110 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
1668:Core/Src/ff.c **** #endif
 5930              		.loc 1 1668 6 view .LVU2004
 5931 0112 6A69     		ldr	r2, [r5, #20]
1668:Core/Src/ff.c **** #endif
 5932              		.loc 1 1668 36 view .LVU2005
 5933 0114 03F01803 		and	r3, r3, #24
1668:Core/Src/ff.c **** #endif
 5934              		.loc 1 1668 23 view .LVU2006
 5935 0118 1373     		strb	r3, [r2, #12]
1670:Core/Src/ff.c **** 		}
 5936              		.loc 1 1670 4 is_stmt 1 view .LVU2007
1670:Core/Src/ff.c **** 		}
 5937              		.loc 1 1670 6 is_stmt 0 view .LVU2008
 5938 011a 2B68     		ldr	r3, [r5]
1670:Core/Src/ff.c **** 		}
 5939              		.loc 1 1670 18 view .LVU2009
 5940 011c 0122     		movs	r2, #1
 5941 011e 1A71     		strb	r2, [r3, #4]
 5942 0120 ACE7     		b	.L454
 5943              	.LVL711:
 5944              	.L460:
1632:Core/Src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 5945              		.loc 1 1632 24 view .LVU2010
 5946 0122 0727     		movs	r7, #7
 5947              	.LVL712:
1632:Core/Src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
 5948              		.loc 1 1632 24 view .LVU2011
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 176


 5949 0124 AAE7     		b	.L454
 5950              	.L466:
 5951 0126 00BF     		.align	2
 5952              	.L465:
 5953 0128 4FECC44E 		.word	1321528399
 5954              		.cfi_endproc
 5955              	.LFE25:
 5957              		.section	.text.dir_remove,"ax",%progbits
 5958              		.align	1
 5959              		.syntax unified
 5960              		.thumb
 5961              		.thumb_func
 5962              		.fpu fpv4-sp-d16
 5964              	dir_remove:
 5965              	.LVL713:
 5966              	.LFB26:
1689:Core/Src/ff.c **** 	FRESULT res;
 5967              		.loc 1 1689 1 is_stmt 1 view -0
 5968              		.cfi_startproc
 5969              		@ args = 0, pretend = 0, frame = 0
 5970              		@ frame_needed = 0, uses_anonymous_args = 0
1689:Core/Src/ff.c **** 	FRESULT res;
 5971              		.loc 1 1689 1 is_stmt 0 view .LVU2013
 5972 0000 70B5     		push	{r4, r5, r6, lr}
 5973              	.LCFI45:
 5974              		.cfi_def_cfa_offset 16
 5975              		.cfi_offset 4, -16
 5976              		.cfi_offset 5, -12
 5977              		.cfi_offset 6, -8
 5978              		.cfi_offset 14, -4
 5979 0002 0446     		mov	r4, r0
1690:Core/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 5980              		.loc 1 1690 2 is_stmt 1 view .LVU2014
1692:Core/Src/ff.c **** 
 5981              		.loc 1 1692 2 view .LVU2015
1694:Core/Src/ff.c **** 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN en
 5982              		.loc 1 1694 2 view .LVU2016
1694:Core/Src/ff.c **** 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN en
 5983              		.loc 1 1694 8 is_stmt 0 view .LVU2017
 5984 0004 C688     		ldrh	r6, [r0, #6]
1694:Core/Src/ff.c **** 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN en
 5985              		.loc 1 1694 4 view .LVU2018
 5986 0006 3146     		mov	r1, r6
 5987              	.LVL714:
1695:Core/Src/ff.c **** 	if (res == FR_OK) {
 5988              		.loc 1 1695 2 is_stmt 1 view .LVU2019
1695:Core/Src/ff.c **** 	if (res == FR_OK) {
 5989              		.loc 1 1695 23 is_stmt 0 view .LVU2020
 5990 0008 038C     		ldrh	r3, [r0, #32]
1695:Core/Src/ff.c **** 	if (res == FR_OK) {
 5991              		.loc 1 1695 8 view .LVU2021
 5992 000a 4FF6FF72 		movw	r2, #65535
 5993 000e 9342     		cmp	r3, r2
 5994 0010 00D0     		beq	.L468
1695:Core/Src/ff.c **** 	if (res == FR_OK) {
 5995              		.loc 1 1695 8 discriminator 1 view .LVU2022
 5996 0012 1946     		mov	r1, r3
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 177


 5997              	.LVL715:
 5998              	.L468:
1695:Core/Src/ff.c **** 	if (res == FR_OK) {
 5999              		.loc 1 1695 8 discriminator 4 view .LVU2023
 6000 0014 2046     		mov	r0, r4
 6001              	.LVL716:
1695:Core/Src/ff.c **** 	if (res == FR_OK) {
 6002              		.loc 1 1695 8 discriminator 4 view .LVU2024
 6003 0016 FFF7FEFF 		bl	dir_sdi
 6004              	.LVL717:
1696:Core/Src/ff.c **** 		do {
 6005              		.loc 1 1696 2 is_stmt 1 discriminator 4 view .LVU2025
1696:Core/Src/ff.c **** 		do {
 6006              		.loc 1 1696 5 is_stmt 0 discriminator 4 view .LVU2026
 6007 001a 0546     		mov	r5, r0
 6008 001c E0B9     		cbnz	r0, .L469
 6009              	.L471:
1697:Core/Src/ff.c **** 			res = move_window(dp->fs, dp->sect);
 6010              		.loc 1 1697 3 is_stmt 1 view .LVU2027
1698:Core/Src/ff.c **** 			if (res != FR_OK) break;
 6011              		.loc 1 1698 4 view .LVU2028
1698:Core/Src/ff.c **** 			if (res != FR_OK) break;
 6012              		.loc 1 1698 10 is_stmt 0 view .LVU2029
 6013 001e 2169     		ldr	r1, [r4, #16]
 6014 0020 2068     		ldr	r0, [r4]
 6015              	.LVL718:
1698:Core/Src/ff.c **** 			if (res != FR_OK) break;
 6016              		.loc 1 1698 10 view .LVU2030
 6017 0022 FFF7FEFF 		bl	move_window
 6018              	.LVL719:
1699:Core/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIR);	/* Clear and mark the entry "deleted" */
 6019              		.loc 1 1699 4 is_stmt 1 view .LVU2031
1699:Core/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIR);	/* Clear and mark the entry "deleted" */
 6020              		.loc 1 1699 7 is_stmt 0 view .LVU2032
 6021 0026 0546     		mov	r5, r0
 6022 0028 A0B9     		cbnz	r0, .L470
1700:Core/Src/ff.c **** 			*dp->dir = DDE;
 6023              		.loc 1 1700 4 is_stmt 1 view .LVU2033
 6024 002a 2022     		movs	r2, #32
 6025 002c 0021     		movs	r1, #0
 6026 002e 6069     		ldr	r0, [r4, #20]
 6027              	.LVL720:
1700:Core/Src/ff.c **** 			*dp->dir = DDE;
 6028              		.loc 1 1700 4 is_stmt 0 view .LVU2034
 6029 0030 FFF7FEFF 		bl	mem_set
 6030              	.LVL721:
1701:Core/Src/ff.c **** 			dp->fs->wflag = 1;
 6031              		.loc 1 1701 4 is_stmt 1 view .LVU2035
1701:Core/Src/ff.c **** 			dp->fs->wflag = 1;
 6032              		.loc 1 1701 7 is_stmt 0 view .LVU2036
 6033 0034 6369     		ldr	r3, [r4, #20]
1701:Core/Src/ff.c **** 			dp->fs->wflag = 1;
 6034              		.loc 1 1701 13 view .LVU2037
 6035 0036 E522     		movs	r2, #229
 6036 0038 1A70     		strb	r2, [r3]
1702:Core/Src/ff.c **** 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
 6037              		.loc 1 1702 4 is_stmt 1 view .LVU2038
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 178


1702:Core/Src/ff.c **** 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
 6038              		.loc 1 1702 6 is_stmt 0 view .LVU2039
 6039 003a 2368     		ldr	r3, [r4]
1702:Core/Src/ff.c **** 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
 6040              		.loc 1 1702 18 view .LVU2040
 6041 003c 0122     		movs	r2, #1
 6042 003e 1A71     		strb	r2, [r3, #4]
1703:Core/Src/ff.c **** 			res = dir_next(dp, 0);		/* Next entry */
 6043              		.loc 1 1703 4 is_stmt 1 view .LVU2041
1703:Core/Src/ff.c **** 			res = dir_next(dp, 0);		/* Next entry */
 6044              		.loc 1 1703 10 is_stmt 0 view .LVU2042
 6045 0040 E388     		ldrh	r3, [r4, #6]
1703:Core/Src/ff.c **** 			res = dir_next(dp, 0);		/* Next entry */
 6046              		.loc 1 1703 7 view .LVU2043
 6047 0042 9E42     		cmp	r6, r3
 6048 0044 06D9     		bls	.L470
1704:Core/Src/ff.c **** 		} while (res == FR_OK);
 6049              		.loc 1 1704 4 is_stmt 1 view .LVU2044
1704:Core/Src/ff.c **** 		} while (res == FR_OK);
 6050              		.loc 1 1704 10 is_stmt 0 view .LVU2045
 6051 0046 0021     		movs	r1, #0
 6052 0048 2046     		mov	r0, r4
 6053 004a FFF7FEFF 		bl	dir_next
 6054              	.LVL722:
1705:Core/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
 6055              		.loc 1 1705 11 is_stmt 1 view .LVU2046
1705:Core/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
 6056              		.loc 1 1705 3 is_stmt 0 view .LVU2047
 6057 004e 0546     		mov	r5, r0
 6058 0050 0028     		cmp	r0, #0
 6059 0052 E4D0     		beq	.L471
 6060              	.LVL723:
 6061              	.L470:
1706:Core/Src/ff.c **** 	}
 6062              		.loc 1 1706 3 is_stmt 1 view .LVU2048
1706:Core/Src/ff.c **** 	}
 6063              		.loc 1 1706 6 is_stmt 0 view .LVU2049
 6064 0054 042D     		cmp	r5, #4
 6065 0056 01D0     		beq	.L474
 6066              	.LVL724:
 6067              	.L469:
1721:Core/Src/ff.c **** }
 6068              		.loc 1 1721 2 is_stmt 1 view .LVU2050
1722:Core/Src/ff.c **** #endif /* !_FS_READONLY */
 6069              		.loc 1 1722 1 is_stmt 0 view .LVU2051
 6070 0058 2846     		mov	r0, r5
 6071 005a 70BD     		pop	{r4, r5, r6, pc}
 6072              	.LVL725:
 6073              	.L474:
1706:Core/Src/ff.c **** 	}
 6074              		.loc 1 1706 30 view .LVU2052
 6075 005c 0225     		movs	r5, #2
 6076              	.LVL726:
1706:Core/Src/ff.c **** 	}
 6077              		.loc 1 1706 30 view .LVU2053
 6078 005e FBE7     		b	.L469
 6079              		.cfi_endproc
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 179


 6080              	.LFE26:
 6082              		.section	.text.f_mount,"ax",%progbits
 6083              		.align	1
 6084              		.global	f_mount
 6085              		.syntax unified
 6086              		.thumb
 6087              		.thumb_func
 6088              		.fpu fpv4-sp-d16
 6090              	f_mount:
 6091              	.LVL727:
 6092              	.LFB34:
2350:Core/Src/ff.c **** 
2351:Core/Src/ff.c **** 
2352:Core/Src/ff.c **** 
2353:Core/Src/ff.c **** 
2354:Core/Src/ff.c **** /*--------------------------------------------------------------------------
2355:Core/Src/ff.c **** 
2356:Core/Src/ff.c ****    Public Functions
2357:Core/Src/ff.c **** 
2358:Core/Src/ff.c **** --------------------------------------------------------------------------*/
2359:Core/Src/ff.c **** 
2360:Core/Src/ff.c **** 
2361:Core/Src/ff.c **** 
2362:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2363:Core/Src/ff.c **** /* Mount/Unmount a Logical Drive                                         */
2364:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2365:Core/Src/ff.c **** 
2366:Core/Src/ff.c **** FRESULT f_mount (
2367:Core/Src/ff.c **** 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
2368:Core/Src/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
2369:Core/Src/ff.c **** 	BYTE opt			/* 0:Do not mount (delayed mount), 1:Mount immediately */
2370:Core/Src/ff.c **** )
2371:Core/Src/ff.c **** {
 6093              		.loc 1 2371 1 is_stmt 1 view -0
 6094              		.cfi_startproc
 6095              		@ args = 0, pretend = 0, frame = 16
 6096              		@ frame_needed = 0, uses_anonymous_args = 0
 6097              		.loc 1 2371 1 is_stmt 0 view .LVU2055
 6098 0000 10B5     		push	{r4, lr}
 6099              	.LCFI46:
 6100              		.cfi_def_cfa_offset 8
 6101              		.cfi_offset 4, -8
 6102              		.cfi_offset 14, -4
 6103 0002 84B0     		sub	sp, sp, #16
 6104              	.LCFI47:
 6105              		.cfi_def_cfa_offset 24
 6106 0004 0190     		str	r0, [sp, #4]
 6107 0006 0091     		str	r1, [sp]
 6108 0008 1446     		mov	r4, r2
2372:Core/Src/ff.c **** 	FATFS *cfs;
 6109              		.loc 1 2372 2 is_stmt 1 view .LVU2056
2373:Core/Src/ff.c **** 	int vol;
 6110              		.loc 1 2373 2 view .LVU2057
2374:Core/Src/ff.c **** 	FRESULT res;
 6111              		.loc 1 2374 2 view .LVU2058
2375:Core/Src/ff.c **** 	const TCHAR *rp = path;
 6112              		.loc 1 2375 2 view .LVU2059
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 180


 6113              		.loc 1 2375 15 is_stmt 0 view .LVU2060
 6114 000a 0391     		str	r1, [sp, #12]
2376:Core/Src/ff.c **** 
2377:Core/Src/ff.c **** 
2378:Core/Src/ff.c **** 	vol = get_ldnumber(&rp);
 6115              		.loc 1 2378 2 is_stmt 1 view .LVU2061
 6116              		.loc 1 2378 8 is_stmt 0 view .LVU2062
 6117 000c 03A8     		add	r0, sp, #12
 6118              	.LVL728:
 6119              		.loc 1 2378 8 view .LVU2063
 6120 000e FFF7FEFF 		bl	get_ldnumber
 6121              	.LVL729:
2379:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 6122              		.loc 1 2379 2 is_stmt 1 view .LVU2064
 6123              		.loc 1 2379 5 is_stmt 0 view .LVU2065
 6124 0012 0028     		cmp	r0, #0
 6125              		.loc 1 2379 5 view .LVU2066
 6126 0014 19DB     		blt	.L479
2380:Core/Src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 6127              		.loc 1 2380 2 is_stmt 1 view .LVU2067
 6128              		.loc 1 2380 6 is_stmt 0 view .LVU2068
 6129 0016 0F4B     		ldr	r3, .L484
 6130 0018 53F82030 		ldr	r3, [r3, r0, lsl #2]
 6131              	.LVL730:
2381:Core/Src/ff.c **** 
2382:Core/Src/ff.c **** 	if (cfs) {
 6132              		.loc 1 2382 2 is_stmt 1 view .LVU2069
 6133              		.loc 1 2382 5 is_stmt 0 view .LVU2070
 6134 001c 0BB1     		cbz	r3, .L477
2383:Core/Src/ff.c **** #if _FS_LOCK
2384:Core/Src/ff.c **** 		clear_lock(cfs);
2385:Core/Src/ff.c **** #endif
2386:Core/Src/ff.c **** #if _FS_REENTRANT						/* Discard sync object of the current volume */
2387:Core/Src/ff.c **** 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
2388:Core/Src/ff.c **** #endif
2389:Core/Src/ff.c **** 		cfs->fs_type = 0;				/* Clear old fs object */
 6135              		.loc 1 2389 3 is_stmt 1 view .LVU2071
 6136              		.loc 1 2389 16 is_stmt 0 view .LVU2072
 6137 001e 0022     		movs	r2, #0
 6138 0020 1A70     		strb	r2, [r3]
 6139              	.L477:
2390:Core/Src/ff.c **** 	}
2391:Core/Src/ff.c **** 
2392:Core/Src/ff.c **** 	if (fs) {
 6140              		.loc 1 2392 2 is_stmt 1 view .LVU2073
 6141              		.loc 1 2392 6 is_stmt 0 view .LVU2074
 6142 0022 019B     		ldr	r3, [sp, #4]
 6143              	.LVL731:
 6144              		.loc 1 2392 5 view .LVU2075
 6145 0024 0BB1     		cbz	r3, .L478
2393:Core/Src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 6146              		.loc 1 2393 3 is_stmt 1 view .LVU2076
 6147              		.loc 1 2393 15 is_stmt 0 view .LVU2077
 6148 0026 0022     		movs	r2, #0
 6149 0028 1A70     		strb	r2, [r3]
 6150              	.L478:
2394:Core/Src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 181


2395:Core/Src/ff.c **** 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
2396:Core/Src/ff.c **** #endif
2397:Core/Src/ff.c **** 	}
2398:Core/Src/ff.c **** 	FatFs[vol] = fs;					/* Register new fs object */
 6151              		.loc 1 2398 2 is_stmt 1 view .LVU2078
 6152              		.loc 1 2398 13 is_stmt 0 view .LVU2079
 6153 002a 019B     		ldr	r3, [sp, #4]
 6154 002c 094A     		ldr	r2, .L484
 6155              	.LVL732:
 6156              		.loc 1 2398 13 view .LVU2080
 6157 002e 42F82030 		str	r3, [r2, r0, lsl #2]
 6158              	.LVL733:
2399:Core/Src/ff.c **** 
2400:Core/Src/ff.c **** 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
 6159              		.loc 1 2400 2 is_stmt 1 view .LVU2081
 6160              		.loc 1 2400 5 is_stmt 0 view .LVU2082
 6161 0032 63B1     		cbz	r3, .L480
 6162              		.loc 1 2400 10 discriminator 2 view .LVU2083
 6163 0034 012C     		cmp	r4, #1
 6164 0036 02D0     		beq	.L483
 6165              		.loc 1 2400 30 view .LVU2084
 6166 0038 0020     		movs	r0, #0
 6167              	.LVL734:
 6168              	.L476:
2401:Core/Src/ff.c **** 
2402:Core/Src/ff.c **** 	res = find_volume(&fs, &path, 0);	/* Force mounted the volume */
2403:Core/Src/ff.c **** 	LEAVE_FF(fs, res);
2404:Core/Src/ff.c **** }
 6169              		.loc 1 2404 1 view .LVU2085
 6170 003a 04B0     		add	sp, sp, #16
 6171              	.LCFI48:
 6172              		.cfi_remember_state
 6173              		.cfi_def_cfa_offset 8
 6174              		@ sp needed
 6175 003c 10BD     		pop	{r4, pc}
 6176              	.LVL735:
 6177              	.L483:
 6178              	.LCFI49:
 6179              		.cfi_restore_state
2402:Core/Src/ff.c **** 	LEAVE_FF(fs, res);
 6180              		.loc 1 2402 2 is_stmt 1 view .LVU2086
2402:Core/Src/ff.c **** 	LEAVE_FF(fs, res);
 6181              		.loc 1 2402 8 is_stmt 0 view .LVU2087
 6182 003e 0022     		movs	r2, #0
 6183 0040 6946     		mov	r1, sp
 6184 0042 01A8     		add	r0, sp, #4
 6185              	.LVL736:
2402:Core/Src/ff.c **** 	LEAVE_FF(fs, res);
 6186              		.loc 1 2402 8 view .LVU2088
 6187 0044 FFF7FEFF 		bl	find_volume
 6188              	.LVL737:
2403:Core/Src/ff.c **** }
 6189              		.loc 1 2403 2 is_stmt 1 view .LVU2089
 6190 0048 F7E7     		b	.L476
 6191              	.LVL738:
 6192              	.L479:
2379:Core/Src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 182


 6193              		.loc 1 2379 22 is_stmt 0 view .LVU2090
 6194 004a 0B20     		movs	r0, #11
 6195              	.LVL739:
2379:Core/Src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 6196              		.loc 1 2379 22 view .LVU2091
 6197 004c F5E7     		b	.L476
 6198              	.LVL740:
 6199              	.L480:
2400:Core/Src/ff.c **** 
 6200              		.loc 1 2400 30 view .LVU2092
 6201 004e 0020     		movs	r0, #0
 6202              	.LVL741:
2400:Core/Src/ff.c **** 
 6203              		.loc 1 2400 30 view .LVU2093
 6204 0050 F3E7     		b	.L476
 6205              	.L485:
 6206 0052 00BF     		.align	2
 6207              	.L484:
 6208 0054 00000000 		.word	.LANCHOR1
 6209              		.cfi_endproc
 6210              	.LFE34:
 6212              		.section	.text.f_open,"ax",%progbits
 6213              		.align	1
 6214              		.global	f_open
 6215              		.syntax unified
 6216              		.thumb
 6217              		.thumb_func
 6218              		.fpu fpv4-sp-d16
 6220              	f_open:
 6221              	.LVL742:
 6222              	.LFB35:
2405:Core/Src/ff.c **** 
2406:Core/Src/ff.c **** 
2407:Core/Src/ff.c **** 
2408:Core/Src/ff.c **** 
2409:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2410:Core/Src/ff.c **** /* Open or Create a File                                                 */
2411:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2412:Core/Src/ff.c **** 
2413:Core/Src/ff.c **** FRESULT f_open (
2414:Core/Src/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
2415:Core/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
2416:Core/Src/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
2417:Core/Src/ff.c **** )
2418:Core/Src/ff.c **** {
 6223              		.loc 1 2418 1 is_stmt 1 view -0
 6224              		.cfi_startproc
 6225              		@ args = 0, pretend = 0, frame = 56
 6226              		@ frame_needed = 0, uses_anonymous_args = 0
 6227              		.loc 1 2418 1 is_stmt 0 view .LVU2095
 6228 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 6229              	.LCFI50:
 6230              		.cfi_def_cfa_offset 32
 6231              		.cfi_offset 4, -32
 6232              		.cfi_offset 5, -28
 6233              		.cfi_offset 6, -24
 6234              		.cfi_offset 7, -20
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 183


 6235              		.cfi_offset 8, -16
 6236              		.cfi_offset 9, -12
 6237              		.cfi_offset 10, -8
 6238              		.cfi_offset 14, -4
 6239 0004 8EB0     		sub	sp, sp, #56
 6240              	.LCFI51:
 6241              		.cfi_def_cfa_offset 88
 6242 0006 0191     		str	r1, [sp, #4]
2419:Core/Src/ff.c **** 	FRESULT res;
 6243              		.loc 1 2419 2 is_stmt 1 view .LVU2096
2420:Core/Src/ff.c **** 	DIR dj;
 6244              		.loc 1 2420 2 view .LVU2097
2421:Core/Src/ff.c **** 	BYTE *dir;
 6245              		.loc 1 2421 2 view .LVU2098
2422:Core/Src/ff.c **** 	DEF_NAMEBUF;
 6246              		.loc 1 2422 2 view .LVU2099
 6247              		.loc 1 2422 2 view .LVU2100
2423:Core/Src/ff.c **** 
2424:Core/Src/ff.c **** 
2425:Core/Src/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
 6248              		.loc 1 2425 2 view .LVU2101
 6249              		.loc 1 2425 5 is_stmt 0 view .LVU2102
 6250 0008 0028     		cmp	r0, #0
 6251 000a 00F0B480 		beq	.L496
 6252 000e 1446     		mov	r4, r2
 6253 0010 0646     		mov	r6, r0
2426:Core/Src/ff.c **** 	fp->fs = 0;			/* Clear file object */
 6254              		.loc 1 2426 2 is_stmt 1 view .LVU2103
 6255              		.loc 1 2426 9 is_stmt 0 view .LVU2104
 6256 0012 0023     		movs	r3, #0
 6257 0014 0360     		str	r3, [r0]
2427:Core/Src/ff.c **** 
2428:Core/Src/ff.c **** 	/* Get logical drive number */
2429:Core/Src/ff.c **** #if !_FS_READONLY
2430:Core/Src/ff.c **** 	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
 6258              		.loc 1 2430 2 is_stmt 1 view .LVU2105
 6259              		.loc 1 2430 7 is_stmt 0 view .LVU2106
 6260 0016 02F01F08 		and	r8, r2, #31
 6261              	.LVL743:
2431:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, (BYTE)(mode & ~FA_READ));
 6262              		.loc 1 2431 2 is_stmt 1 view .LVU2107
 6263              		.loc 1 2431 8 is_stmt 0 view .LVU2108
 6264 001a 02F01E02 		and	r2, r2, #30
 6265 001e 01A9     		add	r1, sp, #4
 6266              	.LVL744:
 6267              		.loc 1 2431 8 view .LVU2109
 6268 0020 05A8     		add	r0, sp, #20
 6269              	.LVL745:
 6270              		.loc 1 2431 8 view .LVU2110
 6271 0022 FFF7FEFF 		bl	find_volume
 6272              	.LVL746:
2432:Core/Src/ff.c **** #else
2433:Core/Src/ff.c **** 	mode &= FA_READ;
2434:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2435:Core/Src/ff.c **** #endif
2436:Core/Src/ff.c **** 	if (res == FR_OK) {
 6273              		.loc 1 2436 2 is_stmt 1 view .LVU2111
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 184


 6274              		.loc 1 2436 5 is_stmt 0 view .LVU2112
 6275 0026 0546     		mov	r5, r0
 6276 0028 18B1     		cbz	r0, .L504
 6277              	.LVL747:
 6278              	.L487:
2437:Core/Src/ff.c **** 		INIT_BUF(dj);
2438:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
2439:Core/Src/ff.c **** 		dir = dj.dir;
2440:Core/Src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
2441:Core/Src/ff.c **** 		if (res == FR_OK) {
2442:Core/Src/ff.c **** 			if (!dir)	/* Default directory itself */
2443:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
2444:Core/Src/ff.c **** #if _FS_LOCK
2445:Core/Src/ff.c **** 			else
2446:Core/Src/ff.c **** 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2447:Core/Src/ff.c **** #endif
2448:Core/Src/ff.c **** 		}
2449:Core/Src/ff.c **** 		/* Create or Open a file */
2450:Core/Src/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
2451:Core/Src/ff.c **** 			DWORD dw, cl;
2452:Core/Src/ff.c **** 
2453:Core/Src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
2454:Core/Src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
2455:Core/Src/ff.c **** #if _FS_LOCK
2456:Core/Src/ff.c **** 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
2457:Core/Src/ff.c **** #else
2458:Core/Src/ff.c **** 					res = dir_register(&dj);
2459:Core/Src/ff.c **** #endif
2460:Core/Src/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
2461:Core/Src/ff.c **** 				dir = dj.dir;					/* New entry */
2462:Core/Src/ff.c **** 			}
2463:Core/Src/ff.c **** 			else {								/* Any object is already existing */
2464:Core/Src/ff.c **** 				if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
2465:Core/Src/ff.c **** 					res = FR_DENIED;
2466:Core/Src/ff.c **** 				} else {
2467:Core/Src/ff.c **** 					if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
2468:Core/Src/ff.c **** 						res = FR_EXIST;
2469:Core/Src/ff.c **** 				}
2470:Core/Src/ff.c **** 			}
2471:Core/Src/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
2472:Core/Src/ff.c **** 				dw = get_fattime();				/* Created time */
2473:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_CrtTime, dw);
2474:Core/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
2475:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_FileSize, 0);	/* size = 0 */
2476:Core/Src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
2477:Core/Src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
2478:Core/Src/ff.c **** 				dj.fs->wflag = 1;
2479:Core/Src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
2480:Core/Src/ff.c **** 					dw = dj.fs->winsect;
2481:Core/Src/ff.c **** 					res = remove_chain(dj.fs, cl);
2482:Core/Src/ff.c **** 					if (res == FR_OK) {
2483:Core/Src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
2484:Core/Src/ff.c **** 						res = move_window(dj.fs, dw);
2485:Core/Src/ff.c **** 					}
2486:Core/Src/ff.c **** 				}
2487:Core/Src/ff.c **** 			}
2488:Core/Src/ff.c **** 		}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 185


2489:Core/Src/ff.c **** 		else {	/* Open an existing file */
2490:Core/Src/ff.c **** 			if (res == FR_OK) {					/* Follow succeeded */
2491:Core/Src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
2492:Core/Src/ff.c **** 					res = FR_NO_FILE;
2493:Core/Src/ff.c **** 				} else {
2494:Core/Src/ff.c **** 					if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
2495:Core/Src/ff.c **** 						res = FR_DENIED;
2496:Core/Src/ff.c **** 				}
2497:Core/Src/ff.c **** 			}
2498:Core/Src/ff.c **** 		}
2499:Core/Src/ff.c **** 		if (res == FR_OK) {
2500:Core/Src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
2501:Core/Src/ff.c **** 				mode |= FA__WRITTEN;
2502:Core/Src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
2503:Core/Src/ff.c **** 			fp->dir_ptr = dir;
2504:Core/Src/ff.c **** #if _FS_LOCK
2505:Core/Src/ff.c **** 			fp->lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2506:Core/Src/ff.c **** 			if (!fp->lockid) res = FR_INT_ERR;
2507:Core/Src/ff.c **** #endif
2508:Core/Src/ff.c **** 		}
2509:Core/Src/ff.c **** 
2510:Core/Src/ff.c **** #else				/* R/O configuration */
2511:Core/Src/ff.c **** 		if (res == FR_OK) {					/* Follow succeeded */
2512:Core/Src/ff.c **** 			dir = dj.dir;
2513:Core/Src/ff.c **** 			if (!dir) {						/* Current directory itself */
2514:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
2515:Core/Src/ff.c **** 			} else {
2516:Core/Src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR)	/* It is a directory */
2517:Core/Src/ff.c **** 					res = FR_NO_FILE;
2518:Core/Src/ff.c **** 			}
2519:Core/Src/ff.c **** 		}
2520:Core/Src/ff.c **** #endif
2521:Core/Src/ff.c **** 		FREE_BUF();
2522:Core/Src/ff.c **** 
2523:Core/Src/ff.c **** 		if (res == FR_OK) {
2524:Core/Src/ff.c **** 			fp->flag = mode;					/* File access mode */
2525:Core/Src/ff.c **** 			fp->err = 0;						/* Clear error flag */
2526:Core/Src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
2527:Core/Src/ff.c **** 			fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
2528:Core/Src/ff.c **** 			fp->fptr = 0;						/* File pointer */
2529:Core/Src/ff.c **** 			fp->dsect = 0;
2530:Core/Src/ff.c **** #if _USE_FASTSEEK
2531:Core/Src/ff.c **** 			fp->cltbl = 0;						/* Normal seek mode */
2532:Core/Src/ff.c **** #endif
2533:Core/Src/ff.c **** 			fp->fs = dj.fs;	 					/* Validate file object */
2534:Core/Src/ff.c **** 			fp->id = fp->fs->id;
2535:Core/Src/ff.c **** 		}
2536:Core/Src/ff.c **** 	}
2537:Core/Src/ff.c **** 
2538:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
2539:Core/Src/ff.c **** }
 6279              		.loc 1 2539 1 view .LVU2113
 6280 002a 2846     		mov	r0, r5
 6281 002c 0EB0     		add	sp, sp, #56
 6282              	.LCFI52:
 6283              		.cfi_remember_state
 6284              		.cfi_def_cfa_offset 32
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 186


 6285              		@ sp needed
 6286 002e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 6287              	.LVL748:
 6288              	.L504:
 6289              	.LCFI53:
 6290              		.cfi_restore_state
2437:Core/Src/ff.c **** 		INIT_BUF(dj);
 6291              		.loc 1 2437 3 is_stmt 1 view .LVU2114
 6292 0032 4FF40070 		mov	r0, #512
 6293              	.LVL749:
2437:Core/Src/ff.c **** 		INIT_BUF(dj);
 6294              		.loc 1 2437 3 is_stmt 0 view .LVU2115
 6295 0036 FFF7FEFF 		bl	ff_memalloc
 6296              	.LVL750:
2437:Core/Src/ff.c **** 		INIT_BUF(dj);
 6297              		.loc 1 2437 3 is_stmt 1 view .LVU2116
 6298 003a 8146     		mov	r9, r0
 6299 003c 0028     		cmp	r0, #0
 6300 003e 00F09C80 		beq	.L497
2437:Core/Src/ff.c **** 		INIT_BUF(dj);
 6301              		.loc 1 2437 3 discriminator 2 view .LVU2117
 6302 0042 0C90     		str	r0, [sp, #48]
2437:Core/Src/ff.c **** 		INIT_BUF(dj);
 6303              		.loc 1 2437 3 discriminator 2 view .LVU2118
 6304 0044 02AB     		add	r3, sp, #8
 6305 0046 0B93     		str	r3, [sp, #44]
2437:Core/Src/ff.c **** 		INIT_BUF(dj);
 6306              		.loc 1 2437 15 discriminator 2 view .LVU2119
2438:Core/Src/ff.c **** 		dir = dj.dir;
 6307              		.loc 1 2438 3 discriminator 2 view .LVU2120
2438:Core/Src/ff.c **** 		dir = dj.dir;
 6308              		.loc 1 2438 9 is_stmt 0 discriminator 2 view .LVU2121
 6309 0048 0199     		ldr	r1, [sp, #4]
 6310 004a 05A8     		add	r0, sp, #20
 6311              	.LVL751:
2438:Core/Src/ff.c **** 		dir = dj.dir;
 6312              		.loc 1 2438 9 discriminator 2 view .LVU2122
 6313 004c FFF7FEFF 		bl	follow_path
 6314              	.LVL752:
2439:Core/Src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 6315              		.loc 1 2439 3 is_stmt 1 discriminator 2 view .LVU2123
2439:Core/Src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 6316              		.loc 1 2439 7 is_stmt 0 discriminator 2 view .LVU2124
 6317 0050 0A9F     		ldr	r7, [sp, #40]
 6318              	.LVL753:
2441:Core/Src/ff.c **** 			if (!dir)	/* Default directory itself */
 6319              		.loc 1 2441 3 is_stmt 1 discriminator 2 view .LVU2125
2441:Core/Src/ff.c **** 			if (!dir)	/* Default directory itself */
 6320              		.loc 1 2441 6 is_stmt 0 discriminator 2 view .LVU2126
 6321 0052 0546     		mov	r5, r0
 6322 0054 08B9     		cbnz	r0, .L488
2442:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
 6323              		.loc 1 2442 4 is_stmt 1 view .LVU2127
2442:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
 6324              		.loc 1 2442 7 is_stmt 0 view .LVU2128
 6325 0056 002F     		cmp	r7, #0
 6326 0058 3BD0     		beq	.L505
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 187


 6327              	.L488:
 6328              	.LVL754:
2450:Core/Src/ff.c **** 			DWORD dw, cl;
 6329              		.loc 1 2450 3 is_stmt 1 view .LVU2129
2450:Core/Src/ff.c **** 			DWORD dw, cl;
 6330              		.loc 1 2450 6 is_stmt 0 view .LVU2130
 6331 005a 14F01C0F 		tst	r4, #28
 6332 005e 7AD0     		beq	.L489
 6333              	.LBB11:
2451:Core/Src/ff.c **** 
 6334              		.loc 1 2451 4 is_stmt 1 view .LVU2131
2453:Core/Src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
 6335              		.loc 1 2453 4 view .LVU2132
2453:Core/Src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
 6336              		.loc 1 2453 7 is_stmt 0 view .LVU2133
 6337 0060 002D     		cmp	r5, #0
 6338 0062 3DD0     		beq	.L490
2454:Core/Src/ff.c **** #if _FS_LOCK
 6339              		.loc 1 2454 5 is_stmt 1 view .LVU2134
2454:Core/Src/ff.c **** #if _FS_LOCK
 6340              		.loc 1 2454 8 is_stmt 0 view .LVU2135
 6341 0064 042D     		cmp	r5, #4
 6342 0066 36D0     		beq	.L506
 6343              	.L491:
2460:Core/Src/ff.c **** 				dir = dj.dir;					/* New entry */
 6344              		.loc 1 2460 5 is_stmt 1 view .LVU2136
2460:Core/Src/ff.c **** 				dir = dj.dir;					/* New entry */
 6345              		.loc 1 2460 10 is_stmt 0 view .LVU2137
 6346 0068 48F00808 		orr	r8, r8, #8
 6347              	.LVL755:
2461:Core/Src/ff.c **** 			}
 6348              		.loc 1 2461 5 is_stmt 1 view .LVU2138
2461:Core/Src/ff.c **** 			}
 6349              		.loc 1 2461 9 is_stmt 0 view .LVU2139
 6350 006c 0A9F     		ldr	r7, [sp, #40]
 6351              	.LVL756:
 6352              	.L492:
2471:Core/Src/ff.c **** 				dw = get_fattime();				/* Created time */
 6353              		.loc 1 2471 4 is_stmt 1 view .LVU2140
2471:Core/Src/ff.c **** 				dw = get_fattime();				/* Created time */
 6354              		.loc 1 2471 7 is_stmt 0 view .LVU2141
 6355 006e 15B9     		cbnz	r5, .L493
2471:Core/Src/ff.c **** 				dw = get_fattime();				/* Created time */
 6356              		.loc 1 2471 21 discriminator 1 view .LVU2142
 6357 0070 18F0080F 		tst	r8, #8
 6358 0074 3FD1     		bne	.L507
 6359              	.LVL757:
 6360              	.L493:
2471:Core/Src/ff.c **** 				dw = get_fattime();				/* Created time */
 6361              		.loc 1 2471 21 discriminator 1 view .LVU2143
 6362              	.LBE11:
2499:Core/Src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 6363              		.loc 1 2499 3 is_stmt 1 view .LVU2144
2499:Core/Src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 6364              		.loc 1 2499 6 is_stmt 0 view .LVU2145
 6365 0076 45B9     		cbnz	r5, .L494
2500:Core/Src/ff.c **** 				mode |= FA__WRITTEN;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 188


 6366              		.loc 1 2500 4 is_stmt 1 view .LVU2146
2500:Core/Src/ff.c **** 				mode |= FA__WRITTEN;
 6367              		.loc 1 2500 7 is_stmt 0 view .LVU2147
 6368 0078 18F0080F 		tst	r8, #8
 6369 007c 01D0     		beq	.L495
2501:Core/Src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
 6370              		.loc 1 2501 5 is_stmt 1 view .LVU2148
2501:Core/Src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
 6371              		.loc 1 2501 10 is_stmt 0 view .LVU2149
 6372 007e 48F02008 		orr	r8, r8, #32
 6373              	.LVL758:
 6374              	.L495:
2502:Core/Src/ff.c **** 			fp->dir_ptr = dir;
 6375              		.loc 1 2502 4 is_stmt 1 view .LVU2150
2502:Core/Src/ff.c **** 			fp->dir_ptr = dir;
 6376              		.loc 1 2502 21 is_stmt 0 view .LVU2151
 6377 0082 059B     		ldr	r3, [sp, #20]
2502:Core/Src/ff.c **** 			fp->dir_ptr = dir;
 6378              		.loc 1 2502 24 view .LVU2152
 6379 0084 DB6A     		ldr	r3, [r3, #44]
2502:Core/Src/ff.c **** 			fp->dir_ptr = dir;
 6380              		.loc 1 2502 17 view .LVU2153
 6381 0086 F361     		str	r3, [r6, #28]
2503:Core/Src/ff.c **** #if _FS_LOCK
 6382              		.loc 1 2503 4 is_stmt 1 view .LVU2154
2503:Core/Src/ff.c **** #if _FS_LOCK
 6383              		.loc 1 2503 16 is_stmt 0 view .LVU2155
 6384 0088 3762     		str	r7, [r6, #32]
 6385              	.L494:
2521:Core/Src/ff.c **** 
 6386              		.loc 1 2521 3 is_stmt 1 view .LVU2156
 6387 008a 4846     		mov	r0, r9
 6388 008c FFF7FEFF 		bl	ff_memfree
 6389              	.LVL759:
2523:Core/Src/ff.c **** 			fp->flag = mode;					/* File access mode */
 6390              		.loc 1 2523 3 view .LVU2157
2523:Core/Src/ff.c **** 			fp->flag = mode;					/* File access mode */
 6391              		.loc 1 2523 6 is_stmt 0 view .LVU2158
 6392 0090 002D     		cmp	r5, #0
 6393 0092 CAD1     		bne	.L487
2524:Core/Src/ff.c **** 			fp->err = 0;						/* Clear error flag */
 6394              		.loc 1 2524 4 is_stmt 1 view .LVU2159
2524:Core/Src/ff.c **** 			fp->err = 0;						/* Clear error flag */
 6395              		.loc 1 2524 13 is_stmt 0 view .LVU2160
 6396 0094 86F80680 		strb	r8, [r6, #6]
2525:Core/Src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
 6397              		.loc 1 2525 4 is_stmt 1 view .LVU2161
2525:Core/Src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
 6398              		.loc 1 2525 12 is_stmt 0 view .LVU2162
 6399 0098 0024     		movs	r4, #0
 6400 009a F471     		strb	r4, [r6, #7]
2526:Core/Src/ff.c **** 			fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
 6401              		.loc 1 2526 4 is_stmt 1 view .LVU2163
2526:Core/Src/ff.c **** 			fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
 6402              		.loc 1 2526 17 is_stmt 0 view .LVU2164
 6403 009c DDF81480 		ldr	r8, [sp, #20]
 6404              	.LVL760:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 189


2526:Core/Src/ff.c **** 			fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
 6405              		.loc 1 2526 17 view .LVU2165
 6406 00a0 3946     		mov	r1, r7
 6407 00a2 4046     		mov	r0, r8
 6408 00a4 FFF7FEFF 		bl	ld_clust
 6409              	.LVL761:
2526:Core/Src/ff.c **** 			fp->fsize = LD_DWORD(dir+DIR_FileSize);	/* File size */
 6410              		.loc 1 2526 15 view .LVU2166
 6411 00a8 3061     		str	r0, [r6, #16]
2527:Core/Src/ff.c **** 			fp->fptr = 0;						/* File pointer */
 6412              		.loc 1 2527 4 is_stmt 1 view .LVU2167
2527:Core/Src/ff.c **** 			fp->fptr = 0;						/* File pointer */
 6413              		.loc 1 2527 16 is_stmt 0 view .LVU2168
 6414 00aa FA7F     		ldrb	r2, [r7, #31]	@ zero_extendqisi2
 6415 00ac BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 6416 00ae 1B04     		lsls	r3, r3, #16
 6417 00b0 43EA0263 		orr	r3, r3, r2, lsl #24
 6418 00b4 7A7F     		ldrb	r2, [r7, #29]	@ zero_extendqisi2
 6419 00b6 43EA0223 		orr	r3, r3, r2, lsl #8
 6420 00ba 3A7F     		ldrb	r2, [r7, #28]	@ zero_extendqisi2
 6421 00bc 1343     		orrs	r3, r3, r2
2527:Core/Src/ff.c **** 			fp->fptr = 0;						/* File pointer */
 6422              		.loc 1 2527 14 view .LVU2169
 6423 00be F360     		str	r3, [r6, #12]
2528:Core/Src/ff.c **** 			fp->dsect = 0;
 6424              		.loc 1 2528 4 is_stmt 1 view .LVU2170
2528:Core/Src/ff.c **** 			fp->dsect = 0;
 6425              		.loc 1 2528 13 is_stmt 0 view .LVU2171
 6426 00c0 B460     		str	r4, [r6, #8]
2529:Core/Src/ff.c **** #if _USE_FASTSEEK
 6427              		.loc 1 2529 4 is_stmt 1 view .LVU2172
2529:Core/Src/ff.c **** #if _USE_FASTSEEK
 6428              		.loc 1 2529 14 is_stmt 0 view .LVU2173
 6429 00c2 B461     		str	r4, [r6, #24]
2531:Core/Src/ff.c **** #endif
 6430              		.loc 1 2531 4 is_stmt 1 view .LVU2174
2531:Core/Src/ff.c **** #endif
 6431              		.loc 1 2531 14 is_stmt 0 view .LVU2175
 6432 00c4 7462     		str	r4, [r6, #36]
2533:Core/Src/ff.c **** 			fp->id = fp->fs->id;
 6433              		.loc 1 2533 4 is_stmt 1 view .LVU2176
2533:Core/Src/ff.c **** 			fp->id = fp->fs->id;
 6434              		.loc 1 2533 11 is_stmt 0 view .LVU2177
 6435 00c6 C6F80080 		str	r8, [r6]
2534:Core/Src/ff.c **** 		}
 6436              		.loc 1 2534 4 is_stmt 1 view .LVU2178
2534:Core/Src/ff.c **** 		}
 6437              		.loc 1 2534 19 is_stmt 0 view .LVU2179
 6438 00ca B8F80630 		ldrh	r3, [r8, #6]
2534:Core/Src/ff.c **** 		}
 6439              		.loc 1 2534 11 view .LVU2180
 6440 00ce B380     		strh	r3, [r6, #4]	@ movhi
 6441 00d0 ABE7     		b	.L487
 6442              	.LVL762:
 6443              	.L505:
2443:Core/Src/ff.c **** #if _FS_LOCK
 6444              		.loc 1 2443 9 view .LVU2181
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 190


 6445 00d2 0625     		movs	r5, #6
 6446 00d4 C1E7     		b	.L488
 6447              	.LVL763:
 6448              	.L506:
 6449              	.LBB12:
2458:Core/Src/ff.c **** #endif
 6450              		.loc 1 2458 6 is_stmt 1 view .LVU2182
2458:Core/Src/ff.c **** #endif
 6451              		.loc 1 2458 12 is_stmt 0 view .LVU2183
 6452 00d6 05A8     		add	r0, sp, #20
 6453 00d8 FFF7FEFF 		bl	dir_register
 6454              	.LVL764:
 6455 00dc 0546     		mov	r5, r0
 6456              	.LVL765:
2458:Core/Src/ff.c **** #endif
 6457              		.loc 1 2458 12 view .LVU2184
 6458 00de C3E7     		b	.L491
 6459              	.L490:
2464:Core/Src/ff.c **** 					res = FR_DENIED;
 6460              		.loc 1 2464 5 is_stmt 1 view .LVU2185
2464:Core/Src/ff.c **** 					res = FR_DENIED;
 6461              		.loc 1 2464 12 is_stmt 0 view .LVU2186
 6462 00e0 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
2464:Core/Src/ff.c **** 					res = FR_DENIED;
 6463              		.loc 1 2464 8 view .LVU2187
 6464 00e2 13F0110F 		tst	r3, #17
 6465 00e6 04D1     		bne	.L499
2467:Core/Src/ff.c **** 						res = FR_EXIST;
 6466              		.loc 1 2467 6 is_stmt 1 view .LVU2188
2467:Core/Src/ff.c **** 						res = FR_EXIST;
 6467              		.loc 1 2467 9 is_stmt 0 view .LVU2189
 6468 00e8 14F0040F 		tst	r4, #4
 6469 00ec BFD0     		beq	.L492
2468:Core/Src/ff.c **** 				}
 6470              		.loc 1 2468 11 view .LVU2190
 6471 00ee 0825     		movs	r5, #8
 6472              	.LVL766:
2468:Core/Src/ff.c **** 				}
 6473              		.loc 1 2468 11 view .LVU2191
 6474 00f0 BDE7     		b	.L492
 6475              	.LVL767:
 6476              	.L499:
2465:Core/Src/ff.c **** 				} else {
 6477              		.loc 1 2465 10 view .LVU2192
 6478 00f2 0725     		movs	r5, #7
 6479              	.LVL768:
2465:Core/Src/ff.c **** 				} else {
 6480              		.loc 1 2465 10 view .LVU2193
 6481 00f4 BBE7     		b	.L492
 6482              	.LVL769:
 6483              	.L507:
2472:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_CrtTime, dw);
 6484              		.loc 1 2472 5 is_stmt 1 view .LVU2194
2472:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_CrtTime, dw);
 6485              		.loc 1 2472 10 is_stmt 0 view .LVU2195
 6486 00f6 FFF7FEFF 		bl	get_fattime
 6487              	.LVL770:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 191


2473:Core/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 6488              		.loc 1 2473 5 is_stmt 1 view .LVU2196
 6489 00fa B873     		strb	r0, [r7, #14]
2473:Core/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 6490              		.loc 1 2473 5 view .LVU2197
 6491 00fc C0F30723 		ubfx	r3, r0, #8, #8
 6492 0100 FB73     		strb	r3, [r7, #15]
2473:Core/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 6493              		.loc 1 2473 5 view .LVU2198
 6494 0102 C0F30743 		ubfx	r3, r0, #16, #8
 6495 0106 3B74     		strb	r3, [r7, #16]
2473:Core/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 6496              		.loc 1 2473 5 view .LVU2199
 6497 0108 000E     		lsrs	r0, r0, #24
 6498              	.LVL771:
2473:Core/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 6499              		.loc 1 2473 5 is_stmt 0 view .LVU2200
 6500 010a 7874     		strb	r0, [r7, #17]
2474:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_FileSize, 0);	/* size = 0 */
 6501              		.loc 1 2474 5 is_stmt 1 view .LVU2201
2474:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_FileSize, 0);	/* size = 0 */
 6502              		.loc 1 2474 19 is_stmt 0 view .LVU2202
 6503 010c 0024     		movs	r4, #0
 6504 010e FC72     		strb	r4, [r7, #11]
2475:Core/Src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
 6505              		.loc 1 2475 5 is_stmt 1 view .LVU2203
 6506 0110 3C77     		strb	r4, [r7, #28]
2475:Core/Src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
 6507              		.loc 1 2475 5 view .LVU2204
 6508 0112 7C77     		strb	r4, [r7, #29]
2475:Core/Src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
 6509              		.loc 1 2475 5 view .LVU2205
 6510 0114 BC77     		strb	r4, [r7, #30]
2475:Core/Src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
 6511              		.loc 1 2475 5 view .LVU2206
 6512 0116 FC77     		strb	r4, [r7, #31]
2476:Core/Src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
 6513              		.loc 1 2476 5 view .LVU2207
2476:Core/Src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
 6514              		.loc 1 2476 10 is_stmt 0 view .LVU2208
 6515 0118 3946     		mov	r1, r7
 6516 011a 0598     		ldr	r0, [sp, #20]
 6517 011c FFF7FEFF 		bl	ld_clust
 6518              	.LVL772:
 6519 0120 8246     		mov	r10, r0
 6520              	.LVL773:
2477:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 6521              		.loc 1 2477 5 is_stmt 1 view .LVU2209
 6522 0122 2146     		mov	r1, r4
 6523 0124 3846     		mov	r0, r7
 6524              	.LVL774:
2477:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 6525              		.loc 1 2477 5 is_stmt 0 view .LVU2210
 6526 0126 FFF7FEFF 		bl	st_clust
 6527              	.LVL775:
2478:Core/Src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
 6528              		.loc 1 2478 5 is_stmt 1 view .LVU2211
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 192


2478:Core/Src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
 6529              		.loc 1 2478 7 is_stmt 0 view .LVU2212
 6530 012a 0598     		ldr	r0, [sp, #20]
2478:Core/Src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
 6531              		.loc 1 2478 18 view .LVU2213
 6532 012c 0123     		movs	r3, #1
 6533 012e 0371     		strb	r3, [r0, #4]
2479:Core/Src/ff.c **** 					dw = dj.fs->winsect;
 6534              		.loc 1 2479 5 is_stmt 1 view .LVU2214
2479:Core/Src/ff.c **** 					dw = dj.fs->winsect;
 6535              		.loc 1 2479 8 is_stmt 0 view .LVU2215
 6536 0130 BAF1000F 		cmp	r10, #0
 6537 0134 9FD0     		beq	.L493
2480:Core/Src/ff.c **** 					res = remove_chain(dj.fs, cl);
 6538              		.loc 1 2480 6 is_stmt 1 view .LVU2216
2480:Core/Src/ff.c **** 					res = remove_chain(dj.fs, cl);
 6539              		.loc 1 2480 9 is_stmt 0 view .LVU2217
 6540 0136 C46A     		ldr	r4, [r0, #44]
 6541              	.LVL776:
2481:Core/Src/ff.c **** 					if (res == FR_OK) {
 6542              		.loc 1 2481 6 is_stmt 1 view .LVU2218
2481:Core/Src/ff.c **** 					if (res == FR_OK) {
 6543              		.loc 1 2481 12 is_stmt 0 view .LVU2219
 6544 0138 5146     		mov	r1, r10
 6545 013a FFF7FEFF 		bl	remove_chain
 6546              	.LVL777:
2482:Core/Src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
 6547              		.loc 1 2482 6 is_stmt 1 view .LVU2220
2482:Core/Src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
 6548              		.loc 1 2482 9 is_stmt 0 view .LVU2221
 6549 013e 0546     		mov	r5, r0
 6550 0140 0028     		cmp	r0, #0
 6551 0142 98D1     		bne	.L493
2483:Core/Src/ff.c **** 						res = move_window(dj.fs, dw);
 6552              		.loc 1 2483 7 is_stmt 1 view .LVU2222
2483:Core/Src/ff.c **** 						res = move_window(dj.fs, dw);
 6553              		.loc 1 2483 9 is_stmt 0 view .LVU2223
 6554 0144 0598     		ldr	r0, [sp, #20]
 6555              	.LVL778:
2483:Core/Src/ff.c **** 						res = move_window(dj.fs, dw);
 6556              		.loc 1 2483 30 view .LVU2224
 6557 0146 0AF1FF33 		add	r3, r10, #-1
2483:Core/Src/ff.c **** 						res = move_window(dj.fs, dw);
 6558              		.loc 1 2483 25 view .LVU2225
 6559 014a C360     		str	r3, [r0, #12]
2484:Core/Src/ff.c **** 					}
 6560              		.loc 1 2484 7 is_stmt 1 view .LVU2226
2484:Core/Src/ff.c **** 					}
 6561              		.loc 1 2484 13 is_stmt 0 view .LVU2227
 6562 014c 2146     		mov	r1, r4
 6563 014e FFF7FEFF 		bl	move_window
 6564              	.LVL779:
 6565 0152 0546     		mov	r5, r0
 6566              	.LVL780:
2484:Core/Src/ff.c **** 					}
 6567              		.loc 1 2484 13 view .LVU2228
 6568 0154 8FE7     		b	.L493
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 193


 6569              	.LVL781:
 6570              	.L489:
2484:Core/Src/ff.c **** 					}
 6571              		.loc 1 2484 13 view .LVU2229
 6572              	.LBE12:
2490:Core/Src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
 6573              		.loc 1 2490 4 is_stmt 1 view .LVU2230
2490:Core/Src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
 6574              		.loc 1 2490 7 is_stmt 0 view .LVU2231
 6575 0156 002D     		cmp	r5, #0
 6576 0158 8DD1     		bne	.L493
2491:Core/Src/ff.c **** 					res = FR_NO_FILE;
 6577              		.loc 1 2491 5 is_stmt 1 view .LVU2232
2491:Core/Src/ff.c **** 					res = FR_NO_FILE;
 6578              		.loc 1 2491 12 is_stmt 0 view .LVU2233
 6579 015a FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
2491:Core/Src/ff.c **** 					res = FR_NO_FILE;
 6580              		.loc 1 2491 8 view .LVU2234
 6581 015c 13F0100F 		tst	r3, #16
 6582 0160 07D1     		bne	.L501
2494:Core/Src/ff.c **** 						res = FR_DENIED;
 6583              		.loc 1 2494 6 is_stmt 1 view .LVU2235
2494:Core/Src/ff.c **** 						res = FR_DENIED;
 6584              		.loc 1 2494 9 is_stmt 0 view .LVU2236
 6585 0162 14F0020F 		tst	r4, #2
 6586 0166 86D0     		beq	.L493
2494:Core/Src/ff.c **** 						res = FR_DENIED;
 6587              		.loc 1 2494 28 discriminator 1 view .LVU2237
 6588 0168 13F0010F 		tst	r3, #1
 6589 016c 83D0     		beq	.L493
2495:Core/Src/ff.c **** 				}
 6590              		.loc 1 2495 11 view .LVU2238
 6591 016e 0725     		movs	r5, #7
 6592              	.LVL782:
2495:Core/Src/ff.c **** 				}
 6593              		.loc 1 2495 11 view .LVU2239
 6594 0170 81E7     		b	.L493
 6595              	.LVL783:
 6596              	.L501:
2492:Core/Src/ff.c **** 				} else {
 6597              		.loc 1 2492 10 view .LVU2240
 6598 0172 0425     		movs	r5, #4
 6599              	.LVL784:
2492:Core/Src/ff.c **** 				} else {
 6600              		.loc 1 2492 10 view .LVU2241
 6601 0174 7FE7     		b	.L493
 6602              	.LVL785:
 6603              	.L496:
2425:Core/Src/ff.c **** 	fp->fs = 0;			/* Clear file object */
 6604              		.loc 1 2425 18 view .LVU2242
 6605 0176 0925     		movs	r5, #9
 6606 0178 57E7     		b	.L487
 6607              	.LVL786:
 6608              	.L497:
2437:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 6609              		.loc 1 2437 3 view .LVU2243
 6610 017a 1125     		movs	r5, #17
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 194


 6611 017c 55E7     		b	.L487
 6612              		.cfi_endproc
 6613              	.LFE35:
 6615              		.section	.text.f_read,"ax",%progbits
 6616              		.align	1
 6617              		.global	f_read
 6618              		.syntax unified
 6619              		.thumb
 6620              		.thumb_func
 6621              		.fpu fpv4-sp-d16
 6623              	f_read:
 6624              	.LVL787:
 6625              	.LFB36:
2540:Core/Src/ff.c **** 
2541:Core/Src/ff.c **** 
2542:Core/Src/ff.c **** 
2543:Core/Src/ff.c **** 
2544:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2545:Core/Src/ff.c **** /* Read File                                                             */
2546:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2547:Core/Src/ff.c **** 
2548:Core/Src/ff.c **** FRESULT f_read (
2549:Core/Src/ff.c **** 	FIL* fp, 		/* Pointer to the file object */
2550:Core/Src/ff.c **** 	void* buff,		/* Pointer to data buffer */
2551:Core/Src/ff.c **** 	UINT btr,		/* Number of bytes to read */
2552:Core/Src/ff.c **** 	UINT* br		/* Pointer to number of bytes read */
2553:Core/Src/ff.c **** )
2554:Core/Src/ff.c **** {
 6626              		.loc 1 2554 1 is_stmt 1 view -0
 6627              		.cfi_startproc
 6628              		@ args = 0, pretend = 0, frame = 8
 6629              		@ frame_needed = 0, uses_anonymous_args = 0
 6630              		.loc 1 2554 1 is_stmt 0 view .LVU2245
 6631 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6632              	.LCFI54:
 6633              		.cfi_def_cfa_offset 36
 6634              		.cfi_offset 4, -36
 6635              		.cfi_offset 5, -32
 6636              		.cfi_offset 6, -28
 6637              		.cfi_offset 7, -24
 6638              		.cfi_offset 8, -20
 6639              		.cfi_offset 9, -16
 6640              		.cfi_offset 10, -12
 6641              		.cfi_offset 11, -8
 6642              		.cfi_offset 14, -4
 6643 0004 83B0     		sub	sp, sp, #12
 6644              	.LCFI55:
 6645              		.cfi_def_cfa_offset 48
 6646 0006 0446     		mov	r4, r0
 6647 0008 0F46     		mov	r7, r1
 6648 000a 1646     		mov	r6, r2
 6649 000c 9846     		mov	r8, r3
2555:Core/Src/ff.c **** 	FRESULT res;
 6650              		.loc 1 2555 2 is_stmt 1 view .LVU2246
2556:Core/Src/ff.c **** 	DWORD clst, sect, remain;
 6651              		.loc 1 2556 2 view .LVU2247
2557:Core/Src/ff.c **** 	UINT rcnt, cc;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 195


 6652              		.loc 1 2557 2 view .LVU2248
2558:Core/Src/ff.c **** 	BYTE csect, *rbuff = (BYTE*)buff;
 6653              		.loc 1 2558 2 view .LVU2249
 6654              	.LVL788:
2559:Core/Src/ff.c **** 
2560:Core/Src/ff.c **** 
2561:Core/Src/ff.c **** 	*br = 0;	/* Clear read byte counter */
 6655              		.loc 1 2561 2 view .LVU2250
 6656              		.loc 1 2561 6 is_stmt 0 view .LVU2251
 6657 000e 0023     		movs	r3, #0
 6658              	.LVL789:
 6659              		.loc 1 2561 6 view .LVU2252
 6660 0010 C8F80030 		str	r3, [r8]
2562:Core/Src/ff.c **** 
2563:Core/Src/ff.c **** 	res = validate(fp);							/* Check validity */
 6661              		.loc 1 2563 2 is_stmt 1 view .LVU2253
 6662              		.loc 1 2563 8 is_stmt 0 view .LVU2254
 6663 0014 FFF7FEFF 		bl	validate
 6664              	.LVL790:
2564:Core/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 6665              		.loc 1 2564 2 is_stmt 1 view .LVU2255
 6666              		.loc 1 2564 5 is_stmt 0 view .LVU2256
 6667 0018 0190     		str	r0, [sp, #4]
 6668 001a 0028     		cmp	r0, #0
 6669 001c 40F0BB80 		bne	.L509
2565:Core/Src/ff.c **** 	if (fp->err)								/* Check error */
 6670              		.loc 1 2565 2 is_stmt 1 view .LVU2257
 6671              		.loc 1 2565 8 is_stmt 0 view .LVU2258
 6672 0020 E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
 6673 0022 0193     		str	r3, [sp, #4]
 6674              		.loc 1 2565 5 view .LVU2259
 6675 0024 002B     		cmp	r3, #0
 6676 0026 40F0B680 		bne	.L509
2566:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2567:Core/Src/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 6677              		.loc 1 2567 2 is_stmt 1 view .LVU2260
 6678              		.loc 1 2567 10 is_stmt 0 view .LVU2261
 6679 002a A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 6680              		.loc 1 2567 5 view .LVU2262
 6681 002c 13F0010F 		tst	r3, #1
 6682 0030 00F0C380 		beq	.L531
2568:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2569:Core/Src/ff.c **** 	remain = fp->fsize - fp->fptr;
 6683              		.loc 1 2569 2 is_stmt 1 view .LVU2263
 6684              		.loc 1 2569 13 is_stmt 0 view .LVU2264
 6685 0034 E568     		ldr	r5, [r4, #12]
 6686              		.loc 1 2569 25 view .LVU2265
 6687 0036 A368     		ldr	r3, [r4, #8]
 6688              		.loc 1 2569 9 view .LVU2266
 6689 0038 ED1A     		subs	r5, r5, r3
 6690              	.LVL791:
2570:Core/Src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 6691              		.loc 1 2570 2 is_stmt 1 view .LVU2267
 6692              		.loc 1 2570 5 is_stmt 0 view .LVU2268
 6693 003a B542     		cmp	r5, r6
 6694 003c 6DD3     		bcc	.L529
 6695 003e 3546     		mov	r5, r6
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 196


 6696              	.LVL792:
 6697              		.loc 1 2570 5 view .LVU2269
 6698 0040 6BE0     		b	.L529
 6699              	.LVL793:
 6700              	.L514:
2571:Core/Src/ff.c **** 
2572:Core/Src/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
2573:Core/Src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
2574:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
2575:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2576:Core/Src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
2577:Core/Src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
2578:Core/Src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
2579:Core/Src/ff.c **** 				} else {						/* Middle or end of the file */
2580:Core/Src/ff.c **** #if _USE_FASTSEEK
2581:Core/Src/ff.c **** 					if (fp->cltbl)
 6701              		.loc 1 2581 6 is_stmt 1 view .LVU2270
 6702              		.loc 1 2581 12 is_stmt 0 view .LVU2271
 6703 0042 636A     		ldr	r3, [r4, #36]
 6704              		.loc 1 2581 9 view .LVU2272
 6705 0044 1BB1     		cbz	r3, .L516
2582:Core/Src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6706              		.loc 1 2582 7 is_stmt 1 view .LVU2273
 6707              		.loc 1 2582 14 is_stmt 0 view .LVU2274
 6708 0046 2046     		mov	r0, r4
 6709 0048 FFF7FEFF 		bl	clmt_clust
 6710              	.LVL794:
 6711              		.loc 1 2582 14 view .LVU2275
 6712 004c 76E0     		b	.L515
 6713              	.LVL795:
 6714              	.L516:
2583:Core/Src/ff.c **** 					else
2584:Core/Src/ff.c **** #endif
2585:Core/Src/ff.c **** 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
 6715              		.loc 1 2585 7 is_stmt 1 view .LVU2276
 6716              		.loc 1 2585 14 is_stmt 0 view .LVU2277
 6717 004e 6169     		ldr	r1, [r4, #20]
 6718 0050 FFF7FEFF 		bl	get_fat
 6719              	.LVL796:
 6720              		.loc 1 2585 14 view .LVU2278
 6721 0054 72E0     		b	.L515
 6722              	.L538:
2586:Core/Src/ff.c **** 				}
2587:Core/Src/ff.c **** 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
 6723              		.loc 1 2587 19 is_stmt 1 discriminator 1 view .LVU2279
 6724 0056 4FF0020A 		mov	r10, #2
 6725 005a 84F807A0 		strb	r10, [r4, #7]
 6726              		.loc 1 2587 19 discriminator 1 view .LVU2280
 6727 005e CDF804A0 		str	r10, [sp, #4]
 6728 0062 98E0     		b	.L509
 6729              	.L539:
2588:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6730              		.loc 1 2588 29 discriminator 1 view .LVU2281
 6731 0064 4FF0010A 		mov	r10, #1
 6732 0068 84F807A0 		strb	r10, [r4, #7]
 6733              		.loc 1 2588 29 discriminator 1 view .LVU2282
 6734 006c CDF804A0 		str	r10, [sp, #4]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 197


 6735 0070 91E0     		b	.L509
 6736              	.LVL797:
 6737              	.L540:
2589:Core/Src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
2590:Core/Src/ff.c **** 			}
2591:Core/Src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2592:Core/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 6738              		.loc 1 2592 15 discriminator 1 view .LVU2283
 6739 0072 4FF0020A 		mov	r10, #2
 6740 0076 84F807A0 		strb	r10, [r4, #7]
 6741              		.loc 1 2592 15 discriminator 1 view .LVU2284
 6742 007a CDF804A0 		str	r10, [sp, #4]
 6743 007e 8AE0     		b	.L509
 6744              	.LVL798:
 6745              	.L522:
2593:Core/Src/ff.c **** 			sect += csect;
2594:Core/Src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
2595:Core/Src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
2596:Core/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2597:Core/Src/ff.c **** 					cc = fp->fs->csize - csect;
2598:Core/Src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc))
2599:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 6746              		.loc 1 2599 32 view .LVU2285
2600:Core/Src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
2601:Core/Src/ff.c **** #if _FS_TINY
2602:Core/Src/ff.c **** 				if (fp->fs->wflag && fp->fs->winsect - sect < cc)
2603:Core/Src/ff.c **** 					mem_cpy(rbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), fp->fs->win, SS(fp->fs));
2604:Core/Src/ff.c **** #else
2605:Core/Src/ff.c **** 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
 6747              		.loc 1 2605 5 view .LVU2286
 6748              		.loc 1 2605 12 is_stmt 0 view .LVU2287
 6749 0080 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 6750              		.loc 1 2605 8 view .LVU2288
 6751 0082 13F0400F 		tst	r3, #64
 6752 0086 04D0     		beq	.L523
 6753              		.loc 1 2605 37 discriminator 1 view .LVU2289
 6754 0088 A069     		ldr	r0, [r4, #24]
 6755              		.loc 1 2605 45 discriminator 1 view .LVU2290
 6756 008a A0EB0900 		sub	r0, r0, r9
 6757              		.loc 1 2605 32 discriminator 1 view .LVU2291
 6758 008e 5045     		cmp	r0, r10
 6759 0090 02D3     		bcc	.L535
 6760              	.L523:
2606:Core/Src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf, SS(fp->fs));
2607:Core/Src/ff.c **** #endif
2608:Core/Src/ff.c **** #endif
2609:Core/Src/ff.c **** 				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
 6761              		.loc 1 2609 5 is_stmt 1 view .LVU2292
 6762              		.loc 1 2609 10 is_stmt 0 view .LVU2293
 6763 0092 4FEA4A26 		lsl	r6, r10, #9
 6764              	.LVL799:
2610:Core/Src/ff.c **** 				continue;
 6765              		.loc 1 2610 5 is_stmt 1 view .LVU2294
 6766 0096 36E0     		b	.L524
 6767              	.LVL800:
 6768              	.L535:
2606:Core/Src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf, SS(fp->fs));
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 198


 6769              		.loc 1 2606 6 view .LVU2295
 6770 0098 4FF40072 		mov	r2, #512
 6771 009c 04F12801 		add	r1, r4, #40
 6772 00a0 07EB4020 		add	r0, r7, r0, lsl #9
 6773 00a4 FFF7FEFF 		bl	mem_cpy
 6774              	.LVL801:
 6775 00a8 F3E7     		b	.L523
 6776              	.L520:
2611:Core/Src/ff.c **** 			}
2612:Core/Src/ff.c **** #if !_FS_TINY
2613:Core/Src/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
 6777              		.loc 1 2613 4 view .LVU2296
 6778              		.loc 1 2613 10 is_stmt 0 view .LVU2297
 6779 00aa A269     		ldr	r2, [r4, #24]
 6780              		.loc 1 2613 7 view .LVU2298
 6781 00ac 4A45     		cmp	r2, r9
 6782 00ae 1AD0     		beq	.L525
2614:Core/Src/ff.c **** #if !_FS_READONLY
2615:Core/Src/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
 6783              		.loc 1 2615 5 is_stmt 1 view .LVU2299
 6784              		.loc 1 2615 11 is_stmt 0 view .LVU2300
 6785 00b0 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 6786              		.loc 1 2615 8 view .LVU2301
 6787 00b2 13F0400F 		tst	r3, #64
 6788 00b6 0CD0     		beq	.L526
2616:Core/Src/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 6789              		.loc 1 2616 6 is_stmt 1 view .LVU2302
 6790              		.loc 1 2616 10 is_stmt 0 view .LVU2303
 6791 00b8 0123     		movs	r3, #1
 6792 00ba 04F12801 		add	r1, r4, #40
 6793 00be 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6794 00c2 FFF7FEFF 		bl	disk_write
 6795              	.LVL802:
 6796              		.loc 1 2616 9 view .LVU2304
 6797 00c6 0028     		cmp	r0, #0
 6798 00c8 69D1     		bne	.L536
2617:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 6799              		.loc 1 2617 33 is_stmt 1 view .LVU2305
2618:Core/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 6800              		.loc 1 2618 6 view .LVU2306
 6801              		.loc 1 2618 15 is_stmt 0 view .LVU2307
 6802 00ca A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 6803 00cc 23F04003 		bic	r3, r3, #64
 6804 00d0 A371     		strb	r3, [r4, #6]
 6805              	.L526:
2619:Core/Src/ff.c **** 				}
2620:Core/Src/ff.c **** #endif
2621:Core/Src/ff.c **** 				if (disk_read(fp->fs->drv, fp->buf, sect, 1))	/* Fill sector cache */
 6806              		.loc 1 2621 5 is_stmt 1 view .LVU2308
 6807              		.loc 1 2621 21 is_stmt 0 view .LVU2309
 6808 00d2 2146     		mov	r1, r4
 6809 00d4 51F8280B 		ldr	r0, [r1], #40
 6810              		.loc 1 2621 9 view .LVU2310
 6811 00d8 0123     		movs	r3, #1
 6812 00da 4A46     		mov	r2, r9
 6813 00dc 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 6814 00de FFF7FEFF 		bl	disk_read
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 199


 6815              	.LVL803:
 6816              		.loc 1 2621 8 view .LVU2311
 6817 00e2 0028     		cmp	r0, #0
 6818 00e4 62D1     		bne	.L537
 6819              	.L525:
2622:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 6820              		.loc 1 2622 32 is_stmt 1 view .LVU2312
2623:Core/Src/ff.c **** 			}
2624:Core/Src/ff.c **** #endif
2625:Core/Src/ff.c **** 			fp->dsect = sect;
 6821              		.loc 1 2625 4 view .LVU2313
 6822              		.loc 1 2625 14 is_stmt 0 view .LVU2314
 6823 00e6 C4F81890 		str	r9, [r4, #24]
 6824              	.LVL804:
 6825              	.L512:
2626:Core/Src/ff.c **** 		}
2627:Core/Src/ff.c **** 		rcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer 
 6826              		.loc 1 2627 3 is_stmt 1 view .LVU2315
 6827              		.loc 1 2627 32 is_stmt 0 view .LVU2316
 6828 00ea A168     		ldr	r1, [r4, #8]
 6829              		.loc 1 2627 39 view .LVU2317
 6830 00ec C1F30801 		ubfx	r1, r1, #0, #9
 6831              		.loc 1 2627 8 view .LVU2318
 6832 00f0 C1F50076 		rsb	r6, r1, #512
 6833              	.LVL805:
2628:Core/Src/ff.c **** 		if (rcnt > btr) rcnt = btr;
 6834              		.loc 1 2628 3 is_stmt 1 view .LVU2319
 6835              		.loc 1 2628 6 is_stmt 0 view .LVU2320
 6836 00f4 B542     		cmp	r5, r6
 6837 00f6 00D2     		bcs	.L528
 6838              		.loc 1 2628 24 view .LVU2321
 6839 00f8 2E46     		mov	r6, r5
 6840              	.LVL806:
 6841              	.L528:
2629:Core/Src/ff.c **** #if _FS_TINY
2630:Core/Src/ff.c **** 		if (move_window(fp->fs, fp->dsect))		/* Move sector window */
2631:Core/Src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2632:Core/Src/ff.c **** 		mem_cpy(rbuff, &fp->fs->win[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2633:Core/Src/ff.c **** #else
2634:Core/Src/ff.c **** 		mem_cpy(rbuff, &fp->buf[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
 6842              		.loc 1 2634 3 is_stmt 1 view .LVU2322
 6843              		.loc 1 2634 18 is_stmt 0 view .LVU2323
 6844 00fa 2831     		adds	r1, r1, #40
 6845              		.loc 1 2634 3 view .LVU2324
 6846 00fc 3246     		mov	r2, r6
 6847 00fe 2144     		add	r1, r1, r4
 6848 0100 3846     		mov	r0, r7
 6849 0102 FFF7FEFF 		bl	mem_cpy
 6850              	.LVL807:
 6851              	.L524:
2573:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 6852              		.loc 1 2573 3 is_stmt 1 view .LVU2325
2573:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 6853              		.loc 1 2573 9 is_stmt 0 view .LVU2326
 6854 0106 3744     		add	r7, r7, r6
 6855              	.LVL808:
2573:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 200


 6856              		.loc 1 2573 27 view .LVU2327
 6857 0108 A368     		ldr	r3, [r4, #8]
 6858 010a 3344     		add	r3, r3, r6
 6859 010c A360     		str	r3, [r4, #8]
2573:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 6860              		.loc 1 2573 40 view .LVU2328
 6861 010e D8F80030 		ldr	r3, [r8]
 6862 0112 3344     		add	r3, r3, r6
 6863 0114 C8F80030 		str	r3, [r8]
2573:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 6864              		.loc 1 2573 53 view .LVU2329
 6865 0118 AD1B     		subs	r5, r5, r6
 6866              	.LVL809:
 6867              	.L529:
2572:Core/Src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 6868              		.loc 1 2572 11 is_stmt 1 view .LVU2330
2572:Core/Src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 6869              		.loc 1 2572 2 is_stmt 0 view .LVU2331
 6870 011a 002D     		cmp	r5, #0
 6871 011c 3BD0     		beq	.L509
2574:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 6872              		.loc 1 2574 3 is_stmt 1 view .LVU2332
2574:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 6873              		.loc 1 2574 10 is_stmt 0 view .LVU2333
 6874 011e A168     		ldr	r1, [r4, #8]
2574:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 6875              		.loc 1 2574 17 view .LVU2334
 6876 0120 C1F30803 		ubfx	r3, r1, #0, #9
2574:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 6877              		.loc 1 2574 6 view .LVU2335
 6878 0124 002B     		cmp	r3, #0
 6879 0126 E0D1     		bne	.L512
2575:Core/Src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 6880              		.loc 1 2575 4 is_stmt 1 view .LVU2336
2575:Core/Src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 6881              		.loc 1 2575 46 is_stmt 0 view .LVU2337
 6882 0128 2068     		ldr	r0, [r4]
2575:Core/Src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 6883              		.loc 1 2575 50 view .LVU2338
 6884 012a 8678     		ldrb	r6, [r0, #2]	@ zero_extendqisi2
2575:Core/Src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 6885              		.loc 1 2575 58 view .LVU2339
 6886 012c 013E     		subs	r6, r6, #1
 6887 012e F6B2     		uxtb	r6, r6
 6888              	.LVL810:
2576:Core/Src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 6889              		.loc 1 2576 4 is_stmt 1 view .LVU2340
2576:Core/Src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 6890              		.loc 1 2576 7 is_stmt 0 view .LVU2341
 6891 0130 16EA5126 		ands	r6, r6, r1, lsr #9
 6892              	.LVL811:
2576:Core/Src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 6893              		.loc 1 2576 7 view .LVU2342
 6894 0134 08D1     		bne	.L513
2577:Core/Src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
 6895              		.loc 1 2577 5 is_stmt 1 view .LVU2343
2577:Core/Src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 201


 6896              		.loc 1 2577 8 is_stmt 0 view .LVU2344
 6897 0136 0029     		cmp	r1, #0
 6898 0138 83D1     		bne	.L514
2578:Core/Src/ff.c **** 				} else {						/* Middle or end of the file */
 6899              		.loc 1 2578 6 is_stmt 1 view .LVU2345
2578:Core/Src/ff.c **** 				} else {						/* Middle or end of the file */
 6900              		.loc 1 2578 11 is_stmt 0 view .LVU2346
 6901 013a 2069     		ldr	r0, [r4, #16]
 6902              	.LVL812:
 6903              	.L515:
2587:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6904              		.loc 1 2587 5 is_stmt 1 view .LVU2347
2587:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6905              		.loc 1 2587 8 is_stmt 0 view .LVU2348
 6906 013c 0128     		cmp	r0, #1
 6907 013e 8AD9     		bls	.L538
2587:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6908              		.loc 1 2587 44 is_stmt 1 discriminator 2 view .LVU2349
2588:Core/Src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6909              		.loc 1 2588 5 discriminator 2 view .LVU2350
2588:Core/Src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6910              		.loc 1 2588 8 is_stmt 0 discriminator 2 view .LVU2351
 6911 0140 B0F1FF3F 		cmp	r0, #-1
 6912 0144 8ED0     		beq	.L539
2588:Core/Src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6913              		.loc 1 2588 55 is_stmt 1 discriminator 2 view .LVU2352
2589:Core/Src/ff.c **** 			}
 6914              		.loc 1 2589 5 discriminator 2 view .LVU2353
2589:Core/Src/ff.c **** 			}
 6915              		.loc 1 2589 15 is_stmt 0 discriminator 2 view .LVU2354
 6916 0146 6061     		str	r0, [r4, #20]
 6917              	.LVL813:
 6918              	.L513:
2591:Core/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 6919              		.loc 1 2591 4 is_stmt 1 view .LVU2355
2591:Core/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 6920              		.loc 1 2591 11 is_stmt 0 view .LVU2356
 6921 0148 D4F800B0 		ldr	fp, [r4]
 6922 014c 6169     		ldr	r1, [r4, #20]
 6923 014e 5846     		mov	r0, fp
 6924 0150 FFF7FEFF 		bl	clust2sect
 6925              	.LVL814:
2592:Core/Src/ff.c **** 			sect += csect;
 6926              		.loc 1 2592 4 is_stmt 1 view .LVU2357
2592:Core/Src/ff.c **** 			sect += csect;
 6927              		.loc 1 2592 7 is_stmt 0 view .LVU2358
 6928 0154 8146     		mov	r9, r0
 6929 0156 0028     		cmp	r0, #0
 6930 0158 8BD0     		beq	.L540
2592:Core/Src/ff.c **** 			sect += csect;
 6931              		.loc 1 2592 40 is_stmt 1 discriminator 2 view .LVU2359
2593:Core/Src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
 6932              		.loc 1 2593 4 discriminator 2 view .LVU2360
2593:Core/Src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
 6933              		.loc 1 2593 9 is_stmt 0 discriminator 2 view .LVU2361
 6934 015a B144     		add	r9, r9, r6
 6935              	.LVL815:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 202


2594:Core/Src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 6936              		.loc 1 2594 4 is_stmt 1 discriminator 2 view .LVU2362
2594:Core/Src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 6937              		.loc 1 2594 7 is_stmt 0 discriminator 2 view .LVU2363
 6938 015c 4FEA552A 		lsr	r10, r5, #9
 6939              	.LVL816:
2595:Core/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 6940              		.loc 1 2595 4 is_stmt 1 discriminator 2 view .LVU2364
2595:Core/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 6941              		.loc 1 2595 7 is_stmt 0 discriminator 2 view .LVU2365
 6942 0160 B5F5007F 		cmp	r5, #512
 6943 0164 A1D3     		bcc	.L520
2596:Core/Src/ff.c **** 					cc = fp->fs->csize - csect;
 6944              		.loc 1 2596 5 is_stmt 1 view .LVU2366
2596:Core/Src/ff.c **** 					cc = fp->fs->csize - csect;
 6945              		.loc 1 2596 15 is_stmt 0 view .LVU2367
 6946 0166 06EB0A03 		add	r3, r6, r10
2596:Core/Src/ff.c **** 					cc = fp->fs->csize - csect;
 6947              		.loc 1 2596 28 view .LVU2368
 6948 016a 9BF80220 		ldrb	r2, [fp, #2]	@ zero_extendqisi2
2596:Core/Src/ff.c **** 					cc = fp->fs->csize - csect;
 6949              		.loc 1 2596 8 view .LVU2369
 6950 016e 9342     		cmp	r3, r2
 6951 0170 01D9     		bls	.L521
2597:Core/Src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc))
 6952              		.loc 1 2597 6 is_stmt 1 view .LVU2370
2597:Core/Src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc))
 6953              		.loc 1 2597 25 is_stmt 0 view .LVU2371
 6954 0172 A2EB060A 		sub	r10, r2, r6
 6955              	.LVL817:
 6956              	.L521:
2598:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 6957              		.loc 1 2598 5 is_stmt 1 view .LVU2372
2598:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 6958              		.loc 1 2598 9 is_stmt 0 view .LVU2373
 6959 0176 5346     		mov	r3, r10
 6960 0178 4A46     		mov	r2, r9
 6961 017a 3946     		mov	r1, r7
 6962 017c 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6963 0180 FFF7FEFF 		bl	disk_read
 6964              	.LVL818:
2598:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 6965              		.loc 1 2598 8 view .LVU2374
 6966 0184 0028     		cmp	r0, #0
 6967 0186 3FF47BAF 		beq	.L522
2599:Core/Src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6968              		.loc 1 2599 6 is_stmt 1 view .LVU2375
 6969 018a 4FF0010A 		mov	r10, #1
 6970              	.LVL819:
2599:Core/Src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6971              		.loc 1 2599 6 is_stmt 0 view .LVU2376
 6972 018e 84F807A0 		strb	r10, [r4, #7]
2599:Core/Src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6973              		.loc 1 2599 6 is_stmt 1 view .LVU2377
 6974 0192 CDF804A0 		str	r10, [sp, #4]
 6975              	.LVL820:
 6976              	.L509:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 203


2635:Core/Src/ff.c **** #endif
2636:Core/Src/ff.c **** 	}
2637:Core/Src/ff.c **** 
2638:Core/Src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2639:Core/Src/ff.c **** }
 6977              		.loc 1 2639 1 is_stmt 0 view .LVU2378
 6978 0196 0198     		ldr	r0, [sp, #4]
 6979 0198 03B0     		add	sp, sp, #12
 6980              	.LCFI56:
 6981              		.cfi_remember_state
 6982              		.cfi_def_cfa_offset 36
 6983              		@ sp needed
 6984 019a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6985              	.LVL821:
 6986              	.L536:
 6987              	.LCFI57:
 6988              		.cfi_restore_state
2617:Core/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 6989              		.loc 1 2617 7 is_stmt 1 view .LVU2379
 6990 019e 4FF0010A 		mov	r10, #1
 6991              	.LVL822:
2617:Core/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 6992              		.loc 1 2617 7 is_stmt 0 view .LVU2380
 6993 01a2 84F807A0 		strb	r10, [r4, #7]
2617:Core/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 6994              		.loc 1 2617 7 is_stmt 1 view .LVU2381
 6995 01a6 CDF804A0 		str	r10, [sp, #4]
 6996 01aa F4E7     		b	.L509
 6997              	.LVL823:
 6998              	.L537:
2622:Core/Src/ff.c **** 			}
 6999              		.loc 1 2622 6 view .LVU2382
 7000 01ac 4FF0010A 		mov	r10, #1
 7001              	.LVL824:
2622:Core/Src/ff.c **** 			}
 7002              		.loc 1 2622 6 is_stmt 0 view .LVU2383
 7003 01b0 84F807A0 		strb	r10, [r4, #7]
2622:Core/Src/ff.c **** 			}
 7004              		.loc 1 2622 6 is_stmt 1 view .LVU2384
 7005 01b4 CDF804A0 		str	r10, [sp, #4]
 7006 01b8 EDE7     		b	.L509
 7007              	.LVL825:
 7008              	.L531:
2568:Core/Src/ff.c **** 	remain = fp->fsize - fp->fptr;
 7009              		.loc 1 2568 3 is_stmt 0 view .LVU2385
 7010 01ba 0723     		movs	r3, #7
 7011 01bc 0193     		str	r3, [sp, #4]
 7012 01be EAE7     		b	.L509
 7013              		.cfi_endproc
 7014              	.LFE36:
 7016              		.section	.text.f_write,"ax",%progbits
 7017              		.align	1
 7018              		.global	f_write
 7019              		.syntax unified
 7020              		.thumb
 7021              		.thumb_func
 7022              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 204


 7024              	f_write:
 7025              	.LVL826:
 7026              	.LFB37:
2640:Core/Src/ff.c **** 
2641:Core/Src/ff.c **** 
2642:Core/Src/ff.c **** 
2643:Core/Src/ff.c **** 
2644:Core/Src/ff.c **** #if !_FS_READONLY
2645:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2646:Core/Src/ff.c **** /* Write File                                                            */
2647:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2648:Core/Src/ff.c **** 
2649:Core/Src/ff.c **** FRESULT f_write (
2650:Core/Src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
2651:Core/Src/ff.c **** 	const void *buff,	/* Pointer to the data to be written */
2652:Core/Src/ff.c **** 	UINT btw,			/* Number of bytes to write */
2653:Core/Src/ff.c **** 	UINT* bw			/* Pointer to number of bytes written */
2654:Core/Src/ff.c **** )
2655:Core/Src/ff.c **** {
 7027              		.loc 1 2655 1 is_stmt 1 view -0
 7028              		.cfi_startproc
 7029              		@ args = 0, pretend = 0, frame = 8
 7030              		@ frame_needed = 0, uses_anonymous_args = 0
 7031              		.loc 1 2655 1 is_stmt 0 view .LVU2387
 7032 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7033              	.LCFI58:
 7034              		.cfi_def_cfa_offset 36
 7035              		.cfi_offset 4, -36
 7036              		.cfi_offset 5, -32
 7037              		.cfi_offset 6, -28
 7038              		.cfi_offset 7, -24
 7039              		.cfi_offset 8, -20
 7040              		.cfi_offset 9, -16
 7041              		.cfi_offset 10, -12
 7042              		.cfi_offset 11, -8
 7043              		.cfi_offset 14, -4
 7044 0004 83B0     		sub	sp, sp, #12
 7045              	.LCFI59:
 7046              		.cfi_def_cfa_offset 48
 7047 0006 0446     		mov	r4, r0
 7048 0008 0F46     		mov	r7, r1
 7049 000a 1546     		mov	r5, r2
 7050 000c 9846     		mov	r8, r3
2656:Core/Src/ff.c **** 	FRESULT res;
 7051              		.loc 1 2656 2 is_stmt 1 view .LVU2388
2657:Core/Src/ff.c **** 	DWORD clst, sect;
 7052              		.loc 1 2657 2 view .LVU2389
2658:Core/Src/ff.c **** 	UINT wcnt, cc;
 7053              		.loc 1 2658 2 view .LVU2390
2659:Core/Src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
 7054              		.loc 1 2659 2 view .LVU2391
 7055              	.LVL827:
2660:Core/Src/ff.c **** 	BYTE csect;
 7056              		.loc 1 2660 2 view .LVU2392
2661:Core/Src/ff.c **** 
2662:Core/Src/ff.c **** 
2663:Core/Src/ff.c **** 	*bw = 0;	/* Clear write byte counter */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 205


 7057              		.loc 1 2663 2 view .LVU2393
 7058              		.loc 1 2663 6 is_stmt 0 view .LVU2394
 7059 000e 0023     		movs	r3, #0
 7060              	.LVL828:
 7061              		.loc 1 2663 6 view .LVU2395
 7062 0010 C8F80030 		str	r3, [r8]
2664:Core/Src/ff.c **** 
2665:Core/Src/ff.c **** 	res = validate(fp);						/* Check validity */
 7063              		.loc 1 2665 2 is_stmt 1 view .LVU2396
 7064              		.loc 1 2665 8 is_stmt 0 view .LVU2397
 7065 0014 FFF7FEFF 		bl	validate
 7066              	.LVL829:
2666:Core/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 7067              		.loc 1 2666 2 is_stmt 1 view .LVU2398
 7068              		.loc 1 2666 5 is_stmt 0 view .LVU2399
 7069 0018 0190     		str	r0, [sp, #4]
 7070 001a 0028     		cmp	r0, #0
 7071 001c 47D1     		bne	.L542
2667:Core/Src/ff.c **** 	if (fp->err)							/* Check error */
 7072              		.loc 1 2667 2 is_stmt 1 view .LVU2400
 7073              		.loc 1 2667 8 is_stmt 0 view .LVU2401
 7074 001e E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
 7075 0020 0193     		str	r3, [sp, #4]
 7076              		.loc 1 2667 5 view .LVU2402
 7077 0022 002B     		cmp	r3, #0
 7078 0024 43D1     		bne	.L542
2668:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2669:Core/Src/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 7079              		.loc 1 2669 2 is_stmt 1 view .LVU2403
 7080              		.loc 1 2669 10 is_stmt 0 view .LVU2404
 7081 0026 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7082              		.loc 1 2669 5 view .LVU2405
 7083 0028 13F0020F 		tst	r3, #2
 7084 002c 00F0E180 		beq	.L566
2670:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2671:Core/Src/ff.c **** 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
 7085              		.loc 1 2671 2 is_stmt 1 view .LVU2406
 7086              		.loc 1 2671 8 is_stmt 0 view .LVU2407
 7087 0030 A368     		ldr	r3, [r4, #8]
 7088              		.loc 1 2671 5 view .LVU2408
 7089 0032 EB42     		cmn	r3, r5
 7090 0034 C0F0A880 		bcc	.L563
 7091              		.loc 1 2671 37 view .LVU2409
 7092 0038 0025     		movs	r5, #0
 7093              	.LVL830:
 7094              		.loc 1 2671 37 view .LVU2410
 7095 003a A5E0     		b	.L563
 7096              	.LVL831:
 7097              	.L547:
2672:Core/Src/ff.c **** 
2673:Core/Src/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
2674:Core/Src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
2675:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
2676:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2677:Core/Src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
2678:Core/Src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
2679:Core/Src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 206


2680:Core/Src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
2681:Core/Src/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
2682:Core/Src/ff.c **** 				} else {					/* Middle or end of the file */
2683:Core/Src/ff.c **** #if _USE_FASTSEEK
2684:Core/Src/ff.c **** 					if (fp->cltbl)
 7098              		.loc 1 2684 6 is_stmt 1 view .LVU2411
 7099              		.loc 1 2684 12 is_stmt 0 view .LVU2412
 7100 003c 636A     		ldr	r3, [r4, #36]
 7101              		.loc 1 2684 9 view .LVU2413
 7102 003e 002B     		cmp	r3, #0
 7103 0040 39D0     		beq	.L549
2685:Core/Src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 7104              		.loc 1 2685 7 is_stmt 1 view .LVU2414
 7105              		.loc 1 2685 14 is_stmt 0 view .LVU2415
 7106 0042 2046     		mov	r0, r4
 7107 0044 FFF7FEFF 		bl	clmt_clust
 7108              	.LVL832:
 7109 0048 0346     		mov	r3, r0
 7110              	.LVL833:
 7111              	.L548:
2686:Core/Src/ff.c **** 					else
2687:Core/Src/ff.c **** #endif
2688:Core/Src/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
2689:Core/Src/ff.c **** 				}
2690:Core/Src/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
 7112              		.loc 1 2690 5 is_stmt 1 view .LVU2416
 7113              		.loc 1 2690 8 is_stmt 0 view .LVU2417
 7114 004a 002B     		cmp	r3, #0
 7115 004c 00F0C780 		beq	.L550
2691:Core/Src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 7116              		.loc 1 2691 5 is_stmt 1 view .LVU2418
 7117              		.loc 1 2691 8 is_stmt 0 view .LVU2419
 7118 0050 012B     		cmp	r3, #1
 7119 0052 35D0     		beq	.L570
 7120              		.loc 1 2691 45 is_stmt 1 discriminator 2 view .LVU2420
2692:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 7121              		.loc 1 2692 5 discriminator 2 view .LVU2421
 7122              		.loc 1 2692 8 is_stmt 0 discriminator 2 view .LVU2422
 7123 0054 B3F1FF3F 		cmp	r3, #-1
 7124 0058 39D0     		beq	.L571
 7125              		.loc 1 2692 55 is_stmt 1 discriminator 2 view .LVU2423
2693:Core/Src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 7126              		.loc 1 2693 5 discriminator 2 view .LVU2424
 7127              		.loc 1 2693 15 is_stmt 0 discriminator 2 view .LVU2425
 7128 005a 6361     		str	r3, [r4, #20]
 7129              	.LVL834:
 7130              	.L546:
2694:Core/Src/ff.c **** 			}
2695:Core/Src/ff.c **** #if _FS_TINY
2696:Core/Src/ff.c **** 			if (fp->fs->winsect == fp->dsect && sync_window(fp->fs))	/* Write-back sector cache */
2697:Core/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
2698:Core/Src/ff.c **** #else
2699:Core/Src/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
 7131              		.loc 1 2699 4 is_stmt 1 view .LVU2426
 7132              		.loc 1 2699 10 is_stmt 0 view .LVU2427
 7133 005c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7134              		.loc 1 2699 7 view .LVU2428
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 207


 7135 005e 13F0400F 		tst	r3, #64
 7136 0062 3BD1     		bne	.L572
 7137              	.L553:
2700:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
2701:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2702:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
2703:Core/Src/ff.c **** 			}
2704:Core/Src/ff.c **** #endif
2705:Core/Src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
 7138              		.loc 1 2705 4 is_stmt 1 view .LVU2429
 7139              		.loc 1 2705 11 is_stmt 0 view .LVU2430
 7140 0064 D4F800B0 		ldr	fp, [r4]
 7141 0068 6169     		ldr	r1, [r4, #20]
 7142 006a 5846     		mov	r0, fp
 7143 006c FFF7FEFF 		bl	clust2sect
 7144              	.LVL835:
2706:Core/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 7145              		.loc 1 2706 4 is_stmt 1 view .LVU2431
 7146              		.loc 1 2706 7 is_stmt 0 view .LVU2432
 7147 0070 8146     		mov	r9, r0
 7148 0072 0028     		cmp	r0, #0
 7149 0074 47D0     		beq	.L573
 7150              		.loc 1 2706 40 is_stmt 1 discriminator 2 view .LVU2433
2707:Core/Src/ff.c **** 			sect += csect;
 7151              		.loc 1 2707 4 discriminator 2 view .LVU2434
 7152              		.loc 1 2707 9 is_stmt 0 discriminator 2 view .LVU2435
 7153 0076 B144     		add	r9, r9, r6
 7154              	.LVL836:
2708:Core/Src/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
 7155              		.loc 1 2708 4 is_stmt 1 discriminator 2 view .LVU2436
 7156              		.loc 1 2708 7 is_stmt 0 discriminator 2 view .LVU2437
 7157 0078 4FEA552A 		lsr	r10, r5, #9
 7158              	.LVL837:
2709:Core/Src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
 7159              		.loc 1 2709 4 is_stmt 1 discriminator 2 view .LVU2438
 7160              		.loc 1 2709 7 is_stmt 0 discriminator 2 view .LVU2439
 7161 007c B5F5007F 		cmp	r5, #512
 7162 0080 5DD3     		bcc	.L556
2710:Core/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 7163              		.loc 1 2710 5 is_stmt 1 view .LVU2440
 7164              		.loc 1 2710 15 is_stmt 0 view .LVU2441
 7165 0082 06EB0A03 		add	r3, r6, r10
 7166              		.loc 1 2710 28 view .LVU2442
 7167 0086 9BF80220 		ldrb	r2, [fp, #2]	@ zero_extendqisi2
 7168              		.loc 1 2710 8 view .LVU2443
 7169 008a 9342     		cmp	r3, r2
 7170 008c 01D9     		bls	.L557
2711:Core/Src/ff.c **** 					cc = fp->fs->csize - csect;
 7171              		.loc 1 2711 6 is_stmt 1 view .LVU2444
 7172              		.loc 1 2711 25 is_stmt 0 view .LVU2445
 7173 008e A2EB060A 		sub	r10, r2, r6
 7174              	.LVL838:
 7175              	.L557:
2712:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, cc))
 7176              		.loc 1 2712 5 is_stmt 1 view .LVU2446
 7177              		.loc 1 2712 9 is_stmt 0 view .LVU2447
 7178 0092 5346     		mov	r3, r10
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 208


 7179 0094 4A46     		mov	r2, r9
 7180 0096 3946     		mov	r1, r7
 7181 0098 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 7182 009c FFF7FEFF 		bl	disk_write
 7183              	.LVL839:
 7184              		.loc 1 2712 8 view .LVU2448
 7185 00a0 C0B3     		cbz	r0, .L558
2713:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 7186              		.loc 1 2713 6 is_stmt 1 view .LVU2449
 7187 00a2 4FF0010A 		mov	r10, #1
 7188              	.LVL840:
 7189              		.loc 1 2713 6 is_stmt 0 view .LVU2450
 7190 00a6 84F807A0 		strb	r10, [r4, #7]
 7191              		.loc 1 2713 6 is_stmt 1 view .LVU2451
 7192 00aa CDF804A0 		str	r10, [sp, #4]
 7193              	.LVL841:
 7194              	.L542:
2714:Core/Src/ff.c **** #if _FS_MINIMIZE <= 2
2715:Core/Src/ff.c **** #if _FS_TINY
2716:Core/Src/ff.c **** 				if (fp->fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct 
2717:Core/Src/ff.c **** 					mem_cpy(fp->fs->win, wbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), SS(fp->fs));
2718:Core/Src/ff.c **** 					fp->fs->wflag = 0;
2719:Core/Src/ff.c **** 				}
2720:Core/Src/ff.c **** #else
2721:Core/Src/ff.c **** 				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write 
2722:Core/Src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
2723:Core/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
2724:Core/Src/ff.c **** 				}
2725:Core/Src/ff.c **** #endif
2726:Core/Src/ff.c **** #endif
2727:Core/Src/ff.c **** 				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
2728:Core/Src/ff.c **** 				continue;
2729:Core/Src/ff.c **** 			}
2730:Core/Src/ff.c **** #if _FS_TINY
2731:Core/Src/ff.c **** 			if (fp->fptr >= fp->fsize) {	/* Avoid silly cache filling at growing edge */
2732:Core/Src/ff.c **** 				if (sync_window(fp->fs)) ABORT(fp->fs, FR_DISK_ERR);
2733:Core/Src/ff.c **** 				fp->fs->winsect = sect;
2734:Core/Src/ff.c **** 			}
2735:Core/Src/ff.c **** #else
2736:Core/Src/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
2737:Core/Src/ff.c **** 				if (fp->fptr < fp->fsize &&
2738:Core/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1))
2739:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2740:Core/Src/ff.c **** 			}
2741:Core/Src/ff.c **** #endif
2742:Core/Src/ff.c **** 			fp->dsect = sect;
2743:Core/Src/ff.c **** 		}
2744:Core/Src/ff.c **** 		wcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
2745:Core/Src/ff.c **** 		if (wcnt > btw) wcnt = btw;
2746:Core/Src/ff.c **** #if _FS_TINY
2747:Core/Src/ff.c **** 		if (move_window(fp->fs, fp->dsect))	/* Move sector window */
2748:Core/Src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2749:Core/Src/ff.c **** 		mem_cpy(&fp->fs->win[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2750:Core/Src/ff.c **** 		fp->fs->wflag = 1;
2751:Core/Src/ff.c **** #else
2752:Core/Src/ff.c **** 		mem_cpy(&fp->buf[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2753:Core/Src/ff.c **** 		fp->flag |= FA__DIRTY;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 209


2754:Core/Src/ff.c **** #endif
2755:Core/Src/ff.c **** 	}
2756:Core/Src/ff.c **** 
2757:Core/Src/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
2758:Core/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
2759:Core/Src/ff.c **** 
2760:Core/Src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2761:Core/Src/ff.c **** }
 7195              		.loc 1 2761 1 is_stmt 0 view .LVU2452
 7196 00ae 0198     		ldr	r0, [sp, #4]
 7197 00b0 03B0     		add	sp, sp, #12
 7198              	.LCFI60:
 7199              		.cfi_remember_state
 7200              		.cfi_def_cfa_offset 36
 7201              		@ sp needed
 7202 00b2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7203              	.LVL842:
 7204              	.L549:
 7205              	.LCFI61:
 7206              		.cfi_restore_state
2688:Core/Src/ff.c **** 				}
 7207              		.loc 1 2688 7 is_stmt 1 view .LVU2453
2688:Core/Src/ff.c **** 				}
 7208              		.loc 1 2688 14 is_stmt 0 view .LVU2454
 7209 00b6 6169     		ldr	r1, [r4, #20]
 7210 00b8 FFF7FEFF 		bl	create_chain
 7211              	.LVL843:
 7212 00bc 0346     		mov	r3, r0
 7213              	.LVL844:
2688:Core/Src/ff.c **** 				}
 7214              		.loc 1 2688 14 view .LVU2455
 7215 00be C4E7     		b	.L548
 7216              	.LVL845:
 7217              	.L570:
2691:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 7218              		.loc 1 2691 20 is_stmt 1 discriminator 1 view .LVU2456
 7219 00c0 4FF0020A 		mov	r10, #2
 7220 00c4 84F807A0 		strb	r10, [r4, #7]
2691:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 7221              		.loc 1 2691 20 discriminator 1 view .LVU2457
 7222 00c8 CDF804A0 		str	r10, [sp, #4]
 7223 00cc EFE7     		b	.L542
 7224              	.L571:
2692:Core/Src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 7225              		.loc 1 2692 29 discriminator 1 view .LVU2458
 7226 00ce 4FF0010A 		mov	r10, #1
 7227 00d2 84F807A0 		strb	r10, [r4, #7]
2692:Core/Src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 7228              		.loc 1 2692 29 discriminator 1 view .LVU2459
 7229 00d6 CDF804A0 		str	r10, [sp, #4]
 7230 00da E8E7     		b	.L542
 7231              	.LVL846:
 7232              	.L572:
2700:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 7233              		.loc 1 2700 5 view .LVU2460
2700:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 7234              		.loc 1 2700 22 is_stmt 0 view .LVU2461
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 210


 7235 00dc 2146     		mov	r1, r4
 7236 00de 51F8280B 		ldr	r0, [r1], #40
2700:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 7237              		.loc 1 2700 9 view .LVU2462
 7238 00e2 0123     		movs	r3, #1
 7239 00e4 A269     		ldr	r2, [r4, #24]
 7240 00e6 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7241 00e8 FFF7FEFF 		bl	disk_write
 7242              	.LVL847:
2700:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 7243              		.loc 1 2700 8 view .LVU2463
 7244 00ec 20B9     		cbnz	r0, .L574
2701:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 7245              		.loc 1 2701 32 is_stmt 1 view .LVU2464
2702:Core/Src/ff.c **** 			}
 7246              		.loc 1 2702 5 view .LVU2465
2702:Core/Src/ff.c **** 			}
 7247              		.loc 1 2702 14 is_stmt 0 view .LVU2466
 7248 00ee A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7249 00f0 23F04003 		bic	r3, r3, #64
 7250 00f4 A371     		strb	r3, [r4, #6]
 7251 00f6 B5E7     		b	.L553
 7252              	.L574:
2701:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 7253              		.loc 1 2701 6 is_stmt 1 view .LVU2467
 7254 00f8 4FF0010A 		mov	r10, #1
 7255 00fc 84F807A0 		strb	r10, [r4, #7]
2701:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 7256              		.loc 1 2701 6 view .LVU2468
 7257 0100 CDF804A0 		str	r10, [sp, #4]
 7258 0104 D3E7     		b	.L542
 7259              	.LVL848:
 7260              	.L573:
2706:Core/Src/ff.c **** 			sect += csect;
 7261              		.loc 1 2706 15 discriminator 1 view .LVU2469
 7262 0106 4FF0020A 		mov	r10, #2
 7263 010a 84F807A0 		strb	r10, [r4, #7]
2706:Core/Src/ff.c **** 			sect += csect;
 7264              		.loc 1 2706 15 discriminator 1 view .LVU2470
 7265 010e CDF804A0 		str	r10, [sp, #4]
 7266 0112 CCE7     		b	.L542
 7267              	.LVL849:
 7268              	.L558:
2713:Core/Src/ff.c **** #if _FS_MINIMIZE <= 2
 7269              		.loc 1 2713 32 view .LVU2471
2721:Core/Src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 7270              		.loc 1 2721 5 view .LVU2472
2721:Core/Src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 7271              		.loc 1 2721 11 is_stmt 0 view .LVU2473
 7272 0114 A169     		ldr	r1, [r4, #24]
2721:Core/Src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 7273              		.loc 1 2721 19 view .LVU2474
 7274 0116 A1EB0901 		sub	r1, r1, r9
2721:Core/Src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 7275              		.loc 1 2721 8 view .LVU2475
 7276 011a 5145     		cmp	r1, r10
 7277 011c 02D3     		bcc	.L575
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 211


 7278              	.L559:
2727:Core/Src/ff.c **** 				continue;
 7279              		.loc 1 2727 5 is_stmt 1 view .LVU2476
2727:Core/Src/ff.c **** 				continue;
 7280              		.loc 1 2727 10 is_stmt 0 view .LVU2477
 7281 011e 4FEA4A26 		lsl	r6, r10, #9
 7282              	.LVL850:
2728:Core/Src/ff.c **** 			}
 7283              		.loc 1 2728 5 is_stmt 1 view .LVU2478
 7284 0122 27E0     		b	.L560
 7285              	.LVL851:
 7286              	.L575:
2722:Core/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 7287              		.loc 1 2722 6 view .LVU2479
 7288 0124 4FF40072 		mov	r2, #512
 7289 0128 07EB4121 		add	r1, r7, r1, lsl #9
 7290 012c 04F12800 		add	r0, r4, #40
 7291 0130 FFF7FEFF 		bl	mem_cpy
 7292              	.LVL852:
2723:Core/Src/ff.c **** 				}
 7293              		.loc 1 2723 6 view .LVU2480
2723:Core/Src/ff.c **** 				}
 7294              		.loc 1 2723 15 is_stmt 0 view .LVU2481
 7295 0134 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7296 0136 23F04003 		bic	r3, r3, #64
 7297 013a A371     		strb	r3, [r4, #6]
 7298 013c EFE7     		b	.L559
 7299              	.L556:
2736:Core/Src/ff.c **** 				if (fp->fptr < fp->fsize &&
 7300              		.loc 1 2736 4 is_stmt 1 view .LVU2482
2736:Core/Src/ff.c **** 				if (fp->fptr < fp->fsize &&
 7301              		.loc 1 2736 10 is_stmt 0 view .LVU2483
 7302 013e A369     		ldr	r3, [r4, #24]
2736:Core/Src/ff.c **** 				if (fp->fptr < fp->fsize &&
 7303              		.loc 1 2736 7 view .LVU2484
 7304 0140 4B45     		cmp	r3, r9
 7305 0142 03D0     		beq	.L561
2737:Core/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1))
 7306              		.loc 1 2737 5 is_stmt 1 view .LVU2485
2737:Core/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1))
 7307              		.loc 1 2737 11 is_stmt 0 view .LVU2486
 7308 0144 A268     		ldr	r2, [r4, #8]
2737:Core/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1))
 7309              		.loc 1 2737 22 view .LVU2487
 7310 0146 E368     		ldr	r3, [r4, #12]
2737:Core/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1))
 7311              		.loc 1 2737 8 view .LVU2488
 7312 0148 9A42     		cmp	r2, r3
 7313 014a 37D3     		bcc	.L576
 7314              	.L561:
2739:Core/Src/ff.c **** 			}
 7315              		.loc 1 2739 33 is_stmt 1 view .LVU2489
2742:Core/Src/ff.c **** 		}
 7316              		.loc 1 2742 4 view .LVU2490
2742:Core/Src/ff.c **** 		}
 7317              		.loc 1 2742 14 is_stmt 0 view .LVU2491
 7318 014c C4F81890 		str	r9, [r4, #24]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 212


 7319              	.LVL853:
 7320              	.L545:
2744:Core/Src/ff.c **** 		if (wcnt > btw) wcnt = btw;
 7321              		.loc 1 2744 3 is_stmt 1 view .LVU2492
2744:Core/Src/ff.c **** 		if (wcnt > btw) wcnt = btw;
 7322              		.loc 1 2744 32 is_stmt 0 view .LVU2493
 7323 0150 A068     		ldr	r0, [r4, #8]
2744:Core/Src/ff.c **** 		if (wcnt > btw) wcnt = btw;
 7324              		.loc 1 2744 39 view .LVU2494
 7325 0152 C0F30800 		ubfx	r0, r0, #0, #9
2744:Core/Src/ff.c **** 		if (wcnt > btw) wcnt = btw;
 7326              		.loc 1 2744 8 view .LVU2495
 7327 0156 C0F50076 		rsb	r6, r0, #512
 7328              	.LVL854:
2745:Core/Src/ff.c **** #if _FS_TINY
 7329              		.loc 1 2745 3 is_stmt 1 view .LVU2496
2745:Core/Src/ff.c **** #if _FS_TINY
 7330              		.loc 1 2745 6 is_stmt 0 view .LVU2497
 7331 015a B542     		cmp	r5, r6
 7332 015c 00D2     		bcs	.L562
2745:Core/Src/ff.c **** #if _FS_TINY
 7333              		.loc 1 2745 24 view .LVU2498
 7334 015e 2E46     		mov	r6, r5
 7335              	.LVL855:
 7336              	.L562:
2752:Core/Src/ff.c **** 		fp->flag |= FA__DIRTY;
 7337              		.loc 1 2752 3 is_stmt 1 view .LVU2499
2752:Core/Src/ff.c **** 		fp->flag |= FA__DIRTY;
 7338              		.loc 1 2752 11 is_stmt 0 view .LVU2500
 7339 0160 2830     		adds	r0, r0, #40
2752:Core/Src/ff.c **** 		fp->flag |= FA__DIRTY;
 7340              		.loc 1 2752 3 view .LVU2501
 7341 0162 3246     		mov	r2, r6
 7342 0164 3946     		mov	r1, r7
 7343 0166 2044     		add	r0, r0, r4
 7344 0168 FFF7FEFF 		bl	mem_cpy
 7345              	.LVL856:
2753:Core/Src/ff.c **** #endif
 7346              		.loc 1 2753 3 is_stmt 1 view .LVU2502
2753:Core/Src/ff.c **** #endif
 7347              		.loc 1 2753 12 is_stmt 0 view .LVU2503
 7348 016c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7349 016e 43F04003 		orr	r3, r3, #64
 7350 0172 A371     		strb	r3, [r4, #6]
 7351              	.L560:
2674:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 7352              		.loc 1 2674 3 is_stmt 1 view .LVU2504
2674:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 7353              		.loc 1 2674 9 is_stmt 0 view .LVU2505
 7354 0174 3744     		add	r7, r7, r6
 7355              	.LVL857:
2674:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 7356              		.loc 1 2674 27 view .LVU2506
 7357 0176 A368     		ldr	r3, [r4, #8]
 7358 0178 3344     		add	r3, r3, r6
 7359 017a A360     		str	r3, [r4, #8]
2674:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 213


 7360              		.loc 1 2674 40 view .LVU2507
 7361 017c D8F80030 		ldr	r3, [r8]
 7362 0180 3344     		add	r3, r3, r6
 7363 0182 C8F80030 		str	r3, [r8]
2674:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 7364              		.loc 1 2674 53 view .LVU2508
 7365 0186 AD1B     		subs	r5, r5, r6
 7366              	.LVL858:
 7367              	.L563:
2673:Core/Src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 7368              		.loc 1 2673 11 is_stmt 1 view .LVU2509
2673:Core/Src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 7369              		.loc 1 2673 2 is_stmt 0 view .LVU2510
 7370 0188 4DB3     		cbz	r5, .L550
2675:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 7371              		.loc 1 2675 3 is_stmt 1 view .LVU2511
2675:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 7372              		.loc 1 2675 10 is_stmt 0 view .LVU2512
 7373 018a A168     		ldr	r1, [r4, #8]
2675:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 7374              		.loc 1 2675 17 view .LVU2513
 7375 018c C1F30803 		ubfx	r3, r1, #0, #9
2675:Core/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 7376              		.loc 1 2675 6 view .LVU2514
 7377 0190 002B     		cmp	r3, #0
 7378 0192 DDD1     		bne	.L545
2676:Core/Src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 7379              		.loc 1 2676 4 is_stmt 1 view .LVU2515
2676:Core/Src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 7380              		.loc 1 2676 46 is_stmt 0 view .LVU2516
 7381 0194 2068     		ldr	r0, [r4]
2676:Core/Src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 7382              		.loc 1 2676 50 view .LVU2517
 7383 0196 8678     		ldrb	r6, [r0, #2]	@ zero_extendqisi2
2676:Core/Src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 7384              		.loc 1 2676 58 view .LVU2518
 7385 0198 013E     		subs	r6, r6, #1
 7386 019a F6B2     		uxtb	r6, r6
 7387              	.LVL859:
2677:Core/Src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 7388              		.loc 1 2677 4 is_stmt 1 view .LVU2519
2677:Core/Src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 7389              		.loc 1 2677 7 is_stmt 0 view .LVU2520
 7390 019c 16EA5126 		ands	r6, r6, r1, lsr #9
 7391              	.LVL860:
2677:Core/Src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 7392              		.loc 1 2677 7 view .LVU2521
 7393 01a0 7FF45CAF 		bne	.L546
2678:Core/Src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 7394              		.loc 1 2678 5 is_stmt 1 view .LVU2522
2678:Core/Src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 7395              		.loc 1 2678 8 is_stmt 0 view .LVU2523
 7396 01a4 0029     		cmp	r1, #0
 7397 01a6 7FF449AF 		bne	.L547
2679:Core/Src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 7398              		.loc 1 2679 6 is_stmt 1 view .LVU2524
2679:Core/Src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 214


 7399              		.loc 1 2679 11 is_stmt 0 view .LVU2525
 7400 01aa 2369     		ldr	r3, [r4, #16]
 7401              	.LVL861:
2680:Core/Src/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 7402              		.loc 1 2680 6 is_stmt 1 view .LVU2526
2680:Core/Src/ff.c **** 						fp->sclust = clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 7403              		.loc 1 2680 9 is_stmt 0 view .LVU2527
 7404 01ac 002B     		cmp	r3, #0
 7405 01ae 7FF44CAF 		bne	.L548
2681:Core/Src/ff.c **** 				} else {					/* Middle or end of the file */
 7406              		.loc 1 2681 7 is_stmt 1 view .LVU2528
2681:Core/Src/ff.c **** 				} else {					/* Middle or end of the file */
 7407              		.loc 1 2681 27 is_stmt 0 view .LVU2529
 7408 01b2 FFF7FEFF 		bl	create_chain
 7409              	.LVL862:
2681:Core/Src/ff.c **** 				} else {					/* Middle or end of the file */
 7410              		.loc 1 2681 27 view .LVU2530
 7411 01b6 0346     		mov	r3, r0
 7412              	.LVL863:
2681:Core/Src/ff.c **** 				} else {					/* Middle or end of the file */
 7413              		.loc 1 2681 18 view .LVU2531
 7414 01b8 2061     		str	r0, [r4, #16]
 7415 01ba 46E7     		b	.L548
 7416              	.LVL864:
 7417              	.L576:
2738:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 7418              		.loc 1 2738 6 discriminator 1 view .LVU2532
 7419 01bc 0123     		movs	r3, #1
 7420 01be 4A46     		mov	r2, r9
 7421 01c0 04F12801 		add	r1, r4, #40
 7422 01c4 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 7423 01c8 FFF7FEFF 		bl	disk_read
 7424              	.LVL865:
2737:Core/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf, sect, 1))
 7425              		.loc 1 2737 30 discriminator 1 view .LVU2533
 7426 01cc 0028     		cmp	r0, #0
 7427 01ce BDD0     		beq	.L561
2739:Core/Src/ff.c **** 			}
 7428              		.loc 1 2739 7 is_stmt 1 view .LVU2534
 7429 01d0 4FF0010A 		mov	r10, #1
 7430              	.LVL866:
2739:Core/Src/ff.c **** 			}
 7431              		.loc 1 2739 7 is_stmt 0 view .LVU2535
 7432 01d4 84F807A0 		strb	r10, [r4, #7]
2739:Core/Src/ff.c **** 			}
 7433              		.loc 1 2739 7 is_stmt 1 view .LVU2536
 7434 01d8 CDF804A0 		str	r10, [sp, #4]
 7435 01dc 67E7     		b	.L542
 7436              	.LVL867:
 7437              	.L550:
2757:Core/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 7438              		.loc 1 2757 2 view .LVU2537
2757:Core/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 7439              		.loc 1 2757 8 is_stmt 0 view .LVU2538
 7440 01de A368     		ldr	r3, [r4, #8]
2757:Core/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 7441              		.loc 1 2757 19 view .LVU2539
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 215


 7442 01e0 E268     		ldr	r2, [r4, #12]
2757:Core/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 7443              		.loc 1 2757 5 view .LVU2540
 7444 01e2 9342     		cmp	r3, r2
 7445 01e4 00D9     		bls	.L565
2757:Core/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 7446              		.loc 1 2757 28 is_stmt 1 discriminator 1 view .LVU2541
2757:Core/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 7447              		.loc 1 2757 38 is_stmt 0 discriminator 1 view .LVU2542
 7448 01e6 E360     		str	r3, [r4, #12]
 7449              	.L565:
2758:Core/Src/ff.c **** 
 7450              		.loc 1 2758 2 is_stmt 1 view .LVU2543
2758:Core/Src/ff.c **** 
 7451              		.loc 1 2758 11 is_stmt 0 view .LVU2544
 7452 01e8 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7453 01ea 43F02003 		orr	r3, r3, #32
 7454 01ee A371     		strb	r3, [r4, #6]
2760:Core/Src/ff.c **** }
 7455              		.loc 1 2760 2 is_stmt 1 view .LVU2545
 7456 01f0 5DE7     		b	.L542
 7457              	.LVL868:
 7458              	.L566:
2670:Core/Src/ff.c **** 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
 7459              		.loc 1 2670 3 is_stmt 0 view .LVU2546
 7460 01f2 0723     		movs	r3, #7
 7461 01f4 0193     		str	r3, [sp, #4]
 7462 01f6 5AE7     		b	.L542
 7463              		.cfi_endproc
 7464              	.LFE37:
 7466              		.section	.text.putc_bfd,"ax",%progbits
 7467              		.align	1
 7468              		.syntax unified
 7469              		.thumb
 7470              		.thumb_func
 7471              		.fpu fpv4-sp-d16
 7473              	putc_bfd:
 7474              	.LVL869:
 7475              	.LFB56:
2762:Core/Src/ff.c **** 
2763:Core/Src/ff.c **** 
2764:Core/Src/ff.c **** 
2765:Core/Src/ff.c **** 
2766:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2767:Core/Src/ff.c **** /* Synchronize the File                                                  */
2768:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2769:Core/Src/ff.c **** 
2770:Core/Src/ff.c **** FRESULT f_sync (
2771:Core/Src/ff.c **** 	FIL* fp		/* Pointer to the file object */
2772:Core/Src/ff.c **** )
2773:Core/Src/ff.c **** {
2774:Core/Src/ff.c **** 	FRESULT res;
2775:Core/Src/ff.c **** 	DWORD tm;
2776:Core/Src/ff.c **** 	BYTE *dir;
2777:Core/Src/ff.c **** 
2778:Core/Src/ff.c **** 
2779:Core/Src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 216


2780:Core/Src/ff.c **** 	if (res == FR_OK) {
2781:Core/Src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
2782:Core/Src/ff.c **** 			/* Write-back dirty buffer */
2783:Core/Src/ff.c **** #if !_FS_TINY
2784:Core/Src/ff.c **** 			if (fp->flag & FA__DIRTY) {
2785:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
2786:Core/Src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
2787:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
2788:Core/Src/ff.c **** 			}
2789:Core/Src/ff.c **** #endif
2790:Core/Src/ff.c **** 			/* Update the directory entry */
2791:Core/Src/ff.c **** 			res = move_window(fp->fs, fp->dir_sect);
2792:Core/Src/ff.c **** 			if (res == FR_OK) {
2793:Core/Src/ff.c **** 				dir = fp->dir_ptr;
2794:Core/Src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
2795:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
2796:Core/Src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
2797:Core/Src/ff.c **** 				tm = get_fattime();							/* Update updated time */
2798:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);
2799:Core/Src/ff.c **** 				ST_WORD(dir+DIR_LstAccDate, 0);
2800:Core/Src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
2801:Core/Src/ff.c **** 				fp->fs->wflag = 1;
2802:Core/Src/ff.c **** 				res = sync_fs(fp->fs);
2803:Core/Src/ff.c **** 			}
2804:Core/Src/ff.c **** 		}
2805:Core/Src/ff.c **** 	}
2806:Core/Src/ff.c **** 
2807:Core/Src/ff.c **** 	LEAVE_FF(fp->fs, res);
2808:Core/Src/ff.c **** }
2809:Core/Src/ff.c **** 
2810:Core/Src/ff.c **** #endif /* !_FS_READONLY */
2811:Core/Src/ff.c **** 
2812:Core/Src/ff.c **** 
2813:Core/Src/ff.c **** 
2814:Core/Src/ff.c **** 
2815:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2816:Core/Src/ff.c **** /* Close File                                                            */
2817:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2818:Core/Src/ff.c **** 
2819:Core/Src/ff.c **** FRESULT f_close (
2820:Core/Src/ff.c **** 	FIL *fp		/* Pointer to the file object to be closed */
2821:Core/Src/ff.c **** )
2822:Core/Src/ff.c **** {
2823:Core/Src/ff.c **** 	FRESULT res;
2824:Core/Src/ff.c **** 
2825:Core/Src/ff.c **** 
2826:Core/Src/ff.c **** #if !_FS_READONLY
2827:Core/Src/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
2828:Core/Src/ff.c **** 	if (res == FR_OK)
2829:Core/Src/ff.c **** #endif
2830:Core/Src/ff.c **** 	{
2831:Core/Src/ff.c **** 		res = validate(fp);				/* Lock volume */
2832:Core/Src/ff.c **** 		if (res == FR_OK) {
2833:Core/Src/ff.c **** #if _FS_REENTRANT
2834:Core/Src/ff.c **** 			FATFS *fs = fp->fs;
2835:Core/Src/ff.c **** #endif
2836:Core/Src/ff.c **** #if _FS_LOCK
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 217


2837:Core/Src/ff.c **** 			res = dec_lock(fp->lockid);	/* Decrement file open counter */
2838:Core/Src/ff.c **** 			if (res == FR_OK)
2839:Core/Src/ff.c **** #endif
2840:Core/Src/ff.c **** 				fp->fs = 0;				/* Invalidate file object */
2841:Core/Src/ff.c **** #if _FS_REENTRANT
2842:Core/Src/ff.c **** 			unlock_fs(fs, FR_OK);		/* Unlock volume */
2843:Core/Src/ff.c **** #endif
2844:Core/Src/ff.c **** 		}
2845:Core/Src/ff.c **** 	}
2846:Core/Src/ff.c **** 	return res;
2847:Core/Src/ff.c **** }
2848:Core/Src/ff.c **** 
2849:Core/Src/ff.c **** 
2850:Core/Src/ff.c **** 
2851:Core/Src/ff.c **** 
2852:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2853:Core/Src/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
2854:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2855:Core/Src/ff.c **** 
2856:Core/Src/ff.c **** #if _FS_RPATH >= 1
2857:Core/Src/ff.c **** #if _VOLUMES >= 2
2858:Core/Src/ff.c **** FRESULT f_chdrive (
2859:Core/Src/ff.c **** 	const TCHAR* path		/* Drive number */
2860:Core/Src/ff.c **** )
2861:Core/Src/ff.c **** {
2862:Core/Src/ff.c **** 	int vol;
2863:Core/Src/ff.c **** 
2864:Core/Src/ff.c **** 
2865:Core/Src/ff.c **** 	vol = get_ldnumber(&path);
2866:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
2867:Core/Src/ff.c **** 
2868:Core/Src/ff.c **** 	CurrVol = (BYTE)vol;
2869:Core/Src/ff.c **** 
2870:Core/Src/ff.c **** 	return FR_OK;
2871:Core/Src/ff.c **** }
2872:Core/Src/ff.c **** #endif
2873:Core/Src/ff.c **** 
2874:Core/Src/ff.c **** 
2875:Core/Src/ff.c **** FRESULT f_chdir (
2876:Core/Src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
2877:Core/Src/ff.c **** )
2878:Core/Src/ff.c **** {
2879:Core/Src/ff.c **** 	FRESULT res;
2880:Core/Src/ff.c **** 	DIR dj;
2881:Core/Src/ff.c **** 	DEF_NAMEBUF;
2882:Core/Src/ff.c **** 
2883:Core/Src/ff.c **** 
2884:Core/Src/ff.c **** 	/* Get logical drive number */
2885:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2886:Core/Src/ff.c **** 	if (res == FR_OK) {
2887:Core/Src/ff.c **** 		INIT_BUF(dj);
2888:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
2889:Core/Src/ff.c **** 		FREE_BUF();
2890:Core/Src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
2891:Core/Src/ff.c **** 			if (!dj.dir) {
2892:Core/Src/ff.c **** 				dj.fs->cdir = dj.sclust;	/* Start directory itself */
2893:Core/Src/ff.c **** 			} else {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 218


2894:Core/Src/ff.c **** 				if (dj.dir[DIR_Attr] & AM_DIR)	/* Reached to the directory */
2895:Core/Src/ff.c **** 					dj.fs->cdir = ld_clust(dj.fs, dj.dir);
2896:Core/Src/ff.c **** 				else
2897:Core/Src/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
2898:Core/Src/ff.c **** 			}
2899:Core/Src/ff.c **** 		}
2900:Core/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
2901:Core/Src/ff.c **** 	}
2902:Core/Src/ff.c **** 
2903:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
2904:Core/Src/ff.c **** }
2905:Core/Src/ff.c **** 
2906:Core/Src/ff.c **** 
2907:Core/Src/ff.c **** #if _FS_RPATH >= 2
2908:Core/Src/ff.c **** FRESULT f_getcwd (
2909:Core/Src/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
2910:Core/Src/ff.c **** 	UINT len		/* Size of path */
2911:Core/Src/ff.c **** )
2912:Core/Src/ff.c **** {
2913:Core/Src/ff.c **** 	FRESULT res;
2914:Core/Src/ff.c **** 	DIR dj;
2915:Core/Src/ff.c **** 	UINT i, n;
2916:Core/Src/ff.c **** 	DWORD ccl;
2917:Core/Src/ff.c **** 	TCHAR *tp;
2918:Core/Src/ff.c **** 	FILINFO fno;
2919:Core/Src/ff.c **** 	DEF_NAMEBUF;
2920:Core/Src/ff.c **** 
2921:Core/Src/ff.c **** 
2922:Core/Src/ff.c **** 	*buff = 0;
2923:Core/Src/ff.c **** 	/* Get logical drive number */
2924:Core/Src/ff.c **** 	res = find_volume(&dj.fs, (const TCHAR**)&buff, 0);	/* Get current volume */
2925:Core/Src/ff.c **** 	if (res == FR_OK) {
2926:Core/Src/ff.c **** 		INIT_BUF(dj);
2927:Core/Src/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
2928:Core/Src/ff.c **** 		dj.sclust = dj.fs->cdir;			/* Start to follow upper directory from current directory */
2929:Core/Src/ff.c **** 		while ((ccl = dj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
2930:Core/Src/ff.c **** 			res = dir_sdi(&dj, 1);			/* Get parent directory */
2931:Core/Src/ff.c **** 			if (res != FR_OK) break;
2932:Core/Src/ff.c **** 			res = dir_read(&dj, 0);
2933:Core/Src/ff.c **** 			if (res != FR_OK) break;
2934:Core/Src/ff.c **** 			dj.sclust = ld_clust(dj.fs, dj.dir);	/* Goto parent directory */
2935:Core/Src/ff.c **** 			res = dir_sdi(&dj, 0);
2936:Core/Src/ff.c **** 			if (res != FR_OK) break;
2937:Core/Src/ff.c **** 			do {							/* Find the entry links to the child directory */
2938:Core/Src/ff.c **** 				res = dir_read(&dj, 0);
2939:Core/Src/ff.c **** 				if (res != FR_OK) break;
2940:Core/Src/ff.c **** 				if (ccl == ld_clust(dj.fs, dj.dir)) break;	/* Found the entry */
2941:Core/Src/ff.c **** 				res = dir_next(&dj, 0);	
2942:Core/Src/ff.c **** 			} while (res == FR_OK);
2943:Core/Src/ff.c **** 			if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
2944:Core/Src/ff.c **** 			if (res != FR_OK) break;
2945:Core/Src/ff.c **** #if _USE_LFN
2946:Core/Src/ff.c **** 			fno.lfname = buff;
2947:Core/Src/ff.c **** 			fno.lfsize = i;
2948:Core/Src/ff.c **** #endif
2949:Core/Src/ff.c **** 			get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
2950:Core/Src/ff.c **** 			tp = fno.fname;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 219


2951:Core/Src/ff.c **** #if _USE_LFN
2952:Core/Src/ff.c **** 			if (*buff) tp = buff;
2953:Core/Src/ff.c **** #endif
2954:Core/Src/ff.c **** 			for (n = 0; tp[n]; n++) ;
2955:Core/Src/ff.c **** 			if (i < n + 3) {
2956:Core/Src/ff.c **** 				res = FR_NOT_ENOUGH_CORE; break;
2957:Core/Src/ff.c **** 			}
2958:Core/Src/ff.c **** 			while (n) buff[--i] = tp[--n];
2959:Core/Src/ff.c **** 			buff[--i] = '/';
2960:Core/Src/ff.c **** 		}
2961:Core/Src/ff.c **** 		tp = buff;
2962:Core/Src/ff.c **** 		if (res == FR_OK) {
2963:Core/Src/ff.c **** #if _VOLUMES >= 2
2964:Core/Src/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
2965:Core/Src/ff.c **** 			*tp++ = ':';
2966:Core/Src/ff.c **** #endif
2967:Core/Src/ff.c **** 			if (i == len) {					/* Root-directory */
2968:Core/Src/ff.c **** 				*tp++ = '/';
2969:Core/Src/ff.c **** 			} else {						/* Sub-directroy */
2970:Core/Src/ff.c **** 				do		/* Add stacked path str */
2971:Core/Src/ff.c **** 					*tp++ = buff[i++];
2972:Core/Src/ff.c **** 				while (i < len);
2973:Core/Src/ff.c **** 			}
2974:Core/Src/ff.c **** 		}
2975:Core/Src/ff.c **** 		*tp = 0;
2976:Core/Src/ff.c **** 		FREE_BUF();
2977:Core/Src/ff.c **** 	}
2978:Core/Src/ff.c **** 
2979:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
2980:Core/Src/ff.c **** }
2981:Core/Src/ff.c **** #endif /* _FS_RPATH >= 2 */
2982:Core/Src/ff.c **** #endif /* _FS_RPATH >= 1 */
2983:Core/Src/ff.c **** 
2984:Core/Src/ff.c **** 
2985:Core/Src/ff.c **** 
2986:Core/Src/ff.c **** #if _FS_MINIMIZE <= 2
2987:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2988:Core/Src/ff.c **** /* Seek File R/W Pointer                                                 */
2989:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
2990:Core/Src/ff.c **** 
2991:Core/Src/ff.c **** FRESULT f_lseek (
2992:Core/Src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
2993:Core/Src/ff.c **** 	DWORD ofs		/* File pointer from top of file */
2994:Core/Src/ff.c **** )
2995:Core/Src/ff.c **** {
2996:Core/Src/ff.c **** 	FRESULT res;
2997:Core/Src/ff.c **** 
2998:Core/Src/ff.c **** 
2999:Core/Src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
3000:Core/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
3001:Core/Src/ff.c **** 	if (fp->err)						/* Check error */
3002:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
3003:Core/Src/ff.c **** 
3004:Core/Src/ff.c **** #if _USE_FASTSEEK
3005:Core/Src/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
3006:Core/Src/ff.c **** 		DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
3007:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 220


3008:Core/Src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
3009:Core/Src/ff.c **** 			tbl = fp->cltbl;
3010:Core/Src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
3011:Core/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
3012:Core/Src/ff.c **** 			if (cl) {
3013:Core/Src/ff.c **** 				do {
3014:Core/Src/ff.c **** 					/* Get a fragment */
3015:Core/Src/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
3016:Core/Src/ff.c **** 					do {
3017:Core/Src/ff.c **** 						pcl = cl; ncl++;
3018:Core/Src/ff.c **** 						cl = get_fat(fp->fs, cl);
3019:Core/Src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
3020:Core/Src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3021:Core/Src/ff.c **** 					} while (cl == pcl + 1);
3022:Core/Src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
3023:Core/Src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
3024:Core/Src/ff.c **** 					}
3025:Core/Src/ff.c **** 				} while (cl < fp->fs->n_fatent);	/* Repeat until end of chain */
3026:Core/Src/ff.c **** 			}
3027:Core/Src/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
3028:Core/Src/ff.c **** 			if (ulen <= tlen)
3029:Core/Src/ff.c **** 				*tbl = 0;		/* Terminate table */
3030:Core/Src/ff.c **** 			else
3031:Core/Src/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
3032:Core/Src/ff.c **** 
3033:Core/Src/ff.c **** 		} else {						/* Fast seek */
3034:Core/Src/ff.c **** 			if (ofs > fp->fsize)		/* Clip offset at the file size */
3035:Core/Src/ff.c **** 				ofs = fp->fsize;
3036:Core/Src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
3037:Core/Src/ff.c **** 			if (ofs) {
3038:Core/Src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
3039:Core/Src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
3040:Core/Src/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
3041:Core/Src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
3042:Core/Src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
3043:Core/Src/ff.c **** #if !_FS_TINY
3044:Core/Src/ff.c **** #if !_FS_READONLY
3045:Core/Src/ff.c **** 					if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
3046:Core/Src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
3047:Core/Src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
3048:Core/Src/ff.c **** 						fp->flag &= ~FA__DIRTY;
3049:Core/Src/ff.c **** 					}
3050:Core/Src/ff.c **** #endif
3051:Core/Src/ff.c **** 					if (disk_read(fp->fs->drv, fp->buf, dsc, 1))	/* Load current sector */
3052:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
3053:Core/Src/ff.c **** #endif
3054:Core/Src/ff.c **** 					fp->dsect = dsc;
3055:Core/Src/ff.c **** 				}
3056:Core/Src/ff.c **** 			}
3057:Core/Src/ff.c **** 		}
3058:Core/Src/ff.c **** 	} else
3059:Core/Src/ff.c **** #endif
3060:Core/Src/ff.c **** 
3061:Core/Src/ff.c **** 	/* Normal Seek */
3062:Core/Src/ff.c **** 	{
3063:Core/Src/ff.c **** 		DWORD clst, bcs, nsect, ifptr;
3064:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 221


3065:Core/Src/ff.c **** 		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
3066:Core/Src/ff.c **** #if !_FS_READONLY
3067:Core/Src/ff.c **** 			 && !(fp->flag & FA_WRITE)
3068:Core/Src/ff.c **** #endif
3069:Core/Src/ff.c **** 			) ofs = fp->fsize;
3070:Core/Src/ff.c **** 
3071:Core/Src/ff.c **** 		ifptr = fp->fptr;
3072:Core/Src/ff.c **** 		fp->fptr = nsect = 0;
3073:Core/Src/ff.c **** 		if (ofs) {
3074:Core/Src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
3075:Core/Src/ff.c **** 			if (ifptr > 0 &&
3076:Core/Src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
3077:Core/Src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
3078:Core/Src/ff.c **** 				ofs -= fp->fptr;
3079:Core/Src/ff.c **** 				clst = fp->clust;
3080:Core/Src/ff.c **** 			} else {									/* When seek to back cluster, */
3081:Core/Src/ff.c **** 				clst = fp->sclust;						/* start from the first cluster */
3082:Core/Src/ff.c **** #if !_FS_READONLY
3083:Core/Src/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
3084:Core/Src/ff.c **** 					clst = create_chain(fp->fs, 0);
3085:Core/Src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
3086:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3087:Core/Src/ff.c **** 					fp->sclust = clst;
3088:Core/Src/ff.c **** 				}
3089:Core/Src/ff.c **** #endif
3090:Core/Src/ff.c **** 				fp->clust = clst;
3091:Core/Src/ff.c **** 			}
3092:Core/Src/ff.c **** 			if (clst != 0) {
3093:Core/Src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
3094:Core/Src/ff.c **** #if !_FS_READONLY
3095:Core/Src/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
3096:Core/Src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
3097:Core/Src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
3098:Core/Src/ff.c **** 							ofs = bcs; break;
3099:Core/Src/ff.c **** 						}
3100:Core/Src/ff.c **** 					} else
3101:Core/Src/ff.c **** #endif
3102:Core/Src/ff.c **** 						clst = get_fat(fp->fs, clst);	/* Follow cluster chain if not in write mode */
3103:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3104:Core/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
3105:Core/Src/ff.c **** 					fp->clust = clst;
3106:Core/Src/ff.c **** 					fp->fptr += bcs;
3107:Core/Src/ff.c **** 					ofs -= bcs;
3108:Core/Src/ff.c **** 				}
3109:Core/Src/ff.c **** 				fp->fptr += ofs;
3110:Core/Src/ff.c **** 				if (ofs % SS(fp->fs)) {
3111:Core/Src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
3112:Core/Src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
3113:Core/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
3114:Core/Src/ff.c **** 				}
3115:Core/Src/ff.c **** 			}
3116:Core/Src/ff.c **** 		}
3117:Core/Src/ff.c **** 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
3118:Core/Src/ff.c **** #if !_FS_TINY
3119:Core/Src/ff.c **** #if !_FS_READONLY
3120:Core/Src/ff.c **** 			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
3121:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 222


3122:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
3123:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
3124:Core/Src/ff.c **** 			}
3125:Core/Src/ff.c **** #endif
3126:Core/Src/ff.c **** 			if (disk_read(fp->fs->drv, fp->buf, nsect, 1))	/* Fill sector cache */
3127:Core/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
3128:Core/Src/ff.c **** #endif
3129:Core/Src/ff.c **** 			fp->dsect = nsect;
3130:Core/Src/ff.c **** 		}
3131:Core/Src/ff.c **** #if !_FS_READONLY
3132:Core/Src/ff.c **** 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
3133:Core/Src/ff.c **** 			fp->fsize = fp->fptr;
3134:Core/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
3135:Core/Src/ff.c **** 		}
3136:Core/Src/ff.c **** #endif
3137:Core/Src/ff.c **** 	}
3138:Core/Src/ff.c **** 
3139:Core/Src/ff.c **** 	LEAVE_FF(fp->fs, res);
3140:Core/Src/ff.c **** }
3141:Core/Src/ff.c **** 
3142:Core/Src/ff.c **** 
3143:Core/Src/ff.c **** 
3144:Core/Src/ff.c **** #if _FS_MINIMIZE <= 1
3145:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3146:Core/Src/ff.c **** /* Create a Directory Object                                             */
3147:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3148:Core/Src/ff.c **** 
3149:Core/Src/ff.c **** FRESULT f_opendir (
3150:Core/Src/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
3151:Core/Src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
3152:Core/Src/ff.c **** )
3153:Core/Src/ff.c **** {
3154:Core/Src/ff.c **** 	FRESULT res;
3155:Core/Src/ff.c **** 	FATFS* fs;
3156:Core/Src/ff.c **** 	DEF_NAMEBUF;
3157:Core/Src/ff.c **** 
3158:Core/Src/ff.c **** 
3159:Core/Src/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
3160:Core/Src/ff.c **** 
3161:Core/Src/ff.c **** 	/* Get logical drive number */
3162:Core/Src/ff.c **** 	res = find_volume(&fs, &path, 0);
3163:Core/Src/ff.c **** 	if (res == FR_OK) {
3164:Core/Src/ff.c **** 		dp->fs = fs;
3165:Core/Src/ff.c **** 		INIT_BUF(*dp);
3166:Core/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
3167:Core/Src/ff.c **** 		FREE_BUF();
3168:Core/Src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
3169:Core/Src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
3170:Core/Src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
3171:Core/Src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
3172:Core/Src/ff.c **** 				else							/* The object is a file */
3173:Core/Src/ff.c **** 					res = FR_NO_PATH;
3174:Core/Src/ff.c **** 			}
3175:Core/Src/ff.c **** 			if (res == FR_OK) {
3176:Core/Src/ff.c **** 				dp->id = fs->id;
3177:Core/Src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
3178:Core/Src/ff.c **** #if _FS_LOCK
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 223


3179:Core/Src/ff.c **** 				if (res == FR_OK) {
3180:Core/Src/ff.c **** 					if (dp->sclust) {
3181:Core/Src/ff.c **** 						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
3182:Core/Src/ff.c **** 						if (!dp->lockid)
3183:Core/Src/ff.c **** 							res = FR_TOO_MANY_OPEN_FILES;
3184:Core/Src/ff.c **** 					} else {
3185:Core/Src/ff.c **** 						dp->lockid = 0;	/* Root directory need not to be locked */
3186:Core/Src/ff.c **** 					}
3187:Core/Src/ff.c **** 				}
3188:Core/Src/ff.c **** #endif
3189:Core/Src/ff.c **** 			}
3190:Core/Src/ff.c **** 		}
3191:Core/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3192:Core/Src/ff.c **** 	}
3193:Core/Src/ff.c **** 	if (res != FR_OK) dp->fs = 0;		/* Invalidate the directory object if function faild */
3194:Core/Src/ff.c **** 
3195:Core/Src/ff.c **** 	LEAVE_FF(fs, res);
3196:Core/Src/ff.c **** }
3197:Core/Src/ff.c **** 
3198:Core/Src/ff.c **** 
3199:Core/Src/ff.c **** 
3200:Core/Src/ff.c **** 
3201:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3202:Core/Src/ff.c **** /* Close Directory                                                       */
3203:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3204:Core/Src/ff.c **** 
3205:Core/Src/ff.c **** FRESULT f_closedir (
3206:Core/Src/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
3207:Core/Src/ff.c **** )
3208:Core/Src/ff.c **** {
3209:Core/Src/ff.c **** 	FRESULT res;
3210:Core/Src/ff.c **** 
3211:Core/Src/ff.c **** 
3212:Core/Src/ff.c **** 	res = validate(dp);
3213:Core/Src/ff.c **** 	if (res == FR_OK) {
3214:Core/Src/ff.c **** #if _FS_REENTRANT
3215:Core/Src/ff.c **** 		FATFS *fs = dp->fs;
3216:Core/Src/ff.c **** #endif
3217:Core/Src/ff.c **** #if _FS_LOCK
3218:Core/Src/ff.c **** 		if (dp->lockid)				/* Decrement sub-directory open counter */
3219:Core/Src/ff.c **** 			res = dec_lock(dp->lockid);
3220:Core/Src/ff.c **** 		if (res == FR_OK)
3221:Core/Src/ff.c **** #endif
3222:Core/Src/ff.c **** 			dp->fs = 0;				/* Invalidate directory object */
3223:Core/Src/ff.c **** #if _FS_REENTRANT
3224:Core/Src/ff.c **** 		unlock_fs(fs, FR_OK);		/* Unlock volume */
3225:Core/Src/ff.c **** #endif
3226:Core/Src/ff.c **** 	}
3227:Core/Src/ff.c **** 	return res;
3228:Core/Src/ff.c **** }
3229:Core/Src/ff.c **** 
3230:Core/Src/ff.c **** 
3231:Core/Src/ff.c **** 
3232:Core/Src/ff.c **** 
3233:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3234:Core/Src/ff.c **** /* Read Directory Entries in Sequence                                    */
3235:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 224


3236:Core/Src/ff.c **** 
3237:Core/Src/ff.c **** FRESULT f_readdir (
3238:Core/Src/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
3239:Core/Src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3240:Core/Src/ff.c **** )
3241:Core/Src/ff.c **** {
3242:Core/Src/ff.c **** 	FRESULT res;
3243:Core/Src/ff.c **** 	DEF_NAMEBUF;
3244:Core/Src/ff.c **** 
3245:Core/Src/ff.c **** 
3246:Core/Src/ff.c **** 	res = validate(dp);						/* Check validity of the object */
3247:Core/Src/ff.c **** 	if (res == FR_OK) {
3248:Core/Src/ff.c **** 		if (!fno) {
3249:Core/Src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
3250:Core/Src/ff.c **** 		} else {
3251:Core/Src/ff.c **** 			INIT_BUF(*dp);
3252:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
3253:Core/Src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
3254:Core/Src/ff.c **** 				dp->sect = 0;
3255:Core/Src/ff.c **** 				res = FR_OK;
3256:Core/Src/ff.c **** 			}
3257:Core/Src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
3258:Core/Src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
3259:Core/Src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
3260:Core/Src/ff.c **** 				if (res == FR_NO_FILE) {
3261:Core/Src/ff.c **** 					dp->sect = 0;
3262:Core/Src/ff.c **** 					res = FR_OK;
3263:Core/Src/ff.c **** 				}
3264:Core/Src/ff.c **** 			}
3265:Core/Src/ff.c **** 			FREE_BUF();
3266:Core/Src/ff.c **** 		}
3267:Core/Src/ff.c **** 	}
3268:Core/Src/ff.c **** 
3269:Core/Src/ff.c **** 	LEAVE_FF(dp->fs, res);
3270:Core/Src/ff.c **** }
3271:Core/Src/ff.c **** 
3272:Core/Src/ff.c **** 
3273:Core/Src/ff.c **** 
3274:Core/Src/ff.c **** #if _FS_MINIMIZE == 0
3275:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3276:Core/Src/ff.c **** /* Get File Status                                                       */
3277:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3278:Core/Src/ff.c **** 
3279:Core/Src/ff.c **** FRESULT f_stat (
3280:Core/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3281:Core/Src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3282:Core/Src/ff.c **** )
3283:Core/Src/ff.c **** {
3284:Core/Src/ff.c **** 	FRESULT res;
3285:Core/Src/ff.c **** 	DIR dj;
3286:Core/Src/ff.c **** 	DEF_NAMEBUF;
3287:Core/Src/ff.c **** 
3288:Core/Src/ff.c **** 
3289:Core/Src/ff.c **** 	/* Get logical drive number */
3290:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
3291:Core/Src/ff.c **** 	if (res == FR_OK) {
3292:Core/Src/ff.c **** 		INIT_BUF(dj);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 225


3293:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3294:Core/Src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
3295:Core/Src/ff.c **** 			if (dj.dir) {		/* Found an object */
3296:Core/Src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
3297:Core/Src/ff.c **** 			} else {			/* It is root directory */
3298:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
3299:Core/Src/ff.c **** 			}
3300:Core/Src/ff.c **** 		}
3301:Core/Src/ff.c **** 		FREE_BUF();
3302:Core/Src/ff.c **** 	}
3303:Core/Src/ff.c **** 
3304:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3305:Core/Src/ff.c **** }
3306:Core/Src/ff.c **** 
3307:Core/Src/ff.c **** 
3308:Core/Src/ff.c **** 
3309:Core/Src/ff.c **** #if !_FS_READONLY
3310:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3311:Core/Src/ff.c **** /* Get Number of Free Clusters                                           */
3312:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3313:Core/Src/ff.c **** 
3314:Core/Src/ff.c **** FRESULT f_getfree (
3315:Core/Src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3316:Core/Src/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
3317:Core/Src/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
3318:Core/Src/ff.c **** )
3319:Core/Src/ff.c **** {
3320:Core/Src/ff.c **** 	FRESULT res;
3321:Core/Src/ff.c **** 	FATFS *fs;
3322:Core/Src/ff.c **** 	DWORD n, clst, sect, stat;
3323:Core/Src/ff.c **** 	UINT i;
3324:Core/Src/ff.c **** 	BYTE fat, *p;
3325:Core/Src/ff.c **** 
3326:Core/Src/ff.c **** 
3327:Core/Src/ff.c **** 	/* Get logical drive number */
3328:Core/Src/ff.c **** 	res = find_volume(fatfs, &path, 0);
3329:Core/Src/ff.c **** 	fs = *fatfs;
3330:Core/Src/ff.c **** 	if (res == FR_OK) {
3331:Core/Src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
3332:Core/Src/ff.c **** 		if (fs->free_clust <= fs->n_fatent - 2) {
3333:Core/Src/ff.c **** 			*nclst = fs->free_clust;
3334:Core/Src/ff.c **** 		} else {
3335:Core/Src/ff.c **** 			/* Get number of free clusters */
3336:Core/Src/ff.c **** 			fat = fs->fs_type;
3337:Core/Src/ff.c **** 			n = 0;
3338:Core/Src/ff.c **** 			if (fat == FS_FAT12) {
3339:Core/Src/ff.c **** 				clst = 2;
3340:Core/Src/ff.c **** 				do {
3341:Core/Src/ff.c **** 					stat = get_fat(fs, clst);
3342:Core/Src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
3343:Core/Src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
3344:Core/Src/ff.c **** 					if (stat == 0) n++;
3345:Core/Src/ff.c **** 				} while (++clst < fs->n_fatent);
3346:Core/Src/ff.c **** 			} else {
3347:Core/Src/ff.c **** 				clst = fs->n_fatent;
3348:Core/Src/ff.c **** 				sect = fs->fatbase;
3349:Core/Src/ff.c **** 				i = 0; p = 0;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 226


3350:Core/Src/ff.c **** 				do {
3351:Core/Src/ff.c **** 					if (!i) {
3352:Core/Src/ff.c **** 						res = move_window(fs, sect++);
3353:Core/Src/ff.c **** 						if (res != FR_OK) break;
3354:Core/Src/ff.c **** 						p = fs->win;
3355:Core/Src/ff.c **** 						i = SS(fs);
3356:Core/Src/ff.c **** 					}
3357:Core/Src/ff.c **** 					if (fat == FS_FAT16) {
3358:Core/Src/ff.c **** 						if (LD_WORD(p) == 0) n++;
3359:Core/Src/ff.c **** 						p += 2; i -= 2;
3360:Core/Src/ff.c **** 					} else {
3361:Core/Src/ff.c **** 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
3362:Core/Src/ff.c **** 						p += 4; i -= 4;
3363:Core/Src/ff.c **** 					}
3364:Core/Src/ff.c **** 				} while (--clst);
3365:Core/Src/ff.c **** 			}
3366:Core/Src/ff.c **** 			fs->free_clust = n;
3367:Core/Src/ff.c **** 			fs->fsi_flag |= 1;
3368:Core/Src/ff.c **** 			*nclst = n;
3369:Core/Src/ff.c **** 		}
3370:Core/Src/ff.c **** 	}
3371:Core/Src/ff.c **** 	LEAVE_FF(fs, res);
3372:Core/Src/ff.c **** }
3373:Core/Src/ff.c **** 
3374:Core/Src/ff.c **** 
3375:Core/Src/ff.c **** 
3376:Core/Src/ff.c **** 
3377:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3378:Core/Src/ff.c **** /* Truncate File                                                         */
3379:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3380:Core/Src/ff.c **** 
3381:Core/Src/ff.c **** FRESULT f_truncate (
3382:Core/Src/ff.c **** 	FIL* fp		/* Pointer to the file object */
3383:Core/Src/ff.c **** )
3384:Core/Src/ff.c **** {
3385:Core/Src/ff.c **** 	FRESULT res;
3386:Core/Src/ff.c **** 	DWORD ncl;
3387:Core/Src/ff.c **** 
3388:Core/Src/ff.c **** 
3389:Core/Src/ff.c **** 	res = validate(fp);						/* Check validity of the object */
3390:Core/Src/ff.c **** 	if (res == FR_OK) {
3391:Core/Src/ff.c **** 		if (fp->err) {						/* Check error */
3392:Core/Src/ff.c **** 			res = (FRESULT)fp->err;
3393:Core/Src/ff.c **** 		} else {
3394:Core/Src/ff.c **** 			if (!(fp->flag & FA_WRITE))		/* Check access mode */
3395:Core/Src/ff.c **** 				res = FR_DENIED;
3396:Core/Src/ff.c **** 		}
3397:Core/Src/ff.c **** 	}
3398:Core/Src/ff.c **** 	if (res == FR_OK) {
3399:Core/Src/ff.c **** 		if (fp->fsize > fp->fptr) {
3400:Core/Src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
3401:Core/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
3402:Core/Src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
3403:Core/Src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
3404:Core/Src/ff.c **** 				fp->sclust = 0;
3405:Core/Src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
3406:Core/Src/ff.c **** 				ncl = get_fat(fp->fs, fp->clust);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 227


3407:Core/Src/ff.c **** 				res = FR_OK;
3408:Core/Src/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
3409:Core/Src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
3410:Core/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
3411:Core/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
3412:Core/Src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
3413:Core/Src/ff.c **** 				}
3414:Core/Src/ff.c **** 			}
3415:Core/Src/ff.c **** #if !_FS_TINY
3416:Core/Src/ff.c **** 			if (res == FR_OK && (fp->flag & FA__DIRTY)) {
3417:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
3418:Core/Src/ff.c **** 					res = FR_DISK_ERR;
3419:Core/Src/ff.c **** 				else
3420:Core/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
3421:Core/Src/ff.c **** 			}
3422:Core/Src/ff.c **** #endif
3423:Core/Src/ff.c **** 		}
3424:Core/Src/ff.c **** 		if (res != FR_OK) fp->err = (FRESULT)res;
3425:Core/Src/ff.c **** 	}
3426:Core/Src/ff.c **** 
3427:Core/Src/ff.c **** 	LEAVE_FF(fp->fs, res);
3428:Core/Src/ff.c **** }
3429:Core/Src/ff.c **** 
3430:Core/Src/ff.c **** 
3431:Core/Src/ff.c **** 
3432:Core/Src/ff.c **** 
3433:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3434:Core/Src/ff.c **** /* Delete a File or Directory                                            */
3435:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3436:Core/Src/ff.c **** 
3437:Core/Src/ff.c **** FRESULT f_unlink (
3438:Core/Src/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
3439:Core/Src/ff.c **** )
3440:Core/Src/ff.c **** {
3441:Core/Src/ff.c **** 	FRESULT res;
3442:Core/Src/ff.c **** 	DIR dj, sdj;
3443:Core/Src/ff.c **** 	BYTE *dir;
3444:Core/Src/ff.c **** 	DWORD dclst;
3445:Core/Src/ff.c **** 	DEF_NAMEBUF;
3446:Core/Src/ff.c **** 
3447:Core/Src/ff.c **** 
3448:Core/Src/ff.c **** 	/* Get logical drive number */
3449:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3450:Core/Src/ff.c **** 	if (res == FR_OK) {
3451:Core/Src/ff.c **** 		INIT_BUF(dj);
3452:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3453:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
3454:Core/Src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
3455:Core/Src/ff.c **** #if _FS_LOCK
3456:Core/Src/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Cannot remove open file */
3457:Core/Src/ff.c **** #endif
3458:Core/Src/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
3459:Core/Src/ff.c **** 			dir = dj.dir;
3460:Core/Src/ff.c **** 			if (!dir) {
3461:Core/Src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the start directory */
3462:Core/Src/ff.c **** 			} else {
3463:Core/Src/ff.c **** 				if (dir[DIR_Attr] & AM_RDO)
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 228


3464:Core/Src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
3465:Core/Src/ff.c **** 			}
3466:Core/Src/ff.c **** 			dclst = ld_clust(dj.fs, dir);
3467:Core/Src/ff.c **** 			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
3468:Core/Src/ff.c **** 				if (dclst < 2) {
3469:Core/Src/ff.c **** 					res = FR_INT_ERR;
3470:Core/Src/ff.c **** 				} else {
3471:Core/Src/ff.c **** 					mem_cpy(&sdj, &dj, sizeof (DIR));	/* Check if the sub-directory is empty or not */
3472:Core/Src/ff.c **** 					sdj.sclust = dclst;
3473:Core/Src/ff.c **** 					res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
3474:Core/Src/ff.c **** 					if (res == FR_OK) {
3475:Core/Src/ff.c **** 						res = dir_read(&sdj, 0);	/* Read an item */
3476:Core/Src/ff.c **** 						if (res == FR_OK		/* Not empty directory */
3477:Core/Src/ff.c **** #if _FS_RPATH
3478:Core/Src/ff.c **** 						|| dclst == dj.fs->cdir	/* Current directory */
3479:Core/Src/ff.c **** #endif
3480:Core/Src/ff.c **** 						) res = FR_DENIED;
3481:Core/Src/ff.c **** 						if (res == FR_NO_FILE) res = FR_OK;	/* Empty */
3482:Core/Src/ff.c **** 					}
3483:Core/Src/ff.c **** 				}
3484:Core/Src/ff.c **** 			}
3485:Core/Src/ff.c **** 			if (res == FR_OK) {
3486:Core/Src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
3487:Core/Src/ff.c **** 				if (res == FR_OK) {
3488:Core/Src/ff.c **** 					if (dclst)				/* Remove the cluster chain if exist */
3489:Core/Src/ff.c **** 						res = remove_chain(dj.fs, dclst);
3490:Core/Src/ff.c **** 					if (res == FR_OK) res = sync_fs(dj.fs);
3491:Core/Src/ff.c **** 				}
3492:Core/Src/ff.c **** 			}
3493:Core/Src/ff.c **** 		}
3494:Core/Src/ff.c **** 		FREE_BUF();
3495:Core/Src/ff.c **** 	}
3496:Core/Src/ff.c **** 
3497:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3498:Core/Src/ff.c **** }
3499:Core/Src/ff.c **** 
3500:Core/Src/ff.c **** 
3501:Core/Src/ff.c **** 
3502:Core/Src/ff.c **** 
3503:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3504:Core/Src/ff.c **** /* Create a Directory                                                    */
3505:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3506:Core/Src/ff.c **** 
3507:Core/Src/ff.c **** FRESULT f_mkdir (
3508:Core/Src/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
3509:Core/Src/ff.c **** )
3510:Core/Src/ff.c **** {
3511:Core/Src/ff.c **** 	FRESULT res;
3512:Core/Src/ff.c **** 	DIR dj;
3513:Core/Src/ff.c **** 	BYTE *dir, n;
3514:Core/Src/ff.c **** 	DWORD dsc, dcl, pcl, tm = get_fattime();
3515:Core/Src/ff.c **** 	DEF_NAMEBUF;
3516:Core/Src/ff.c **** 
3517:Core/Src/ff.c **** 
3518:Core/Src/ff.c **** 	/* Get logical drive number */
3519:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3520:Core/Src/ff.c **** 	if (res == FR_OK) {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 229


3521:Core/Src/ff.c **** 		INIT_BUF(dj);
3522:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
3523:Core/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
3524:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NS] & NS_DOT))
3525:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
3526:Core/Src/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
3527:Core/Src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
3528:Core/Src/ff.c **** 			res = FR_OK;
3529:Core/Src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
3530:Core/Src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
3531:Core/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
3532:Core/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
3533:Core/Src/ff.c **** 				res = sync_window(dj.fs);
3534:Core/Src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
3535:Core/Src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
3536:Core/Src/ff.c **** 				dir = dj.fs->win;
3537:Core/Src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
3538:Core/Src/ff.c **** 				mem_set(dir+DIR_Name, ' ', 11);	/* Create "." entry */
3539:Core/Src/ff.c **** 				dir[DIR_Name] = '.';
3540:Core/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
3541:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);
3542:Core/Src/ff.c **** 				st_clust(dir, dcl);
3543:Core/Src/ff.c **** 				mem_cpy(dir+SZ_DIR, dir, SZ_DIR); 	/* Create ".." entry */
3544:Core/Src/ff.c **** 				dir[SZ_DIR+1] = '.'; pcl = dj.sclust;
3545:Core/Src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
3546:Core/Src/ff.c **** 					pcl = 0;
3547:Core/Src/ff.c **** 				st_clust(dir+SZ_DIR, pcl);
3548:Core/Src/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
3549:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
3550:Core/Src/ff.c **** 					dj.fs->wflag = 1;
3551:Core/Src/ff.c **** 					res = sync_window(dj.fs);
3552:Core/Src/ff.c **** 					if (res != FR_OK) break;
3553:Core/Src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
3554:Core/Src/ff.c **** 				}
3555:Core/Src/ff.c **** 			}
3556:Core/Src/ff.c **** 			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
3557:Core/Src/ff.c **** 			if (res != FR_OK) {
3558:Core/Src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
3559:Core/Src/ff.c **** 			} else {
3560:Core/Src/ff.c **** 				dir = dj.dir;
3561:Core/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
3562:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);		/* Created time */
3563:Core/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
3564:Core/Src/ff.c **** 				dj.fs->wflag = 1;
3565:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
3566:Core/Src/ff.c **** 			}
3567:Core/Src/ff.c **** 		}
3568:Core/Src/ff.c **** 		FREE_BUF();
3569:Core/Src/ff.c **** 	}
3570:Core/Src/ff.c **** 
3571:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3572:Core/Src/ff.c **** }
3573:Core/Src/ff.c **** 
3574:Core/Src/ff.c **** 
3575:Core/Src/ff.c **** 
3576:Core/Src/ff.c **** 
3577:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 230


3578:Core/Src/ff.c **** /* Change Attribute                                                      */
3579:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3580:Core/Src/ff.c **** 
3581:Core/Src/ff.c **** FRESULT f_chmod (
3582:Core/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3583:Core/Src/ff.c **** 	BYTE value,			/* Attribute bits */
3584:Core/Src/ff.c **** 	BYTE mask			/* Attribute mask to change */
3585:Core/Src/ff.c **** )
3586:Core/Src/ff.c **** {
3587:Core/Src/ff.c **** 	FRESULT res;
3588:Core/Src/ff.c **** 	DIR dj;
3589:Core/Src/ff.c **** 	BYTE *dir;
3590:Core/Src/ff.c **** 	DEF_NAMEBUF;
3591:Core/Src/ff.c **** 
3592:Core/Src/ff.c **** 
3593:Core/Src/ff.c **** 	/* Get logical drive number */
3594:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3595:Core/Src/ff.c **** 	if (res == FR_OK) {
3596:Core/Src/ff.c **** 		INIT_BUF(dj);
3597:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3598:Core/Src/ff.c **** 		FREE_BUF();
3599:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
3600:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
3601:Core/Src/ff.c **** 		if (res == FR_OK) {
3602:Core/Src/ff.c **** 			dir = dj.dir;
3603:Core/Src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
3604:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
3605:Core/Src/ff.c **** 			} else {						/* File or sub directory */
3606:Core/Src/ff.c **** 				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
3607:Core/Src/ff.c **** 				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
3608:Core/Src/ff.c **** 				dj.fs->wflag = 1;
3609:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
3610:Core/Src/ff.c **** 			}
3611:Core/Src/ff.c **** 		}
3612:Core/Src/ff.c **** 	}
3613:Core/Src/ff.c **** 
3614:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3615:Core/Src/ff.c **** }
3616:Core/Src/ff.c **** 
3617:Core/Src/ff.c **** 
3618:Core/Src/ff.c **** 
3619:Core/Src/ff.c **** 
3620:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3621:Core/Src/ff.c **** /* Change Timestamp                                                      */
3622:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3623:Core/Src/ff.c **** 
3624:Core/Src/ff.c **** FRESULT f_utime (
3625:Core/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
3626:Core/Src/ff.c **** 	const FILINFO* fno	/* Pointer to the time stamp to be set */
3627:Core/Src/ff.c **** )
3628:Core/Src/ff.c **** {
3629:Core/Src/ff.c **** 	FRESULT res;
3630:Core/Src/ff.c **** 	DIR dj;
3631:Core/Src/ff.c **** 	BYTE *dir;
3632:Core/Src/ff.c **** 	DEF_NAMEBUF;
3633:Core/Src/ff.c **** 
3634:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 231


3635:Core/Src/ff.c **** 	/* Get logical drive number */
3636:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3637:Core/Src/ff.c **** 	if (res == FR_OK) {
3638:Core/Src/ff.c **** 		INIT_BUF(dj);
3639:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3640:Core/Src/ff.c **** 		FREE_BUF();
3641:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
3642:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
3643:Core/Src/ff.c **** 		if (res == FR_OK) {
3644:Core/Src/ff.c **** 			dir = dj.dir;
3645:Core/Src/ff.c **** 			if (!dir) {					/* Root directory */
3646:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
3647:Core/Src/ff.c **** 			} else {					/* File or sub-directory */
3648:Core/Src/ff.c **** 				ST_WORD(dir+DIR_WrtTime, fno->ftime);
3649:Core/Src/ff.c **** 				ST_WORD(dir+DIR_WrtDate, fno->fdate);
3650:Core/Src/ff.c **** 				dj.fs->wflag = 1;
3651:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
3652:Core/Src/ff.c **** 			}
3653:Core/Src/ff.c **** 		}
3654:Core/Src/ff.c **** 	}
3655:Core/Src/ff.c **** 
3656:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3657:Core/Src/ff.c **** }
3658:Core/Src/ff.c **** 
3659:Core/Src/ff.c **** 
3660:Core/Src/ff.c **** 
3661:Core/Src/ff.c **** 
3662:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3663:Core/Src/ff.c **** /* Rename File/Directory                                                 */
3664:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3665:Core/Src/ff.c **** 
3666:Core/Src/ff.c **** FRESULT f_rename (
3667:Core/Src/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object to be renamed */
3668:Core/Src/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
3669:Core/Src/ff.c **** )
3670:Core/Src/ff.c **** {
3671:Core/Src/ff.c **** 	FRESULT res;
3672:Core/Src/ff.c **** 	DIR djo, djn;
3673:Core/Src/ff.c **** 	BYTE buf[21], *dir;
3674:Core/Src/ff.c **** 	DWORD dw;
3675:Core/Src/ff.c **** 	DEF_NAMEBUF;
3676:Core/Src/ff.c **** 
3677:Core/Src/ff.c **** 
3678:Core/Src/ff.c **** 	/* Get logical drive number of the source object */
3679:Core/Src/ff.c **** 	res = find_volume(&djo.fs, &path_old, 1);
3680:Core/Src/ff.c **** 	if (res == FR_OK) {
3681:Core/Src/ff.c **** 		djn.fs = djo.fs;
3682:Core/Src/ff.c **** 		INIT_BUF(djo);
3683:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
3684:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NS] & NS_DOT))
3685:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
3686:Core/Src/ff.c **** #if _FS_LOCK
3687:Core/Src/ff.c **** 		if (res == FR_OK) res = chk_lock(&djo, 2);
3688:Core/Src/ff.c **** #endif
3689:Core/Src/ff.c **** 		if (res == FR_OK) {						/* Old object is found */
3690:Core/Src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
3691:Core/Src/ff.c **** 				res = FR_NO_FILE;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 232


3692:Core/Src/ff.c **** 			} else {
3693:Core/Src/ff.c **** 				mem_cpy(buf, djo.dir+DIR_Attr, 21);		/* Save the object information except name */
3694:Core/Src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
3695:Core/Src/ff.c **** 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
3696:Core/Src/ff.c **** 					res = follow_path(&djn, path_new);	/* and check if new object is exist */
3697:Core/Src/ff.c **** 				else
3698:Core/Src/ff.c **** 					res = FR_INVALID_DRIVE;
3699:Core/Src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
3700:Core/Src/ff.c **** 				if (res == FR_NO_FILE) { 				/* Is it a valid path and no name collision? */
3701:Core/Src/ff.c **** /* Start critical section that any interruption can cause a cross-link */
3702:Core/Src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
3703:Core/Src/ff.c **** 					if (res == FR_OK) {
3704:Core/Src/ff.c **** 						dir = djn.dir;					/* Copy object information except name */
3705:Core/Src/ff.c **** 						mem_cpy(dir+13, buf+2, 19);
3706:Core/Src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
3707:Core/Src/ff.c **** 						djo.fs->wflag = 1;
3708:Core/Src/ff.c **** 						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the direct
3709:Core/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
3710:Core/Src/ff.c **** 							if (!dw) {
3711:Core/Src/ff.c **** 								res = FR_INT_ERR;
3712:Core/Src/ff.c **** 							} else {
3713:Core/Src/ff.c **** 								res = move_window(djo.fs, dw);
3714:Core/Src/ff.c **** 								dir = djo.fs->win+SZ_DIR;	/* .. entry */
3715:Core/Src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
3716:Core/Src/ff.c **** 									dw = (djo.fs->fs_type == FS_FAT32 && djn.sclust == djo.fs->dirbase) ? 0 : djn.sclust;
3717:Core/Src/ff.c **** 									st_clust(dir, dw);
3718:Core/Src/ff.c **** 									djo.fs->wflag = 1;
3719:Core/Src/ff.c **** 								}
3720:Core/Src/ff.c **** 							}
3721:Core/Src/ff.c **** 						}
3722:Core/Src/ff.c **** 						if (res == FR_OK) {
3723:Core/Src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
3724:Core/Src/ff.c **** 							if (res == FR_OK)
3725:Core/Src/ff.c **** 								res = sync_fs(djo.fs);
3726:Core/Src/ff.c **** 						}
3727:Core/Src/ff.c **** 					}
3728:Core/Src/ff.c **** /* End critical section */
3729:Core/Src/ff.c **** 				}
3730:Core/Src/ff.c **** 			}
3731:Core/Src/ff.c **** 		}
3732:Core/Src/ff.c **** 		FREE_BUF();
3733:Core/Src/ff.c **** 	}
3734:Core/Src/ff.c **** 
3735:Core/Src/ff.c **** 	LEAVE_FF(djo.fs, res);
3736:Core/Src/ff.c **** }
3737:Core/Src/ff.c **** 
3738:Core/Src/ff.c **** #endif /* !_FS_READONLY */
3739:Core/Src/ff.c **** #endif /* _FS_MINIMIZE == 0 */
3740:Core/Src/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
3741:Core/Src/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
3742:Core/Src/ff.c **** 
3743:Core/Src/ff.c **** 
3744:Core/Src/ff.c **** 
3745:Core/Src/ff.c **** #if _USE_LABEL
3746:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3747:Core/Src/ff.c **** /* Get volume label                                                      */
3748:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 233


3749:Core/Src/ff.c **** 
3750:Core/Src/ff.c **** FRESULT f_getlabel (
3751:Core/Src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3752:Core/Src/ff.c **** 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
3753:Core/Src/ff.c **** 	DWORD* sn			/* Pointer to a variable to return the volume serial number */
3754:Core/Src/ff.c **** )
3755:Core/Src/ff.c **** {
3756:Core/Src/ff.c **** 	FRESULT res;
3757:Core/Src/ff.c **** 	DIR dj;
3758:Core/Src/ff.c **** 	UINT i, j;
3759:Core/Src/ff.c **** 
3760:Core/Src/ff.c **** 
3761:Core/Src/ff.c **** 	/* Get logical drive number */
3762:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
3763:Core/Src/ff.c **** 
3764:Core/Src/ff.c **** 	/* Get volume label */
3765:Core/Src/ff.c **** 	if (res == FR_OK && label) {
3766:Core/Src/ff.c **** 		dj.sclust = 0;					/* Open root directory */
3767:Core/Src/ff.c **** 		res = dir_sdi(&dj, 0);
3768:Core/Src/ff.c **** 		if (res == FR_OK) {
3769:Core/Src/ff.c **** 			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
3770:Core/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
3771:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3772:Core/Src/ff.c **** 				WCHAR w;
3773:Core/Src/ff.c **** 				i = j = 0;
3774:Core/Src/ff.c **** 				do {
3775:Core/Src/ff.c **** 					w = (i < 11) ? dj.dir[i++] : ' ';
3776:Core/Src/ff.c **** 					if (IsDBCS1(w) && i < 11 && IsDBCS2(dj.dir[i]))
3777:Core/Src/ff.c **** 						w = w << 8 | dj.dir[i++];
3778:Core/Src/ff.c **** 					label[j++] = ff_convert(w, 1);	/* OEM -> Unicode */
3779:Core/Src/ff.c **** 				} while (j < 11);
3780:Core/Src/ff.c **** #else
3781:Core/Src/ff.c **** 				mem_cpy(label, dj.dir, 11);
3782:Core/Src/ff.c **** #endif
3783:Core/Src/ff.c **** 				j = 11;
3784:Core/Src/ff.c **** 				do {
3785:Core/Src/ff.c **** 					label[j] = 0;
3786:Core/Src/ff.c **** 					if (!j) break;
3787:Core/Src/ff.c **** 				} while (label[--j] == ' ');
3788:Core/Src/ff.c **** 			}
3789:Core/Src/ff.c **** 			if (res == FR_NO_FILE) {	/* No label, return nul string */
3790:Core/Src/ff.c **** 				label[0] = 0;
3791:Core/Src/ff.c **** 				res = FR_OK;
3792:Core/Src/ff.c **** 			}
3793:Core/Src/ff.c **** 		}
3794:Core/Src/ff.c **** 	}
3795:Core/Src/ff.c **** 
3796:Core/Src/ff.c **** 	/* Get volume serial number */
3797:Core/Src/ff.c **** 	if (res == FR_OK && sn) {
3798:Core/Src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
3799:Core/Src/ff.c **** 		if (res == FR_OK) {
3800:Core/Src/ff.c **** 			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
3801:Core/Src/ff.c **** 			*sn = LD_DWORD(&dj.fs->win[i]);
3802:Core/Src/ff.c **** 		}
3803:Core/Src/ff.c **** 	}
3804:Core/Src/ff.c **** 
3805:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 234


3806:Core/Src/ff.c **** }
3807:Core/Src/ff.c **** 
3808:Core/Src/ff.c **** 
3809:Core/Src/ff.c **** 
3810:Core/Src/ff.c **** #if !_FS_READONLY
3811:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3812:Core/Src/ff.c **** /* Set volume label                                                      */
3813:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3814:Core/Src/ff.c **** 
3815:Core/Src/ff.c **** FRESULT f_setlabel (
3816:Core/Src/ff.c **** 	const TCHAR* label	/* Pointer to the volume label to set */
3817:Core/Src/ff.c **** )
3818:Core/Src/ff.c **** {
3819:Core/Src/ff.c **** 	FRESULT res;
3820:Core/Src/ff.c **** 	DIR dj;
3821:Core/Src/ff.c **** 	BYTE vn[11];
3822:Core/Src/ff.c **** 	UINT i, j, sl;
3823:Core/Src/ff.c **** 	WCHAR w;
3824:Core/Src/ff.c **** 	DWORD tm;
3825:Core/Src/ff.c **** 
3826:Core/Src/ff.c **** 
3827:Core/Src/ff.c **** 	/* Get logical drive number */
3828:Core/Src/ff.c **** 	res = find_volume(&dj.fs, &label, 1);
3829:Core/Src/ff.c **** 	if (res) LEAVE_FF(dj.fs, res);
3830:Core/Src/ff.c **** 
3831:Core/Src/ff.c **** 	/* Create a volume label in directory form */
3832:Core/Src/ff.c **** 	vn[0] = 0;
3833:Core/Src/ff.c **** 	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
3834:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
3835:Core/Src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
3836:Core/Src/ff.c **** 		i = j = 0;
3837:Core/Src/ff.c **** 		do {
3838:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3839:Core/Src/ff.c **** 			w = ff_convert(ff_wtoupper(label[i++]), 0);
3840:Core/Src/ff.c **** #else
3841:Core/Src/ff.c **** 			w = (BYTE)label[i++];
3842:Core/Src/ff.c **** 			if (IsDBCS1(w))
3843:Core/Src/ff.c **** 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
3844:Core/Src/ff.c **** #if _USE_LFN
3845:Core/Src/ff.c **** 			w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
3846:Core/Src/ff.c **** #else
3847:Core/Src/ff.c **** 			if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
3848:Core/Src/ff.c **** #ifdef _EXCVT
3849:Core/Src/ff.c **** 			if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
3850:Core/Src/ff.c **** #else
3851:Core/Src/ff.c **** 			if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
3852:Core/Src/ff.c **** #endif
3853:Core/Src/ff.c **** #endif
3854:Core/Src/ff.c **** #endif
3855:Core/Src/ff.c **** 			if (!w || chk_chr("\"*+,.:;<=>\?[]|\x7F", w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) /* Reject i
3856:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
3857:Core/Src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
3858:Core/Src/ff.c **** 			vn[j++] = (BYTE)w;
3859:Core/Src/ff.c **** 		} while (i < sl);
3860:Core/Src/ff.c **** 		while (j < 11) vn[j++] = ' ';
3861:Core/Src/ff.c **** 	}
3862:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 235


3863:Core/Src/ff.c **** 	/* Set volume label */
3864:Core/Src/ff.c **** 	dj.sclust = 0;					/* Open root directory */
3865:Core/Src/ff.c **** 	res = dir_sdi(&dj, 0);
3866:Core/Src/ff.c **** 	if (res == FR_OK) {
3867:Core/Src/ff.c **** 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
3868:Core/Src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
3869:Core/Src/ff.c **** 			if (vn[0]) {
3870:Core/Src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
3871:Core/Src/ff.c **** 				tm = get_fattime();
3872:Core/Src/ff.c **** 				ST_DWORD(dj.dir+DIR_WrtTime, tm);
3873:Core/Src/ff.c **** 			} else {
3874:Core/Src/ff.c **** 				dj.dir[0] = DDE;			/* Remove the volume label */
3875:Core/Src/ff.c **** 			}
3876:Core/Src/ff.c **** 			dj.fs->wflag = 1;
3877:Core/Src/ff.c **** 			res = sync_fs(dj.fs);
3878:Core/Src/ff.c **** 		} else {					/* No volume label is found or error */
3879:Core/Src/ff.c **** 			if (res == FR_NO_FILE) {
3880:Core/Src/ff.c **** 				res = FR_OK;
3881:Core/Src/ff.c **** 				if (vn[0]) {				/* Create volume label as new */
3882:Core/Src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
3883:Core/Src/ff.c **** 					if (res == FR_OK) {
3884:Core/Src/ff.c **** 						mem_set(dj.dir, 0, SZ_DIR);	/* Set volume label */
3885:Core/Src/ff.c **** 						mem_cpy(dj.dir, vn, 11);
3886:Core/Src/ff.c **** 						dj.dir[DIR_Attr] = AM_VOL;
3887:Core/Src/ff.c **** 						tm = get_fattime();
3888:Core/Src/ff.c **** 						ST_DWORD(dj.dir+DIR_WrtTime, tm);
3889:Core/Src/ff.c **** 						dj.fs->wflag = 1;
3890:Core/Src/ff.c **** 						res = sync_fs(dj.fs);
3891:Core/Src/ff.c **** 					}
3892:Core/Src/ff.c **** 				}
3893:Core/Src/ff.c **** 			}
3894:Core/Src/ff.c **** 		}
3895:Core/Src/ff.c **** 	}
3896:Core/Src/ff.c **** 
3897:Core/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3898:Core/Src/ff.c **** }
3899:Core/Src/ff.c **** 
3900:Core/Src/ff.c **** #endif /* !_FS_READONLY */
3901:Core/Src/ff.c **** #endif /* _USE_LABEL */
3902:Core/Src/ff.c **** 
3903:Core/Src/ff.c **** 
3904:Core/Src/ff.c **** 
3905:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3906:Core/Src/ff.c **** /* Forward data to the stream directly (available on only tiny cfg)      */
3907:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3908:Core/Src/ff.c **** #if _USE_FORWARD && _FS_TINY
3909:Core/Src/ff.c **** 
3910:Core/Src/ff.c **** FRESULT f_forward (
3911:Core/Src/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
3912:Core/Src/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
3913:Core/Src/ff.c **** 	UINT btf,						/* Number of bytes to forward */
3914:Core/Src/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
3915:Core/Src/ff.c **** )
3916:Core/Src/ff.c **** {
3917:Core/Src/ff.c **** 	FRESULT res;
3918:Core/Src/ff.c **** 	DWORD remain, clst, sect;
3919:Core/Src/ff.c **** 	UINT rcnt;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 236


3920:Core/Src/ff.c **** 	BYTE csect;
3921:Core/Src/ff.c **** 
3922:Core/Src/ff.c **** 
3923:Core/Src/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
3924:Core/Src/ff.c **** 
3925:Core/Src/ff.c **** 	res = validate(fp);								/* Check validity of the object */
3926:Core/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
3927:Core/Src/ff.c **** 	if (fp->err)									/* Check error */
3928:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
3929:Core/Src/ff.c **** 	if (!(fp->flag & FA_READ))						/* Check access mode */
3930:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
3931:Core/Src/ff.c **** 
3932:Core/Src/ff.c **** 	remain = fp->fsize - fp->fptr;
3933:Core/Src/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
3934:Core/Src/ff.c **** 
3935:Core/Src/ff.c **** 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream becomes busy */
3936:Core/Src/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
3937:Core/Src/ff.c **** 		csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
3938:Core/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {			/* On the sector boundary? */
3939:Core/Src/ff.c **** 			if (!csect) {							/* On the cluster boundary? */
3940:Core/Src/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
3941:Core/Src/ff.c **** 					fp->sclust : get_fat(fp->fs, fp->clust);
3942:Core/Src/ff.c **** 				if (clst <= 1) ABORT(fp->fs, FR_INT_ERR);
3943:Core/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3944:Core/Src/ff.c **** 				fp->clust = clst;					/* Update current cluster */
3945:Core/Src/ff.c **** 			}
3946:Core/Src/ff.c **** 		}
3947:Core/Src/ff.c **** 		sect = clust2sect(fp->fs, fp->clust);		/* Get current data sector */
3948:Core/Src/ff.c **** 		if (!sect) ABORT(fp->fs, FR_INT_ERR);
3949:Core/Src/ff.c **** 		sect += csect;
3950:Core/Src/ff.c **** 		if (move_window(fp->fs, sect))				/* Move sector window */
3951:Core/Src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
3952:Core/Src/ff.c **** 		fp->dsect = sect;
3953:Core/Src/ff.c **** 		rcnt = SS(fp->fs) - (WORD)(fp->fptr % SS(fp->fs));	/* Forward data from sector window */
3954:Core/Src/ff.c **** 		if (rcnt > btf) rcnt = btf;
3955:Core/Src/ff.c **** 		rcnt = (*func)(&fp->fs->win[(WORD)fp->fptr % SS(fp->fs)], rcnt);
3956:Core/Src/ff.c **** 		if (!rcnt) ABORT(fp->fs, FR_INT_ERR);
3957:Core/Src/ff.c **** 	}
3958:Core/Src/ff.c **** 
3959:Core/Src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
3960:Core/Src/ff.c **** }
3961:Core/Src/ff.c **** #endif /* _USE_FORWARD */
3962:Core/Src/ff.c **** 
3963:Core/Src/ff.c **** 
3964:Core/Src/ff.c **** 
3965:Core/Src/ff.c **** #if _USE_MKFS && !_FS_READONLY
3966:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3967:Core/Src/ff.c **** /* Create File System on the Drive                                       */
3968:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
3969:Core/Src/ff.c **** #define N_ROOTDIR	512		/* Number of root directory entries for FAT12/16 */
3970:Core/Src/ff.c **** #define N_FATS		1		/* Number of FAT copies (1 or 2) */
3971:Core/Src/ff.c **** 
3972:Core/Src/ff.c **** 
3973:Core/Src/ff.c **** FRESULT f_mkfs (
3974:Core/Src/ff.c **** 	const TCHAR* path,	/* Logical drive number */
3975:Core/Src/ff.c **** 	BYTE sfd,			/* Partitioning rule 0:FDISK, 1:SFD */
3976:Core/Src/ff.c **** 	UINT au				/* Allocation unit [bytes] */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 237


3977:Core/Src/ff.c **** )
3978:Core/Src/ff.c **** {
3979:Core/Src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
3980:Core/Src/ff.c **** 	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
3981:Core/Src/ff.c **** 	int vol;
3982:Core/Src/ff.c **** 	BYTE fmt, md, sys, *tbl, pdrv, part;
3983:Core/Src/ff.c **** 	DWORD n_clst, vs, n, wsect;
3984:Core/Src/ff.c **** 	UINT i;
3985:Core/Src/ff.c **** 	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
3986:Core/Src/ff.c **** 	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
3987:Core/Src/ff.c **** 	FATFS *fs;
3988:Core/Src/ff.c **** 	DSTATUS stat;
3989:Core/Src/ff.c **** 
3990:Core/Src/ff.c **** 
3991:Core/Src/ff.c **** 	/* Check mounted drive and clear work area */
3992:Core/Src/ff.c **** 	vol = get_ldnumber(&path);
3993:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3994:Core/Src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
3995:Core/Src/ff.c **** 	if (au & (au - 1)) return FR_INVALID_PARAMETER;
3996:Core/Src/ff.c **** 	fs = FatFs[vol];
3997:Core/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
3998:Core/Src/ff.c **** 	fs->fs_type = 0;
3999:Core/Src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
4000:Core/Src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
4001:Core/Src/ff.c **** 
4002:Core/Src/ff.c **** 	/* Get disk statics */
4003:Core/Src/ff.c **** 	stat = disk_initialize(pdrv);
4004:Core/Src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
4005:Core/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
4006:Core/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
4007:Core/Src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK || SS(fs) > _MAX_SS || SS(fs) < _MIN_SS)
4008:Core/Src/ff.c **** 		return FR_DISK_ERR;
4009:Core/Src/ff.c **** #endif
4010:Core/Src/ff.c **** 	if (_MULTI_PARTITION && part) {
4011:Core/Src/ff.c **** 		/* Get partition information from partition table in the MBR */
4012:Core/Src/ff.c **** 		if (disk_read(pdrv, fs->win, 0, 1)) return FR_DISK_ERR;
4013:Core/Src/ff.c **** 		if (LD_WORD(fs->win+BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;
4014:Core/Src/ff.c **** 		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
4015:Core/Src/ff.c **** 		if (!tbl[4]) return FR_MKFS_ABORTED;	/* No partition? */
4016:Core/Src/ff.c **** 		b_vol = LD_DWORD(tbl+8);	/* Volume start sector */
4017:Core/Src/ff.c **** 		n_vol = LD_DWORD(tbl+12);	/* Volume size */
4018:Core/Src/ff.c **** 	} else {
4019:Core/Src/ff.c **** 		/* Create a partition in this function */
4020:Core/Src/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
4021:Core/Src/ff.c **** 			return FR_DISK_ERR;
4022:Core/Src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
4023:Core/Src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
4024:Core/Src/ff.c **** 	}
4025:Core/Src/ff.c **** 
4026:Core/Src/ff.c **** 	if (!au) {				/* AU auto selection */
4027:Core/Src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
4028:Core/Src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
4029:Core/Src/ff.c **** 		au = cst[i];
4030:Core/Src/ff.c **** 	}
4031:Core/Src/ff.c **** 	au /= SS(fs);		/* Number of sectors per cluster */
4032:Core/Src/ff.c **** 	if (au == 0) au = 1;
4033:Core/Src/ff.c **** 	if (au > 128) au = 128;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 238


4034:Core/Src/ff.c **** 
4035:Core/Src/ff.c **** 	/* Pre-compute number of clusters and FAT sub-type */
4036:Core/Src/ff.c **** 	n_clst = n_vol / au;
4037:Core/Src/ff.c **** 	fmt = FS_FAT12;
4038:Core/Src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
4039:Core/Src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
4040:Core/Src/ff.c **** 
4041:Core/Src/ff.c **** 	/* Determine offset and size of FAT structure */
4042:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
4043:Core/Src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
4044:Core/Src/ff.c **** 		n_rsv = 32;
4045:Core/Src/ff.c **** 		n_dir = 0;
4046:Core/Src/ff.c **** 	} else {
4047:Core/Src/ff.c **** 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
4048:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
4049:Core/Src/ff.c **** 		n_rsv = 1;
4050:Core/Src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
4051:Core/Src/ff.c **** 	}
4052:Core/Src/ff.c **** 	b_fat = b_vol + n_rsv;				/* FAT area start sector */
4053:Core/Src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
4054:Core/Src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
4055:Core/Src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
4056:Core/Src/ff.c **** 
4057:Core/Src/ff.c **** 	/* Align data start sector to erase block boundary (for flash memory media) */
4058:Core/Src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
4059:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
4060:Core/Src/ff.c **** 	n = (n - b_data) / N_FATS;
4061:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
4062:Core/Src/ff.c **** 		n_rsv += n;
4063:Core/Src/ff.c **** 		b_fat += n;
4064:Core/Src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
4065:Core/Src/ff.c **** 		n_fat += n;
4066:Core/Src/ff.c **** 	}
4067:Core/Src/ff.c **** 
4068:Core/Src/ff.c **** 	/* Determine number of clusters and final check of validity of the FAT sub-type */
4069:Core/Src/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
4070:Core/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
4071:Core/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
4072:Core/Src/ff.c **** 		return FR_MKFS_ABORTED;
4073:Core/Src/ff.c **** 
4074:Core/Src/ff.c **** 	/* Determine system ID in the partition table */
4075:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
4076:Core/Src/ff.c **** 		sys = 0x0C;		/* FAT32X */
4077:Core/Src/ff.c **** 	} else {
4078:Core/Src/ff.c **** 		if (fmt == FS_FAT12 && n_vol < 0x10000) {
4079:Core/Src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
4080:Core/Src/ff.c **** 		} else {
4081:Core/Src/ff.c **** 			sys = (n_vol < 0x10000) ? 0x04 : 0x06;	/* FAT16(<65536) : FAT12/16(>=65536) */
4082:Core/Src/ff.c **** 		}
4083:Core/Src/ff.c **** 	}
4084:Core/Src/ff.c **** 
4085:Core/Src/ff.c **** 	if (_MULTI_PARTITION && part) {
4086:Core/Src/ff.c **** 		/* Update system ID in the partition table */
4087:Core/Src/ff.c **** 		tbl = &fs->win[MBR_Table + (part - 1) * SZ_PTE];
4088:Core/Src/ff.c **** 		tbl[4] = sys;
4089:Core/Src/ff.c **** 		if (disk_write(pdrv, fs->win, 0, 1))	/* Write it to teh MBR */
4090:Core/Src/ff.c **** 			return FR_DISK_ERR;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 239


4091:Core/Src/ff.c **** 		md = 0xF8;
4092:Core/Src/ff.c **** 	} else {
4093:Core/Src/ff.c **** 		if (sfd) {	/* No partition table (SFD) */
4094:Core/Src/ff.c **** 			md = 0xF0;
4095:Core/Src/ff.c **** 		} else {	/* Create partition table (FDISK) */
4096:Core/Src/ff.c **** 			mem_set(fs->win, 0, SS(fs));
4097:Core/Src/ff.c **** 			tbl = fs->win+MBR_Table;	/* Create partition table for single partition in the drive */
4098:Core/Src/ff.c **** 			tbl[1] = 1;						/* Partition start head */
4099:Core/Src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
4100:Core/Src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
4101:Core/Src/ff.c **** 			tbl[4] = sys;					/* System type */
4102:Core/Src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
4103:Core/Src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
4104:Core/Src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
4105:Core/Src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
4106:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
4107:Core/Src/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
4108:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
4109:Core/Src/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1))	/* Write it to the MBR */
4110:Core/Src/ff.c **** 				return FR_DISK_ERR;
4111:Core/Src/ff.c **** 			md = 0xF8;
4112:Core/Src/ff.c **** 		}
4113:Core/Src/ff.c **** 	}
4114:Core/Src/ff.c **** 
4115:Core/Src/ff.c **** 	/* Create BPB in the VBR */
4116:Core/Src/ff.c **** 	tbl = fs->win;							/* Clear sector */
4117:Core/Src/ff.c **** 	mem_set(tbl, 0, SS(fs));
4118:Core/Src/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
4119:Core/Src/ff.c **** 	i = SS(fs);								/* Sector size */
4120:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_BytsPerSec, i);
4121:Core/Src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
4122:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
4123:Core/Src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
4124:Core/Src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
4125:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_RootEntCnt, i);
4126:Core/Src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
4127:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_TotSec16, n_vol);
4128:Core/Src/ff.c **** 	} else {
4129:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_TotSec32, n_vol);
4130:Core/Src/ff.c **** 	}
4131:Core/Src/ff.c **** 	tbl[BPB_Media] = md;					/* Media descriptor */
4132:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
4133:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
4134:Core/Src/ff.c **** 	ST_DWORD(tbl+BPB_HiddSec, b_vol);		/* Hidden sectors */
4135:Core/Src/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
4136:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
4137:Core/Src/ff.c **** 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
4138:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
4139:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
4140:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSINFO record offset (VBR+1) */
4141:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
4142:Core/Src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
4143:Core/Src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
4144:Core/Src/ff.c **** 		mem_cpy(tbl+BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
4145:Core/Src/ff.c **** 	} else {
4146:Core/Src/ff.c **** 		ST_DWORD(tbl+BS_VolID, n);			/* VSN */
4147:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 240


4148:Core/Src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
4149:Core/Src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
4150:Core/Src/ff.c **** 		mem_cpy(tbl+BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
4151:Core/Src/ff.c **** 	}
4152:Core/Src/ff.c **** 	ST_WORD(tbl+BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
4153:Core/Src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1))	/* Write it to the VBR sector */
4154:Core/Src/ff.c **** 		return FR_DISK_ERR;
4155:Core/Src/ff.c **** 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR+6) */
4156:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
4157:Core/Src/ff.c **** 
4158:Core/Src/ff.c **** 	/* Initialize FAT area */
4159:Core/Src/ff.c **** 	wsect = b_fat;
4160:Core/Src/ff.c **** 	for (i = 0; i < N_FATS; i++) {		/* Initialize each FAT copy */
4161:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
4162:Core/Src/ff.c **** 		n = md;								/* Media descriptor byte */
4163:Core/Src/ff.c **** 		if (fmt != FS_FAT32) {
4164:Core/Src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
4165:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
4166:Core/Src/ff.c **** 		} else {
4167:Core/Src/ff.c **** 			n |= 0xFFFFFF00;
4168:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
4169:Core/Src/ff.c **** 			ST_DWORD(tbl+4, 0xFFFFFFFF);
4170:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
4171:Core/Src/ff.c **** 		}
4172:Core/Src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1))
4173:Core/Src/ff.c **** 			return FR_DISK_ERR;
4174:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
4175:Core/Src/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
4176:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
4177:Core/Src/ff.c **** 				return FR_DISK_ERR;
4178:Core/Src/ff.c **** 		}
4179:Core/Src/ff.c **** 	}
4180:Core/Src/ff.c **** 
4181:Core/Src/ff.c **** 	/* Initialize root directory */
4182:Core/Src/ff.c **** 	i = (fmt == FS_FAT32) ? au : (UINT)n_dir;
4183:Core/Src/ff.c **** 	do {
4184:Core/Src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1))
4185:Core/Src/ff.c **** 			return FR_DISK_ERR;
4186:Core/Src/ff.c **** 	} while (--i);
4187:Core/Src/ff.c **** 
4188:Core/Src/ff.c **** #if _USE_ERASE	/* Erase data area if needed */
4189:Core/Src/ff.c **** 	{
4190:Core/Src/ff.c **** 		DWORD eb[2];
4191:Core/Src/ff.c **** 
4192:Core/Src/ff.c **** 		eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == FS_FAT32) ? 1 : 0)) * au - 1;
4193:Core/Src/ff.c **** 		disk_ioctl(pdrv, CTRL_ERASE_SECTOR, eb);
4194:Core/Src/ff.c **** 	}
4195:Core/Src/ff.c **** #endif
4196:Core/Src/ff.c **** 
4197:Core/Src/ff.c **** 	/* Create FSINFO if needed */
4198:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
4199:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
4200:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
4201:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
4202:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
4203:Core/Src/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
4204:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 241


4205:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR+7) */
4206:Core/Src/ff.c **** 	}
4207:Core/Src/ff.c **** 
4208:Core/Src/ff.c **** 	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
4209:Core/Src/ff.c **** }
4210:Core/Src/ff.c **** 
4211:Core/Src/ff.c **** 
4212:Core/Src/ff.c **** 
4213:Core/Src/ff.c **** #if _MULTI_PARTITION
4214:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4215:Core/Src/ff.c **** /* Divide Physical Drive                                                 */
4216:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4217:Core/Src/ff.c **** 
4218:Core/Src/ff.c **** FRESULT f_fdisk (
4219:Core/Src/ff.c **** 	BYTE pdrv,			/* Physical drive number */
4220:Core/Src/ff.c **** 	const DWORD szt[],	/* Pointer to the size table for each partitions */
4221:Core/Src/ff.c **** 	void* work			/* Pointer to the working buffer */
4222:Core/Src/ff.c **** )
4223:Core/Src/ff.c **** {
4224:Core/Src/ff.c **** 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
4225:Core/Src/ff.c **** 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
4226:Core/Src/ff.c **** 	DSTATUS stat;
4227:Core/Src/ff.c **** 	DWORD sz_disk, sz_part, s_part;
4228:Core/Src/ff.c **** 
4229:Core/Src/ff.c **** 
4230:Core/Src/ff.c **** 	stat = disk_initialize(pdrv);
4231:Core/Src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
4232:Core/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
4233:Core/Src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
4234:Core/Src/ff.c **** 
4235:Core/Src/ff.c **** 	/* Determine CHS in the table regardless of the drive geometry */
4236:Core/Src/ff.c **** 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
4237:Core/Src/ff.c **** 	if (n == 256) n--;
4238:Core/Src/ff.c **** 	e_hd = n - 1;
4239:Core/Src/ff.c **** 	sz_cyl = 63 * n;
4240:Core/Src/ff.c **** 	tot_cyl = sz_disk / sz_cyl;
4241:Core/Src/ff.c **** 
4242:Core/Src/ff.c **** 	/* Create partition table */
4243:Core/Src/ff.c **** 	mem_set(buf, 0, _MAX_SS);
4244:Core/Src/ff.c **** 	p = buf + MBR_Table; b_cyl = 0;
4245:Core/Src/ff.c **** 	for (i = 0; i < 4; i++, p += SZ_PTE) {
4246:Core/Src/ff.c **** 		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;
4247:Core/Src/ff.c **** 		if (!p_cyl) continue;
4248:Core/Src/ff.c **** 		s_part = (DWORD)sz_cyl * b_cyl;
4249:Core/Src/ff.c **** 		sz_part = (DWORD)sz_cyl * p_cyl;
4250:Core/Src/ff.c **** 		if (i == 0) {	/* Exclude first track of cylinder 0 */
4251:Core/Src/ff.c **** 			s_hd = 1;
4252:Core/Src/ff.c **** 			s_part += 63; sz_part -= 63;
4253:Core/Src/ff.c **** 		} else {
4254:Core/Src/ff.c **** 			s_hd = 0;
4255:Core/Src/ff.c **** 		}
4256:Core/Src/ff.c **** 		e_cyl = b_cyl + p_cyl - 1;
4257:Core/Src/ff.c **** 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
4258:Core/Src/ff.c **** 
4259:Core/Src/ff.c **** 		/* Set partition table */
4260:Core/Src/ff.c **** 		p[1] = s_hd;						/* Start head */
4261:Core/Src/ff.c **** 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 242


4262:Core/Src/ff.c **** 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
4263:Core/Src/ff.c **** 		p[4] = 0x06;						/* System type (temporary setting) */
4264:Core/Src/ff.c **** 		p[5] = e_hd;						/* End head */
4265:Core/Src/ff.c **** 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
4266:Core/Src/ff.c **** 		p[7] = (BYTE)e_cyl;					/* End cylinder */
4267:Core/Src/ff.c **** 		ST_DWORD(p + 8, s_part);			/* Start sector in LBA */
4268:Core/Src/ff.c **** 		ST_DWORD(p + 12, sz_part);			/* Partition size */
4269:Core/Src/ff.c **** 
4270:Core/Src/ff.c **** 		/* Next partition */
4271:Core/Src/ff.c **** 		b_cyl += p_cyl;
4272:Core/Src/ff.c **** 	}
4273:Core/Src/ff.c **** 	ST_WORD(p, 0xAA55);
4274:Core/Src/ff.c **** 
4275:Core/Src/ff.c **** 	/* Write it to the MBR */
4276:Core/Src/ff.c **** 	return (disk_write(pdrv, buf, 0, 1) || disk_ioctl(pdrv, CTRL_SYNC, 0)) ? FR_DISK_ERR : FR_OK;
4277:Core/Src/ff.c **** }
4278:Core/Src/ff.c **** 
4279:Core/Src/ff.c **** 
4280:Core/Src/ff.c **** #endif /* _MULTI_PARTITION */
4281:Core/Src/ff.c **** #endif /* _USE_MKFS && !_FS_READONLY */
4282:Core/Src/ff.c **** 
4283:Core/Src/ff.c **** 
4284:Core/Src/ff.c **** 
4285:Core/Src/ff.c **** 
4286:Core/Src/ff.c **** #if _USE_STRFUNC
4287:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4288:Core/Src/ff.c **** /* Get a string from the file                                            */
4289:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4290:Core/Src/ff.c **** 
4291:Core/Src/ff.c **** TCHAR* f_gets (
4292:Core/Src/ff.c **** 	TCHAR* buff,	/* Pointer to the string buffer to read */
4293:Core/Src/ff.c **** 	int len,		/* Size of string buffer (characters) */
4294:Core/Src/ff.c **** 	FIL* fp			/* Pointer to the file object */
4295:Core/Src/ff.c **** )
4296:Core/Src/ff.c **** {
4297:Core/Src/ff.c **** 	int n = 0;
4298:Core/Src/ff.c **** 	TCHAR c, *p = buff;
4299:Core/Src/ff.c **** 	BYTE s[2];
4300:Core/Src/ff.c **** 	UINT rc;
4301:Core/Src/ff.c **** 
4302:Core/Src/ff.c **** 
4303:Core/Src/ff.c **** 	while (n < len - 1) {	/* Read characters until buffer gets filled */
4304:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4305:Core/Src/ff.c **** #if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
4306:Core/Src/ff.c **** 		f_read(fp, s, 1, &rc);
4307:Core/Src/ff.c **** 		if (rc != 1) break;
4308:Core/Src/ff.c **** 		c = s[0];
4309:Core/Src/ff.c **** 		if (c >= 0x80) {
4310:Core/Src/ff.c **** 			if (c < 0xC0) continue;	/* Skip stray trailer */
4311:Core/Src/ff.c **** 			if (c < 0xE0) {			/* Two-byte sequence */
4312:Core/Src/ff.c **** 				f_read(fp, s, 1, &rc);
4313:Core/Src/ff.c **** 				if (rc != 1) break;
4314:Core/Src/ff.c **** 				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
4315:Core/Src/ff.c **** 				if (c < 0x80) c = '?';
4316:Core/Src/ff.c **** 			} else {
4317:Core/Src/ff.c **** 				if (c < 0xF0) {		/* Three-byte sequence */
4318:Core/Src/ff.c **** 					f_read(fp, s, 2, &rc);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 243


4319:Core/Src/ff.c **** 					if (rc != 2) break;
4320:Core/Src/ff.c **** 					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
4321:Core/Src/ff.c **** 					if (c < 0x800) c = '?';
4322:Core/Src/ff.c **** 				} else {			/* Reject four-byte sequence */
4323:Core/Src/ff.c **** 					c = '?';
4324:Core/Src/ff.c **** 				}
4325:Core/Src/ff.c **** 			}
4326:Core/Src/ff.c **** 		}
4327:Core/Src/ff.c **** #elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
4328:Core/Src/ff.c **** 		f_read(fp, s, 2, &rc);
4329:Core/Src/ff.c **** 		if (rc != 2) break;
4330:Core/Src/ff.c **** 		c = s[1] + (s[0] << 8);
4331:Core/Src/ff.c **** #elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
4332:Core/Src/ff.c **** 		f_read(fp, s, 2, &rc);
4333:Core/Src/ff.c **** 		if (rc != 2) break;
4334:Core/Src/ff.c **** 		c = s[0] + (s[1] << 8);
4335:Core/Src/ff.c **** #else						/* Read a character in ANSI/OEM */
4336:Core/Src/ff.c **** 		f_read(fp, s, 1, &rc);
4337:Core/Src/ff.c **** 		if (rc != 1) break;
4338:Core/Src/ff.c **** 		c = s[0];
4339:Core/Src/ff.c **** 		if (IsDBCS1(c)) {
4340:Core/Src/ff.c **** 			f_read(fp, s, 1, &rc);
4341:Core/Src/ff.c **** 			if (rc != 1) break;
4342:Core/Src/ff.c **** 			c = (c << 8) + s[0];
4343:Core/Src/ff.c **** 		}
4344:Core/Src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
4345:Core/Src/ff.c **** 		if (!c) c = '?';
4346:Core/Src/ff.c **** #endif
4347:Core/Src/ff.c **** #else						/* Read a character without conversion */
4348:Core/Src/ff.c **** 		f_read(fp, s, 1, &rc);
4349:Core/Src/ff.c **** 		if (rc != 1) break;
4350:Core/Src/ff.c **** 		c = s[0];
4351:Core/Src/ff.c **** #endif
4352:Core/Src/ff.c **** 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
4353:Core/Src/ff.c **** 		*p++ = c;
4354:Core/Src/ff.c **** 		n++;
4355:Core/Src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
4356:Core/Src/ff.c **** 	}
4357:Core/Src/ff.c **** 	*p = 0;
4358:Core/Src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
4359:Core/Src/ff.c **** }
4360:Core/Src/ff.c **** 
4361:Core/Src/ff.c **** 
4362:Core/Src/ff.c **** 
4363:Core/Src/ff.c **** #if !_FS_READONLY
4364:Core/Src/ff.c **** #include <stdarg.h>
4365:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4366:Core/Src/ff.c **** /* Put a character to the file                                           */
4367:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4368:Core/Src/ff.c **** 
4369:Core/Src/ff.c **** typedef struct {
4370:Core/Src/ff.c **** 	FIL* fp;
4371:Core/Src/ff.c **** 	int idx, nchr;
4372:Core/Src/ff.c **** 	BYTE buf[64];
4373:Core/Src/ff.c **** } putbuff;
4374:Core/Src/ff.c **** 
4375:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 244


4376:Core/Src/ff.c **** static
4377:Core/Src/ff.c **** void putc_bfd (
4378:Core/Src/ff.c **** 	putbuff* pb,
4379:Core/Src/ff.c **** 	TCHAR c
4380:Core/Src/ff.c **** )
4381:Core/Src/ff.c **** {
 7476              		.loc 1 4381 1 is_stmt 1 view -0
 7477              		.cfi_startproc
 7478              		@ args = 0, pretend = 0, frame = 8
 7479              		@ frame_needed = 0, uses_anonymous_args = 0
4382:Core/Src/ff.c **** 	UINT bw;
 7480              		.loc 1 4382 2 view .LVU2548
4383:Core/Src/ff.c **** 	int i;
 7481              		.loc 1 4383 2 view .LVU2549
4384:Core/Src/ff.c **** 
4385:Core/Src/ff.c **** 
4386:Core/Src/ff.c **** 	if (_USE_STRFUNC == 2 && c == '\n')	 /* LF -> CRLF conversion */
 7482              		.loc 1 4386 2 view .LVU2550
4387:Core/Src/ff.c **** 		putc_bfd(pb, '\r');
4388:Core/Src/ff.c **** 
4389:Core/Src/ff.c **** 	i = pb->idx;	/* Buffer write index (-1:error) */
 7483              		.loc 1 4389 2 view .LVU2551
 7484              		.loc 1 4389 4 is_stmt 0 view .LVU2552
 7485 0000 4368     		ldr	r3, [r0, #4]
 7486              	.LVL870:
4390:Core/Src/ff.c **** 	if (i < 0) return;
 7487              		.loc 1 4390 2 is_stmt 1 view .LVU2553
 7488              		.loc 1 4390 5 is_stmt 0 view .LVU2554
 7489 0002 002B     		cmp	r3, #0
 7490 0004 1CDB     		blt	.L583
4381:Core/Src/ff.c **** 	UINT bw;
 7491              		.loc 1 4381 1 view .LVU2555
 7492 0006 30B5     		push	{r4, r5, lr}
 7493              	.LCFI62:
 7494              		.cfi_def_cfa_offset 12
 7495              		.cfi_offset 4, -12
 7496              		.cfi_offset 5, -8
 7497              		.cfi_offset 14, -4
 7498 0008 83B0     		sub	sp, sp, #12
 7499              	.LCFI63:
 7500              		.cfi_def_cfa_offset 24
 7501 000a 0446     		mov	r4, r0
4391:Core/Src/ff.c **** 
4392:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4393:Core/Src/ff.c **** #if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
4394:Core/Src/ff.c **** 	if (c < 0x80) {				/* 7-bit */
4395:Core/Src/ff.c **** 		pb->buf[i++] = (BYTE)c;
4396:Core/Src/ff.c **** 	} else {
4397:Core/Src/ff.c **** 		if (c < 0x800) {		/* 11-bit */
4398:Core/Src/ff.c **** 			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
4399:Core/Src/ff.c **** 		} else {				/* 16-bit */
4400:Core/Src/ff.c **** 			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
4401:Core/Src/ff.c **** 			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
4402:Core/Src/ff.c **** 		}
4403:Core/Src/ff.c **** 		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
4404:Core/Src/ff.c **** 	}
4405:Core/Src/ff.c **** #elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 245


4406:Core/Src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
4407:Core/Src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4408:Core/Src/ff.c **** #elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
4409:Core/Src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4410:Core/Src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
4411:Core/Src/ff.c **** #else							/* Write a character in ANSI/OEM */
4412:Core/Src/ff.c **** 	c = ff_convert(c, 0);	/* Unicode -> OEM */
4413:Core/Src/ff.c **** 	if (!c) c = '?';
4414:Core/Src/ff.c **** 	if (c >= 0x100)
4415:Core/Src/ff.c **** 		pb->buf[i++] = (BYTE)(c >> 8);
4416:Core/Src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4417:Core/Src/ff.c **** #endif
4418:Core/Src/ff.c **** #else							/* Write a character without conversion */
4419:Core/Src/ff.c **** 	pb->buf[i++] = (BYTE)c;
 7502              		.loc 1 4419 2 is_stmt 1 view .LVU2556
 7503              		.loc 1 4419 11 is_stmt 0 view .LVU2557
 7504 000c 5D1C     		adds	r5, r3, #1
 7505              	.LVL871:
 7506              		.loc 1 4419 15 view .LVU2558
 7507 000e 0344     		add	r3, r3, r0
 7508 0010 1973     		strb	r1, [r3, #12]
4420:Core/Src/ff.c **** #endif
4421:Core/Src/ff.c **** 
4422:Core/Src/ff.c **** 	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
 7509              		.loc 1 4422 2 is_stmt 1 view .LVU2559
 7510              		.loc 1 4422 5 is_stmt 0 view .LVU2560
 7511 0012 3C2D     		cmp	r5, #60
 7512 0014 05DC     		bgt	.L586
 7513              	.LVL872:
 7514              	.L580:
4423:Core/Src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
4424:Core/Src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
4425:Core/Src/ff.c **** 	}
4426:Core/Src/ff.c **** 	pb->idx = i;
 7515              		.loc 1 4426 2 is_stmt 1 view .LVU2561
 7516              		.loc 1 4426 10 is_stmt 0 view .LVU2562
 7517 0016 6560     		str	r5, [r4, #4]
4427:Core/Src/ff.c **** 	pb->nchr++;
 7518              		.loc 1 4427 2 is_stmt 1 view .LVU2563
 7519              		.loc 1 4427 4 is_stmt 0 view .LVU2564
 7520 0018 A368     		ldr	r3, [r4, #8]
 7521              		.loc 1 4427 10 view .LVU2565
 7522 001a 0133     		adds	r3, r3, #1
 7523 001c A360     		str	r3, [r4, #8]
4428:Core/Src/ff.c **** }
 7524              		.loc 1 4428 1 view .LVU2566
 7525 001e 03B0     		add	sp, sp, #12
 7526              	.LCFI64:
 7527              		.cfi_remember_state
 7528              		.cfi_def_cfa_offset 12
 7529              		@ sp needed
 7530 0020 30BD     		pop	{r4, r5, pc}
 7531              	.LVL873:
 7532              	.L586:
 7533              	.LCFI65:
 7534              		.cfi_restore_state
4423:Core/Src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 246


 7535              		.loc 1 4423 3 is_stmt 1 view .LVU2567
4423:Core/Src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 7536              		.loc 1 4423 21 is_stmt 0 view .LVU2568
 7537 0022 0146     		mov	r1, r0
 7538              	.LVL874:
4423:Core/Src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 7539              		.loc 1 4423 3 view .LVU2569
 7540 0024 51F80C0B 		ldr	r0, [r1], #12
 7541              	.LVL875:
4423:Core/Src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 7542              		.loc 1 4423 3 view .LVU2570
 7543 0028 01AB     		add	r3, sp, #4
 7544              	.LVL876:
4423:Core/Src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 7545              		.loc 1 4423 3 view .LVU2571
 7546 002a 2A46     		mov	r2, r5
 7547 002c FFF7FEFF 		bl	f_write
 7548              	.LVL877:
4424:Core/Src/ff.c **** 	}
 7549              		.loc 1 4424 3 is_stmt 1 view .LVU2572
4424:Core/Src/ff.c **** 	}
 7550              		.loc 1 4424 11 is_stmt 0 view .LVU2573
 7551 0030 019B     		ldr	r3, [sp, #4]
4424:Core/Src/ff.c **** 	}
 7552              		.loc 1 4424 27 view .LVU2574
 7553 0032 9D42     		cmp	r5, r3
 7554 0034 02D0     		beq	.L587
 7555 0036 4FF0FF35 		mov	r5, #-1
 7556              	.LVL878:
4424:Core/Src/ff.c **** 	}
 7557              		.loc 1 4424 27 view .LVU2575
 7558 003a ECE7     		b	.L580
 7559              	.LVL879:
 7560              	.L587:
4424:Core/Src/ff.c **** 	}
 7561              		.loc 1 4424 27 view .LVU2576
 7562 003c 0025     		movs	r5, #0
 7563              	.LVL880:
4424:Core/Src/ff.c **** 	}
 7564              		.loc 1 4424 27 view .LVU2577
 7565 003e EAE7     		b	.L580
 7566              	.LVL881:
 7567              	.L583:
 7568              	.LCFI66:
 7569              		.cfi_def_cfa_offset 0
 7570              		.cfi_restore 4
 7571              		.cfi_restore 5
 7572              		.cfi_restore 14
4424:Core/Src/ff.c **** 	}
 7573              		.loc 1 4424 27 view .LVU2578
 7574 0040 7047     		bx	lr
 7575              		.cfi_endproc
 7576              	.LFE56:
 7578              		.section	.text.f_sync,"ax",%progbits
 7579              		.align	1
 7580              		.global	f_sync
 7581              		.syntax unified
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 247


 7582              		.thumb
 7583              		.thumb_func
 7584              		.fpu fpv4-sp-d16
 7586              	f_sync:
 7587              	.LVL882:
 7588              	.LFB38:
2773:Core/Src/ff.c **** 	FRESULT res;
 7589              		.loc 1 2773 1 is_stmt 1 view -0
 7590              		.cfi_startproc
 7591              		@ args = 0, pretend = 0, frame = 0
 7592              		@ frame_needed = 0, uses_anonymous_args = 0
2773:Core/Src/ff.c **** 	FRESULT res;
 7593              		.loc 1 2773 1 is_stmt 0 view .LVU2580
 7594 0000 38B5     		push	{r3, r4, r5, lr}
 7595              	.LCFI67:
 7596              		.cfi_def_cfa_offset 16
 7597              		.cfi_offset 3, -16
 7598              		.cfi_offset 4, -12
 7599              		.cfi_offset 5, -8
 7600              		.cfi_offset 14, -4
 7601 0002 0446     		mov	r4, r0
2774:Core/Src/ff.c **** 	DWORD tm;
 7602              		.loc 1 2774 2 is_stmt 1 view .LVU2581
2775:Core/Src/ff.c **** 	BYTE *dir;
 7603              		.loc 1 2775 2 view .LVU2582
2776:Core/Src/ff.c **** 
 7604              		.loc 1 2776 2 view .LVU2583
2779:Core/Src/ff.c **** 	if (res == FR_OK) {
 7605              		.loc 1 2779 2 view .LVU2584
2779:Core/Src/ff.c **** 	if (res == FR_OK) {
 7606              		.loc 1 2779 8 is_stmt 0 view .LVU2585
 7607 0004 FFF7FEFF 		bl	validate
 7608              	.LVL883:
2780:Core/Src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
 7609              		.loc 1 2780 2 is_stmt 1 view .LVU2586
2780:Core/Src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
 7610              		.loc 1 2780 5 is_stmt 0 view .LVU2587
 7611 0008 C8B9     		cbnz	r0, .L589
2781:Core/Src/ff.c **** 			/* Write-back dirty buffer */
 7612              		.loc 1 2781 3 is_stmt 1 view .LVU2588
2781:Core/Src/ff.c **** 			/* Write-back dirty buffer */
 7613              		.loc 1 2781 9 is_stmt 0 view .LVU2589
 7614 000a A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
2781:Core/Src/ff.c **** 			/* Write-back dirty buffer */
 7615              		.loc 1 2781 6 view .LVU2590
 7616 000c 13F0200F 		tst	r3, #32
 7617 0010 15D0     		beq	.L589
2784:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 7618              		.loc 1 2784 4 is_stmt 1 view .LVU2591
2784:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 7619              		.loc 1 2784 7 is_stmt 0 view .LVU2592
 7620 0012 13F0400F 		tst	r3, #64
 7621 0016 0DD0     		beq	.L590
2785:Core/Src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 7622              		.loc 1 2785 5 is_stmt 1 view .LVU2593
2785:Core/Src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 7623              		.loc 1 2785 22 is_stmt 0 view .LVU2594
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 248


 7624 0018 2146     		mov	r1, r4
 7625 001a 51F8280B 		ldr	r0, [r1], #40
2785:Core/Src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 7626              		.loc 1 2785 9 view .LVU2595
 7627 001e 0123     		movs	r3, #1
 7628 0020 A269     		ldr	r2, [r4, #24]
 7629 0022 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7630 0024 FFF7FEFF 		bl	disk_write
 7631              	.LVL884:
2785:Core/Src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 7632              		.loc 1 2785 8 view .LVU2596
 7633 0028 0028     		cmp	r0, #0
 7634 002a 34D1     		bne	.L591
2787:Core/Src/ff.c **** 			}
 7635              		.loc 1 2787 5 is_stmt 1 view .LVU2597
2787:Core/Src/ff.c **** 			}
 7636              		.loc 1 2787 14 is_stmt 0 view .LVU2598
 7637 002c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7638 002e 23F04003 		bic	r3, r3, #64
 7639 0032 A371     		strb	r3, [r4, #6]
 7640              	.L590:
2791:Core/Src/ff.c **** 			if (res == FR_OK) {
 7641              		.loc 1 2791 4 is_stmt 1 view .LVU2599
2791:Core/Src/ff.c **** 			if (res == FR_OK) {
 7642              		.loc 1 2791 10 is_stmt 0 view .LVU2600
 7643 0034 E169     		ldr	r1, [r4, #28]
 7644 0036 2068     		ldr	r0, [r4]
 7645 0038 FFF7FEFF 		bl	move_window
 7646              	.LVL885:
2792:Core/Src/ff.c **** 				dir = fp->dir_ptr;
 7647              		.loc 1 2792 4 is_stmt 1 view .LVU2601
2792:Core/Src/ff.c **** 				dir = fp->dir_ptr;
 7648              		.loc 1 2792 7 is_stmt 0 view .LVU2602
 7649 003c 00B1     		cbz	r0, .L593
 7650              	.LVL886:
 7651              	.L589:
2808:Core/Src/ff.c **** 
 7652              		.loc 1 2808 1 view .LVU2603
 7653 003e 38BD     		pop	{r3, r4, r5, pc}
 7654              	.LVL887:
 7655              	.L593:
2793:Core/Src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
 7656              		.loc 1 2793 5 is_stmt 1 view .LVU2604
2793:Core/Src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
 7657              		.loc 1 2793 9 is_stmt 0 view .LVU2605
 7658 0040 256A     		ldr	r5, [r4, #32]
 7659              	.LVL888:
2794:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
 7660              		.loc 1 2794 5 is_stmt 1 view .LVU2606
2794:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_FileSize, fp->fsize);		/* Update file size */
 7661              		.loc 1 2794 19 is_stmt 0 view .LVU2607
 7662 0042 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 7663 0044 43F02003 		orr	r3, r3, #32
 7664 0048 EB72     		strb	r3, [r5, #11]
2795:Core/Src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
 7665              		.loc 1 2795 5 is_stmt 1 view .LVU2608
 7666 004a 237B     		ldrb	r3, [r4, #12]	@ zero_extendqisi2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 249


 7667 004c 2B77     		strb	r3, [r5, #28]
2795:Core/Src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
 7668              		.loc 1 2795 5 view .LVU2609
 7669 004e A389     		ldrh	r3, [r4, #12]
 7670 0050 1B0A     		lsrs	r3, r3, #8
 7671 0052 6B77     		strb	r3, [r5, #29]
2795:Core/Src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
 7672              		.loc 1 2795 5 view .LVU2610
 7673 0054 A37B     		ldrb	r3, [r4, #14]	@ zero_extendqisi2
 7674 0056 AB77     		strb	r3, [r5, #30]
2795:Core/Src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
 7675              		.loc 1 2795 5 view .LVU2611
 7676 0058 E37B     		ldrb	r3, [r4, #15]	@ zero_extendqisi2
 7677 005a EB77     		strb	r3, [r5, #31]
2796:Core/Src/ff.c **** 				tm = get_fattime();							/* Update updated time */
 7678              		.loc 1 2796 5 view .LVU2612
 7679 005c 2169     		ldr	r1, [r4, #16]
 7680 005e 2846     		mov	r0, r5
 7681              	.LVL889:
2796:Core/Src/ff.c **** 				tm = get_fattime();							/* Update updated time */
 7682              		.loc 1 2796 5 is_stmt 0 view .LVU2613
 7683 0060 FFF7FEFF 		bl	st_clust
 7684              	.LVL890:
2797:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);
 7685              		.loc 1 2797 5 is_stmt 1 view .LVU2614
2797:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);
 7686              		.loc 1 2797 10 is_stmt 0 view .LVU2615
 7687 0064 FFF7FEFF 		bl	get_fattime
 7688              	.LVL891:
2798:Core/Src/ff.c **** 				ST_WORD(dir+DIR_LstAccDate, 0);
 7689              		.loc 1 2798 5 is_stmt 1 view .LVU2616
 7690 0068 A875     		strb	r0, [r5, #22]
2798:Core/Src/ff.c **** 				ST_WORD(dir+DIR_LstAccDate, 0);
 7691              		.loc 1 2798 5 view .LVU2617
 7692 006a C0F30723 		ubfx	r3, r0, #8, #8
 7693 006e EB75     		strb	r3, [r5, #23]
2798:Core/Src/ff.c **** 				ST_WORD(dir+DIR_LstAccDate, 0);
 7694              		.loc 1 2798 5 view .LVU2618
 7695 0070 C0F30743 		ubfx	r3, r0, #16, #8
 7696 0074 2B76     		strb	r3, [r5, #24]
2798:Core/Src/ff.c **** 				ST_WORD(dir+DIR_LstAccDate, 0);
 7697              		.loc 1 2798 5 view .LVU2619
 7698 0076 000E     		lsrs	r0, r0, #24
 7699              	.LVL892:
2798:Core/Src/ff.c **** 				ST_WORD(dir+DIR_LstAccDate, 0);
 7700              		.loc 1 2798 5 is_stmt 0 view .LVU2620
 7701 0078 6876     		strb	r0, [r5, #25]
2799:Core/Src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 7702              		.loc 1 2799 5 is_stmt 1 view .LVU2621
 7703 007a 0023     		movs	r3, #0
 7704 007c AB74     		strb	r3, [r5, #18]
2799:Core/Src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 7705              		.loc 1 2799 5 view .LVU2622
 7706 007e EB74     		strb	r3, [r5, #19]
2800:Core/Src/ff.c **** 				fp->fs->wflag = 1;
 7707              		.loc 1 2800 5 view .LVU2623
2800:Core/Src/ff.c **** 				fp->fs->wflag = 1;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 250


 7708              		.loc 1 2800 14 is_stmt 0 view .LVU2624
 7709 0080 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7710 0082 23F02003 		bic	r3, r3, #32
 7711 0086 A371     		strb	r3, [r4, #6]
2801:Core/Src/ff.c **** 				res = sync_fs(fp->fs);
 7712              		.loc 1 2801 5 is_stmt 1 view .LVU2625
2801:Core/Src/ff.c **** 				res = sync_fs(fp->fs);
 7713              		.loc 1 2801 7 is_stmt 0 view .LVU2626
 7714 0088 2368     		ldr	r3, [r4]
2801:Core/Src/ff.c **** 				res = sync_fs(fp->fs);
 7715              		.loc 1 2801 19 view .LVU2627
 7716 008a 0122     		movs	r2, #1
 7717 008c 1A71     		strb	r2, [r3, #4]
2802:Core/Src/ff.c **** 			}
 7718              		.loc 1 2802 5 is_stmt 1 view .LVU2628
2802:Core/Src/ff.c **** 			}
 7719              		.loc 1 2802 11 is_stmt 0 view .LVU2629
 7720 008e 2068     		ldr	r0, [r4]
 7721 0090 FFF7FEFF 		bl	sync_fs
 7722              	.LVL893:
2802:Core/Src/ff.c **** 			}
 7723              		.loc 1 2802 11 view .LVU2630
 7724 0094 D3E7     		b	.L589
 7725              	.LVL894:
 7726              	.L591:
2786:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 7727              		.loc 1 2786 6 view .LVU2631
 7728 0096 0120     		movs	r0, #1
 7729 0098 D1E7     		b	.L589
 7730              		.cfi_endproc
 7731              	.LFE38:
 7733              		.section	.text.f_close,"ax",%progbits
 7734              		.align	1
 7735              		.global	f_close
 7736              		.syntax unified
 7737              		.thumb
 7738              		.thumb_func
 7739              		.fpu fpv4-sp-d16
 7741              	f_close:
 7742              	.LVL895:
 7743              	.LFB39:
2822:Core/Src/ff.c **** 	FRESULT res;
 7744              		.loc 1 2822 1 is_stmt 1 view -0
 7745              		.cfi_startproc
 7746              		@ args = 0, pretend = 0, frame = 0
 7747              		@ frame_needed = 0, uses_anonymous_args = 0
2822:Core/Src/ff.c **** 	FRESULT res;
 7748              		.loc 1 2822 1 is_stmt 0 view .LVU2633
 7749 0000 10B5     		push	{r4, lr}
 7750              	.LCFI68:
 7751              		.cfi_def_cfa_offset 8
 7752              		.cfi_offset 4, -8
 7753              		.cfi_offset 14, -4
 7754 0002 0446     		mov	r4, r0
2823:Core/Src/ff.c **** 
 7755              		.loc 1 2823 2 is_stmt 1 view .LVU2634
2827:Core/Src/ff.c **** 	if (res == FR_OK)
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 251


 7756              		.loc 1 2827 2 view .LVU2635
2827:Core/Src/ff.c **** 	if (res == FR_OK)
 7757              		.loc 1 2827 8 is_stmt 0 view .LVU2636
 7758 0004 FFF7FEFF 		bl	f_sync
 7759              	.LVL896:
2828:Core/Src/ff.c **** #endif
 7760              		.loc 1 2828 2 is_stmt 1 view .LVU2637
2828:Core/Src/ff.c **** #endif
 7761              		.loc 1 2828 5 is_stmt 0 view .LVU2638
 7762 0008 00B1     		cbz	r0, .L597
 7763              	.L595:
 7764              	.LVL897:
2846:Core/Src/ff.c **** }
 7765              		.loc 1 2846 2 is_stmt 1 view .LVU2639
2847:Core/Src/ff.c **** 
 7766              		.loc 1 2847 1 is_stmt 0 view .LVU2640
 7767 000a 10BD     		pop	{r4, pc}
 7768              	.LVL898:
 7769              	.L597:
2831:Core/Src/ff.c **** 		if (res == FR_OK) {
 7770              		.loc 1 2831 3 is_stmt 1 view .LVU2641
2831:Core/Src/ff.c **** 		if (res == FR_OK) {
 7771              		.loc 1 2831 9 is_stmt 0 view .LVU2642
 7772 000c 2046     		mov	r0, r4
 7773 000e FFF7FEFF 		bl	validate
 7774              	.LVL899:
2832:Core/Src/ff.c **** #if _FS_REENTRANT
 7775              		.loc 1 2832 3 is_stmt 1 view .LVU2643
2832:Core/Src/ff.c **** #if _FS_REENTRANT
 7776              		.loc 1 2832 6 is_stmt 0 view .LVU2644
 7777 0012 0028     		cmp	r0, #0
 7778 0014 F9D1     		bne	.L595
2840:Core/Src/ff.c **** #if _FS_REENTRANT
 7779              		.loc 1 2840 5 is_stmt 1 view .LVU2645
2840:Core/Src/ff.c **** #if _FS_REENTRANT
 7780              		.loc 1 2840 12 is_stmt 0 view .LVU2646
 7781 0016 2060     		str	r0, [r4]
 7782 0018 F7E7     		b	.L595
 7783              		.cfi_endproc
 7784              	.LFE39:
 7786              		.section	.text.f_lseek,"ax",%progbits
 7787              		.align	1
 7788              		.global	f_lseek
 7789              		.syntax unified
 7790              		.thumb
 7791              		.thumb_func
 7792              		.fpu fpv4-sp-d16
 7794              	f_lseek:
 7795              	.LVL900:
 7796              	.LFB40:
2995:Core/Src/ff.c **** 	FRESULT res;
 7797              		.loc 1 2995 1 is_stmt 1 view -0
 7798              		.cfi_startproc
 7799              		@ args = 0, pretend = 0, frame = 0
 7800              		@ frame_needed = 0, uses_anonymous_args = 0
2995:Core/Src/ff.c **** 	FRESULT res;
 7801              		.loc 1 2995 1 is_stmt 0 view .LVU2648
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 252


 7802 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7803              	.LCFI69:
 7804              		.cfi_def_cfa_offset 40
 7805              		.cfi_offset 3, -40
 7806              		.cfi_offset 4, -36
 7807              		.cfi_offset 5, -32
 7808              		.cfi_offset 6, -28
 7809              		.cfi_offset 7, -24
 7810              		.cfi_offset 8, -20
 7811              		.cfi_offset 9, -16
 7812              		.cfi_offset 10, -12
 7813              		.cfi_offset 11, -8
 7814              		.cfi_offset 14, -4
 7815 0004 0446     		mov	r4, r0
 7816 0006 0D46     		mov	r5, r1
2996:Core/Src/ff.c **** 
 7817              		.loc 1 2996 2 is_stmt 1 view .LVU2649
2999:Core/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 7818              		.loc 1 2999 2 view .LVU2650
2999:Core/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 7819              		.loc 1 2999 8 is_stmt 0 view .LVU2651
 7820 0008 FFF7FEFF 		bl	validate
 7821              	.LVL901:
3000:Core/Src/ff.c **** 	if (fp->err)						/* Check error */
 7822              		.loc 1 3000 2 is_stmt 1 view .LVU2652
3000:Core/Src/ff.c **** 	if (fp->err)						/* Check error */
 7823              		.loc 1 3000 5 is_stmt 0 view .LVU2653
 7824 000c 0646     		mov	r6, r0
 7825 000e 0028     		cmp	r0, #0
 7826 0010 40F03B81 		bne	.L599
3001:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
 7827              		.loc 1 3001 2 is_stmt 1 view .LVU2654
3001:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
 7828              		.loc 1 3001 8 is_stmt 0 view .LVU2655
 7829 0014 E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
3001:Core/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
 7830              		.loc 1 3001 5 view .LVU2656
 7831 0016 002B     		cmp	r3, #0
 7832 0018 40F03681 		bne	.L633
3005:Core/Src/ff.c **** 		DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
 7833              		.loc 1 3005 2 is_stmt 1 view .LVU2657
3005:Core/Src/ff.c **** 		DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
 7834              		.loc 1 3005 8 is_stmt 0 view .LVU2658
 7835 001c 636A     		ldr	r3, [r4, #36]
3005:Core/Src/ff.c **** 		DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
 7836              		.loc 1 3005 5 view .LVU2659
 7837 001e 002B     		cmp	r3, #0
 7838 0020 00F08A80 		beq	.L600
 7839              	.LBB13:
3006:Core/Src/ff.c **** 
 7840              		.loc 1 3006 3 is_stmt 1 view .LVU2660
3008:Core/Src/ff.c **** 			tbl = fp->cltbl;
 7841              		.loc 1 3008 3 view .LVU2661
3008:Core/Src/ff.c **** 			tbl = fp->cltbl;
 7842              		.loc 1 3008 6 is_stmt 0 view .LVU2662
 7843 0024 B5F1FF3F 		cmp	r5, #-1
 7844 0028 41D0     		beq	.L641
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 253


3034:Core/Src/ff.c **** 				ofs = fp->fsize;
 7845              		.loc 1 3034 4 is_stmt 1 view .LVU2663
3034:Core/Src/ff.c **** 				ofs = fp->fsize;
 7846              		.loc 1 3034 16 is_stmt 0 view .LVU2664
 7847 002a E768     		ldr	r7, [r4, #12]
3034:Core/Src/ff.c **** 				ofs = fp->fsize;
 7848              		.loc 1 3034 7 view .LVU2665
 7849 002c AF42     		cmp	r7, r5
 7850 002e 00D3     		bcc	.L608
 7851 0030 2F46     		mov	r7, r5
 7852              	.L608:
 7853              	.LVL902:
3036:Core/Src/ff.c **** 			if (ofs) {
 7854              		.loc 1 3036 4 is_stmt 1 view .LVU2666
3036:Core/Src/ff.c **** 			if (ofs) {
 7855              		.loc 1 3036 13 is_stmt 0 view .LVU2667
 7856 0032 A760     		str	r7, [r4, #8]
3037:Core/Src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 7857              		.loc 1 3037 4 is_stmt 1 view .LVU2668
3037:Core/Src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 7858              		.loc 1 3037 7 is_stmt 0 view .LVU2669
 7859 0034 002F     		cmp	r7, #0
 7860 0036 00F02881 		beq	.L599
3038:Core/Src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
 7861              		.loc 1 3038 5 is_stmt 1 view .LVU2670
3038:Core/Src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
 7862              		.loc 1 3038 17 is_stmt 0 view .LVU2671
 7863 003a 07F1FF38 		add	r8, r7, #-1
 7864 003e 4146     		mov	r1, r8
 7865 0040 2046     		mov	r0, r4
 7866              	.LVL903:
3038:Core/Src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
 7867              		.loc 1 3038 17 view .LVU2672
 7868 0042 FFF7FEFF 		bl	clmt_clust
 7869              	.LVL904:
 7870 0046 0146     		mov	r1, r0
3038:Core/Src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
 7871              		.loc 1 3038 15 view .LVU2673
 7872 0048 6061     		str	r0, [r4, #20]
3039:Core/Src/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
 7873              		.loc 1 3039 5 is_stmt 1 view .LVU2674
3039:Core/Src/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
 7874              		.loc 1 3039 11 is_stmt 0 view .LVU2675
 7875 004a 2568     		ldr	r5, [r4]
 7876 004c 2846     		mov	r0, r5
 7877 004e FFF7FEFF 		bl	clust2sect
 7878              	.LVL905:
3040:Core/Src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 7879              		.loc 1 3040 5 is_stmt 1 view .LVU2676
3040:Core/Src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 7880              		.loc 1 3040 8 is_stmt 0 view .LVU2677
 7881 0052 0028     		cmp	r0, #0
 7882 0054 67D0     		beq	.L642
3040:Core/Src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 7883              		.loc 1 3040 40 is_stmt 1 discriminator 2 view .LVU2678
3041:Core/Src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 7884              		.loc 1 3041 5 discriminator 2 view .LVU2679
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 254


3041:Core/Src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 7885              		.loc 1 3041 44 is_stmt 0 discriminator 2 view .LVU2680
 7886 0056 A978     		ldrb	r1, [r5, #2]	@ zero_extendqisi2
3041:Core/Src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 7887              		.loc 1 3041 52 discriminator 2 view .LVU2681
 7888 0058 0139     		subs	r1, r1, #1
3041:Core/Src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 7889              		.loc 1 3041 35 discriminator 2 view .LVU2682
 7890 005a 01EA5821 		and	r1, r1, r8, lsr #9
3041:Core/Src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 7891              		.loc 1 3041 9 discriminator 2 view .LVU2683
 7892 005e 01EB0008 		add	r8, r1, r0
 7893              	.LVL906:
3042:Core/Src/ff.c **** #if !_FS_TINY
 7894              		.loc 1 3042 5 is_stmt 1 discriminator 2 view .LVU2684
3042:Core/Src/ff.c **** #if !_FS_TINY
 7895              		.loc 1 3042 18 is_stmt 0 discriminator 2 view .LVU2685
 7896 0062 C7F30807 		ubfx	r7, r7, #0, #9
 7897              	.LVL907:
3042:Core/Src/ff.c **** #if !_FS_TINY
 7898              		.loc 1 3042 8 discriminator 2 view .LVU2686
 7899 0066 002F     		cmp	r7, #0
 7900 0068 00F00F81 		beq	.L599
3042:Core/Src/ff.c **** #if !_FS_TINY
 7901              		.loc 1 3042 43 discriminator 1 view .LVU2687
 7902 006c A269     		ldr	r2, [r4, #24]
3042:Core/Src/ff.c **** #if !_FS_TINY
 7903              		.loc 1 3042 31 discriminator 1 view .LVU2688
 7904 006e 4245     		cmp	r2, r8
 7905 0070 00F00B81 		beq	.L599
3045:Core/Src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 7906              		.loc 1 3045 6 is_stmt 1 view .LVU2689
3045:Core/Src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 7907              		.loc 1 3045 12 is_stmt 0 view .LVU2690
 7908 0074 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
3045:Core/Src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 7909              		.loc 1 3045 9 view .LVU2691
 7910 0076 13F0400F 		tst	r3, #64
 7911 007a 0BD0     		beq	.L610
3046:Core/Src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
 7912              		.loc 1 3046 7 is_stmt 1 view .LVU2692
3046:Core/Src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
 7913              		.loc 1 3046 11 is_stmt 0 view .LVU2693
 7914 007c 0123     		movs	r3, #1
 7915 007e 04F12801 		add	r1, r4, #40
 7916 0082 6878     		ldrb	r0, [r5, #1]	@ zero_extendqisi2
 7917 0084 FFF7FEFF 		bl	disk_write
 7918              	.LVL908:
3046:Core/Src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
 7919              		.loc 1 3046 10 view .LVU2694
 7920 0088 0028     		cmp	r0, #0
 7921 008a 4FD1     		bne	.L643
3047:Core/Src/ff.c **** 						fp->flag &= ~FA__DIRTY;
 7922              		.loc 1 3047 34 is_stmt 1 view .LVU2695
3048:Core/Src/ff.c **** 					}
 7923              		.loc 1 3048 7 view .LVU2696
3048:Core/Src/ff.c **** 					}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 255


 7924              		.loc 1 3048 16 is_stmt 0 view .LVU2697
 7925 008c A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 7926 008e 23F04003 		bic	r3, r3, #64
 7927 0092 A371     		strb	r3, [r4, #6]
 7928              	.L610:
3051:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 7929              		.loc 1 3051 6 is_stmt 1 view .LVU2698
3051:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 7930              		.loc 1 3051 22 is_stmt 0 view .LVU2699
 7931 0094 2146     		mov	r1, r4
 7932 0096 51F8280B 		ldr	r0, [r1], #40
3051:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 7933              		.loc 1 3051 10 view .LVU2700
 7934 009a 0123     		movs	r3, #1
 7935 009c 4246     		mov	r2, r8
 7936 009e 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7937 00a0 FFF7FEFF 		bl	disk_read
 7938              	.LVL909:
3051:Core/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 7939              		.loc 1 3051 9 view .LVU2701
 7940 00a4 0028     		cmp	r0, #0
 7941 00a6 44D1     		bne	.L644
3052:Core/Src/ff.c **** #endif
 7942              		.loc 1 3052 33 is_stmt 1 view .LVU2702
3054:Core/Src/ff.c **** 				}
 7943              		.loc 1 3054 6 view .LVU2703
3054:Core/Src/ff.c **** 				}
 7944              		.loc 1 3054 16 is_stmt 0 view .LVU2704
 7945 00a8 C4F81880 		str	r8, [r4, #24]
 7946 00ac EDE0     		b	.L599
 7947              	.LVL910:
 7948              	.L641:
3009:Core/Src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
 7949              		.loc 1 3009 4 is_stmt 1 view .LVU2705
3010:Core/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 7950              		.loc 1 3010 4 view .LVU2706
3010:Core/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 7951              		.loc 1 3010 15 is_stmt 0 view .LVU2707
 7952 00ae 9846     		mov	r8, r3
 7953              	.LVL911:
3010:Core/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 7954              		.loc 1 3010 9 view .LVU2708
 7955 00b0 58F804BB 		ldr	fp, [r8], #4
 7956              	.LVL912:
3010:Core/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 7957              		.loc 1 3010 19 is_stmt 1 view .LVU2709
3011:Core/Src/ff.c **** 			if (cl) {
 7958              		.loc 1 3011 4 view .LVU2710
3011:Core/Src/ff.c **** 			if (cl) {
 7959              		.loc 1 3011 7 is_stmt 0 view .LVU2711
 7960 00b4 D4F810A0 		ldr	r10, [r4, #16]
 7961              	.LVL913:
3012:Core/Src/ff.c **** 				do {
 7962              		.loc 1 3012 4 is_stmt 1 view .LVU2712
3012:Core/Src/ff.c **** 				do {
 7963              		.loc 1 3012 7 is_stmt 0 view .LVU2713
 7964 00b8 BAF1000F 		cmp	r10, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 256


 7965 00bc 27D0     		beq	.L634
3010:Core/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 7966              		.loc 1 3010 24 view .LVU2714
 7967 00be 4FF00209 		mov	r9, #2
 7968              	.LVL914:
 7969              	.L607:
3013:Core/Src/ff.c **** 					/* Get a fragment */
 7970              		.loc 1 3013 5 is_stmt 1 view .LVU2715
3015:Core/Src/ff.c **** 					do {
 7971              		.loc 1 3015 6 view .LVU2716
3015:Core/Src/ff.c **** 					do {
 7972              		.loc 1 3015 16 view .LVU2717
3015:Core/Src/ff.c **** 					do {
 7973              		.loc 1 3015 25 view .LVU2718
3015:Core/Src/ff.c **** 					do {
 7974              		.loc 1 3015 30 is_stmt 0 view .LVU2719
 7975 00c2 09F10209 		add	r9, r9, #2
 7976              	.LVL915:
3015:Core/Src/ff.c **** 					do {
 7977              		.loc 1 3015 30 view .LVU2720
 7978 00c6 5146     		mov	r1, r10
3015:Core/Src/ff.c **** 					do {
 7979              		.loc 1 3015 20 view .LVU2721
 7980 00c8 0027     		movs	r7, #0
 7981              	.LVL916:
 7982              	.L605:
3016:Core/Src/ff.c **** 						pcl = cl; ncl++;
 7983              		.loc 1 3016 6 is_stmt 1 view .LVU2722
3017:Core/Src/ff.c **** 						cl = get_fat(fp->fs, cl);
 7984              		.loc 1 3017 7 view .LVU2723
3017:Core/Src/ff.c **** 						cl = get_fat(fp->fs, cl);
 7985              		.loc 1 3017 17 view .LVU2724
3017:Core/Src/ff.c **** 						cl = get_fat(fp->fs, cl);
 7986              		.loc 1 3017 20 is_stmt 0 view .LVU2725
 7987 00ca 0137     		adds	r7, r7, #1
 7988              	.LVL917:
3018:Core/Src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 7989              		.loc 1 3018 7 is_stmt 1 view .LVU2726
 7990 00cc 0D46     		mov	r5, r1
3018:Core/Src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 7991              		.loc 1 3018 12 is_stmt 0 view .LVU2727
 7992 00ce 2068     		ldr	r0, [r4]
 7993 00d0 FFF7FEFF 		bl	get_fat
 7994              	.LVL918:
3018:Core/Src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 7995              		.loc 1 3018 12 view .LVU2728
 7996 00d4 0146     		mov	r1, r0
 7997              	.LVL919:
3019:Core/Src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 7998              		.loc 1 3019 7 is_stmt 1 view .LVU2729
3019:Core/Src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 7999              		.loc 1 3019 10 is_stmt 0 view .LVU2730
 8000 00d6 0128     		cmp	r0, #1
 8001 00d8 13D9     		bls	.L645
3019:Core/Src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8002              		.loc 1 3019 45 is_stmt 1 discriminator 2 view .LVU2731
3020:Core/Src/ff.c **** 					} while (cl == pcl + 1);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 257


 8003              		.loc 1 3020 7 discriminator 2 view .LVU2732
3020:Core/Src/ff.c **** 					} while (cl == pcl + 1);
 8004              		.loc 1 3020 10 is_stmt 0 discriminator 2 view .LVU2733
 8005 00da B0F1FF3F 		cmp	r0, #-1
 8006 00de 13D0     		beq	.L646
3020:Core/Src/ff.c **** 					} while (cl == pcl + 1);
 8007              		.loc 1 3020 55 is_stmt 1 discriminator 2 view .LVU2734
3021:Core/Src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 8008              		.loc 1 3021 14 discriminator 2 view .LVU2735
3021:Core/Src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 8009              		.loc 1 3021 25 is_stmt 0 discriminator 2 view .LVU2736
 8010 00e0 0135     		adds	r5, r5, #1
 8011              	.LVL920:
3021:Core/Src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 8012              		.loc 1 3021 6 discriminator 2 view .LVU2737
 8013 00e2 8542     		cmp	r5, r0
 8014 00e4 F1D0     		beq	.L605
3022:Core/Src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 8015              		.loc 1 3022 6 is_stmt 1 view .LVU2738
3022:Core/Src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 8016              		.loc 1 3022 9 is_stmt 0 view .LVU2739
 8017 00e6 CB45     		cmp	fp, r9
 8018 00e8 05D3     		bcc	.L606
3023:Core/Src/ff.c **** 					}
 8019              		.loc 1 3023 7 is_stmt 1 view .LVU2740
 8020              	.LVL921:
3023:Core/Src/ff.c **** 					}
 8021              		.loc 1 3023 14 is_stmt 0 view .LVU2741
 8022 00ea 4346     		mov	r3, r8
 8023 00ec 43F8087B 		str	r7, [r3], #8
3023:Core/Src/ff.c **** 					}
 8024              		.loc 1 3023 21 is_stmt 1 view .LVU2742
 8025              	.LVL922:
3023:Core/Src/ff.c **** 					}
 8026              		.loc 1 3023 28 is_stmt 0 view .LVU2743
 8027 00f0 C8F804A0 		str	r10, [r8, #4]
3023:Core/Src/ff.c **** 					}
 8028              		.loc 1 3023 25 view .LVU2744
 8029 00f4 9846     		mov	r8, r3
 8030              	.LVL923:
 8031              	.L606:
3025:Core/Src/ff.c **** 			}
 8032              		.loc 1 3025 13 is_stmt 1 view .LVU2745
3025:Core/Src/ff.c **** 			}
 8033              		.loc 1 3025 21 is_stmt 0 view .LVU2746
 8034 00f6 2368     		ldr	r3, [r4]
3025:Core/Src/ff.c **** 			}
 8035              		.loc 1 3025 25 view .LVU2747
 8036 00f8 5B69     		ldr	r3, [r3, #20]
3025:Core/Src/ff.c **** 			}
 8037              		.loc 1 3025 5 view .LVU2748
 8038 00fa 8B42     		cmp	r3, r1
 8039 00fc 09D9     		bls	.L602
3018:Core/Src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 8040              		.loc 1 3018 12 view .LVU2749
 8041 00fe 8A46     		mov	r10, r1
 8042              	.LVL924:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 258


3018:Core/Src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
 8043              		.loc 1 3018 12 view .LVU2750
 8044 0100 DFE7     		b	.L607
 8045              	.LVL925:
 8046              	.L645:
3019:Core/Src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8047              		.loc 1 3019 20 is_stmt 1 discriminator 1 view .LVU2751
 8048 0102 0226     		movs	r6, #2
 8049 0104 E671     		strb	r6, [r4, #7]
3019:Core/Src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8050              		.loc 1 3019 20 discriminator 1 view .LVU2752
 8051 0106 C0E0     		b	.L599
 8052              	.L646:
3020:Core/Src/ff.c **** 					} while (cl == pcl + 1);
 8053              		.loc 1 3020 29 discriminator 1 view .LVU2753
 8054 0108 0126     		movs	r6, #1
 8055 010a E671     		strb	r6, [r4, #7]
3020:Core/Src/ff.c **** 					} while (cl == pcl + 1);
 8056              		.loc 1 3020 29 discriminator 1 view .LVU2754
 8057 010c BDE0     		b	.L599
 8058              	.LVL926:
 8059              	.L634:
3010:Core/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 8060              		.loc 1 3010 24 is_stmt 0 view .LVU2755
 8061 010e 4FF00209 		mov	r9, #2
 8062              	.LVL927:
 8063              	.L602:
3027:Core/Src/ff.c **** 			if (ulen <= tlen)
 8064              		.loc 1 3027 4 is_stmt 1 view .LVU2756
3027:Core/Src/ff.c **** 			if (ulen <= tlen)
 8065              		.loc 1 3027 7 is_stmt 0 view .LVU2757
 8066 0112 636A     		ldr	r3, [r4, #36]
3027:Core/Src/ff.c **** 			if (ulen <= tlen)
 8067              		.loc 1 3027 15 view .LVU2758
 8068 0114 C3F80090 		str	r9, [r3]
3028:Core/Src/ff.c **** 				*tbl = 0;		/* Terminate table */
 8069              		.loc 1 3028 4 is_stmt 1 view .LVU2759
3028:Core/Src/ff.c **** 				*tbl = 0;		/* Terminate table */
 8070              		.loc 1 3028 7 is_stmt 0 view .LVU2760
 8071 0118 D945     		cmp	r9, fp
 8072 011a 00F2B980 		bhi	.L636
3029:Core/Src/ff.c **** 			else
 8073              		.loc 1 3029 5 is_stmt 1 view .LVU2761
3029:Core/Src/ff.c **** 			else
 8074              		.loc 1 3029 10 is_stmt 0 view .LVU2762
 8075 011e 0023     		movs	r3, #0
 8076 0120 C8F80030 		str	r3, [r8]
 8077 0124 B1E0     		b	.L599
 8078              	.LVL928:
 8079              	.L642:
3040:Core/Src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 8080              		.loc 1 3040 15 is_stmt 1 discriminator 1 view .LVU2763
 8081 0126 0226     		movs	r6, #2
 8082 0128 E671     		strb	r6, [r4, #7]
3040:Core/Src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 8083              		.loc 1 3040 15 discriminator 1 view .LVU2764
 8084 012a AEE0     		b	.L599
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 259


 8085              	.LVL929:
 8086              	.L643:
3047:Core/Src/ff.c **** 						fp->flag &= ~FA__DIRTY;
 8087              		.loc 1 3047 8 view .LVU2765
 8088 012c 0126     		movs	r6, #1
 8089 012e E671     		strb	r6, [r4, #7]
3047:Core/Src/ff.c **** 						fp->flag &= ~FA__DIRTY;
 8090              		.loc 1 3047 8 view .LVU2766
 8091 0130 ABE0     		b	.L599
 8092              	.L644:
3052:Core/Src/ff.c **** #endif
 8093              		.loc 1 3052 7 view .LVU2767
 8094 0132 0126     		movs	r6, #1
 8095 0134 E671     		strb	r6, [r4, #7]
3052:Core/Src/ff.c **** #endif
 8096              		.loc 1 3052 7 view .LVU2768
 8097 0136 A8E0     		b	.L599
 8098              	.LVL930:
 8099              	.L600:
3052:Core/Src/ff.c **** #endif
 8100              		.loc 1 3052 7 is_stmt 0 view .LVU2769
 8101              	.LBE13:
 8102              	.LBB14:
3063:Core/Src/ff.c **** 
 8103              		.loc 1 3063 3 is_stmt 1 view .LVU2770
3065:Core/Src/ff.c **** #if !_FS_READONLY
 8104              		.loc 1 3065 3 view .LVU2771
3065:Core/Src/ff.c **** #if !_FS_READONLY
 8105              		.loc 1 3065 15 is_stmt 0 view .LVU2772
 8106 0138 E368     		ldr	r3, [r4, #12]
3065:Core/Src/ff.c **** #if !_FS_READONLY
 8107              		.loc 1 3065 6 view .LVU2773
 8108 013a AB42     		cmp	r3, r5
 8109 013c 04D2     		bcs	.L613
3067:Core/Src/ff.c **** #endif
 8110              		.loc 1 3067 12 view .LVU2774
 8111 013e A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
3067:Core/Src/ff.c **** #endif
 8112              		.loc 1 3067 5 view .LVU2775
 8113 0140 12F0020F 		tst	r2, #2
 8114 0144 00D1     		bne	.L613
3069:Core/Src/ff.c **** 
 8115              		.loc 1 3069 10 view .LVU2776
 8116 0146 1D46     		mov	r5, r3
 8117              	.LVL931:
 8118              	.L613:
3071:Core/Src/ff.c **** 		fp->fptr = nsect = 0;
 8119              		.loc 1 3071 3 is_stmt 1 view .LVU2777
3071:Core/Src/ff.c **** 		fp->fptr = nsect = 0;
 8120              		.loc 1 3071 9 is_stmt 0 view .LVU2778
 8121 0148 A368     		ldr	r3, [r4, #8]
 8122              	.LVL932:
3072:Core/Src/ff.c **** 		if (ofs) {
 8123              		.loc 1 3072 3 is_stmt 1 view .LVU2779
3072:Core/Src/ff.c **** 		if (ofs) {
 8124              		.loc 1 3072 12 is_stmt 0 view .LVU2780
 8125 014a 0022     		movs	r2, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 260


 8126 014c A260     		str	r2, [r4, #8]
3073:Core/Src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
 8127              		.loc 1 3073 3 is_stmt 1 view .LVU2781
3073:Core/Src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
 8128              		.loc 1 3073 6 is_stmt 0 view .LVU2782
 8129 014e E5B1     		cbz	r5, .L614
3074:Core/Src/ff.c **** 			if (ifptr > 0 &&
 8130              		.loc 1 3074 4 is_stmt 1 view .LVU2783
3074:Core/Src/ff.c **** 			if (ifptr > 0 &&
 8131              		.loc 1 3074 19 is_stmt 0 view .LVU2784
 8132 0150 2068     		ldr	r0, [r4]
 8133              	.LVL933:
3074:Core/Src/ff.c **** 			if (ifptr > 0 &&
 8134              		.loc 1 3074 23 view .LVU2785
 8135 0152 90F80280 		ldrb	r8, [r0, #2]	@ zero_extendqisi2
3074:Core/Src/ff.c **** 			if (ifptr > 0 &&
 8136              		.loc 1 3074 8 view .LVU2786
 8137 0156 4FEA4828 		lsl	r8, r8, #9
 8138              	.LVL934:
3075:Core/Src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 8139              		.loc 1 3075 4 is_stmt 1 view .LVU2787
3075:Core/Src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 8140              		.loc 1 3075 7 is_stmt 0 view .LVU2788
 8141 015a 73B1     		cbz	r3, .L615
3076:Core/Src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 8142              		.loc 1 3076 10 discriminator 1 view .LVU2789
 8143 015c 6A1E     		subs	r2, r5, #1
3076:Core/Src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 8144              		.loc 1 3076 15 discriminator 1 view .LVU2790
 8145 015e B2FBF8F2 		udiv	r2, r2, r8
3076:Core/Src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 8146              		.loc 1 3076 31 discriminator 1 view .LVU2791
 8147 0162 013B     		subs	r3, r3, #1
 8148              	.LVL935:
3076:Core/Src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 8149              		.loc 1 3076 36 discriminator 1 view .LVU2792
 8150 0164 B3FBF8F1 		udiv	r1, r3, r8
3075:Core/Src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 8151              		.loc 1 3075 18 discriminator 1 view .LVU2793
 8152 0168 8A42     		cmp	r2, r1
 8153 016a 06D3     		bcc	.L615
3077:Core/Src/ff.c **** 				ofs -= fp->fptr;
 8154              		.loc 1 3077 5 is_stmt 1 view .LVU2794
3077:Core/Src/ff.c **** 				ofs -= fp->fptr;
 8155              		.loc 1 3077 30 is_stmt 0 view .LVU2795
 8156 016c C8F10007 		rsb	r7, r8, #0
3077:Core/Src/ff.c **** 				ofs -= fp->fptr;
 8157              		.loc 1 3077 28 view .LVU2796
 8158 0170 1F40     		ands	r7, r7, r3
3077:Core/Src/ff.c **** 				ofs -= fp->fptr;
 8159              		.loc 1 3077 14 view .LVU2797
 8160 0172 A760     		str	r7, [r4, #8]
3078:Core/Src/ff.c **** 				clst = fp->clust;
 8161              		.loc 1 3078 5 is_stmt 1 view .LVU2798
3078:Core/Src/ff.c **** 				clst = fp->clust;
 8162              		.loc 1 3078 9 is_stmt 0 view .LVU2799
 8163 0174 EF1B     		subs	r7, r5, r7
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 261


 8164              	.LVL936:
3079:Core/Src/ff.c **** 			} else {									/* When seek to back cluster, */
 8165              		.loc 1 3079 5 is_stmt 1 view .LVU2800
3079:Core/Src/ff.c **** 			} else {									/* When seek to back cluster, */
 8166              		.loc 1 3079 10 is_stmt 0 view .LVU2801
 8167 0176 6569     		ldr	r5, [r4, #20]
 8168              	.LVL937:
3079:Core/Src/ff.c **** 			} else {									/* When seek to back cluster, */
 8169              		.loc 1 3079 10 view .LVU2802
 8170 0178 05E0     		b	.L616
 8171              	.LVL938:
 8172              	.L615:
3081:Core/Src/ff.c **** #if !_FS_READONLY
 8173              		.loc 1 3081 5 is_stmt 1 view .LVU2803
3081:Core/Src/ff.c **** #if !_FS_READONLY
 8174              		.loc 1 3081 10 is_stmt 0 view .LVU2804
 8175 017a 2369     		ldr	r3, [r4, #16]
 8176              	.LVL939:
3083:Core/Src/ff.c **** 					clst = create_chain(fp->fs, 0);
 8177              		.loc 1 3083 5 is_stmt 1 view .LVU2805
3083:Core/Src/ff.c **** 					clst = create_chain(fp->fs, 0);
 8178              		.loc 1 3083 8 is_stmt 0 view .LVU2806
 8179 017c 002B     		cmp	r3, #0
 8180 017e 31D0     		beq	.L647
 8181              	.L617:
3090:Core/Src/ff.c **** 			}
 8182              		.loc 1 3090 5 is_stmt 1 view .LVU2807
3090:Core/Src/ff.c **** 			}
 8183              		.loc 1 3090 15 is_stmt 0 view .LVU2808
 8184 0180 6361     		str	r3, [r4, #20]
 8185 0182 2F46     		mov	r7, r5
 8186 0184 1D46     		mov	r5, r3
 8187              	.LVL940:
 8188              	.L616:
3092:Core/Src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 8189              		.loc 1 3092 4 is_stmt 1 view .LVU2809
3092:Core/Src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 8190              		.loc 1 3092 7 is_stmt 0 view .LVU2810
 8191 0186 002D     		cmp	r5, #0
 8192 0188 51D1     		bne	.L620
 8193              	.LVL941:
 8194              	.L614:
3117:Core/Src/ff.c **** #if !_FS_TINY
 8195              		.loc 1 3117 3 is_stmt 1 view .LVU2811
3117:Core/Src/ff.c **** #if !_FS_TINY
 8196              		.loc 1 3117 9 is_stmt 0 view .LVU2812
 8197 018a A368     		ldr	r3, [r4, #8]
3117:Core/Src/ff.c **** #if !_FS_TINY
 8198              		.loc 1 3117 16 view .LVU2813
 8199 018c C3F30803 		ubfx	r3, r3, #0, #9
3117:Core/Src/ff.c **** #if !_FS_TINY
 8200              		.loc 1 3117 6 view .LVU2814
 8201 0190 F3B1     		cbz	r3, .L629
3117:Core/Src/ff.c **** #if !_FS_TINY
 8202              		.loc 1 3117 43 discriminator 1 view .LVU2815
 8203 0192 A269     		ldr	r2, [r4, #24]
3117:Core/Src/ff.c **** #if !_FS_TINY
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 262


 8204              		.loc 1 3117 29 discriminator 1 view .LVU2816
 8205 0194 AA42     		cmp	r2, r5
 8206 0196 1BD0     		beq	.L629
3120:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 8207              		.loc 1 3120 4 is_stmt 1 view .LVU2817
3120:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 8208              		.loc 1 3120 10 is_stmt 0 view .LVU2818
 8209 0198 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
3120:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 8210              		.loc 1 3120 7 view .LVU2819
 8211 019a 13F0400F 		tst	r3, #64
 8212 019e 0CD0     		beq	.L630
3121:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 8213              		.loc 1 3121 5 is_stmt 1 view .LVU2820
3121:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 8214              		.loc 1 3121 22 is_stmt 0 view .LVU2821
 8215 01a0 2146     		mov	r1, r4
 8216 01a2 51F8280B 		ldr	r0, [r1], #40
3121:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 8217              		.loc 1 3121 9 view .LVU2822
 8218 01a6 0123     		movs	r3, #1
 8219 01a8 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8220 01aa FFF7FEFF 		bl	disk_write
 8221              	.LVL942:
3121:Core/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 8222              		.loc 1 3121 8 view .LVU2823
 8223 01ae 0028     		cmp	r0, #0
 8224 01b0 64D1     		bne	.L648
3122:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 8225              		.loc 1 3122 32 is_stmt 1 view .LVU2824
3123:Core/Src/ff.c **** 			}
 8226              		.loc 1 3123 5 view .LVU2825
3123:Core/Src/ff.c **** 			}
 8227              		.loc 1 3123 14 is_stmt 0 view .LVU2826
 8228 01b2 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 8229 01b4 23F04003 		bic	r3, r3, #64
 8230 01b8 A371     		strb	r3, [r4, #6]
 8231              	.L630:
3126:Core/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
 8232              		.loc 1 3126 4 is_stmt 1 view .LVU2827
3126:Core/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
 8233              		.loc 1 3126 20 is_stmt 0 view .LVU2828
 8234 01ba 2146     		mov	r1, r4
 8235 01bc 51F8280B 		ldr	r0, [r1], #40
3126:Core/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
 8236              		.loc 1 3126 8 view .LVU2829
 8237 01c0 0123     		movs	r3, #1
 8238 01c2 2A46     		mov	r2, r5
 8239 01c4 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8240 01c6 FFF7FEFF 		bl	disk_read
 8241              	.LVL943:
3126:Core/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
 8242              		.loc 1 3126 7 view .LVU2830
 8243 01ca 0028     		cmp	r0, #0
 8244 01cc 59D1     		bne	.L649
3127:Core/Src/ff.c **** #endif
 8245              		.loc 1 3127 31 is_stmt 1 view .LVU2831
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 263


3129:Core/Src/ff.c **** 		}
 8246              		.loc 1 3129 4 view .LVU2832
3129:Core/Src/ff.c **** 		}
 8247              		.loc 1 3129 14 is_stmt 0 view .LVU2833
 8248 01ce A561     		str	r5, [r4, #24]
 8249              	.L629:
3132:Core/Src/ff.c **** 			fp->fsize = fp->fptr;
 8250              		.loc 1 3132 3 is_stmt 1 view .LVU2834
3132:Core/Src/ff.c **** 			fp->fsize = fp->fptr;
 8251              		.loc 1 3132 9 is_stmt 0 view .LVU2835
 8252 01d0 A368     		ldr	r3, [r4, #8]
3132:Core/Src/ff.c **** 			fp->fsize = fp->fptr;
 8253              		.loc 1 3132 20 view .LVU2836
 8254 01d2 E268     		ldr	r2, [r4, #12]
3132:Core/Src/ff.c **** 			fp->fsize = fp->fptr;
 8255              		.loc 1 3132 6 view .LVU2837
 8256 01d4 9342     		cmp	r3, r2
 8257 01d6 58D9     		bls	.L599
3133:Core/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
 8258              		.loc 1 3133 4 is_stmt 1 view .LVU2838
3133:Core/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
 8259              		.loc 1 3133 14 is_stmt 0 view .LVU2839
 8260 01d8 E360     		str	r3, [r4, #12]
3134:Core/Src/ff.c **** 		}
 8261              		.loc 1 3134 4 is_stmt 1 view .LVU2840
3134:Core/Src/ff.c **** 		}
 8262              		.loc 1 3134 13 is_stmt 0 view .LVU2841
 8263 01da A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 8264 01dc 43F02003 		orr	r3, r3, #32
 8265 01e0 A371     		strb	r3, [r4, #6]
 8266 01e2 52E0     		b	.L599
 8267              	.LVL944:
 8268              	.L647:
3084:Core/Src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 8269              		.loc 1 3084 6 is_stmt 1 view .LVU2842
3084:Core/Src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 8270              		.loc 1 3084 13 is_stmt 0 view .LVU2843
 8271 01e4 0021     		movs	r1, #0
 8272 01e6 FFF7FEFF 		bl	create_chain
 8273              	.LVL945:
3084:Core/Src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 8274              		.loc 1 3084 13 view .LVU2844
 8275 01ea 0346     		mov	r3, r0
 8276              	.LVL946:
3085:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8277              		.loc 1 3085 6 is_stmt 1 view .LVU2845
3085:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8278              		.loc 1 3085 9 is_stmt 0 view .LVU2846
 8279 01ec 0128     		cmp	r0, #1
 8280 01ee 04D0     		beq	.L650
3085:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8281              		.loc 1 3085 46 is_stmt 1 discriminator 2 view .LVU2847
3086:Core/Src/ff.c **** 					fp->sclust = clst;
 8282              		.loc 1 3086 6 discriminator 2 view .LVU2848
3086:Core/Src/ff.c **** 					fp->sclust = clst;
 8283              		.loc 1 3086 9 is_stmt 0 discriminator 2 view .LVU2849
 8284 01f0 B0F1FF3F 		cmp	r0, #-1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 264


 8285 01f4 04D0     		beq	.L651
3086:Core/Src/ff.c **** 					fp->sclust = clst;
 8286              		.loc 1 3086 56 is_stmt 1 discriminator 2 view .LVU2850
3087:Core/Src/ff.c **** 				}
 8287              		.loc 1 3087 6 discriminator 2 view .LVU2851
3087:Core/Src/ff.c **** 				}
 8288              		.loc 1 3087 17 is_stmt 0 discriminator 2 view .LVU2852
 8289 01f6 2061     		str	r0, [r4, #16]
 8290 01f8 C2E7     		b	.L617
 8291              	.L650:
3085:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8292              		.loc 1 3085 21 is_stmt 1 discriminator 1 view .LVU2853
 8293 01fa 0226     		movs	r6, #2
 8294 01fc E671     		strb	r6, [r4, #7]
3085:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8295              		.loc 1 3085 21 discriminator 1 view .LVU2854
 8296 01fe 44E0     		b	.L599
 8297              	.L651:
3086:Core/Src/ff.c **** 					fp->sclust = clst;
 8298              		.loc 1 3086 30 discriminator 1 view .LVU2855
 8299 0200 0126     		movs	r6, #1
 8300 0202 E671     		strb	r6, [r4, #7]
3086:Core/Src/ff.c **** 					fp->sclust = clst;
 8301              		.loc 1 3086 30 discriminator 1 view .LVU2856
 8302 0204 41E0     		b	.L599
 8303              	.LVL947:
 8304              	.L621:
3102:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8305              		.loc 1 3102 7 view .LVU2857
3102:Core/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 8306              		.loc 1 3102 14 is_stmt 0 view .LVU2858
 8307 0206 2946     		mov	r1, r5
 8308 0208 2068     		ldr	r0, [r4]
 8309 020a FFF7FEFF 		bl	get_fat
 8310              	.LVL948:
 8311 020e 0546     		mov	r5, r0
 8312              	.LVL949:
 8313              	.L623:
3103:Core/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 8314              		.loc 1 3103 6 is_stmt 1 view .LVU2859
3103:Core/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 8315              		.loc 1 3103 9 is_stmt 0 view .LVU2860
 8316 0210 B5F1FF3F 		cmp	r5, #-1
 8317 0214 27D0     		beq	.L652
3103:Core/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 8318              		.loc 1 3103 56 is_stmt 1 discriminator 2 view .LVU2861
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8319              		.loc 1 3104 6 discriminator 2 view .LVU2862
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8320              		.loc 1 3104 9 is_stmt 0 discriminator 2 view .LVU2863
 8321 0216 012D     		cmp	r5, #1
 8322 0218 28D9     		bls	.L625
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8323              		.loc 1 3104 33 discriminator 2 view .LVU2864
 8324 021a 2368     		ldr	r3, [r4]
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8325              		.loc 1 3104 37 discriminator 2 view .LVU2865
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 265


 8326 021c 5B69     		ldr	r3, [r3, #20]
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8327              		.loc 1 3104 20 discriminator 2 view .LVU2866
 8328 021e AB42     		cmp	r3, r5
 8329 0220 24D9     		bls	.L625
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8330              		.loc 1 3104 74 is_stmt 1 discriminator 4 view .LVU2867
3105:Core/Src/ff.c **** 					fp->fptr += bcs;
 8331              		.loc 1 3105 6 discriminator 4 view .LVU2868
3105:Core/Src/ff.c **** 					fp->fptr += bcs;
 8332              		.loc 1 3105 16 is_stmt 0 discriminator 4 view .LVU2869
 8333 0222 6561     		str	r5, [r4, #20]
3106:Core/Src/ff.c **** 					ofs -= bcs;
 8334              		.loc 1 3106 6 is_stmt 1 discriminator 4 view .LVU2870
3106:Core/Src/ff.c **** 					ofs -= bcs;
 8335              		.loc 1 3106 15 is_stmt 0 discriminator 4 view .LVU2871
 8336 0224 A368     		ldr	r3, [r4, #8]
 8337 0226 4344     		add	r3, r3, r8
 8338 0228 A360     		str	r3, [r4, #8]
3107:Core/Src/ff.c **** 				}
 8339              		.loc 1 3107 6 is_stmt 1 discriminator 4 view .LVU2872
3107:Core/Src/ff.c **** 				}
 8340              		.loc 1 3107 10 is_stmt 0 discriminator 4 view .LVU2873
 8341 022a A7EB0807 		sub	r7, r7, r8
 8342              	.LVL950:
 8343              	.L620:
3093:Core/Src/ff.c **** #if !_FS_READONLY
 8344              		.loc 1 3093 11 is_stmt 1 view .LVU2874
 8345 022e 4745     		cmp	r7, r8
 8346 0230 0BD9     		bls	.L622
3095:Core/Src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 8347              		.loc 1 3095 6 view .LVU2875
3095:Core/Src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 8348              		.loc 1 3095 12 is_stmt 0 view .LVU2876
 8349 0232 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
3095:Core/Src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 8350              		.loc 1 3095 9 view .LVU2877
 8351 0234 13F0020F 		tst	r3, #2
 8352 0238 E5D0     		beq	.L621
3096:Core/Src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
 8353              		.loc 1 3096 7 is_stmt 1 view .LVU2878
3096:Core/Src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
 8354              		.loc 1 3096 14 is_stmt 0 view .LVU2879
 8355 023a 2946     		mov	r1, r5
 8356 023c 2068     		ldr	r0, [r4]
 8357 023e FFF7FEFF 		bl	create_chain
 8358              	.LVL951:
3097:Core/Src/ff.c **** 							ofs = bcs; break;
 8359              		.loc 1 3097 7 is_stmt 1 view .LVU2880
3097:Core/Src/ff.c **** 							ofs = bcs; break;
 8360              		.loc 1 3097 10 is_stmt 0 view .LVU2881
 8361 0242 0546     		mov	r5, r0
 8362 0244 0028     		cmp	r0, #0
 8363 0246 E3D1     		bne	.L623
3098:Core/Src/ff.c **** 						}
 8364              		.loc 1 3098 12 view .LVU2882
 8365 0248 4746     		mov	r7, r8
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 266


 8366              	.LVL952:
 8367              	.L622:
3109:Core/Src/ff.c **** 				if (ofs % SS(fp->fs)) {
 8368              		.loc 1 3109 5 is_stmt 1 view .LVU2883
3109:Core/Src/ff.c **** 				if (ofs % SS(fp->fs)) {
 8369              		.loc 1 3109 14 is_stmt 0 view .LVU2884
 8370 024a A368     		ldr	r3, [r4, #8]
 8371 024c 3B44     		add	r3, r3, r7
 8372 024e A360     		str	r3, [r4, #8]
3110:Core/Src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 8373              		.loc 1 3110 5 is_stmt 1 view .LVU2885
3110:Core/Src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 8374              		.loc 1 3110 13 is_stmt 0 view .LVU2886
 8375 0250 C7F30803 		ubfx	r3, r7, #0, #9
3110:Core/Src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 8376              		.loc 1 3110 8 view .LVU2887
 8377 0254 83B1     		cbz	r3, .L639
3111:Core/Src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
 8378              		.loc 1 3111 6 is_stmt 1 view .LVU2888
3111:Core/Src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
 8379              		.loc 1 3111 14 is_stmt 0 view .LVU2889
 8380 0256 2946     		mov	r1, r5
 8381 0258 2068     		ldr	r0, [r4]
 8382 025a FFF7FEFF 		bl	clust2sect
 8383              	.LVL953:
3112:Core/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
 8384              		.loc 1 3112 6 is_stmt 1 view .LVU2890
3112:Core/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
 8385              		.loc 1 3112 9 is_stmt 0 view .LVU2891
 8386 025e 40B1     		cbz	r0, .L653
3112:Core/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
 8387              		.loc 1 3112 43 is_stmt 1 discriminator 2 view .LVU2892
3113:Core/Src/ff.c **** 				}
 8388              		.loc 1 3113 6 discriminator 2 view .LVU2893
3113:Core/Src/ff.c **** 				}
 8389              		.loc 1 3113 12 is_stmt 0 discriminator 2 view .LVU2894
 8390 0260 00EB5725 		add	r5, r0, r7, lsr #9
 8391              	.LVL954:
3113:Core/Src/ff.c **** 				}
 8392              		.loc 1 3113 12 discriminator 2 view .LVU2895
 8393 0264 91E7     		b	.L614
 8394              	.LVL955:
 8395              	.L652:
3103:Core/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 8396              		.loc 1 3103 30 is_stmt 1 discriminator 1 view .LVU2896
 8397 0266 0126     		movs	r6, #1
 8398 0268 E671     		strb	r6, [r4, #7]
3103:Core/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 8399              		.loc 1 3103 30 discriminator 1 view .LVU2897
 8400 026a 0EE0     		b	.L599
 8401              	.L625:
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8402              		.loc 1 3104 49 discriminator 3 view .LVU2898
 8403 026c 0226     		movs	r6, #2
 8404 026e E671     		strb	r6, [r4, #7]
3104:Core/Src/ff.c **** 					fp->clust = clst;
 8405              		.loc 1 3104 49 discriminator 3 view .LVU2899
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 267


 8406 0270 0BE0     		b	.L599
 8407              	.LVL956:
 8408              	.L653:
3112:Core/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
 8409              		.loc 1 3112 18 discriminator 1 view .LVU2900
 8410 0272 0226     		movs	r6, #2
 8411 0274 E671     		strb	r6, [r4, #7]
3112:Core/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
 8412              		.loc 1 3112 18 discriminator 1 view .LVU2901
 8413 0276 08E0     		b	.L599
 8414              	.LVL957:
 8415              	.L639:
3072:Core/Src/ff.c **** 		if (ofs) {
 8416              		.loc 1 3072 20 is_stmt 0 view .LVU2902
 8417 0278 1D46     		mov	r5, r3
 8418              	.LVL958:
3072:Core/Src/ff.c **** 		if (ofs) {
 8419              		.loc 1 3072 20 view .LVU2903
 8420 027a 86E7     		b	.L614
 8421              	.LVL959:
 8422              	.L648:
3122:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 8423              		.loc 1 3122 6 is_stmt 1 view .LVU2904
 8424 027c 0126     		movs	r6, #1
 8425 027e E671     		strb	r6, [r4, #7]
3122:Core/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 8426              		.loc 1 3122 6 view .LVU2905
 8427 0280 03E0     		b	.L599
 8428              	.L649:
3127:Core/Src/ff.c **** #endif
 8429              		.loc 1 3127 5 view .LVU2906
 8430 0282 0126     		movs	r6, #1
 8431 0284 E671     		strb	r6, [r4, #7]
3127:Core/Src/ff.c **** #endif
 8432              		.loc 1 3127 5 view .LVU2907
 8433 0286 00E0     		b	.L599
 8434              	.LVL960:
 8435              	.L633:
3127:Core/Src/ff.c **** #endif
 8436              		.loc 1 3127 5 is_stmt 0 view .LVU2908
 8437              	.LBE14:
3002:Core/Src/ff.c **** 
 8438              		.loc 1 3002 3 view .LVU2909
 8439 0288 1E46     		mov	r6, r3
 8440              	.LVL961:
 8441              	.L599:
3140:Core/Src/ff.c **** 
 8442              		.loc 1 3140 1 view .LVU2910
 8443 028a 3046     		mov	r0, r6
 8444 028c BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8445              	.LVL962:
 8446              	.L636:
 8447              	.LBB15:
3031:Core/Src/ff.c **** 
 8448              		.loc 1 3031 9 view .LVU2911
 8449 0290 1126     		movs	r6, #17
 8450 0292 FAE7     		b	.L599
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 268


 8451              	.LBE15:
 8452              		.cfi_endproc
 8453              	.LFE40:
 8455              		.section	.text.f_opendir,"ax",%progbits
 8456              		.align	1
 8457              		.global	f_opendir
 8458              		.syntax unified
 8459              		.thumb
 8460              		.thumb_func
 8461              		.fpu fpv4-sp-d16
 8463              	f_opendir:
 8464              	.LVL963:
 8465              	.LFB41:
3153:Core/Src/ff.c **** 	FRESULT res;
 8466              		.loc 1 3153 1 is_stmt 1 view -0
 8467              		.cfi_startproc
 8468              		@ args = 0, pretend = 0, frame = 24
 8469              		@ frame_needed = 0, uses_anonymous_args = 0
3153:Core/Src/ff.c **** 	FRESULT res;
 8470              		.loc 1 3153 1 is_stmt 0 view .LVU2913
 8471 0000 70B5     		push	{r4, r5, r6, lr}
 8472              	.LCFI70:
 8473              		.cfi_def_cfa_offset 16
 8474              		.cfi_offset 4, -16
 8475              		.cfi_offset 5, -12
 8476              		.cfi_offset 6, -8
 8477              		.cfi_offset 14, -4
 8478 0002 86B0     		sub	sp, sp, #24
 8479              	.LCFI71:
 8480              		.cfi_def_cfa_offset 40
 8481 0004 0191     		str	r1, [sp, #4]
3154:Core/Src/ff.c **** 	FATFS* fs;
 8482              		.loc 1 3154 2 is_stmt 1 view .LVU2914
3155:Core/Src/ff.c **** 	DEF_NAMEBUF;
 8483              		.loc 1 3155 2 view .LVU2915
3156:Core/Src/ff.c **** 
 8484              		.loc 1 3156 2 view .LVU2916
3156:Core/Src/ff.c **** 
 8485              		.loc 1 3156 2 view .LVU2917
3159:Core/Src/ff.c **** 
 8486              		.loc 1 3159 2 view .LVU2918
3159:Core/Src/ff.c **** 
 8487              		.loc 1 3159 5 is_stmt 0 view .LVU2919
 8488 0006 0028     		cmp	r0, #0
 8489 0008 39D0     		beq	.L660
 8490 000a 0546     		mov	r5, r0
3162:Core/Src/ff.c **** 	if (res == FR_OK) {
 8491              		.loc 1 3162 2 is_stmt 1 view .LVU2920
3162:Core/Src/ff.c **** 	if (res == FR_OK) {
 8492              		.loc 1 3162 8 is_stmt 0 view .LVU2921
 8493 000c 0022     		movs	r2, #0
 8494 000e 01A9     		add	r1, sp, #4
 8495              	.LVL964:
3162:Core/Src/ff.c **** 	if (res == FR_OK) {
 8496              		.loc 1 3162 8 view .LVU2922
 8497 0010 05A8     		add	r0, sp, #20
 8498              	.LVL965:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 269


3162:Core/Src/ff.c **** 	if (res == FR_OK) {
 8499              		.loc 1 3162 8 view .LVU2923
 8500 0012 FFF7FEFF 		bl	find_volume
 8501              	.LVL966:
3163:Core/Src/ff.c **** 		dp->fs = fs;
 8502              		.loc 1 3163 2 is_stmt 1 view .LVU2924
3163:Core/Src/ff.c **** 		dp->fs = fs;
 8503              		.loc 1 3163 5 is_stmt 0 view .LVU2925
 8504 0016 0446     		mov	r4, r0
 8505 0018 28B1     		cbz	r0, .L665
 8506              	.L656:
3193:Core/Src/ff.c **** 
 8507              		.loc 1 3193 2 is_stmt 1 view .LVU2926
3193:Core/Src/ff.c **** 
 8508              		.loc 1 3193 5 is_stmt 0 view .LVU2927
 8509 001a 0CB1     		cbz	r4, .L655
 8510              	.L659:
3193:Core/Src/ff.c **** 
 8511              		.loc 1 3193 20 is_stmt 1 discriminator 1 view .LVU2928
3193:Core/Src/ff.c **** 
 8512              		.loc 1 3193 27 is_stmt 0 discriminator 1 view .LVU2929
 8513 001c 0023     		movs	r3, #0
 8514 001e 2B60     		str	r3, [r5]
 8515              	.LVL967:
 8516              	.L655:
3196:Core/Src/ff.c **** 
 8517              		.loc 1 3196 1 view .LVU2930
 8518 0020 2046     		mov	r0, r4
 8519 0022 06B0     		add	sp, sp, #24
 8520              	.LCFI72:
 8521              		.cfi_remember_state
 8522              		.cfi_def_cfa_offset 16
 8523              		@ sp needed
 8524 0024 70BD     		pop	{r4, r5, r6, pc}
 8525              	.LVL968:
 8526              	.L665:
 8527              	.LCFI73:
 8528              		.cfi_restore_state
3164:Core/Src/ff.c **** 		INIT_BUF(*dp);
 8529              		.loc 1 3164 3 is_stmt 1 view .LVU2931
3164:Core/Src/ff.c **** 		INIT_BUF(*dp);
 8530              		.loc 1 3164 10 is_stmt 0 view .LVU2932
 8531 0026 059B     		ldr	r3, [sp, #20]
 8532 0028 2B60     		str	r3, [r5]
3165:Core/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8533              		.loc 1 3165 3 is_stmt 1 view .LVU2933
 8534 002a 4FF40070 		mov	r0, #512
 8535 002e FFF7FEFF 		bl	ff_memalloc
 8536              	.LVL969:
3165:Core/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8537              		.loc 1 3165 3 view .LVU2934
 8538 0032 0646     		mov	r6, r0
 8539 0034 28B3     		cbz	r0, .L661
3165:Core/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8540              		.loc 1 3165 3 discriminator 2 view .LVU2935
 8541 0036 E861     		str	r0, [r5, #28]
3165:Core/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 270


 8542              		.loc 1 3165 3 discriminator 2 view .LVU2936
 8543 0038 02AB     		add	r3, sp, #8
 8544 003a AB61     		str	r3, [r5, #24]
3165:Core/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8545              		.loc 1 3165 16 discriminator 2 view .LVU2937
3166:Core/Src/ff.c **** 		FREE_BUF();
 8546              		.loc 1 3166 3 discriminator 2 view .LVU2938
3166:Core/Src/ff.c **** 		FREE_BUF();
 8547              		.loc 1 3166 9 is_stmt 0 discriminator 2 view .LVU2939
 8548 003c 0199     		ldr	r1, [sp, #4]
 8549 003e 2846     		mov	r0, r5
 8550              	.LVL970:
3166:Core/Src/ff.c **** 		FREE_BUF();
 8551              		.loc 1 3166 9 discriminator 2 view .LVU2940
 8552 0040 FFF7FEFF 		bl	follow_path
 8553              	.LVL971:
 8554 0044 0446     		mov	r4, r0
3167:Core/Src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 8555              		.loc 1 3167 3 is_stmt 1 discriminator 2 view .LVU2941
 8556 0046 3046     		mov	r0, r6
 8557 0048 FFF7FEFF 		bl	ff_memfree
 8558              	.LVL972:
3168:Core/Src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
 8559              		.loc 1 3168 3 discriminator 2 view .LVU2942
3168:Core/Src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
 8560              		.loc 1 3168 6 is_stmt 0 discriminator 2 view .LVU2943
 8561 004c 8CB9     		cbnz	r4, .L657
3169:Core/Src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
 8562              		.loc 1 3169 4 is_stmt 1 view .LVU2944
3169:Core/Src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
 8563              		.loc 1 3169 10 is_stmt 0 view .LVU2945
 8564 004e 6969     		ldr	r1, [r5, #20]
3169:Core/Src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
 8565              		.loc 1 3169 7 view .LVU2946
 8566 0050 39B1     		cbz	r1, .L658
3170:Core/Src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
 8567              		.loc 1 3170 5 is_stmt 1 view .LVU2947
3170:Core/Src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
 8568              		.loc 1 3170 16 is_stmt 0 view .LVU2948
 8569 0052 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
3170:Core/Src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
 8570              		.loc 1 3170 8 view .LVU2949
 8571 0054 13F0100F 		tst	r3, #16
 8572 0058 0FD0     		beq	.L662
3171:Core/Src/ff.c **** 				else							/* The object is a file */
 8573              		.loc 1 3171 6 is_stmt 1 view .LVU2950
3171:Core/Src/ff.c **** 				else							/* The object is a file */
 8574              		.loc 1 3171 19 is_stmt 0 view .LVU2951
 8575 005a 0598     		ldr	r0, [sp, #20]
 8576 005c FFF7FEFF 		bl	ld_clust
 8577              	.LVL973:
3171:Core/Src/ff.c **** 				else							/* The object is a file */
 8578              		.loc 1 3171 17 view .LVU2952
 8579 0060 A860     		str	r0, [r5, #8]
 8580              	.L658:
3175:Core/Src/ff.c **** 				dp->id = fs->id;
 8581              		.loc 1 3175 4 is_stmt 1 view .LVU2953
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 271


3176:Core/Src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 8582              		.loc 1 3176 5 view .LVU2954
3176:Core/Src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 8583              		.loc 1 3176 16 is_stmt 0 view .LVU2955
 8584 0062 059B     		ldr	r3, [sp, #20]
 8585 0064 DB88     		ldrh	r3, [r3, #6]
3176:Core/Src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 8586              		.loc 1 3176 12 view .LVU2956
 8587 0066 AB80     		strh	r3, [r5, #4]	@ movhi
3177:Core/Src/ff.c **** #if _FS_LOCK
 8588              		.loc 1 3177 5 is_stmt 1 view .LVU2957
3177:Core/Src/ff.c **** #if _FS_LOCK
 8589              		.loc 1 3177 11 is_stmt 0 view .LVU2958
 8590 0068 0021     		movs	r1, #0
 8591 006a 2846     		mov	r0, r5
 8592 006c FFF7FEFF 		bl	dir_sdi
 8593              	.LVL974:
 8594 0070 0446     		mov	r4, r0
 8595              	.L657:
3191:Core/Src/ff.c **** 	}
 8596              		.loc 1 3191 3 is_stmt 1 view .LVU2959
3191:Core/Src/ff.c **** 	}
 8597              		.loc 1 3191 6 is_stmt 0 view .LVU2960
 8598 0072 042C     		cmp	r4, #4
 8599 0074 D1D1     		bne	.L656
 8600              	.LVL975:
3191:Core/Src/ff.c **** 	}
 8601              		.loc 1 3191 30 view .LVU2961
 8602 0076 0524     		movs	r4, #5
 8603 0078 D0E7     		b	.L659
 8604              	.LVL976:
 8605              	.L662:
3173:Core/Src/ff.c **** 			}
 8606              		.loc 1 3173 10 view .LVU2962
 8607 007a 0524     		movs	r4, #5
 8608 007c F9E7     		b	.L657
 8609              	.LVL977:
 8610              	.L660:
3159:Core/Src/ff.c **** 
 8611              		.loc 1 3159 18 view .LVU2963
 8612 007e 0924     		movs	r4, #9
 8613 0080 CEE7     		b	.L655
 8614              	.LVL978:
 8615              	.L661:
3165:Core/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8616              		.loc 1 3165 3 view .LVU2964
 8617 0082 1124     		movs	r4, #17
 8618 0084 CCE7     		b	.L655
 8619              		.cfi_endproc
 8620              	.LFE41:
 8622              		.section	.text.f_closedir,"ax",%progbits
 8623              		.align	1
 8624              		.global	f_closedir
 8625              		.syntax unified
 8626              		.thumb
 8627              		.thumb_func
 8628              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 272


 8630              	f_closedir:
 8631              	.LVL979:
 8632              	.LFB42:
3208:Core/Src/ff.c **** 	FRESULT res;
 8633              		.loc 1 3208 1 is_stmt 1 view -0
 8634              		.cfi_startproc
 8635              		@ args = 0, pretend = 0, frame = 0
 8636              		@ frame_needed = 0, uses_anonymous_args = 0
3208:Core/Src/ff.c **** 	FRESULT res;
 8637              		.loc 1 3208 1 is_stmt 0 view .LVU2966
 8638 0000 10B5     		push	{r4, lr}
 8639              	.LCFI74:
 8640              		.cfi_def_cfa_offset 8
 8641              		.cfi_offset 4, -8
 8642              		.cfi_offset 14, -4
 8643 0002 0446     		mov	r4, r0
3209:Core/Src/ff.c **** 
 8644              		.loc 1 3209 2 is_stmt 1 view .LVU2967
3212:Core/Src/ff.c **** 	if (res == FR_OK) {
 8645              		.loc 1 3212 2 view .LVU2968
3212:Core/Src/ff.c **** 	if (res == FR_OK) {
 8646              		.loc 1 3212 8 is_stmt 0 view .LVU2969
 8647 0004 FFF7FEFF 		bl	validate
 8648              	.LVL980:
3213:Core/Src/ff.c **** #if _FS_REENTRANT
 8649              		.loc 1 3213 2 is_stmt 1 view .LVU2970
3213:Core/Src/ff.c **** #if _FS_REENTRANT
 8650              		.loc 1 3213 5 is_stmt 0 view .LVU2971
 8651 0008 00B9     		cbnz	r0, .L667
3222:Core/Src/ff.c **** #if _FS_REENTRANT
 8652              		.loc 1 3222 4 is_stmt 1 view .LVU2972
3222:Core/Src/ff.c **** #if _FS_REENTRANT
 8653              		.loc 1 3222 11 is_stmt 0 view .LVU2973
 8654 000a 2060     		str	r0, [r4]
 8655              	.L667:
3227:Core/Src/ff.c **** }
 8656              		.loc 1 3227 2 is_stmt 1 view .LVU2974
3228:Core/Src/ff.c **** 
 8657              		.loc 1 3228 1 is_stmt 0 view .LVU2975
 8658 000c 10BD     		pop	{r4, pc}
3228:Core/Src/ff.c **** 
 8659              		.loc 1 3228 1 view .LVU2976
 8660              		.cfi_endproc
 8661              	.LFE42:
 8663              		.section	.text.f_readdir,"ax",%progbits
 8664              		.align	1
 8665              		.global	f_readdir
 8666              		.syntax unified
 8667              		.thumb
 8668              		.thumb_func
 8669              		.fpu fpv4-sp-d16
 8671              	f_readdir:
 8672              	.LVL981:
 8673              	.LFB43:
3241:Core/Src/ff.c **** 	FRESULT res;
 8674              		.loc 1 3241 1 is_stmt 1 view -0
 8675              		.cfi_startproc
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 273


 8676              		@ args = 0, pretend = 0, frame = 16
 8677              		@ frame_needed = 0, uses_anonymous_args = 0
3241:Core/Src/ff.c **** 	FRESULT res;
 8678              		.loc 1 3241 1 is_stmt 0 view .LVU2978
 8679 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 8680              	.LCFI75:
 8681              		.cfi_def_cfa_offset 20
 8682              		.cfi_offset 4, -20
 8683              		.cfi_offset 5, -16
 8684              		.cfi_offset 6, -12
 8685              		.cfi_offset 7, -8
 8686              		.cfi_offset 14, -4
 8687 0002 85B0     		sub	sp, sp, #20
 8688              	.LCFI76:
 8689              		.cfi_def_cfa_offset 40
 8690 0004 0446     		mov	r4, r0
 8691 0006 0D46     		mov	r5, r1
3242:Core/Src/ff.c **** 	DEF_NAMEBUF;
 8692              		.loc 1 3242 2 is_stmt 1 view .LVU2979
3243:Core/Src/ff.c **** 
 8693              		.loc 1 3243 2 view .LVU2980
3243:Core/Src/ff.c **** 
 8694              		.loc 1 3243 2 view .LVU2981
3246:Core/Src/ff.c **** 	if (res == FR_OK) {
 8695              		.loc 1 3246 2 view .LVU2982
3246:Core/Src/ff.c **** 	if (res == FR_OK) {
 8696              		.loc 1 3246 8 is_stmt 0 view .LVU2983
 8697 0008 FFF7FEFF 		bl	validate
 8698              	.LVL982:
3247:Core/Src/ff.c **** 		if (!fno) {
 8699              		.loc 1 3247 2 is_stmt 1 view .LVU2984
3247:Core/Src/ff.c **** 		if (!fno) {
 8700              		.loc 1 3247 5 is_stmt 0 view .LVU2985
 8701 000c 0646     		mov	r6, r0
 8702 000e 40BB     		cbnz	r0, .L670
3248:Core/Src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 8703              		.loc 1 3248 3 is_stmt 1 view .LVU2986
3248:Core/Src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 8704              		.loc 1 3248 6 is_stmt 0 view .LVU2987
 8705 0010 8DB1     		cbz	r5, .L679
3251:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8706              		.loc 1 3251 4 is_stmt 1 view .LVU2988
 8707 0012 4FF40070 		mov	r0, #512
 8708              	.LVL983:
3251:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8709              		.loc 1 3251 4 is_stmt 0 view .LVU2989
 8710 0016 FFF7FEFF 		bl	ff_memalloc
 8711              	.LVL984:
3251:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8712              		.loc 1 3251 4 is_stmt 1 view .LVU2990
 8713 001a 0746     		mov	r7, r0
 8714 001c 38B3     		cbz	r0, .L675
3251:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8715              		.loc 1 3251 4 discriminator 2 view .LVU2991
 8716 001e E061     		str	r0, [r4, #28]
3251:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8717              		.loc 1 3251 4 discriminator 2 view .LVU2992
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 274


 8718 0020 01AB     		add	r3, sp, #4
 8719 0022 A361     		str	r3, [r4, #24]
3251:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8720              		.loc 1 3251 17 discriminator 2 view .LVU2993
3252:Core/Src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
 8721              		.loc 1 3252 4 discriminator 2 view .LVU2994
3252:Core/Src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
 8722              		.loc 1 3252 10 is_stmt 0 discriminator 2 view .LVU2995
 8723 0024 0021     		movs	r1, #0
 8724 0026 2046     		mov	r0, r4
 8725              	.LVL985:
3252:Core/Src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
 8726              		.loc 1 3252 10 discriminator 2 view .LVU2996
 8727 0028 FFF7FEFF 		bl	dir_read
 8728              	.LVL986:
3253:Core/Src/ff.c **** 				dp->sect = 0;
 8729              		.loc 1 3253 4 is_stmt 1 discriminator 2 view .LVU2997
3253:Core/Src/ff.c **** 				dp->sect = 0;
 8730              		.loc 1 3253 7 is_stmt 0 discriminator 2 view .LVU2998
 8731 002c 0428     		cmp	r0, #4
 8732 002e 08D0     		beq	.L680
3257:Core/Src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8733              		.loc 1 3257 4 is_stmt 1 view .LVU2999
3257:Core/Src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8734              		.loc 1 3257 7 is_stmt 0 view .LVU3000
 8735 0030 48B1     		cbz	r0, .L673
3252:Core/Src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
 8736              		.loc 1 3252 10 view .LVU3001
 8737 0032 0646     		mov	r6, r0
 8738 0034 12E0     		b	.L674
 8739              	.LVL987:
 8740              	.L679:
3249:Core/Src/ff.c **** 		} else {
 8741              		.loc 1 3249 4 is_stmt 1 view .LVU3002
3249:Core/Src/ff.c **** 		} else {
 8742              		.loc 1 3249 10 is_stmt 0 view .LVU3003
 8743 0036 0021     		movs	r1, #0
 8744 0038 2046     		mov	r0, r4
 8745              	.LVL988:
3249:Core/Src/ff.c **** 		} else {
 8746              		.loc 1 3249 10 view .LVU3004
 8747 003a FFF7FEFF 		bl	dir_sdi
 8748              	.LVL989:
 8749 003e 0646     		mov	r6, r0
 8750              	.LVL990:
3249:Core/Src/ff.c **** 		} else {
 8751              		.loc 1 3249 10 view .LVU3005
 8752 0040 0FE0     		b	.L670
 8753              	.LVL991:
 8754              	.L680:
3254:Core/Src/ff.c **** 				res = FR_OK;
 8755              		.loc 1 3254 5 is_stmt 1 view .LVU3006
3254:Core/Src/ff.c **** 				res = FR_OK;
 8756              		.loc 1 3254 14 is_stmt 0 view .LVU3007
 8757 0042 0023     		movs	r3, #0
 8758 0044 2361     		str	r3, [r4, #16]
3255:Core/Src/ff.c **** 			}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 275


 8759              		.loc 1 3255 5 is_stmt 1 view .LVU3008
 8760              	.LVL992:
3257:Core/Src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8761              		.loc 1 3257 4 view .LVU3009
 8762              	.L673:
3258:Core/Src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 8763              		.loc 1 3258 5 view .LVU3010
 8764 0046 2946     		mov	r1, r5
 8765 0048 2046     		mov	r0, r4
 8766 004a FFF7FEFF 		bl	get_fileinfo
 8767              	.LVL993:
3259:Core/Src/ff.c **** 				if (res == FR_NO_FILE) {
 8768              		.loc 1 3259 5 view .LVU3011
3259:Core/Src/ff.c **** 				if (res == FR_NO_FILE) {
 8769              		.loc 1 3259 11 is_stmt 0 view .LVU3012
 8770 004e 0021     		movs	r1, #0
 8771 0050 2046     		mov	r0, r4
 8772 0052 FFF7FEFF 		bl	dir_next
 8773              	.LVL994:
3260:Core/Src/ff.c **** 					dp->sect = 0;
 8774              		.loc 1 3260 5 is_stmt 1 view .LVU3013
3260:Core/Src/ff.c **** 					dp->sect = 0;
 8775              		.loc 1 3260 8 is_stmt 0 view .LVU3014
 8776 0056 0428     		cmp	r0, #4
 8777 0058 06D0     		beq	.L681
3259:Core/Src/ff.c **** 				if (res == FR_NO_FILE) {
 8778              		.loc 1 3259 11 view .LVU3015
 8779 005a 0646     		mov	r6, r0
 8780              	.LVL995:
 8781              	.L674:
3265:Core/Src/ff.c **** 		}
 8782              		.loc 1 3265 4 is_stmt 1 view .LVU3016
 8783 005c 3846     		mov	r0, r7
 8784 005e FFF7FEFF 		bl	ff_memfree
 8785              	.LVL996:
 8786              	.L670:
3270:Core/Src/ff.c **** 
 8787              		.loc 1 3270 1 is_stmt 0 view .LVU3017
 8788 0062 3046     		mov	r0, r6
 8789 0064 05B0     		add	sp, sp, #20
 8790              	.LCFI77:
 8791              		.cfi_remember_state
 8792              		.cfi_def_cfa_offset 20
 8793              		@ sp needed
 8794 0066 F0BD     		pop	{r4, r5, r6, r7, pc}
 8795              	.LVL997:
 8796              	.L681:
 8797              	.LCFI78:
 8798              		.cfi_restore_state
3261:Core/Src/ff.c **** 					res = FR_OK;
 8799              		.loc 1 3261 6 is_stmt 1 view .LVU3018
3261:Core/Src/ff.c **** 					res = FR_OK;
 8800              		.loc 1 3261 15 is_stmt 0 view .LVU3019
 8801 0068 0023     		movs	r3, #0
 8802 006a 2361     		str	r3, [r4, #16]
3262:Core/Src/ff.c **** 				}
 8803              		.loc 1 3262 6 is_stmt 1 view .LVU3020
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 276


 8804              	.LVL998:
3262:Core/Src/ff.c **** 				}
 8805              		.loc 1 3262 6 is_stmt 0 view .LVU3021
 8806 006c F6E7     		b	.L674
 8807              	.LVL999:
 8808              	.L675:
3251:Core/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8809              		.loc 1 3251 4 view .LVU3022
 8810 006e 1126     		movs	r6, #17
 8811 0070 F7E7     		b	.L670
 8812              		.cfi_endproc
 8813              	.LFE43:
 8815              		.section	.text.f_stat,"ax",%progbits
 8816              		.align	1
 8817              		.global	f_stat
 8818              		.syntax unified
 8819              		.thumb
 8820              		.thumb_func
 8821              		.fpu fpv4-sp-d16
 8823              	f_stat:
 8824              	.LVL1000:
 8825              	.LFB44:
3283:Core/Src/ff.c **** 	FRESULT res;
 8826              		.loc 1 3283 1 is_stmt 1 view -0
 8827              		.cfi_startproc
 8828              		@ args = 0, pretend = 0, frame = 56
 8829              		@ frame_needed = 0, uses_anonymous_args = 0
3283:Core/Src/ff.c **** 	FRESULT res;
 8830              		.loc 1 3283 1 is_stmt 0 view .LVU3024
 8831 0000 70B5     		push	{r4, r5, r6, lr}
 8832              	.LCFI79:
 8833              		.cfi_def_cfa_offset 16
 8834              		.cfi_offset 4, -16
 8835              		.cfi_offset 5, -12
 8836              		.cfi_offset 6, -8
 8837              		.cfi_offset 14, -4
 8838 0002 8EB0     		sub	sp, sp, #56
 8839              	.LCFI80:
 8840              		.cfi_def_cfa_offset 72
 8841 0004 0190     		str	r0, [sp, #4]
 8842 0006 0C46     		mov	r4, r1
3284:Core/Src/ff.c **** 	DIR dj;
 8843              		.loc 1 3284 2 is_stmt 1 view .LVU3025
3285:Core/Src/ff.c **** 	DEF_NAMEBUF;
 8844              		.loc 1 3285 2 view .LVU3026
3286:Core/Src/ff.c **** 
 8845              		.loc 1 3286 2 view .LVU3027
3286:Core/Src/ff.c **** 
 8846              		.loc 1 3286 2 view .LVU3028
3290:Core/Src/ff.c **** 	if (res == FR_OK) {
 8847              		.loc 1 3290 2 view .LVU3029
3290:Core/Src/ff.c **** 	if (res == FR_OK) {
 8848              		.loc 1 3290 8 is_stmt 0 view .LVU3030
 8849 0008 0022     		movs	r2, #0
 8850 000a 01A9     		add	r1, sp, #4
 8851              	.LVL1001:
3290:Core/Src/ff.c **** 	if (res == FR_OK) {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 277


 8852              		.loc 1 3290 8 view .LVU3031
 8853 000c 05A8     		add	r0, sp, #20
 8854              	.LVL1002:
3290:Core/Src/ff.c **** 	if (res == FR_OK) {
 8855              		.loc 1 3290 8 view .LVU3032
 8856 000e FFF7FEFF 		bl	find_volume
 8857              	.LVL1003:
3291:Core/Src/ff.c **** 		INIT_BUF(dj);
 8858              		.loc 1 3291 2 is_stmt 1 view .LVU3033
3291:Core/Src/ff.c **** 		INIT_BUF(dj);
 8859              		.loc 1 3291 5 is_stmt 0 view .LVU3034
 8860 0012 0546     		mov	r5, r0
 8861 0014 10B1     		cbz	r0, .L688
 8862              	.LVL1004:
 8863              	.L683:
3305:Core/Src/ff.c **** 
 8864              		.loc 1 3305 1 view .LVU3035
 8865 0016 2846     		mov	r0, r5
 8866 0018 0EB0     		add	sp, sp, #56
 8867              	.LCFI81:
 8868              		.cfi_remember_state
 8869              		.cfi_def_cfa_offset 16
 8870              		@ sp needed
 8871 001a 70BD     		pop	{r4, r5, r6, pc}
 8872              	.LVL1005:
 8873              	.L688:
 8874              	.LCFI82:
 8875              		.cfi_restore_state
3292:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8876              		.loc 1 3292 3 is_stmt 1 view .LVU3036
 8877 001c 4FF40070 		mov	r0, #512
 8878              	.LVL1006:
3292:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8879              		.loc 1 3292 3 is_stmt 0 view .LVU3037
 8880 0020 FFF7FEFF 		bl	ff_memalloc
 8881              	.LVL1007:
3292:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8882              		.loc 1 3292 3 is_stmt 1 view .LVU3038
 8883 0024 0646     		mov	r6, r0
 8884 0026 A8B1     		cbz	r0, .L685
3292:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8885              		.loc 1 3292 3 discriminator 2 view .LVU3039
 8886 0028 0C90     		str	r0, [sp, #48]
3292:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8887              		.loc 1 3292 3 discriminator 2 view .LVU3040
 8888 002a 02AB     		add	r3, sp, #8
 8889 002c 0B93     		str	r3, [sp, #44]
3292:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8890              		.loc 1 3292 15 discriminator 2 view .LVU3041
3293:Core/Src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8891              		.loc 1 3293 3 discriminator 2 view .LVU3042
3293:Core/Src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8892              		.loc 1 3293 9 is_stmt 0 discriminator 2 view .LVU3043
 8893 002e 0199     		ldr	r1, [sp, #4]
 8894 0030 05A8     		add	r0, sp, #20
 8895              	.LVL1008:
3293:Core/Src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 278


 8896              		.loc 1 3293 9 discriminator 2 view .LVU3044
 8897 0032 FFF7FEFF 		bl	follow_path
 8898              	.LVL1009:
3294:Core/Src/ff.c **** 			if (dj.dir) {		/* Found an object */
 8899              		.loc 1 3294 3 is_stmt 1 discriminator 2 view .LVU3045
3294:Core/Src/ff.c **** 			if (dj.dir) {		/* Found an object */
 8900              		.loc 1 3294 6 is_stmt 0 discriminator 2 view .LVU3046
 8901 0036 0546     		mov	r5, r0
 8902 0038 30B9     		cbnz	r0, .L684
3295:Core/Src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
 8903              		.loc 1 3295 4 is_stmt 1 view .LVU3047
3295:Core/Src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
 8904              		.loc 1 3295 10 is_stmt 0 view .LVU3048
 8905 003a 0A9B     		ldr	r3, [sp, #40]
3295:Core/Src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
 8906              		.loc 1 3295 7 view .LVU3049
 8907 003c 43B1     		cbz	r3, .L686
3296:Core/Src/ff.c **** 			} else {			/* It is root directory */
 8908              		.loc 1 3296 5 is_stmt 1 view .LVU3050
3296:Core/Src/ff.c **** 			} else {			/* It is root directory */
 8909              		.loc 1 3296 8 is_stmt 0 view .LVU3051
 8910 003e 1CB1     		cbz	r4, .L684
3296:Core/Src/ff.c **** 			} else {			/* It is root directory */
 8911              		.loc 1 3296 14 is_stmt 1 discriminator 1 view .LVU3052
 8912 0040 2146     		mov	r1, r4
 8913 0042 05A8     		add	r0, sp, #20
 8914              	.LVL1010:
3296:Core/Src/ff.c **** 			} else {			/* It is root directory */
 8915              		.loc 1 3296 14 is_stmt 0 discriminator 1 view .LVU3053
 8916 0044 FFF7FEFF 		bl	get_fileinfo
 8917              	.LVL1011:
 8918              	.L684:
3301:Core/Src/ff.c **** 	}
 8919              		.loc 1 3301 3 is_stmt 1 view .LVU3054
 8920 0048 3046     		mov	r0, r6
 8921 004a FFF7FEFF 		bl	ff_memfree
 8922              	.LVL1012:
 8923 004e E2E7     		b	.L683
 8924              	.LVL1013:
 8925              	.L686:
3298:Core/Src/ff.c **** 			}
 8926              		.loc 1 3298 9 is_stmt 0 view .LVU3055
 8927 0050 0625     		movs	r5, #6
 8928 0052 F9E7     		b	.L684
 8929              	.LVL1014:
 8930              	.L685:
3292:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8931              		.loc 1 3292 3 view .LVU3056
 8932 0054 1125     		movs	r5, #17
 8933 0056 DEE7     		b	.L683
 8934              		.cfi_endproc
 8935              	.LFE44:
 8937              		.section	.text.f_getfree,"ax",%progbits
 8938              		.align	1
 8939              		.global	f_getfree
 8940              		.syntax unified
 8941              		.thumb
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 279


 8942              		.thumb_func
 8943              		.fpu fpv4-sp-d16
 8945              	f_getfree:
 8946              	.LVL1015:
 8947              	.LFB45:
3319:Core/Src/ff.c **** 	FRESULT res;
 8948              		.loc 1 3319 1 is_stmt 1 view -0
 8949              		.cfi_startproc
 8950              		@ args = 0, pretend = 0, frame = 8
 8951              		@ frame_needed = 0, uses_anonymous_args = 0
3319:Core/Src/ff.c **** 	FRESULT res;
 8952              		.loc 1 3319 1 is_stmt 0 view .LVU3058
 8953 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 8954              	.LCFI83:
 8955              		.cfi_def_cfa_offset 32
 8956              		.cfi_offset 4, -32
 8957              		.cfi_offset 5, -28
 8958              		.cfi_offset 6, -24
 8959              		.cfi_offset 7, -20
 8960              		.cfi_offset 8, -16
 8961              		.cfi_offset 9, -12
 8962              		.cfi_offset 10, -8
 8963              		.cfi_offset 14, -4
 8964 0004 82B0     		sub	sp, sp, #8
 8965              	.LCFI84:
 8966              		.cfi_def_cfa_offset 40
 8967 0006 0190     		str	r0, [sp, #4]
 8968 0008 0F46     		mov	r7, r1
 8969 000a 1446     		mov	r4, r2
3320:Core/Src/ff.c **** 	FATFS *fs;
 8970              		.loc 1 3320 2 is_stmt 1 view .LVU3059
3321:Core/Src/ff.c **** 	DWORD n, clst, sect, stat;
 8971              		.loc 1 3321 2 view .LVU3060
3322:Core/Src/ff.c **** 	UINT i;
 8972              		.loc 1 3322 2 view .LVU3061
3323:Core/Src/ff.c **** 	BYTE fat, *p;
 8973              		.loc 1 3323 2 view .LVU3062
3324:Core/Src/ff.c **** 
 8974              		.loc 1 3324 2 view .LVU3063
3328:Core/Src/ff.c **** 	fs = *fatfs;
 8975              		.loc 1 3328 2 view .LVU3064
3328:Core/Src/ff.c **** 	fs = *fatfs;
 8976              		.loc 1 3328 8 is_stmt 0 view .LVU3065
 8977 000c 0022     		movs	r2, #0
 8978              	.LVL1016:
3328:Core/Src/ff.c **** 	fs = *fatfs;
 8979              		.loc 1 3328 8 view .LVU3066
 8980 000e 01A9     		add	r1, sp, #4
 8981              	.LVL1017:
3328:Core/Src/ff.c **** 	fs = *fatfs;
 8982              		.loc 1 3328 8 view .LVU3067
 8983 0010 2046     		mov	r0, r4
 8984              	.LVL1018:
3328:Core/Src/ff.c **** 	fs = *fatfs;
 8985              		.loc 1 3328 8 view .LVU3068
 8986 0012 FFF7FEFF 		bl	find_volume
 8987              	.LVL1019:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 280


3329:Core/Src/ff.c **** 	if (res == FR_OK) {
 8988              		.loc 1 3329 2 is_stmt 1 view .LVU3069
3329:Core/Src/ff.c **** 	if (res == FR_OK) {
 8989              		.loc 1 3329 5 is_stmt 0 view .LVU3070
 8990 0016 2568     		ldr	r5, [r4]
 8991              	.LVL1020:
3330:Core/Src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
 8992              		.loc 1 3330 2 is_stmt 1 view .LVU3071
3330:Core/Src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
 8993              		.loc 1 3330 5 is_stmt 0 view .LVU3072
 8994 0018 8046     		mov	r8, r0
 8995 001a 0028     		cmp	r0, #0
 8996 001c 5FD1     		bne	.L690
3332:Core/Src/ff.c **** 			*nclst = fs->free_clust;
 8997              		.loc 1 3332 3 is_stmt 1 view .LVU3073
3332:Core/Src/ff.c **** 			*nclst = fs->free_clust;
 8998              		.loc 1 3332 9 is_stmt 0 view .LVU3074
 8999 001e 2B69     		ldr	r3, [r5, #16]
3332:Core/Src/ff.c **** 			*nclst = fs->free_clust;
 9000              		.loc 1 3332 27 view .LVU3075
 9001 0020 6C69     		ldr	r4, [r5, #20]
 9002              	.LVL1021:
3332:Core/Src/ff.c **** 			*nclst = fs->free_clust;
 9003              		.loc 1 3332 38 view .LVU3076
 9004 0022 A21E     		subs	r2, r4, #2
3332:Core/Src/ff.c **** 			*nclst = fs->free_clust;
 9005              		.loc 1 3332 6 view .LVU3077
 9006 0024 9342     		cmp	r3, r2
 9007 0026 01D8     		bhi	.L691
3333:Core/Src/ff.c **** 		} else {
 9008              		.loc 1 3333 4 is_stmt 1 view .LVU3078
3333:Core/Src/ff.c **** 		} else {
 9009              		.loc 1 3333 11 is_stmt 0 view .LVU3079
 9010 0028 3B60     		str	r3, [r7]
 9011 002a 58E0     		b	.L690
 9012              	.L691:
3336:Core/Src/ff.c **** 			n = 0;
 9013              		.loc 1 3336 4 is_stmt 1 view .LVU3080
3336:Core/Src/ff.c **** 			n = 0;
 9014              		.loc 1 3336 8 is_stmt 0 view .LVU3081
 9015 002c 95F80090 		ldrb	r9, [r5]	@ zero_extendqisi2
 9016              	.LVL1022:
3337:Core/Src/ff.c **** 			if (fat == FS_FAT12) {
 9017              		.loc 1 3337 4 is_stmt 1 view .LVU3082
3338:Core/Src/ff.c **** 				clst = 2;
 9018              		.loc 1 3338 4 view .LVU3083
3338:Core/Src/ff.c **** 				clst = 2;
 9019              		.loc 1 3338 7 is_stmt 0 view .LVU3084
 9020 0030 B9F1010F 		cmp	r9, #1
 9021 0034 04D0     		beq	.L705
3347:Core/Src/ff.c **** 				sect = fs->fatbase;
 9022              		.loc 1 3347 5 is_stmt 1 view .LVU3085
 9023              	.LVL1023:
3348:Core/Src/ff.c **** 				i = 0; p = 0;
 9024              		.loc 1 3348 5 view .LVU3086
3348:Core/Src/ff.c **** 				i = 0; p = 0;
 9025              		.loc 1 3348 10 is_stmt 0 view .LVU3087
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 281


 9026 0036 296A     		ldr	r1, [r5, #32]
 9027              	.LVL1024:
3349:Core/Src/ff.c **** 				do {
 9028              		.loc 1 3349 5 is_stmt 1 view .LVU3088
3349:Core/Src/ff.c **** 				do {
 9029              		.loc 1 3349 12 view .LVU3089
3349:Core/Src/ff.c **** 				do {
 9030              		.loc 1 3349 14 is_stmt 0 view .LVU3090
 9031 0038 0022     		movs	r2, #0
3349:Core/Src/ff.c **** 				do {
 9032              		.loc 1 3349 7 view .LVU3091
 9033 003a 1046     		mov	r0, r2
 9034              	.LVL1025:
3337:Core/Src/ff.c **** 			if (fat == FS_FAT12) {
 9035              		.loc 1 3337 6 view .LVU3092
 9036 003c 1646     		mov	r6, r2
 9037 003e 2FE0     		b	.L701
 9038              	.LVL1026:
 9039              	.L705:
3339:Core/Src/ff.c **** 				do {
 9040              		.loc 1 3339 10 view .LVU3093
 9041 0040 0224     		movs	r4, #2
3337:Core/Src/ff.c **** 			if (fat == FS_FAT12) {
 9042              		.loc 1 3337 6 view .LVU3094
 9043 0042 0026     		movs	r6, #0
 9044 0044 03E0     		b	.L695
 9045              	.LVL1027:
 9046              	.L694:
3345:Core/Src/ff.c **** 			} else {
 9047              		.loc 1 3345 13 is_stmt 1 view .LVU3095
3345:Core/Src/ff.c **** 			} else {
 9048              		.loc 1 3345 5 is_stmt 0 view .LVU3096
 9049 0046 0134     		adds	r4, r4, #1
 9050              	.LVL1028:
3345:Core/Src/ff.c **** 			} else {
 9051              		.loc 1 3345 25 view .LVU3097
 9052 0048 6B69     		ldr	r3, [r5, #20]
3345:Core/Src/ff.c **** 			} else {
 9053              		.loc 1 3345 5 view .LVU3098
 9054 004a A342     		cmp	r3, r4
 9055 004c 41D9     		bls	.L693
 9056              	.LVL1029:
 9057              	.L695:
3340:Core/Src/ff.c **** 					stat = get_fat(fs, clst);
 9058              		.loc 1 3340 5 is_stmt 1 view .LVU3099
3341:Core/Src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 9059              		.loc 1 3341 6 view .LVU3100
3341:Core/Src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 9060              		.loc 1 3341 13 is_stmt 0 view .LVU3101
 9061 004e 2146     		mov	r1, r4
 9062 0050 2846     		mov	r0, r5
 9063 0052 FFF7FEFF 		bl	get_fat
 9064              	.LVL1030:
3342:Core/Src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 9065              		.loc 1 3342 6 is_stmt 1 view .LVU3102
3342:Core/Src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 9066              		.loc 1 3342 9 is_stmt 0 view .LVU3103
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 282


 9067 0056 B0F1FF3F 		cmp	r0, #-1
 9068 005a 39D0     		beq	.L702
3343:Core/Src/ff.c **** 					if (stat == 0) n++;
 9069              		.loc 1 3343 6 is_stmt 1 view .LVU3104
3343:Core/Src/ff.c **** 					if (stat == 0) n++;
 9070              		.loc 1 3343 9 is_stmt 0 view .LVU3105
 9071 005c 0128     		cmp	r0, #1
 9072 005e 42D0     		beq	.L703
3344:Core/Src/ff.c **** 				} while (++clst < fs->n_fatent);
 9073              		.loc 1 3344 6 is_stmt 1 view .LVU3106
3344:Core/Src/ff.c **** 				} while (++clst < fs->n_fatent);
 9074              		.loc 1 3344 9 is_stmt 0 view .LVU3107
 9075 0060 0028     		cmp	r0, #0
 9076 0062 F0D1     		bne	.L694
3344:Core/Src/ff.c **** 				} while (++clst < fs->n_fatent);
 9077              		.loc 1 3344 21 is_stmt 1 discriminator 1 view .LVU3108
3344:Core/Src/ff.c **** 				} while (++clst < fs->n_fatent);
 9078              		.loc 1 3344 22 is_stmt 0 discriminator 1 view .LVU3109
 9079 0064 0136     		adds	r6, r6, #1
 9080              	.LVL1031:
3344:Core/Src/ff.c **** 				} while (++clst < fs->n_fatent);
 9081              		.loc 1 3344 22 discriminator 1 view .LVU3110
 9082 0066 EEE7     		b	.L694
 9083              	.LVL1032:
 9084              	.L706:
3352:Core/Src/ff.c **** 						if (res != FR_OK) break;
 9085              		.loc 1 3352 7 is_stmt 1 view .LVU3111
3352:Core/Src/ff.c **** 						if (res != FR_OK) break;
 9086              		.loc 1 3352 13 is_stmt 0 view .LVU3112
 9087 0068 01F1010A 		add	r10, r1, #1
 9088              	.LVL1033:
3352:Core/Src/ff.c **** 						if (res != FR_OK) break;
 9089              		.loc 1 3352 13 view .LVU3113
 9090 006c 2846     		mov	r0, r5
 9091              	.LVL1034:
3352:Core/Src/ff.c **** 						if (res != FR_OK) break;
 9092              		.loc 1 3352 13 view .LVU3114
 9093 006e FFF7FEFF 		bl	move_window
 9094              	.LVL1035:
3353:Core/Src/ff.c **** 						p = fs->win;
 9095              		.loc 1 3353 7 is_stmt 1 view .LVU3115
3353:Core/Src/ff.c **** 						p = fs->win;
 9096              		.loc 1 3353 10 is_stmt 0 view .LVU3116
 9097 0072 8046     		mov	r8, r0
 9098 0074 68BB     		cbnz	r0, .L693
3354:Core/Src/ff.c **** 						i = SS(fs);
 9099              		.loc 1 3354 7 is_stmt 1 view .LVU3117
3354:Core/Src/ff.c **** 						i = SS(fs);
 9100              		.loc 1 3354 9 is_stmt 0 view .LVU3118
 9101 0076 05F13002 		add	r2, r5, #48
 9102              	.LVL1036:
3355:Core/Src/ff.c **** 					}
 9103              		.loc 1 3355 7 is_stmt 1 view .LVU3119
3352:Core/Src/ff.c **** 						if (res != FR_OK) break;
 9104              		.loc 1 3352 13 is_stmt 0 view .LVU3120
 9105 007a 5146     		mov	r1, r10
3355:Core/Src/ff.c **** 					}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 283


 9106              		.loc 1 3355 9 view .LVU3121
 9107 007c 4FF40070 		mov	r0, #512
 9108              	.LVL1037:
3355:Core/Src/ff.c **** 					}
 9109              		.loc 1 3355 9 view .LVU3122
 9110 0080 10E0     		b	.L696
 9111              	.LVL1038:
 9112              	.L707:
3358:Core/Src/ff.c **** 						p += 2; i -= 2;
 9113              		.loc 1 3358 7 is_stmt 1 view .LVU3123
3358:Core/Src/ff.c **** 						p += 2; i -= 2;
 9114              		.loc 1 3358 11 is_stmt 0 view .LVU3124
 9115 0082 92F801C0 		ldrb	ip, [r2, #1]	@ zero_extendqisi2
 9116 0086 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 9117 0088 43EA0C23 		orr	r3, r3, ip, lsl #8
 9118 008c 1BB2     		sxth	r3, r3
3358:Core/Src/ff.c **** 						p += 2; i -= 2;
 9119              		.loc 1 3358 10 view .LVU3125
 9120 008e 03B9     		cbnz	r3, .L698
3358:Core/Src/ff.c **** 						p += 2; i -= 2;
 9121              		.loc 1 3358 28 is_stmt 1 discriminator 1 view .LVU3126
3358:Core/Src/ff.c **** 						p += 2; i -= 2;
 9122              		.loc 1 3358 29 is_stmt 0 discriminator 1 view .LVU3127
 9123 0090 0136     		adds	r6, r6, #1
 9124              	.LVL1039:
 9125              	.L698:
3359:Core/Src/ff.c **** 					} else {
 9126              		.loc 1 3359 7 is_stmt 1 view .LVU3128
3359:Core/Src/ff.c **** 					} else {
 9127              		.loc 1 3359 9 is_stmt 0 view .LVU3129
 9128 0092 0232     		adds	r2, r2, #2
 9129              	.LVL1040:
3359:Core/Src/ff.c **** 					} else {
 9130              		.loc 1 3359 15 is_stmt 1 view .LVU3130
3359:Core/Src/ff.c **** 					} else {
 9131              		.loc 1 3359 17 is_stmt 0 view .LVU3131
 9132 0094 0238     		subs	r0, r0, #2
 9133              	.LVL1041:
3359:Core/Src/ff.c **** 					} else {
 9134              		.loc 1 3359 17 view .LVU3132
 9135 0096 01E0     		b	.L699
 9136              	.L700:
3362:Core/Src/ff.c **** 					}
 9137              		.loc 1 3362 7 is_stmt 1 view .LVU3133
3362:Core/Src/ff.c **** 					}
 9138              		.loc 1 3362 9 is_stmt 0 view .LVU3134
 9139 0098 0432     		adds	r2, r2, #4
 9140              	.LVL1042:
3362:Core/Src/ff.c **** 					}
 9141              		.loc 1 3362 15 is_stmt 1 view .LVU3135
3362:Core/Src/ff.c **** 					}
 9142              		.loc 1 3362 17 is_stmt 0 view .LVU3136
 9143 009a 0438     		subs	r0, r0, #4
 9144              	.LVL1043:
 9145              	.L699:
3364:Core/Src/ff.c **** 			}
 9146              		.loc 1 3364 13 is_stmt 1 view .LVU3137
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 284


3364:Core/Src/ff.c **** 			}
 9147              		.loc 1 3364 5 is_stmt 0 view .LVU3138
 9148 009c 013C     		subs	r4, r4, #1
 9149              	.LVL1044:
3364:Core/Src/ff.c **** 			}
 9150              		.loc 1 3364 5 view .LVU3139
 9151 009e 18D0     		beq	.L693
 9152              	.LVL1045:
 9153              	.L701:
3350:Core/Src/ff.c **** 					if (!i) {
 9154              		.loc 1 3350 5 is_stmt 1 view .LVU3140
3351:Core/Src/ff.c **** 						res = move_window(fs, sect++);
 9155              		.loc 1 3351 6 view .LVU3141
3351:Core/Src/ff.c **** 						res = move_window(fs, sect++);
 9156              		.loc 1 3351 9 is_stmt 0 view .LVU3142
 9157 00a0 0028     		cmp	r0, #0
 9158 00a2 E1D0     		beq	.L706
 9159              	.LVL1046:
 9160              	.L696:
3357:Core/Src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 9161              		.loc 1 3357 6 is_stmt 1 view .LVU3143
3357:Core/Src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 9162              		.loc 1 3357 9 is_stmt 0 view .LVU3144
 9163 00a4 B9F1020F 		cmp	r9, #2
 9164 00a8 EBD0     		beq	.L707
3361:Core/Src/ff.c **** 						p += 4; i -= 4;
 9165              		.loc 1 3361 7 is_stmt 1 view .LVU3145
3361:Core/Src/ff.c **** 						p += 4; i -= 4;
 9166              		.loc 1 3361 12 is_stmt 0 view .LVU3146
 9167 00aa 92F803C0 		ldrb	ip, [r2, #3]	@ zero_extendqisi2
 9168 00ae 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 9169 00b0 1B04     		lsls	r3, r3, #16
 9170 00b2 43EA0C63 		orr	r3, r3, ip, lsl #24
 9171 00b6 92F801C0 		ldrb	ip, [r2, #1]	@ zero_extendqisi2
 9172 00ba 43EA0C23 		orr	r3, r3, ip, lsl #8
 9173 00be 92F800C0 		ldrb	ip, [r2]	@ zero_extendqisi2
 9174 00c2 43EA0C03 		orr	r3, r3, ip
3361:Core/Src/ff.c **** 						p += 4; i -= 4;
 9175              		.loc 1 3361 10 view .LVU3147
 9176 00c6 33F07043 		bics	r3, r3, #-268435456
 9177 00ca E5D1     		bne	.L700
3361:Core/Src/ff.c **** 						p += 4; i -= 4;
 9178              		.loc 1 3361 44 is_stmt 1 discriminator 1 view .LVU3148
3361:Core/Src/ff.c **** 						p += 4; i -= 4;
 9179              		.loc 1 3361 45 is_stmt 0 discriminator 1 view .LVU3149
 9180 00cc 0136     		adds	r6, r6, #1
 9181              	.LVL1047:
3361:Core/Src/ff.c **** 						p += 4; i -= 4;
 9182              		.loc 1 3361 45 discriminator 1 view .LVU3150
 9183 00ce E3E7     		b	.L700
 9184              	.LVL1048:
 9185              	.L702:
3342:Core/Src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 9186              		.loc 1 3342 36 view .LVU3151
 9187 00d0 C846     		mov	r8, r9
 9188              	.LVL1049:
 9189              	.L693:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 285


3366:Core/Src/ff.c **** 			fs->fsi_flag |= 1;
 9190              		.loc 1 3366 4 is_stmt 1 view .LVU3152
3366:Core/Src/ff.c **** 			fs->fsi_flag |= 1;
 9191              		.loc 1 3366 19 is_stmt 0 view .LVU3153
 9192 00d2 2E61     		str	r6, [r5, #16]
3367:Core/Src/ff.c **** 			*nclst = n;
 9193              		.loc 1 3367 4 is_stmt 1 view .LVU3154
3367:Core/Src/ff.c **** 			*nclst = n;
 9194              		.loc 1 3367 17 is_stmt 0 view .LVU3155
 9195 00d4 6B79     		ldrb	r3, [r5, #5]	@ zero_extendqisi2
 9196 00d6 43F00103 		orr	r3, r3, #1
 9197 00da 6B71     		strb	r3, [r5, #5]
3368:Core/Src/ff.c **** 		}
 9198              		.loc 1 3368 4 is_stmt 1 view .LVU3156
3368:Core/Src/ff.c **** 		}
 9199              		.loc 1 3368 11 is_stmt 0 view .LVU3157
 9200 00dc 3E60     		str	r6, [r7]
 9201              	.LVL1050:
 9202              	.L690:
3371:Core/Src/ff.c **** }
 9203              		.loc 1 3371 2 is_stmt 1 view .LVU3158
3372:Core/Src/ff.c **** 
 9204              		.loc 1 3372 1 is_stmt 0 view .LVU3159
 9205 00de 4046     		mov	r0, r8
 9206 00e0 02B0     		add	sp, sp, #8
 9207              	.LCFI85:
 9208              		.cfi_remember_state
 9209              		.cfi_def_cfa_offset 32
 9210              		@ sp needed
 9211 00e2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 9212              	.LVL1051:
 9213              	.L703:
 9214              	.LCFI86:
 9215              		.cfi_restore_state
3343:Core/Src/ff.c **** 					if (stat == 0) n++;
 9216              		.loc 1 3343 27 view .LVU3160
 9217 00e6 4FF00208 		mov	r8, #2
 9218 00ea F2E7     		b	.L693
 9219              		.cfi_endproc
 9220              	.LFE45:
 9222              		.section	.text.f_truncate,"ax",%progbits
 9223              		.align	1
 9224              		.global	f_truncate
 9225              		.syntax unified
 9226              		.thumb
 9227              		.thumb_func
 9228              		.fpu fpv4-sp-d16
 9230              	f_truncate:
 9231              	.LVL1052:
 9232              	.LFB46:
3384:Core/Src/ff.c **** 	FRESULT res;
 9233              		.loc 1 3384 1 is_stmt 1 view -0
 9234              		.cfi_startproc
 9235              		@ args = 0, pretend = 0, frame = 0
 9236              		@ frame_needed = 0, uses_anonymous_args = 0
3384:Core/Src/ff.c **** 	FRESULT res;
 9237              		.loc 1 3384 1 is_stmt 0 view .LVU3162
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 286


 9238 0000 70B5     		push	{r4, r5, r6, lr}
 9239              	.LCFI87:
 9240              		.cfi_def_cfa_offset 16
 9241              		.cfi_offset 4, -16
 9242              		.cfi_offset 5, -12
 9243              		.cfi_offset 6, -8
 9244              		.cfi_offset 14, -4
 9245 0002 0446     		mov	r4, r0
3385:Core/Src/ff.c **** 	DWORD ncl;
 9246              		.loc 1 3385 2 is_stmt 1 view .LVU3163
3386:Core/Src/ff.c **** 
 9247              		.loc 1 3386 2 view .LVU3164
3389:Core/Src/ff.c **** 	if (res == FR_OK) {
 9248              		.loc 1 3389 2 view .LVU3165
3389:Core/Src/ff.c **** 	if (res == FR_OK) {
 9249              		.loc 1 3389 8 is_stmt 0 view .LVU3166
 9250 0004 FFF7FEFF 		bl	validate
 9251              	.LVL1053:
3390:Core/Src/ff.c **** 		if (fp->err) {						/* Check error */
 9252              		.loc 1 3390 2 is_stmt 1 view .LVU3167
3390:Core/Src/ff.c **** 		if (fp->err) {						/* Check error */
 9253              		.loc 1 3390 5 is_stmt 0 view .LVU3168
 9254 0008 0546     		mov	r5, r0
 9255 000a 40B9     		cbnz	r0, .L709
3391:Core/Src/ff.c **** 			res = (FRESULT)fp->err;
 9256              		.loc 1 3391 3 is_stmt 1 view .LVU3169
3391:Core/Src/ff.c **** 			res = (FRESULT)fp->err;
 9257              		.loc 1 3391 9 is_stmt 0 view .LVU3170
 9258 000c E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
3391:Core/Src/ff.c **** 			res = (FRESULT)fp->err;
 9259              		.loc 1 3391 6 view .LVU3171
 9260 000e 2BB9     		cbnz	r3, .L716
3394:Core/Src/ff.c **** 				res = FR_DENIED;
 9261              		.loc 1 3394 4 is_stmt 1 view .LVU3172
3394:Core/Src/ff.c **** 				res = FR_DENIED;
 9262              		.loc 1 3394 12 is_stmt 0 view .LVU3173
 9263 0010 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
3394:Core/Src/ff.c **** 				res = FR_DENIED;
 9264              		.loc 1 3394 7 view .LVU3174
 9265 0012 13F0020F 		tst	r3, #2
 9266 0016 02D1     		bne	.L709
3395:Core/Src/ff.c **** 		}
 9267              		.loc 1 3395 9 view .LVU3175
 9268 0018 0725     		movs	r5, #7
 9269 001a 19E0     		b	.L710
 9270              	.L716:
3392:Core/Src/ff.c **** 		} else {
 9271              		.loc 1 3392 8 view .LVU3176
 9272 001c 1D46     		mov	r5, r3
 9273              	.L709:
 9274              	.LVL1054:
3398:Core/Src/ff.c **** 		if (fp->fsize > fp->fptr) {
 9275              		.loc 1 3398 2 is_stmt 1 view .LVU3177
3398:Core/Src/ff.c **** 		if (fp->fsize > fp->fptr) {
 9276              		.loc 1 3398 5 is_stmt 0 view .LVU3178
 9277 001e BDB9     		cbnz	r5, .L710
3399:Core/Src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 287


 9278              		.loc 1 3399 3 is_stmt 1 view .LVU3179
3399:Core/Src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
 9279              		.loc 1 3399 9 is_stmt 0 view .LVU3180
 9280 0020 E268     		ldr	r2, [r4, #12]
3399:Core/Src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
 9281              		.loc 1 3399 21 view .LVU3181
 9282 0022 A368     		ldr	r3, [r4, #8]
3399:Core/Src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
 9283              		.loc 1 3399 6 view .LVU3182
 9284 0024 9A42     		cmp	r2, r3
 9285 0026 11D9     		bls	.L711
3400:Core/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
 9286              		.loc 1 3400 4 is_stmt 1 view .LVU3183
3400:Core/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
 9287              		.loc 1 3400 14 is_stmt 0 view .LVU3184
 9288 0028 E360     		str	r3, [r4, #12]
3401:Core/Src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 9289              		.loc 1 3401 4 is_stmt 1 view .LVU3185
3401:Core/Src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 9290              		.loc 1 3401 13 is_stmt 0 view .LVU3186
 9291 002a A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 9292 002c 42F02002 		orr	r2, r2, #32
 9293 0030 A271     		strb	r2, [r4, #6]
3402:Core/Src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
 9294              		.loc 1 3402 4 is_stmt 1 view .LVU3187
3402:Core/Src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
 9295              		.loc 1 3402 7 is_stmt 0 view .LVU3188
 9296 0032 7BB9     		cbnz	r3, .L712
3403:Core/Src/ff.c **** 				fp->sclust = 0;
 9297              		.loc 1 3403 5 is_stmt 1 view .LVU3189
3403:Core/Src/ff.c **** 				fp->sclust = 0;
 9298              		.loc 1 3403 11 is_stmt 0 view .LVU3190
 9299 0034 2169     		ldr	r1, [r4, #16]
 9300 0036 2068     		ldr	r0, [r4]
 9301 0038 FFF7FEFF 		bl	remove_chain
 9302              	.LVL1055:
 9303 003c 0546     		mov	r5, r0
 9304              	.LVL1056:
3404:Core/Src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
 9305              		.loc 1 3404 5 is_stmt 1 view .LVU3191
3404:Core/Src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
 9306              		.loc 1 3404 16 is_stmt 0 view .LVU3192
 9307 003e 0023     		movs	r3, #0
 9308 0040 2361     		str	r3, [r4, #16]
 9309              	.LVL1057:
 9310              	.L713:
3416:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 9311              		.loc 1 3416 4 is_stmt 1 view .LVU3193
3416:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 9312              		.loc 1 3416 7 is_stmt 0 view .LVU3194
 9313 0042 1DB9     		cbnz	r5, .L711
3416:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 9314              		.loc 1 3416 27 discriminator 1 view .LVU3195
 9315 0044 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
3416:Core/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf, fp->dsect, 1))
 9316              		.loc 1 3416 21 discriminator 1 view .LVU3196
 9317 0046 13F0400F 		tst	r3, #64
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 288


 9318 004a 25D1     		bne	.L722
 9319              	.L711:
3424:Core/Src/ff.c **** 	}
 9320              		.loc 1 3424 3 is_stmt 1 view .LVU3197
3424:Core/Src/ff.c **** 	}
 9321              		.loc 1 3424 6 is_stmt 0 view .LVU3198
 9322 004c 05B1     		cbz	r5, .L710
 9323              	.LVL1058:
 9324              	.L715:
3424:Core/Src/ff.c **** 	}
 9325              		.loc 1 3424 21 is_stmt 1 discriminator 1 view .LVU3199
3424:Core/Src/ff.c **** 	}
 9326              		.loc 1 3424 29 is_stmt 0 discriminator 1 view .LVU3200
 9327 004e E571     		strb	r5, [r4, #7]
 9328              	.L710:
 9329              	.LVL1059:
3427:Core/Src/ff.c **** }
 9330              		.loc 1 3427 2 is_stmt 1 view .LVU3201
3428:Core/Src/ff.c **** 
 9331              		.loc 1 3428 1 is_stmt 0 view .LVU3202
 9332 0050 2846     		mov	r0, r5
 9333 0052 70BD     		pop	{r4, r5, r6, pc}
 9334              	.LVL1060:
 9335              	.L712:
3406:Core/Src/ff.c **** 				res = FR_OK;
 9336              		.loc 1 3406 5 is_stmt 1 view .LVU3203
3406:Core/Src/ff.c **** 				res = FR_OK;
 9337              		.loc 1 3406 11 is_stmt 0 view .LVU3204
 9338 0054 6169     		ldr	r1, [r4, #20]
 9339 0056 2068     		ldr	r0, [r4]
 9340 0058 FFF7FEFF 		bl	get_fat
 9341              	.LVL1061:
 9342 005c 0646     		mov	r6, r0
 9343              	.LVL1062:
3407:Core/Src/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9344              		.loc 1 3407 5 is_stmt 1 view .LVU3205
3408:Core/Src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 9345              		.loc 1 3408 5 view .LVU3206
3408:Core/Src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 9346              		.loc 1 3408 8 is_stmt 0 view .LVU3207
 9347 005e B0F1FF3F 		cmp	r0, #-1
 9348 0062 15D0     		beq	.L723
 9349              	.L714:
 9350              	.LVL1063:
3409:Core/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 9351              		.loc 1 3409 5 is_stmt 1 view .LVU3208
3409:Core/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 9352              		.loc 1 3409 8 is_stmt 0 view .LVU3209
 9353 0064 012E     		cmp	r6, #1
 9354 0066 15D0     		beq	.L719
3410:Core/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 9355              		.loc 1 3410 5 is_stmt 1 view .LVU3210
3410:Core/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 9356              		.loc 1 3410 8 is_stmt 0 view .LVU3211
 9357 0068 002D     		cmp	r5, #0
 9358 006a EAD1     		bne	.L713
3410:Core/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 289


 9359              		.loc 1 3410 33 discriminator 1 view .LVU3212
 9360 006c 2068     		ldr	r0, [r4]
 9361              	.LVL1064:
3410:Core/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 9362              		.loc 1 3410 37 discriminator 1 view .LVU3213
 9363 006e 4369     		ldr	r3, [r0, #20]
3410:Core/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 9364              		.loc 1 3410 22 discriminator 1 view .LVU3214
 9365 0070 B342     		cmp	r3, r6
 9366 0072 E6D9     		bls	.L713
3411:Core/Src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
 9367              		.loc 1 3411 6 is_stmt 1 view .LVU3215
3411:Core/Src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
 9368              		.loc 1 3411 12 is_stmt 0 view .LVU3216
 9369 0074 6FF07042 		mvn	r2, #-268435456
 9370 0078 6169     		ldr	r1, [r4, #20]
 9371 007a FFF7FEFF 		bl	put_fat
 9372              	.LVL1065:
3412:Core/Src/ff.c **** 				}
 9373              		.loc 1 3412 6 is_stmt 1 view .LVU3217
3412:Core/Src/ff.c **** 				}
 9374              		.loc 1 3412 9 is_stmt 0 view .LVU3218
 9375 007e 0546     		mov	r5, r0
 9376 0080 0028     		cmp	r0, #0
 9377 0082 DED1     		bne	.L713
3412:Core/Src/ff.c **** 				}
 9378              		.loc 1 3412 24 is_stmt 1 discriminator 1 view .LVU3219
3412:Core/Src/ff.c **** 				}
 9379              		.loc 1 3412 30 is_stmt 0 discriminator 1 view .LVU3220
 9380 0084 3146     		mov	r1, r6
 9381 0086 2068     		ldr	r0, [r4]
 9382              	.LVL1066:
3412:Core/Src/ff.c **** 				}
 9383              		.loc 1 3412 30 discriminator 1 view .LVU3221
 9384 0088 FFF7FEFF 		bl	remove_chain
 9385              	.LVL1067:
 9386 008c 0546     		mov	r5, r0
 9387              	.LVL1068:
3412:Core/Src/ff.c **** 				}
 9388              		.loc 1 3412 30 discriminator 1 view .LVU3222
 9389 008e D8E7     		b	.L713
 9390              	.LVL1069:
 9391              	.L723:
3408:Core/Src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 9392              		.loc 1 3408 32 view .LVU3223
 9393 0090 0125     		movs	r5, #1
 9394 0092 E7E7     		b	.L714
 9395              	.LVL1070:
 9396              	.L719:
3409:Core/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 9397              		.loc 1 3409 23 view .LVU3224
 9398 0094 0225     		movs	r5, #2
 9399              	.LVL1071:
3409:Core/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 9400              		.loc 1 3409 23 view .LVU3225
 9401 0096 D4E7     		b	.L713
 9402              	.LVL1072:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 290


 9403              	.L722:
3417:Core/Src/ff.c **** 					res = FR_DISK_ERR;
 9404              		.loc 1 3417 5 is_stmt 1 view .LVU3226
3417:Core/Src/ff.c **** 					res = FR_DISK_ERR;
 9405              		.loc 1 3417 22 is_stmt 0 view .LVU3227
 9406 0098 2146     		mov	r1, r4
 9407 009a 51F8280B 		ldr	r0, [r1], #40
3417:Core/Src/ff.c **** 					res = FR_DISK_ERR;
 9408              		.loc 1 3417 9 view .LVU3228
 9409 009e 0123     		movs	r3, #1
 9410 00a0 A269     		ldr	r2, [r4, #24]
 9411 00a2 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 9412 00a4 FFF7FEFF 		bl	disk_write
 9413              	.LVL1073:
3417:Core/Src/ff.c **** 					res = FR_DISK_ERR;
 9414              		.loc 1 3417 8 view .LVU3229
 9415 00a8 20B9     		cbnz	r0, .L720
3420:Core/Src/ff.c **** 			}
 9416              		.loc 1 3420 6 is_stmt 1 view .LVU3230
3420:Core/Src/ff.c **** 			}
 9417              		.loc 1 3420 15 is_stmt 0 view .LVU3231
 9418 00aa A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 9419 00ac 23F04003 		bic	r3, r3, #64
 9420 00b0 A371     		strb	r3, [r4, #6]
 9421 00b2 CBE7     		b	.L711
 9422              	.L720:
3418:Core/Src/ff.c **** 				else
 9423              		.loc 1 3418 10 view .LVU3232
 9424 00b4 0125     		movs	r5, #1
 9425              	.LVL1074:
3418:Core/Src/ff.c **** 				else
 9426              		.loc 1 3418 10 view .LVU3233
 9427 00b6 CAE7     		b	.L715
 9428              		.cfi_endproc
 9429              	.LFE46:
 9431              		.section	.text.f_unlink,"ax",%progbits
 9432              		.align	1
 9433              		.global	f_unlink
 9434              		.syntax unified
 9435              		.thumb
 9436              		.thumb_func
 9437              		.fpu fpv4-sp-d16
 9439              	f_unlink:
 9440              	.LVL1075:
 9441              	.LFB47:
3440:Core/Src/ff.c **** 	FRESULT res;
 9442              		.loc 1 3440 1 is_stmt 1 view -0
 9443              		.cfi_startproc
 9444              		@ args = 0, pretend = 0, frame = 96
 9445              		@ frame_needed = 0, uses_anonymous_args = 0
3440:Core/Src/ff.c **** 	FRESULT res;
 9446              		.loc 1 3440 1 is_stmt 0 view .LVU3235
 9447 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 9448              	.LCFI88:
 9449              		.cfi_def_cfa_offset 20
 9450              		.cfi_offset 4, -20
 9451              		.cfi_offset 5, -16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 291


 9452              		.cfi_offset 6, -12
 9453              		.cfi_offset 7, -8
 9454              		.cfi_offset 14, -4
 9455 0002 99B0     		sub	sp, sp, #100
 9456              	.LCFI89:
 9457              		.cfi_def_cfa_offset 120
 9458 0004 0190     		str	r0, [sp, #4]
3441:Core/Src/ff.c **** 	DIR dj, sdj;
 9459              		.loc 1 3441 2 is_stmt 1 view .LVU3236
3442:Core/Src/ff.c **** 	BYTE *dir;
 9460              		.loc 1 3442 2 view .LVU3237
3443:Core/Src/ff.c **** 	DWORD dclst;
 9461              		.loc 1 3443 2 view .LVU3238
3444:Core/Src/ff.c **** 	DEF_NAMEBUF;
 9462              		.loc 1 3444 2 view .LVU3239
3445:Core/Src/ff.c **** 
 9463              		.loc 1 3445 2 view .LVU3240
3445:Core/Src/ff.c **** 
 9464              		.loc 1 3445 2 view .LVU3241
3449:Core/Src/ff.c **** 	if (res == FR_OK) {
 9465              		.loc 1 3449 2 view .LVU3242
3449:Core/Src/ff.c **** 	if (res == FR_OK) {
 9466              		.loc 1 3449 8 is_stmt 0 view .LVU3243
 9467 0006 0122     		movs	r2, #1
 9468 0008 01A9     		add	r1, sp, #4
 9469 000a 0FA8     		add	r0, sp, #60
 9470              	.LVL1076:
3449:Core/Src/ff.c **** 	if (res == FR_OK) {
 9471              		.loc 1 3449 8 view .LVU3244
 9472 000c FFF7FEFF 		bl	find_volume
 9473              	.LVL1077:
3450:Core/Src/ff.c **** 		INIT_BUF(dj);
 9474              		.loc 1 3450 2 is_stmt 1 view .LVU3245
3450:Core/Src/ff.c **** 		INIT_BUF(dj);
 9475              		.loc 1 3450 5 is_stmt 0 view .LVU3246
 9476 0010 0446     		mov	r4, r0
 9477 0012 10B1     		cbz	r0, .L737
 9478              	.LVL1078:
 9479              	.L725:
3498:Core/Src/ff.c **** 
 9480              		.loc 1 3498 1 view .LVU3247
 9481 0014 2046     		mov	r0, r4
 9482 0016 19B0     		add	sp, sp, #100
 9483              	.LCFI90:
 9484              		.cfi_remember_state
 9485              		.cfi_def_cfa_offset 20
 9486              		@ sp needed
 9487 0018 F0BD     		pop	{r4, r5, r6, r7, pc}
 9488              	.LVL1079:
 9489              	.L737:
 9490              	.LCFI91:
 9491              		.cfi_restore_state
3451:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9492              		.loc 1 3451 3 is_stmt 1 view .LVU3248
 9493 001a 4FF40070 		mov	r0, #512
 9494              	.LVL1080:
3451:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 292


 9495              		.loc 1 3451 3 is_stmt 0 view .LVU3249
 9496 001e FFF7FEFF 		bl	ff_memalloc
 9497              	.LVL1081:
3451:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9498              		.loc 1 3451 3 is_stmt 1 view .LVU3250
 9499 0022 0546     		mov	r5, r0
 9500 0024 0028     		cmp	r0, #0
 9501 0026 50D0     		beq	.L731
3451:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9502              		.loc 1 3451 3 discriminator 2 view .LVU3251
 9503 0028 1690     		str	r0, [sp, #88]
3451:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9504              		.loc 1 3451 3 discriminator 2 view .LVU3252
 9505 002a 03AB     		add	r3, sp, #12
 9506 002c 1593     		str	r3, [sp, #84]
3451:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9507              		.loc 1 3451 15 discriminator 2 view .LVU3253
3452:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
 9508              		.loc 1 3452 3 discriminator 2 view .LVU3254
3452:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
 9509              		.loc 1 3452 9 is_stmt 0 discriminator 2 view .LVU3255
 9510 002e 0199     		ldr	r1, [sp, #4]
 9511 0030 0FA8     		add	r0, sp, #60
 9512              	.LVL1082:
3452:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
 9513              		.loc 1 3452 9 discriminator 2 view .LVU3256
 9514 0032 FFF7FEFF 		bl	follow_path
 9515              	.LVL1083:
3453:Core/Src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
 9516              		.loc 1 3453 3 is_stmt 1 discriminator 2 view .LVU3257
3458:Core/Src/ff.c **** 			dir = dj.dir;
 9517              		.loc 1 3458 3 discriminator 2 view .LVU3258
3458:Core/Src/ff.c **** 			dir = dj.dir;
 9518              		.loc 1 3458 6 is_stmt 0 discriminator 2 view .LVU3259
 9519 0036 0446     		mov	r4, r0
 9520 0038 90B9     		cbnz	r0, .L726
3459:Core/Src/ff.c **** 			if (!dir) {
 9521              		.loc 1 3459 4 is_stmt 1 view .LVU3260
3459:Core/Src/ff.c **** 			if (!dir) {
 9522              		.loc 1 3459 8 is_stmt 0 view .LVU3261
 9523 003a 149E     		ldr	r6, [sp, #80]
 9524              	.LVL1084:
3460:Core/Src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the start directory */
 9525              		.loc 1 3460 4 is_stmt 1 view .LVU3262
3460:Core/Src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the start directory */
 9526              		.loc 1 3460 7 is_stmt 0 view .LVU3263
 9527 003c A6B1     		cbz	r6, .L732
3463:Core/Src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 9528              		.loc 1 3463 5 is_stmt 1 view .LVU3264
3463:Core/Src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 9529              		.loc 1 3463 12 is_stmt 0 view .LVU3265
 9530 003e F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
3463:Core/Src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 9531              		.loc 1 3463 8 view .LVU3266
 9532 0040 13F0010F 		tst	r3, #1
 9533 0044 12D1     		bne	.L733
 9534              	.L727:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 293


 9535              	.LVL1085:
3466:Core/Src/ff.c **** 			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
 9536              		.loc 1 3466 4 is_stmt 1 view .LVU3267
3466:Core/Src/ff.c **** 			if (res == FR_OK && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-dir? */
 9537              		.loc 1 3466 12 is_stmt 0 view .LVU3268
 9538 0046 3146     		mov	r1, r6
 9539 0048 0F98     		ldr	r0, [sp, #60]
 9540 004a FFF7FEFF 		bl	ld_clust
 9541              	.LVL1086:
 9542 004e 0746     		mov	r7, r0
 9543              	.LVL1087:
3467:Core/Src/ff.c **** 				if (dclst < 2) {
 9544              		.loc 1 3467 4 is_stmt 1 view .LVU3269
3467:Core/Src/ff.c **** 				if (dclst < 2) {
 9545              		.loc 1 3467 7 is_stmt 0 view .LVU3270
 9546 0050 D4B9     		cbnz	r4, .L728
3467:Core/Src/ff.c **** 				if (dclst < 2) {
 9547              		.loc 1 3467 28 discriminator 1 view .LVU3271
 9548 0052 F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
3467:Core/Src/ff.c **** 				if (dclst < 2) {
 9549              		.loc 1 3467 21 discriminator 1 view .LVU3272
 9550 0054 13F0100F 		tst	r3, #16
 9551 0058 16D0     		beq	.L728
3468:Core/Src/ff.c **** 					res = FR_INT_ERR;
 9552              		.loc 1 3468 5 is_stmt 1 view .LVU3273
3468:Core/Src/ff.c **** 					res = FR_INT_ERR;
 9553              		.loc 1 3468 8 is_stmt 0 view .LVU3274
 9554 005a 0128     		cmp	r0, #1
 9555 005c 08D8     		bhi	.L738
3469:Core/Src/ff.c **** 				} else {
 9556              		.loc 1 3469 10 view .LVU3275
 9557 005e 0224     		movs	r4, #2
 9558              	.LVL1088:
 9559              	.L726:
3494:Core/Src/ff.c **** 	}
 9560              		.loc 1 3494 3 is_stmt 1 view .LVU3276
 9561 0060 2846     		mov	r0, r5
 9562 0062 FFF7FEFF 		bl	ff_memfree
 9563              	.LVL1089:
 9564 0066 D5E7     		b	.L725
 9565              	.LVL1090:
 9566              	.L732:
3461:Core/Src/ff.c **** 			} else {
 9567              		.loc 1 3461 9 is_stmt 0 view .LVU3277
 9568 0068 0624     		movs	r4, #6
 9569 006a ECE7     		b	.L727
 9570              	.L733:
3464:Core/Src/ff.c **** 			}
 9571              		.loc 1 3464 10 view .LVU3278
 9572 006c 0724     		movs	r4, #7
 9573 006e EAE7     		b	.L727
 9574              	.LVL1091:
 9575              	.L738:
3471:Core/Src/ff.c **** 					sdj.sclust = dclst;
 9576              		.loc 1 3471 6 is_stmt 1 view .LVU3279
 9577 0070 2422     		movs	r2, #36
 9578 0072 0FA9     		add	r1, sp, #60
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 294


 9579 0074 06A8     		add	r0, sp, #24
 9580              	.LVL1092:
3471:Core/Src/ff.c **** 					sdj.sclust = dclst;
 9581              		.loc 1 3471 6 is_stmt 0 view .LVU3280
 9582 0076 FFF7FEFF 		bl	mem_cpy
 9583              	.LVL1093:
3472:Core/Src/ff.c **** 					res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
 9584              		.loc 1 3472 6 is_stmt 1 view .LVU3281
3472:Core/Src/ff.c **** 					res = dir_sdi(&sdj, 2);		/* Exclude dot entries */
 9585              		.loc 1 3472 17 is_stmt 0 view .LVU3282
 9586 007a 0897     		str	r7, [sp, #32]
3473:Core/Src/ff.c **** 					if (res == FR_OK) {
 9587              		.loc 1 3473 6 is_stmt 1 view .LVU3283
3473:Core/Src/ff.c **** 					if (res == FR_OK) {
 9588              		.loc 1 3473 12 is_stmt 0 view .LVU3284
 9589 007c 0221     		movs	r1, #2
 9590 007e 06A8     		add	r0, sp, #24
 9591 0080 FFF7FEFF 		bl	dir_sdi
 9592              	.LVL1094:
3474:Core/Src/ff.c **** 						res = dir_read(&sdj, 0);	/* Read an item */
 9593              		.loc 1 3474 6 is_stmt 1 view .LVU3285
3474:Core/Src/ff.c **** 						res = dir_read(&sdj, 0);	/* Read an item */
 9594              		.loc 1 3474 9 is_stmt 0 view .LVU3286
 9595 0084 0446     		mov	r4, r0
 9596 0086 78B1     		cbz	r0, .L739
 9597              	.LVL1095:
 9598              	.L728:
3485:Core/Src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
 9599              		.loc 1 3485 4 is_stmt 1 view .LVU3287
3485:Core/Src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
 9600              		.loc 1 3485 7 is_stmt 0 view .LVU3288
 9601 0088 002C     		cmp	r4, #0
 9602 008a E9D1     		bne	.L726
 9603              	.LVL1096:
 9604              	.L729:
3486:Core/Src/ff.c **** 				if (res == FR_OK) {
 9605              		.loc 1 3486 5 is_stmt 1 view .LVU3289
3486:Core/Src/ff.c **** 				if (res == FR_OK) {
 9606              		.loc 1 3486 11 is_stmt 0 view .LVU3290
 9607 008c 0FA8     		add	r0, sp, #60
 9608 008e FFF7FEFF 		bl	dir_remove
 9609              	.LVL1097:
3487:Core/Src/ff.c **** 					if (dclst)				/* Remove the cluster chain if exist */
 9610              		.loc 1 3487 5 is_stmt 1 view .LVU3291
3487:Core/Src/ff.c **** 					if (dclst)				/* Remove the cluster chain if exist */
 9611              		.loc 1 3487 8 is_stmt 0 view .LVU3292
 9612 0092 0446     		mov	r4, r0
 9613 0094 0028     		cmp	r0, #0
 9614 0096 E3D1     		bne	.L726
3488:Core/Src/ff.c **** 						res = remove_chain(dj.fs, dclst);
 9615              		.loc 1 3488 6 is_stmt 1 view .LVU3293
3488:Core/Src/ff.c **** 						res = remove_chain(dj.fs, dclst);
 9616              		.loc 1 3488 9 is_stmt 0 view .LVU3294
 9617 0098 8FB9     		cbnz	r7, .L740
 9618              	.LVL1098:
 9619              	.L730:
3490:Core/Src/ff.c **** 				}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 295


 9620              		.loc 1 3490 6 is_stmt 1 view .LVU3295
3490:Core/Src/ff.c **** 				}
 9621              		.loc 1 3490 9 is_stmt 0 view .LVU3296
 9622 009a 002C     		cmp	r4, #0
 9623 009c E0D1     		bne	.L726
3490:Core/Src/ff.c **** 				}
 9624              		.loc 1 3490 24 is_stmt 1 discriminator 1 view .LVU3297
3490:Core/Src/ff.c **** 				}
 9625              		.loc 1 3490 30 is_stmt 0 discriminator 1 view .LVU3298
 9626 009e 0F98     		ldr	r0, [sp, #60]
 9627 00a0 FFF7FEFF 		bl	sync_fs
 9628              	.LVL1099:
 9629 00a4 0446     		mov	r4, r0
 9630              	.LVL1100:
3490:Core/Src/ff.c **** 				}
 9631              		.loc 1 3490 30 discriminator 1 view .LVU3299
 9632 00a6 DBE7     		b	.L726
 9633              	.LVL1101:
 9634              	.L739:
3475:Core/Src/ff.c **** 						if (res == FR_OK		/* Not empty directory */
 9635              		.loc 1 3475 7 is_stmt 1 view .LVU3300
3475:Core/Src/ff.c **** 						if (res == FR_OK		/* Not empty directory */
 9636              		.loc 1 3475 13 is_stmt 0 view .LVU3301
 9637 00a8 0021     		movs	r1, #0
 9638 00aa 06A8     		add	r0, sp, #24
 9639              	.LVL1102:
3475:Core/Src/ff.c **** 						if (res == FR_OK		/* Not empty directory */
 9640              		.loc 1 3475 13 view .LVU3302
 9641 00ac FFF7FEFF 		bl	dir_read
 9642              	.LVL1103:
3476:Core/Src/ff.c **** #if _FS_RPATH
 9643              		.loc 1 3476 7 is_stmt 1 view .LVU3303
3476:Core/Src/ff.c **** #if _FS_RPATH
 9644              		.loc 1 3476 10 is_stmt 0 view .LVU3304
 9645 00b0 0446     		mov	r4, r0
 9646 00b2 10B1     		cbz	r0, .L735
3481:Core/Src/ff.c **** 					}
 9647              		.loc 1 3481 7 is_stmt 1 view .LVU3305
3481:Core/Src/ff.c **** 					}
 9648              		.loc 1 3481 10 is_stmt 0 view .LVU3306
 9649 00b4 0428     		cmp	r0, #4
 9650 00b6 E7D1     		bne	.L728
 9651 00b8 E8E7     		b	.L729
 9652              	.L735:
3480:Core/Src/ff.c **** 						if (res == FR_NO_FILE) res = FR_OK;	/* Empty */
 9653              		.loc 1 3480 13 view .LVU3307
 9654 00ba 0724     		movs	r4, #7
 9655 00bc E4E7     		b	.L728
 9656              	.L740:
3489:Core/Src/ff.c **** 					if (res == FR_OK) res = sync_fs(dj.fs);
 9657              		.loc 1 3489 7 is_stmt 1 view .LVU3308
3489:Core/Src/ff.c **** 					if (res == FR_OK) res = sync_fs(dj.fs);
 9658              		.loc 1 3489 13 is_stmt 0 view .LVU3309
 9659 00be 3946     		mov	r1, r7
 9660 00c0 0F98     		ldr	r0, [sp, #60]
 9661              	.LVL1104:
3489:Core/Src/ff.c **** 					if (res == FR_OK) res = sync_fs(dj.fs);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 296


 9662              		.loc 1 3489 13 view .LVU3310
 9663 00c2 FFF7FEFF 		bl	remove_chain
 9664              	.LVL1105:
 9665 00c6 0446     		mov	r4, r0
 9666              	.LVL1106:
3489:Core/Src/ff.c **** 					if (res == FR_OK) res = sync_fs(dj.fs);
 9667              		.loc 1 3489 13 view .LVU3311
 9668 00c8 E7E7     		b	.L730
 9669              	.LVL1107:
 9670              	.L731:
3451:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9671              		.loc 1 3451 3 view .LVU3312
 9672 00ca 1124     		movs	r4, #17
 9673 00cc A2E7     		b	.L725
 9674              		.cfi_endproc
 9675              	.LFE47:
 9677              		.section	.text.f_mkdir,"ax",%progbits
 9678              		.align	1
 9679              		.global	f_mkdir
 9680              		.syntax unified
 9681              		.thumb
 9682              		.thumb_func
 9683              		.fpu fpv4-sp-d16
 9685              	f_mkdir:
 9686              	.LVL1108:
 9687              	.LFB48:
3510:Core/Src/ff.c **** 	FRESULT res;
 9688              		.loc 1 3510 1 is_stmt 1 view -0
 9689              		.cfi_startproc
 9690              		@ args = 0, pretend = 0, frame = 56
 9691              		@ frame_needed = 0, uses_anonymous_args = 0
3510:Core/Src/ff.c **** 	FRESULT res;
 9692              		.loc 1 3510 1 is_stmt 0 view .LVU3314
 9693 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 9694              	.LCFI92:
 9695              		.cfi_def_cfa_offset 36
 9696              		.cfi_offset 4, -36
 9697              		.cfi_offset 5, -32
 9698              		.cfi_offset 6, -28
 9699              		.cfi_offset 7, -24
 9700              		.cfi_offset 8, -20
 9701              		.cfi_offset 9, -16
 9702              		.cfi_offset 10, -12
 9703              		.cfi_offset 11, -8
 9704              		.cfi_offset 14, -4
 9705 0004 8FB0     		sub	sp, sp, #60
 9706              	.LCFI93:
 9707              		.cfi_def_cfa_offset 96
 9708 0006 0190     		str	r0, [sp, #4]
3511:Core/Src/ff.c **** 	DIR dj;
 9709              		.loc 1 3511 2 is_stmt 1 view .LVU3315
3512:Core/Src/ff.c **** 	BYTE *dir, n;
 9710              		.loc 1 3512 2 view .LVU3316
3513:Core/Src/ff.c **** 	DWORD dsc, dcl, pcl, tm = get_fattime();
 9711              		.loc 1 3513 2 view .LVU3317
3514:Core/Src/ff.c **** 	DEF_NAMEBUF;
 9712              		.loc 1 3514 2 view .LVU3318
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 297


3514:Core/Src/ff.c **** 	DEF_NAMEBUF;
 9713              		.loc 1 3514 28 is_stmt 0 view .LVU3319
 9714 0008 FFF7FEFF 		bl	get_fattime
 9715              	.LVL1109:
3514:Core/Src/ff.c **** 	DEF_NAMEBUF;
 9716              		.loc 1 3514 28 view .LVU3320
 9717 000c 0446     		mov	r4, r0
 9718              	.LVL1110:
3515:Core/Src/ff.c **** 
 9719              		.loc 1 3515 2 is_stmt 1 view .LVU3321
3515:Core/Src/ff.c **** 
 9720              		.loc 1 3515 2 view .LVU3322
3519:Core/Src/ff.c **** 	if (res == FR_OK) {
 9721              		.loc 1 3519 2 view .LVU3323
3519:Core/Src/ff.c **** 	if (res == FR_OK) {
 9722              		.loc 1 3519 8 is_stmt 0 view .LVU3324
 9723 000e 0122     		movs	r2, #1
 9724 0010 01A9     		add	r1, sp, #4
 9725 0012 05A8     		add	r0, sp, #20
 9726              	.LVL1111:
3519:Core/Src/ff.c **** 	if (res == FR_OK) {
 9727              		.loc 1 3519 8 view .LVU3325
 9728 0014 FFF7FEFF 		bl	find_volume
 9729              	.LVL1112:
3520:Core/Src/ff.c **** 		INIT_BUF(dj);
 9730              		.loc 1 3520 2 is_stmt 1 view .LVU3326
3520:Core/Src/ff.c **** 		INIT_BUF(dj);
 9731              		.loc 1 3520 5 is_stmt 0 view .LVU3327
 9732 0018 0546     		mov	r5, r0
 9733 001a 18B1     		cbz	r0, .L761
 9734              	.LVL1113:
 9735              	.L742:
3572:Core/Src/ff.c **** 
 9736              		.loc 1 3572 1 view .LVU3328
 9737 001c 2846     		mov	r0, r5
 9738 001e 0FB0     		add	sp, sp, #60
 9739              	.LCFI94:
 9740              		.cfi_remember_state
 9741              		.cfi_def_cfa_offset 36
 9742              		@ sp needed
 9743 0020 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 9744              	.LVL1114:
 9745              	.L761:
 9746              	.LCFI95:
 9747              		.cfi_restore_state
3521:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9748              		.loc 1 3521 3 is_stmt 1 view .LVU3329
 9749 0024 4FF40070 		mov	r0, #512
 9750              	.LVL1115:
3521:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9751              		.loc 1 3521 3 is_stmt 0 view .LVU3330
 9752 0028 FFF7FEFF 		bl	ff_memalloc
 9753              	.LVL1116:
3521:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9754              		.loc 1 3521 3 is_stmt 1 view .LVU3331
 9755 002c 0646     		mov	r6, r0
 9756 002e 0028     		cmp	r0, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 298


 9757 0030 00F0B080 		beq	.L753
3521:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9758              		.loc 1 3521 3 discriminator 2 view .LVU3332
 9759 0034 0C90     		str	r0, [sp, #48]
3521:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9760              		.loc 1 3521 3 discriminator 2 view .LVU3333
 9761 0036 02AB     		add	r3, sp, #8
 9762 0038 0B93     		str	r3, [sp, #44]
3521:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9763              		.loc 1 3521 15 discriminator 2 view .LVU3334
3522:Core/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9764              		.loc 1 3522 3 discriminator 2 view .LVU3335
3522:Core/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9765              		.loc 1 3522 9 is_stmt 0 discriminator 2 view .LVU3336
 9766 003a 0199     		ldr	r1, [sp, #4]
 9767 003c 05A8     		add	r0, sp, #20
 9768              	.LVL1117:
3522:Core/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9769              		.loc 1 3522 9 discriminator 2 view .LVU3337
 9770 003e FFF7FEFF 		bl	follow_path
 9771              	.LVL1118:
3523:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NS] & NS_DOT))
 9772              		.loc 1 3523 3 is_stmt 1 discriminator 2 view .LVU3338
3523:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NS] & NS_DOT))
 9773              		.loc 1 3523 6 is_stmt 0 discriminator 2 view .LVU3339
 9774 0042 0028     		cmp	r0, #0
 9775 0044 00F0A180 		beq	.L754
3524:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
 9776              		.loc 1 3524 3 is_stmt 1 view .LVU3340
3526:Core/Src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
 9777              		.loc 1 3526 3 view .LVU3341
3526:Core/Src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
 9778              		.loc 1 3526 6 is_stmt 0 view .LVU3342
 9779 0048 0428     		cmp	r0, #4
 9780 004a 01D0     		beq	.L762
3522:Core/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9781              		.loc 1 3522 9 view .LVU3343
 9782 004c 0546     		mov	r5, r0
 9783 004e 9DE0     		b	.L743
 9784              	.L762:
3527:Core/Src/ff.c **** 			res = FR_OK;
 9785              		.loc 1 3527 4 is_stmt 1 view .LVU3344
3527:Core/Src/ff.c **** 			res = FR_OK;
 9786              		.loc 1 3527 10 is_stmt 0 view .LVU3345
 9787 0050 0021     		movs	r1, #0
 9788 0052 0598     		ldr	r0, [sp, #20]
 9789              	.LVL1119:
3527:Core/Src/ff.c **** 			res = FR_OK;
 9790              		.loc 1 3527 10 view .LVU3346
 9791 0054 FFF7FEFF 		bl	create_chain
 9792              	.LVL1120:
3528:Core/Src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
 9793              		.loc 1 3528 4 is_stmt 1 view .LVU3347
3529:Core/Src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9794              		.loc 1 3529 4 view .LVU3348
3529:Core/Src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9795              		.loc 1 3529 7 is_stmt 0 view .LVU3349
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 299


 9796 0058 8046     		mov	r8, r0
 9797 005a 00B9     		cbnz	r0, .L744
3529:Core/Src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9798              		.loc 1 3529 22 view .LVU3350
 9799 005c 0725     		movs	r5, #7
 9800              	.L744:
 9801              	.LVL1121:
3530:Core/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9802              		.loc 1 3530 4 is_stmt 1 view .LVU3351
3530:Core/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9803              		.loc 1 3530 7 is_stmt 0 view .LVU3352
 9804 005e B8F1010F 		cmp	r8, #1
 9805 0062 0DD0     		beq	.L763
 9806              	.LVL1122:
 9807              	.L745:
3531:Core/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 9808              		.loc 1 3531 4 is_stmt 1 view .LVU3353
3531:Core/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 9809              		.loc 1 3531 7 is_stmt 0 view .LVU3354
 9810 0064 B8F1FF3F 		cmp	r8, #-1
 9811 0068 11D0     		beq	.L758
3532:Core/Src/ff.c **** 				res = sync_window(dj.fs);
 9812              		.loc 1 3532 4 is_stmt 1 view .LVU3355
3532:Core/Src/ff.c **** 				res = sync_window(dj.fs);
 9813              		.loc 1 3532 7 is_stmt 0 view .LVU3356
 9814 006a 5DB1     		cbz	r5, .L764
 9815              	.LVL1123:
 9816              	.L746:
3534:Core/Src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
 9817              		.loc 1 3534 4 is_stmt 1 view .LVU3357
3534:Core/Src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
 9818              		.loc 1 3534 7 is_stmt 0 view .LVU3358
 9819 006c 8DB1     		cbz	r5, .L765
 9820              	.LVL1124:
 9821              	.L747:
3556:Core/Src/ff.c **** 			if (res != FR_OK) {
 9822              		.loc 1 3556 4 is_stmt 1 view .LVU3359
3556:Core/Src/ff.c **** 			if (res != FR_OK) {
 9823              		.loc 1 3556 7 is_stmt 0 view .LVU3360
 9824 006e 002D     		cmp	r5, #0
 9825 0070 70D0     		beq	.L766
 9826              	.L751:
3557:Core/Src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
 9827              		.loc 1 3557 4 is_stmt 1 view .LVU3361
3557:Core/Src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
 9828              		.loc 1 3557 7 is_stmt 0 view .LVU3362
 9829 0072 002D     		cmp	r5, #0
 9830 0074 73D0     		beq	.L752
3558:Core/Src/ff.c **** 			} else {
 9831              		.loc 1 3558 5 is_stmt 1 view .LVU3363
 9832 0076 4146     		mov	r1, r8
 9833 0078 0598     		ldr	r0, [sp, #20]
 9834 007a FFF7FEFF 		bl	remove_chain
 9835              	.LVL1125:
 9836 007e 85E0     		b	.L743
 9837              	.LVL1126:
 9838              	.L763:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 300


3530:Core/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9839              		.loc 1 3530 22 is_stmt 0 view .LVU3364
 9840 0080 0225     		movs	r5, #2
 9841              	.LVL1127:
3530:Core/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9842              		.loc 1 3530 22 view .LVU3365
 9843 0082 EFE7     		b	.L745
 9844              	.LVL1128:
 9845              	.L764:
3533:Core/Src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9846              		.loc 1 3533 5 is_stmt 1 view .LVU3366
3533:Core/Src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9847              		.loc 1 3533 11 is_stmt 0 view .LVU3367
 9848 0084 0598     		ldr	r0, [sp, #20]
 9849              	.LVL1129:
3533:Core/Src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9850              		.loc 1 3533 11 view .LVU3368
 9851 0086 FFF7FEFF 		bl	sync_window
 9852              	.LVL1130:
 9853 008a 0546     		mov	r5, r0
 9854              	.LVL1131:
3533:Core/Src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9855              		.loc 1 3533 11 view .LVU3369
 9856 008c EEE7     		b	.L746
 9857              	.LVL1132:
 9858              	.L758:
3531:Core/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 9859              		.loc 1 3531 31 view .LVU3370
 9860 008e 0125     		movs	r5, #1
 9861              	.LVL1133:
3531:Core/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 9862              		.loc 1 3531 31 view .LVU3371
 9863 0090 ECE7     		b	.L746
 9864              	.LVL1134:
 9865              	.L765:
3535:Core/Src/ff.c **** 				dir = dj.fs->win;
 9866              		.loc 1 3535 5 is_stmt 1 view .LVU3372
3535:Core/Src/ff.c **** 				dir = dj.fs->win;
 9867              		.loc 1 3535 11 is_stmt 0 view .LVU3373
 9868 0092 DDF814A0 		ldr	r10, [sp, #20]
 9869 0096 4146     		mov	r1, r8
 9870 0098 5046     		mov	r0, r10
 9871 009a FFF7FEFF 		bl	clust2sect
 9872              	.LVL1135:
 9873 009e 0746     		mov	r7, r0
 9874              	.LVL1136:
3536:Core/Src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
 9875              		.loc 1 3536 5 is_stmt 1 view .LVU3374
3536:Core/Src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
 9876              		.loc 1 3536 9 is_stmt 0 view .LVU3375
 9877 00a0 0AF13009 		add	r9, r10, #48
 9878              	.LVL1137:
3537:Core/Src/ff.c **** 				mem_set(dir+DIR_Name, ' ', 11);	/* Create "." entry */
 9879              		.loc 1 3537 5 is_stmt 1 view .LVU3376
 9880 00a4 4FF40072 		mov	r2, #512
 9881 00a8 0021     		movs	r1, #0
 9882 00aa 4846     		mov	r0, r9
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 301


 9883              	.LVL1138:
3537:Core/Src/ff.c **** 				mem_set(dir+DIR_Name, ' ', 11);	/* Create "." entry */
 9884              		.loc 1 3537 5 is_stmt 0 view .LVU3377
 9885 00ac FFF7FEFF 		bl	mem_set
 9886              	.LVL1139:
3538:Core/Src/ff.c **** 				dir[DIR_Name] = '.';
 9887              		.loc 1 3538 5 is_stmt 1 view .LVU3378
 9888 00b0 0B22     		movs	r2, #11
 9889 00b2 2021     		movs	r1, #32
 9890 00b4 4846     		mov	r0, r9
 9891 00b6 FFF7FEFF 		bl	mem_set
 9892              	.LVL1140:
3539:Core/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 9893              		.loc 1 3539 5 view .LVU3379
3539:Core/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 9894              		.loc 1 3539 19 is_stmt 0 view .LVU3380
 9895 00ba 4FF02E03 		mov	r3, #46
 9896 00be 8AF83030 		strb	r3, [r10, #48]
3540:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);
 9897              		.loc 1 3540 5 is_stmt 1 view .LVU3381
3540:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);
 9898              		.loc 1 3540 19 is_stmt 0 view .LVU3382
 9899 00c2 1023     		movs	r3, #16
 9900 00c4 8AF83B30 		strb	r3, [r10, #59]
3541:Core/Src/ff.c **** 				st_clust(dir, dcl);
 9901              		.loc 1 3541 5 is_stmt 1 view .LVU3383
 9902 00c8 8AF84640 		strb	r4, [r10, #70]
3541:Core/Src/ff.c **** 				st_clust(dir, dcl);
 9903              		.loc 1 3541 5 view .LVU3384
 9904 00cc C4F30723 		ubfx	r3, r4, #8, #8
 9905 00d0 8AF84730 		strb	r3, [r10, #71]
3541:Core/Src/ff.c **** 				st_clust(dir, dcl);
 9906              		.loc 1 3541 5 view .LVU3385
 9907 00d4 C4F30743 		ubfx	r3, r4, #16, #8
 9908 00d8 8AF84830 		strb	r3, [r10, #72]
3541:Core/Src/ff.c **** 				st_clust(dir, dcl);
 9909              		.loc 1 3541 5 view .LVU3386
 9910 00dc 230E     		lsrs	r3, r4, #24
 9911 00de 8AF84930 		strb	r3, [r10, #73]
3542:Core/Src/ff.c **** 				mem_cpy(dir+SZ_DIR, dir, SZ_DIR); 	/* Create ".." entry */
 9912              		.loc 1 3542 5 view .LVU3387
 9913 00e2 4146     		mov	r1, r8
 9914 00e4 4846     		mov	r0, r9
 9915 00e6 FFF7FEFF 		bl	st_clust
 9916              	.LVL1141:
3543:Core/Src/ff.c **** 				dir[SZ_DIR+1] = '.'; pcl = dj.sclust;
 9917              		.loc 1 3543 5 view .LVU3388
3543:Core/Src/ff.c **** 				dir[SZ_DIR+1] = '.'; pcl = dj.sclust;
 9918              		.loc 1 3543 16 is_stmt 0 view .LVU3389
 9919 00ea 0AF1500B 		add	fp, r10, #80
3543:Core/Src/ff.c **** 				dir[SZ_DIR+1] = '.'; pcl = dj.sclust;
 9920              		.loc 1 3543 5 view .LVU3390
 9921 00ee 2022     		movs	r2, #32
 9922 00f0 4946     		mov	r1, r9
 9923 00f2 5846     		mov	r0, fp
 9924 00f4 FFF7FEFF 		bl	mem_cpy
 9925              	.LVL1142:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 302


3544:Core/Src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 9926              		.loc 1 3544 5 is_stmt 1 view .LVU3391
3544:Core/Src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 9927              		.loc 1 3544 19 is_stmt 0 view .LVU3392
 9928 00f8 4FF02E03 		mov	r3, #46
 9929 00fc 8AF85130 		strb	r3, [r10, #81]
3544:Core/Src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 9930              		.loc 1 3544 26 is_stmt 1 view .LVU3393
3544:Core/Src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 9931              		.loc 1 3544 30 is_stmt 0 view .LVU3394
 9932 0100 0799     		ldr	r1, [sp, #28]
 9933              	.LVL1143:
3545:Core/Src/ff.c **** 					pcl = 0;
 9934              		.loc 1 3545 5 is_stmt 1 view .LVU3395
3545:Core/Src/ff.c **** 					pcl = 0;
 9935              		.loc 1 3545 11 is_stmt 0 view .LVU3396
 9936 0102 059B     		ldr	r3, [sp, #20]
3545:Core/Src/ff.c **** 					pcl = 0;
 9937              		.loc 1 3545 14 view .LVU3397
 9938 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
3545:Core/Src/ff.c **** 					pcl = 0;
 9939              		.loc 1 3545 8 view .LVU3398
 9940 0106 032A     		cmp	r2, #3
 9941 0108 1FD0     		beq	.L767
 9942              	.LVL1144:
 9943              	.L748:
3547:Core/Src/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
 9944              		.loc 1 3547 5 is_stmt 1 view .LVU3399
 9945 010a 5846     		mov	r0, fp
 9946 010c FFF7FEFF 		bl	st_clust
 9947              	.LVL1145:
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9948              		.loc 1 3548 5 view .LVU3400
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9949              		.loc 1 3548 16 is_stmt 0 view .LVU3401
 9950 0110 059B     		ldr	r3, [sp, #20]
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9951              		.loc 1 3548 12 view .LVU3402
 9952 0112 93F802A0 		ldrb	r10, [r3, #2]	@ zero_extendqisi2
 9953              	.LVL1146:
 9954              	.L749:
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9955              		.loc 1 3548 28 is_stmt 1 discriminator 1 view .LVU3403
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9956              		.loc 1 3548 5 is_stmt 0 discriminator 1 view .LVU3404
 9957 0116 BAF1000F 		cmp	r10, #0
 9958 011a A8D0     		beq	.L747
3549:Core/Src/ff.c **** 					dj.fs->wflag = 1;
 9959              		.loc 1 3549 6 is_stmt 1 view .LVU3405
3549:Core/Src/ff.c **** 					dj.fs->wflag = 1;
 9960              		.loc 1 3549 26 is_stmt 0 view .LVU3406
 9961 011c 07F1010B 		add	fp, r7, #1
 9962              	.LVL1147:
3549:Core/Src/ff.c **** 					dj.fs->wflag = 1;
 9963              		.loc 1 3549 8 view .LVU3407
 9964 0120 0598     		ldr	r0, [sp, #20]
3549:Core/Src/ff.c **** 					dj.fs->wflag = 1;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 303


 9965              		.loc 1 3549 21 view .LVU3408
 9966 0122 C762     		str	r7, [r0, #44]
3550:Core/Src/ff.c **** 					res = sync_window(dj.fs);
 9967              		.loc 1 3550 6 is_stmt 1 view .LVU3409
3550:Core/Src/ff.c **** 					res = sync_window(dj.fs);
 9968              		.loc 1 3550 19 is_stmt 0 view .LVU3410
 9969 0124 0123     		movs	r3, #1
 9970 0126 0371     		strb	r3, [r0, #4]
3551:Core/Src/ff.c **** 					if (res != FR_OK) break;
 9971              		.loc 1 3551 6 is_stmt 1 view .LVU3411
3551:Core/Src/ff.c **** 					if (res != FR_OK) break;
 9972              		.loc 1 3551 12 is_stmt 0 view .LVU3412
 9973 0128 FFF7FEFF 		bl	sync_window
 9974              	.LVL1148:
3552:Core/Src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
 9975              		.loc 1 3552 6 is_stmt 1 view .LVU3413
3552:Core/Src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
 9976              		.loc 1 3552 9 is_stmt 0 view .LVU3414
 9977 012c 0546     		mov	r5, r0
 9978 012e 0028     		cmp	r0, #0
 9979 0130 9DD1     		bne	.L747
3553:Core/Src/ff.c **** 				}
 9980              		.loc 1 3553 6 is_stmt 1 discriminator 2 view .LVU3415
 9981 0132 4FF40072 		mov	r2, #512
 9982 0136 0021     		movs	r1, #0
 9983 0138 4846     		mov	r0, r9
 9984              	.LVL1149:
3553:Core/Src/ff.c **** 				}
 9985              		.loc 1 3553 6 is_stmt 0 discriminator 2 view .LVU3416
 9986 013a FFF7FEFF 		bl	mem_set
 9987              	.LVL1150:
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9988              		.loc 1 3548 31 is_stmt 1 discriminator 2 view .LVU3417
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9989              		.loc 1 3548 32 is_stmt 0 discriminator 2 view .LVU3418
 9990 013e 0AF1FF3A 		add	r10, r10, #-1
 9991              	.LVL1151:
3548:Core/Src/ff.c **** 					dj.fs->winsect = dsc++;
 9992              		.loc 1 3548 32 discriminator 2 view .LVU3419
 9993 0142 5FFA8AFA 		uxtb	r10, r10
 9994              	.LVL1152:
3549:Core/Src/ff.c **** 					dj.fs->wflag = 1;
 9995              		.loc 1 3549 26 discriminator 2 view .LVU3420
 9996 0146 5F46     		mov	r7, fp
 9997 0148 E5E7     		b	.L749
 9998              	.LVL1153:
 9999              	.L767:
3545:Core/Src/ff.c **** 					pcl = 0;
 10000              		.loc 1 3545 51 discriminator 1 view .LVU3421
 10001 014a 5B6A     		ldr	r3, [r3, #36]
3545:Core/Src/ff.c **** 					pcl = 0;
 10002              		.loc 1 3545 36 discriminator 1 view .LVU3422
 10003 014c 8B42     		cmp	r3, r1
 10004 014e DCD1     		bne	.L748
3546:Core/Src/ff.c **** 				st_clust(dir+SZ_DIR, pcl);
 10005              		.loc 1 3546 10 view .LVU3423
 10006 0150 0021     		movs	r1, #0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 304


 10007              	.LVL1154:
3546:Core/Src/ff.c **** 				st_clust(dir+SZ_DIR, pcl);
 10008              		.loc 1 3546 10 view .LVU3424
 10009 0152 DAE7     		b	.L748
 10010              	.LVL1155:
 10011              	.L766:
3556:Core/Src/ff.c **** 			if (res != FR_OK) {
 10012              		.loc 1 3556 22 is_stmt 1 discriminator 1 view .LVU3425
3556:Core/Src/ff.c **** 			if (res != FR_OK) {
 10013              		.loc 1 3556 28 is_stmt 0 discriminator 1 view .LVU3426
 10014 0154 05A8     		add	r0, sp, #20
 10015 0156 FFF7FEFF 		bl	dir_register
 10016              	.LVL1156:
 10017 015a 0546     		mov	r5, r0
 10018              	.LVL1157:
3556:Core/Src/ff.c **** 			if (res != FR_OK) {
 10019              		.loc 1 3556 28 discriminator 1 view .LVU3427
 10020 015c 89E7     		b	.L751
 10021              	.L752:
3560:Core/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
 10022              		.loc 1 3560 5 is_stmt 1 view .LVU3428
3560:Core/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
 10023              		.loc 1 3560 9 is_stmt 0 view .LVU3429
 10024 015e 0A98     		ldr	r0, [sp, #40]
 10025              	.LVL1158:
3561:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);		/* Created time */
 10026              		.loc 1 3561 5 is_stmt 1 view .LVU3430
3561:Core/Src/ff.c **** 				ST_DWORD(dir+DIR_WrtTime, tm);		/* Created time */
 10027              		.loc 1 3561 19 is_stmt 0 view .LVU3431
 10028 0160 1023     		movs	r3, #16
 10029 0162 C372     		strb	r3, [r0, #11]
3562:Core/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 10030              		.loc 1 3562 5 is_stmt 1 view .LVU3432
 10031 0164 8475     		strb	r4, [r0, #22]
3562:Core/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 10032              		.loc 1 3562 5 view .LVU3433
 10033 0166 C4F30723 		ubfx	r3, r4, #8, #8
 10034 016a C375     		strb	r3, [r0, #23]
3562:Core/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 10035              		.loc 1 3562 5 view .LVU3434
 10036 016c C4F30743 		ubfx	r3, r4, #16, #8
 10037 0170 0376     		strb	r3, [r0, #24]
3562:Core/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 10038              		.loc 1 3562 5 view .LVU3435
 10039 0172 240E     		lsrs	r4, r4, #24
 10040              	.LVL1159:
3562:Core/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 10041              		.loc 1 3562 5 is_stmt 0 view .LVU3436
 10042 0174 4476     		strb	r4, [r0, #25]
3563:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 10043              		.loc 1 3563 5 is_stmt 1 view .LVU3437
 10044 0176 4146     		mov	r1, r8
 10045 0178 FFF7FEFF 		bl	st_clust
 10046              	.LVL1160:
3564:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10047              		.loc 1 3564 5 view .LVU3438
3564:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 305


 10048              		.loc 1 3564 7 is_stmt 0 view .LVU3439
 10049 017c 0598     		ldr	r0, [sp, #20]
3564:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10050              		.loc 1 3564 18 view .LVU3440
 10051 017e 0123     		movs	r3, #1
 10052 0180 0371     		strb	r3, [r0, #4]
3565:Core/Src/ff.c **** 			}
 10053              		.loc 1 3565 5 is_stmt 1 view .LVU3441
3565:Core/Src/ff.c **** 			}
 10054              		.loc 1 3565 11 is_stmt 0 view .LVU3442
 10055 0182 FFF7FEFF 		bl	sync_fs
 10056              	.LVL1161:
 10057 0186 0546     		mov	r5, r0
 10058              	.LVL1162:
3565:Core/Src/ff.c **** 			}
 10059              		.loc 1 3565 11 view .LVU3443
 10060 0188 00E0     		b	.L743
 10061              	.LVL1163:
 10062              	.L754:
3523:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NS] & NS_DOT))
 10063              		.loc 1 3523 25 view .LVU3444
 10064 018a 0825     		movs	r5, #8
 10065              	.LVL1164:
 10066              	.L743:
3568:Core/Src/ff.c **** 	}
 10067              		.loc 1 3568 3 is_stmt 1 view .LVU3445
 10068 018c 3046     		mov	r0, r6
 10069 018e FFF7FEFF 		bl	ff_memfree
 10070              	.LVL1165:
 10071 0192 43E7     		b	.L742
 10072              	.LVL1166:
 10073              	.L753:
3521:Core/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 10074              		.loc 1 3521 3 is_stmt 0 view .LVU3446
 10075 0194 1125     		movs	r5, #17
 10076 0196 41E7     		b	.L742
 10077              		.cfi_endproc
 10078              	.LFE48:
 10080              		.section	.text.f_chmod,"ax",%progbits
 10081              		.align	1
 10082              		.global	f_chmod
 10083              		.syntax unified
 10084              		.thumb
 10085              		.thumb_func
 10086              		.fpu fpv4-sp-d16
 10088              	f_chmod:
 10089              	.LVL1167:
 10090              	.LFB49:
3586:Core/Src/ff.c **** 	FRESULT res;
 10091              		.loc 1 3586 1 is_stmt 1 view -0
 10092              		.cfi_startproc
 10093              		@ args = 0, pretend = 0, frame = 56
 10094              		@ frame_needed = 0, uses_anonymous_args = 0
3586:Core/Src/ff.c **** 	FRESULT res;
 10095              		.loc 1 3586 1 is_stmt 0 view .LVU3448
 10096 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 10097              	.LCFI96:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 306


 10098              		.cfi_def_cfa_offset 20
 10099              		.cfi_offset 4, -20
 10100              		.cfi_offset 5, -16
 10101              		.cfi_offset 6, -12
 10102              		.cfi_offset 7, -8
 10103              		.cfi_offset 14, -4
 10104 0002 8FB0     		sub	sp, sp, #60
 10105              	.LCFI97:
 10106              		.cfi_def_cfa_offset 80
 10107 0004 0190     		str	r0, [sp, #4]
 10108 0006 0E46     		mov	r6, r1
 10109 0008 1546     		mov	r5, r2
3587:Core/Src/ff.c **** 	DIR dj;
 10110              		.loc 1 3587 2 is_stmt 1 view .LVU3449
3588:Core/Src/ff.c **** 	BYTE *dir;
 10111              		.loc 1 3588 2 view .LVU3450
3589:Core/Src/ff.c **** 	DEF_NAMEBUF;
 10112              		.loc 1 3589 2 view .LVU3451
3590:Core/Src/ff.c **** 
 10113              		.loc 1 3590 2 view .LVU3452
3590:Core/Src/ff.c **** 
 10114              		.loc 1 3590 2 view .LVU3453
3594:Core/Src/ff.c **** 	if (res == FR_OK) {
 10115              		.loc 1 3594 2 view .LVU3454
3594:Core/Src/ff.c **** 	if (res == FR_OK) {
 10116              		.loc 1 3594 8 is_stmt 0 view .LVU3455
 10117 000a 0122     		movs	r2, #1
 10118              	.LVL1168:
3594:Core/Src/ff.c **** 	if (res == FR_OK) {
 10119              		.loc 1 3594 8 view .LVU3456
 10120 000c 01A9     		add	r1, sp, #4
 10121              	.LVL1169:
3594:Core/Src/ff.c **** 	if (res == FR_OK) {
 10122              		.loc 1 3594 8 view .LVU3457
 10123 000e 05A8     		add	r0, sp, #20
 10124              	.LVL1170:
3594:Core/Src/ff.c **** 	if (res == FR_OK) {
 10125              		.loc 1 3594 8 view .LVU3458
 10126 0010 FFF7FEFF 		bl	find_volume
 10127              	.LVL1171:
3595:Core/Src/ff.c **** 		INIT_BUF(dj);
 10128              		.loc 1 3595 2 is_stmt 1 view .LVU3459
3595:Core/Src/ff.c **** 		INIT_BUF(dj);
 10129              		.loc 1 3595 5 is_stmt 0 view .LVU3460
 10130 0014 0446     		mov	r4, r0
 10131 0016 10B1     		cbz	r0, .L773
 10132              	.LVL1172:
 10133              	.L769:
3615:Core/Src/ff.c **** 
 10134              		.loc 1 3615 1 view .LVU3461
 10135 0018 2046     		mov	r0, r4
 10136 001a 0FB0     		add	sp, sp, #60
 10137              	.LCFI98:
 10138              		.cfi_remember_state
 10139              		.cfi_def_cfa_offset 20
 10140              		@ sp needed
 10141 001c F0BD     		pop	{r4, r5, r6, r7, pc}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 307


 10142              	.LVL1173:
 10143              	.L773:
 10144              	.LCFI99:
 10145              		.cfi_restore_state
3596:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10146              		.loc 1 3596 3 is_stmt 1 view .LVU3462
 10147 001e 4FF40070 		mov	r0, #512
 10148              	.LVL1174:
3596:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10149              		.loc 1 3596 3 is_stmt 0 view .LVU3463
 10150 0022 FFF7FEFF 		bl	ff_memalloc
 10151              	.LVL1175:
3596:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10152              		.loc 1 3596 3 is_stmt 1 view .LVU3464
 10153 0026 0746     		mov	r7, r0
 10154 0028 E8B1     		cbz	r0, .L770
3596:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10155              		.loc 1 3596 3 discriminator 2 view .LVU3465
 10156 002a 0C90     		str	r0, [sp, #48]
3596:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10157              		.loc 1 3596 3 discriminator 2 view .LVU3466
 10158 002c 02AB     		add	r3, sp, #8
 10159 002e 0B93     		str	r3, [sp, #44]
3596:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10160              		.loc 1 3596 15 discriminator 2 view .LVU3467
3597:Core/Src/ff.c **** 		FREE_BUF();
 10161              		.loc 1 3597 3 discriminator 2 view .LVU3468
3597:Core/Src/ff.c **** 		FREE_BUF();
 10162              		.loc 1 3597 9 is_stmt 0 discriminator 2 view .LVU3469
 10163 0030 0199     		ldr	r1, [sp, #4]
 10164 0032 05A8     		add	r0, sp, #20
 10165              	.LVL1176:
3597:Core/Src/ff.c **** 		FREE_BUF();
 10166              		.loc 1 3597 9 discriminator 2 view .LVU3470
 10167 0034 FFF7FEFF 		bl	follow_path
 10168              	.LVL1177:
 10169 0038 0446     		mov	r4, r0
 10170              	.LVL1178:
3598:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
 10171              		.loc 1 3598 3 is_stmt 1 discriminator 2 view .LVU3471
 10172 003a 3846     		mov	r0, r7
 10173 003c FFF7FEFF 		bl	ff_memfree
 10174              	.LVL1179:
3599:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
 10175              		.loc 1 3599 3 discriminator 2 view .LVU3472
3601:Core/Src/ff.c **** 			dir = dj.dir;
 10176              		.loc 1 3601 3 discriminator 2 view .LVU3473
3601:Core/Src/ff.c **** 			dir = dj.dir;
 10177              		.loc 1 3601 6 is_stmt 0 discriminator 2 view .LVU3474
 10178 0040 002C     		cmp	r4, #0
 10179 0042 E9D1     		bne	.L769
3602:Core/Src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
 10180              		.loc 1 3602 4 is_stmt 1 view .LVU3475
3602:Core/Src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
 10181              		.loc 1 3602 8 is_stmt 0 view .LVU3476
 10182 0044 0A98     		ldr	r0, [sp, #40]
 10183              	.LVL1180:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 308


3603:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
 10184              		.loc 1 3603 4 is_stmt 1 view .LVU3477
3603:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
 10185              		.loc 1 3603 7 is_stmt 0 view .LVU3478
 10186 0046 80B1     		cbz	r0, .L771
3606:Core/Src/ff.c **** 				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
 10187              		.loc 1 3606 5 is_stmt 1 view .LVU3479
3606:Core/Src/ff.c **** 				dir[DIR_Attr] = (value & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
 10188              		.loc 1 3606 10 is_stmt 0 view .LVU3480
 10189 0048 05F02702 		and	r2, r5, #39
 10190              	.LVL1181:
3607:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 10191              		.loc 1 3607 5 is_stmt 1 view .LVU3481
3607:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 10192              		.loc 1 3607 42 is_stmt 0 view .LVU3482
 10193 004c C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
3607:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 10194              		.loc 1 3607 19 view .LVU3483
 10195 004e 83EA0601 		eor	r1, r3, r6
 10196 0052 0A40     		ands	r2, r2, r1
 10197              	.LVL1182:
3607:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 10198              		.loc 1 3607 19 view .LVU3484
 10199 0054 5A40     		eors	r2, r2, r3
 10200 0056 C272     		strb	r2, [r0, #11]
3608:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10201              		.loc 1 3608 5 is_stmt 1 view .LVU3485
3608:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10202              		.loc 1 3608 7 is_stmt 0 view .LVU3486
 10203 0058 0598     		ldr	r0, [sp, #20]
 10204              	.LVL1183:
3608:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10205              		.loc 1 3608 18 view .LVU3487
 10206 005a 0123     		movs	r3, #1
 10207 005c 0371     		strb	r3, [r0, #4]
3609:Core/Src/ff.c **** 			}
 10208              		.loc 1 3609 5 is_stmt 1 view .LVU3488
3609:Core/Src/ff.c **** 			}
 10209              		.loc 1 3609 11 is_stmt 0 view .LVU3489
 10210 005e FFF7FEFF 		bl	sync_fs
 10211              	.LVL1184:
 10212 0062 0446     		mov	r4, r0
 10213              	.LVL1185:
3609:Core/Src/ff.c **** 			}
 10214              		.loc 1 3609 11 view .LVU3490
 10215 0064 D8E7     		b	.L769
 10216              	.LVL1186:
 10217              	.L770:
3596:Core/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 10218              		.loc 1 3596 3 view .LVU3491
 10219 0066 1124     		movs	r4, #17
 10220 0068 D6E7     		b	.L769
 10221              	.LVL1187:
 10222              	.L771:
3604:Core/Src/ff.c **** 			} else {						/* File or sub directory */
 10223              		.loc 1 3604 9 view .LVU3492
 10224 006a 0624     		movs	r4, #6
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 309


 10225              	.LVL1188:
3604:Core/Src/ff.c **** 			} else {						/* File or sub directory */
 10226              		.loc 1 3604 9 view .LVU3493
 10227 006c D4E7     		b	.L769
 10228              		.cfi_endproc
 10229              	.LFE49:
 10231              		.section	.text.f_utime,"ax",%progbits
 10232              		.align	1
 10233              		.global	f_utime
 10234              		.syntax unified
 10235              		.thumb
 10236              		.thumb_func
 10237              		.fpu fpv4-sp-d16
 10239              	f_utime:
 10240              	.LVL1189:
 10241              	.LFB50:
3628:Core/Src/ff.c **** 	FRESULT res;
 10242              		.loc 1 3628 1 is_stmt 1 view -0
 10243              		.cfi_startproc
 10244              		@ args = 0, pretend = 0, frame = 56
 10245              		@ frame_needed = 0, uses_anonymous_args = 0
3628:Core/Src/ff.c **** 	FRESULT res;
 10246              		.loc 1 3628 1 is_stmt 0 view .LVU3495
 10247 0000 70B5     		push	{r4, r5, r6, lr}
 10248              	.LCFI100:
 10249              		.cfi_def_cfa_offset 16
 10250              		.cfi_offset 4, -16
 10251              		.cfi_offset 5, -12
 10252              		.cfi_offset 6, -8
 10253              		.cfi_offset 14, -4
 10254 0002 8EB0     		sub	sp, sp, #56
 10255              	.LCFI101:
 10256              		.cfi_def_cfa_offset 72
 10257 0004 0190     		str	r0, [sp, #4]
 10258 0006 0D46     		mov	r5, r1
3629:Core/Src/ff.c **** 	DIR dj;
 10259              		.loc 1 3629 2 is_stmt 1 view .LVU3496
3630:Core/Src/ff.c **** 	BYTE *dir;
 10260              		.loc 1 3630 2 view .LVU3497
3631:Core/Src/ff.c **** 	DEF_NAMEBUF;
 10261              		.loc 1 3631 2 view .LVU3498
3632:Core/Src/ff.c **** 
 10262              		.loc 1 3632 2 view .LVU3499
3632:Core/Src/ff.c **** 
 10263              		.loc 1 3632 2 view .LVU3500
3636:Core/Src/ff.c **** 	if (res == FR_OK) {
 10264              		.loc 1 3636 2 view .LVU3501
3636:Core/Src/ff.c **** 	if (res == FR_OK) {
 10265              		.loc 1 3636 8 is_stmt 0 view .LVU3502
 10266 0008 0122     		movs	r2, #1
 10267 000a 01A9     		add	r1, sp, #4
 10268              	.LVL1190:
3636:Core/Src/ff.c **** 	if (res == FR_OK) {
 10269              		.loc 1 3636 8 view .LVU3503
 10270 000c 05A8     		add	r0, sp, #20
 10271              	.LVL1191:
3636:Core/Src/ff.c **** 	if (res == FR_OK) {
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 310


 10272              		.loc 1 3636 8 view .LVU3504
 10273 000e FFF7FEFF 		bl	find_volume
 10274              	.LVL1192:
3637:Core/Src/ff.c **** 		INIT_BUF(dj);
 10275              		.loc 1 3637 2 is_stmt 1 view .LVU3505
3637:Core/Src/ff.c **** 		INIT_BUF(dj);
 10276              		.loc 1 3637 5 is_stmt 0 view .LVU3506
 10277 0012 0446     		mov	r4, r0
 10278 0014 10B1     		cbz	r0, .L779
 10279              	.LVL1193:
 10280              	.L775:
3657:Core/Src/ff.c **** 
 10281              		.loc 1 3657 1 view .LVU3507
 10282 0016 2046     		mov	r0, r4
 10283 0018 0EB0     		add	sp, sp, #56
 10284              	.LCFI102:
 10285              		.cfi_remember_state
 10286              		.cfi_def_cfa_offset 16
 10287              		@ sp needed
 10288 001a 70BD     		pop	{r4, r5, r6, pc}
 10289              	.LVL1194:
 10290              	.L779:
 10291              	.LCFI103:
 10292              		.cfi_restore_state
3638:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10293              		.loc 1 3638 3 is_stmt 1 view .LVU3508
 10294 001c 4FF40070 		mov	r0, #512
 10295              	.LVL1195:
3638:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10296              		.loc 1 3638 3 is_stmt 0 view .LVU3509
 10297 0020 FFF7FEFF 		bl	ff_memalloc
 10298              	.LVL1196:
3638:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10299              		.loc 1 3638 3 is_stmt 1 view .LVU3510
 10300 0024 0646     		mov	r6, r0
 10301 0026 F8B1     		cbz	r0, .L776
3638:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10302              		.loc 1 3638 3 discriminator 2 view .LVU3511
 10303 0028 0C90     		str	r0, [sp, #48]
3638:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10304              		.loc 1 3638 3 discriminator 2 view .LVU3512
 10305 002a 02AB     		add	r3, sp, #8
 10306 002c 0B93     		str	r3, [sp, #44]
3638:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10307              		.loc 1 3638 15 discriminator 2 view .LVU3513
3639:Core/Src/ff.c **** 		FREE_BUF();
 10308              		.loc 1 3639 3 discriminator 2 view .LVU3514
3639:Core/Src/ff.c **** 		FREE_BUF();
 10309              		.loc 1 3639 9 is_stmt 0 discriminator 2 view .LVU3515
 10310 002e 0199     		ldr	r1, [sp, #4]
 10311 0030 05A8     		add	r0, sp, #20
 10312              	.LVL1197:
3639:Core/Src/ff.c **** 		FREE_BUF();
 10313              		.loc 1 3639 9 discriminator 2 view .LVU3516
 10314 0032 FFF7FEFF 		bl	follow_path
 10315              	.LVL1198:
 10316 0036 0446     		mov	r4, r0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 311


 10317              	.LVL1199:
3640:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NS] & NS_DOT))
 10318              		.loc 1 3640 3 is_stmt 1 discriminator 2 view .LVU3517
 10319 0038 3046     		mov	r0, r6
 10320 003a FFF7FEFF 		bl	ff_memfree
 10321              	.LVL1200:
3641:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
 10322              		.loc 1 3641 3 discriminator 2 view .LVU3518
3643:Core/Src/ff.c **** 			dir = dj.dir;
 10323              		.loc 1 3643 3 discriminator 2 view .LVU3519
3643:Core/Src/ff.c **** 			dir = dj.dir;
 10324              		.loc 1 3643 6 is_stmt 0 discriminator 2 view .LVU3520
 10325 003e 002C     		cmp	r4, #0
 10326 0040 E9D1     		bne	.L775
3644:Core/Src/ff.c **** 			if (!dir) {					/* Root directory */
 10327              		.loc 1 3644 4 is_stmt 1 view .LVU3521
3644:Core/Src/ff.c **** 			if (!dir) {					/* Root directory */
 10328              		.loc 1 3644 8 is_stmt 0 view .LVU3522
 10329 0042 0A9B     		ldr	r3, [sp, #40]
 10330              	.LVL1201:
3645:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
 10331              		.loc 1 3645 4 is_stmt 1 view .LVU3523
3645:Core/Src/ff.c **** 				res = FR_INVALID_NAME;
 10332              		.loc 1 3645 7 is_stmt 0 view .LVU3524
 10333 0044 93B1     		cbz	r3, .L777
3648:Core/Src/ff.c **** 				ST_WORD(dir+DIR_WrtDate, fno->fdate);
 10334              		.loc 1 3648 5 is_stmt 1 view .LVU3525
 10335 0046 AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 10336 0048 9A75     		strb	r2, [r3, #22]
3648:Core/Src/ff.c **** 				ST_WORD(dir+DIR_WrtDate, fno->fdate);
 10337              		.loc 1 3648 5 view .LVU3526
 10338 004a EA88     		ldrh	r2, [r5, #6]
 10339 004c 120A     		lsrs	r2, r2, #8
 10340 004e DA75     		strb	r2, [r3, #23]
3649:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 10341              		.loc 1 3649 5 view .LVU3527
 10342 0050 2A79     		ldrb	r2, [r5, #4]	@ zero_extendqisi2
 10343 0052 1A76     		strb	r2, [r3, #24]
3649:Core/Src/ff.c **** 				dj.fs->wflag = 1;
 10344              		.loc 1 3649 5 view .LVU3528
 10345 0054 AA88     		ldrh	r2, [r5, #4]
 10346 0056 120A     		lsrs	r2, r2, #8
 10347 0058 5A76     		strb	r2, [r3, #25]
3650:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10348              		.loc 1 3650 5 view .LVU3529
3650:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10349              		.loc 1 3650 7 is_stmt 0 view .LVU3530
 10350 005a 0598     		ldr	r0, [sp, #20]
3650:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10351              		.loc 1 3650 18 view .LVU3531
 10352 005c 0123     		movs	r3, #1
 10353              	.LVL1202:
3650:Core/Src/ff.c **** 				res = sync_fs(dj.fs);
 10354              		.loc 1 3650 18 view .LVU3532
 10355 005e 0371     		strb	r3, [r0, #4]
3651:Core/Src/ff.c **** 			}
 10356              		.loc 1 3651 5 is_stmt 1 view .LVU3533
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 312


3651:Core/Src/ff.c **** 			}
 10357              		.loc 1 3651 11 is_stmt 0 view .LVU3534
 10358 0060 FFF7FEFF 		bl	sync_fs
 10359              	.LVL1203:
 10360 0064 0446     		mov	r4, r0
 10361              	.LVL1204:
3651:Core/Src/ff.c **** 			}
 10362              		.loc 1 3651 11 view .LVU3535
 10363 0066 D6E7     		b	.L775
 10364              	.LVL1205:
 10365              	.L776:
3638:Core/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 10366              		.loc 1 3638 3 view .LVU3536
 10367 0068 1124     		movs	r4, #17
 10368 006a D4E7     		b	.L775
 10369              	.LVL1206:
 10370              	.L777:
3646:Core/Src/ff.c **** 			} else {					/* File or sub-directory */
 10371              		.loc 1 3646 9 view .LVU3537
 10372 006c 0624     		movs	r4, #6
 10373              	.LVL1207:
3646:Core/Src/ff.c **** 			} else {					/* File or sub-directory */
 10374              		.loc 1 3646 9 view .LVU3538
 10375 006e D2E7     		b	.L775
 10376              		.cfi_endproc
 10377              	.LFE50:
 10379              		.section	.text.f_rename,"ax",%progbits
 10380              		.align	1
 10381              		.global	f_rename
 10382              		.syntax unified
 10383              		.thumb
 10384              		.thumb_func
 10385              		.fpu fpv4-sp-d16
 10387              	f_rename:
 10388              	.LVL1208:
 10389              	.LFB51:
3670:Core/Src/ff.c **** 	FRESULT res;
 10390              		.loc 1 3670 1 is_stmt 1 view -0
 10391              		.cfi_startproc
 10392              		@ args = 0, pretend = 0, frame = 120
 10393              		@ frame_needed = 0, uses_anonymous_args = 0
3670:Core/Src/ff.c **** 	FRESULT res;
 10394              		.loc 1 3670 1 is_stmt 0 view .LVU3540
 10395 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 10396              	.LCFI104:
 10397              		.cfi_def_cfa_offset 20
 10398              		.cfi_offset 4, -20
 10399              		.cfi_offset 5, -16
 10400              		.cfi_offset 6, -12
 10401              		.cfi_offset 7, -8
 10402              		.cfi_offset 14, -4
 10403 0002 9FB0     		sub	sp, sp, #124
 10404              	.LCFI105:
 10405              		.cfi_def_cfa_offset 144
 10406 0004 0190     		str	r0, [sp, #4]
 10407 0006 0091     		str	r1, [sp]
3671:Core/Src/ff.c **** 	DIR djo, djn;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 313


 10408              		.loc 1 3671 2 is_stmt 1 view .LVU3541
3672:Core/Src/ff.c **** 	BYTE buf[21], *dir;
 10409              		.loc 1 3672 2 view .LVU3542
3673:Core/Src/ff.c **** 	DWORD dw;
 10410              		.loc 1 3673 2 view .LVU3543
3674:Core/Src/ff.c **** 	DEF_NAMEBUF;
 10411              		.loc 1 3674 2 view .LVU3544
3675:Core/Src/ff.c **** 
 10412              		.loc 1 3675 2 view .LVU3545
3675:Core/Src/ff.c **** 
 10413              		.loc 1 3675 2 view .LVU3546
3679:Core/Src/ff.c **** 	if (res == FR_OK) {
 10414              		.loc 1 3679 2 view .LVU3547
3679:Core/Src/ff.c **** 	if (res == FR_OK) {
 10415              		.loc 1 3679 8 is_stmt 0 view .LVU3548
 10416 0008 0122     		movs	r2, #1
 10417 000a 01A9     		add	r1, sp, #4
 10418              	.LVL1209:
3679:Core/Src/ff.c **** 	if (res == FR_OK) {
 10419              		.loc 1 3679 8 view .LVU3549
 10420 000c 15A8     		add	r0, sp, #84
 10421              	.LVL1210:
3679:Core/Src/ff.c **** 	if (res == FR_OK) {
 10422              		.loc 1 3679 8 view .LVU3550
 10423 000e FFF7FEFF 		bl	find_volume
 10424              	.LVL1211:
3680:Core/Src/ff.c **** 		djn.fs = djo.fs;
 10425              		.loc 1 3680 2 is_stmt 1 view .LVU3551
3680:Core/Src/ff.c **** 		djn.fs = djo.fs;
 10426              		.loc 1 3680 5 is_stmt 0 view .LVU3552
 10427 0012 0446     		mov	r4, r0
 10428 0014 10B1     		cbz	r0, .L794
 10429              	.LVL1212:
 10430              	.L781:
3736:Core/Src/ff.c **** 
 10431              		.loc 1 3736 1 view .LVU3553
 10432 0016 2046     		mov	r0, r4
 10433 0018 1FB0     		add	sp, sp, #124
 10434              	.LCFI106:
 10435              		.cfi_remember_state
 10436              		.cfi_def_cfa_offset 20
 10437              		@ sp needed
 10438 001a F0BD     		pop	{r4, r5, r6, r7, pc}
 10439              	.LVL1213:
 10440              	.L794:
 10441              	.LCFI107:
 10442              		.cfi_restore_state
3681:Core/Src/ff.c **** 		INIT_BUF(djo);
 10443              		.loc 1 3681 3 is_stmt 1 view .LVU3554
3681:Core/Src/ff.c **** 		INIT_BUF(djo);
 10444              		.loc 1 3681 15 is_stmt 0 view .LVU3555
 10445 001c 159B     		ldr	r3, [sp, #84]
3681:Core/Src/ff.c **** 		INIT_BUF(djo);
 10446              		.loc 1 3681 10 view .LVU3556
 10447 001e 0C93     		str	r3, [sp, #48]
3682:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 10448              		.loc 1 3682 3 is_stmt 1 view .LVU3557
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 314


 10449 0020 4FF40070 		mov	r0, #512
 10450              	.LVL1214:
3682:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 10451              		.loc 1 3682 3 is_stmt 0 view .LVU3558
 10452 0024 FFF7FEFF 		bl	ff_memalloc
 10453              	.LVL1215:
3682:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 10454              		.loc 1 3682 3 is_stmt 1 view .LVU3559
 10455 0028 0546     		mov	r5, r0
 10456 002a 0028     		cmp	r0, #0
 10457 002c 7ED0     		beq	.L787
3682:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 10458              		.loc 1 3682 3 discriminator 2 view .LVU3560
 10459 002e 1C90     		str	r0, [sp, #112]
3682:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 10460              		.loc 1 3682 3 discriminator 2 view .LVU3561
 10461 0030 03AB     		add	r3, sp, #12
 10462 0032 1B93     		str	r3, [sp, #108]
3682:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 10463              		.loc 1 3682 16 discriminator 2 view .LVU3562
3683:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NS] & NS_DOT))
 10464              		.loc 1 3683 3 discriminator 2 view .LVU3563
3683:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NS] & NS_DOT))
 10465              		.loc 1 3683 9 is_stmt 0 discriminator 2 view .LVU3564
 10466 0034 0199     		ldr	r1, [sp, #4]
 10467 0036 15A8     		add	r0, sp, #84
 10468              	.LVL1216:
3683:Core/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NS] & NS_DOT))
 10469              		.loc 1 3683 9 discriminator 2 view .LVU3565
 10470 0038 FFF7FEFF 		bl	follow_path
 10471              	.LVL1217:
3684:Core/Src/ff.c **** 			res = FR_INVALID_NAME;
 10472              		.loc 1 3684 3 is_stmt 1 discriminator 2 view .LVU3566
3689:Core/Src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
 10473              		.loc 1 3689 3 discriminator 2 view .LVU3567
3689:Core/Src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
 10474              		.loc 1 3689 6 is_stmt 0 discriminator 2 view .LVU3568
 10475 003c 0446     		mov	r4, r0
 10476 003e 0028     		cmp	r0, #0
 10477 0040 70D1     		bne	.L782
3690:Core/Src/ff.c **** 				res = FR_NO_FILE;
 10478              		.loc 1 3690 4 is_stmt 1 view .LVU3569
3690:Core/Src/ff.c **** 				res = FR_NO_FILE;
 10479              		.loc 1 3690 12 is_stmt 0 view .LVU3570
 10480 0042 1A99     		ldr	r1, [sp, #104]
3690:Core/Src/ff.c **** 				res = FR_NO_FILE;
 10481              		.loc 1 3690 7 view .LVU3571
 10482 0044 0029     		cmp	r1, #0
 10483 0046 6CD0     		beq	.L788
3693:Core/Src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10484              		.loc 1 3693 5 is_stmt 1 view .LVU3572
 10485 0048 1522     		movs	r2, #21
 10486 004a 0B31     		adds	r1, r1, #11
 10487 004c 06A8     		add	r0, sp, #24
 10488              	.LVL1218:
3693:Core/Src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 10489              		.loc 1 3693 5 is_stmt 0 view .LVU3573
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 315


 10490 004e FFF7FEFF 		bl	mem_cpy
 10491              	.LVL1219:
3694:Core/Src/ff.c **** 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
 10492              		.loc 1 3694 5 is_stmt 1 view .LVU3574
 10493 0052 2422     		movs	r2, #36
 10494 0054 15A9     		add	r1, sp, #84
 10495 0056 0CA8     		add	r0, sp, #48
 10496 0058 FFF7FEFF 		bl	mem_cpy
 10497              	.LVL1220:
3695:Core/Src/ff.c **** 					res = follow_path(&djn, path_new);	/* and check if new object is exist */
 10498              		.loc 1 3695 5 view .LVU3575
3695:Core/Src/ff.c **** 					res = follow_path(&djn, path_new);	/* and check if new object is exist */
 10499              		.loc 1 3695 9 is_stmt 0 view .LVU3576
 10500 005c 6846     		mov	r0, sp
 10501 005e FFF7FEFF 		bl	get_ldnumber
 10502              	.LVL1221:
3695:Core/Src/ff.c **** 					res = follow_path(&djn, path_new);	/* and check if new object is exist */
 10503              		.loc 1 3695 8 view .LVU3577
 10504 0062 0028     		cmp	r0, #0
 10505 0064 2CDA     		bge	.L795
3698:Core/Src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
 10506              		.loc 1 3698 10 view .LVU3578
 10507 0066 0B24     		movs	r4, #11
 10508              	.L783:
 10509              	.LVL1222:
3700:Core/Src/ff.c **** /* Start critical section that any interruption can cause a cross-link */
 10510              		.loc 1 3700 5 is_stmt 1 view .LVU3579
3700:Core/Src/ff.c **** /* Start critical section that any interruption can cause a cross-link */
 10511              		.loc 1 3700 8 is_stmt 0 view .LVU3580
 10512 0068 042C     		cmp	r4, #4
 10513 006a 5BD1     		bne	.L782
3702:Core/Src/ff.c **** 					if (res == FR_OK) {
 10514              		.loc 1 3702 6 is_stmt 1 view .LVU3581
3702:Core/Src/ff.c **** 					if (res == FR_OK) {
 10515              		.loc 1 3702 12 is_stmt 0 view .LVU3582
 10516 006c 0CA8     		add	r0, sp, #48
 10517 006e FFF7FEFF 		bl	dir_register
 10518              	.LVL1223:
3703:Core/Src/ff.c **** 						dir = djn.dir;					/* Copy object information except name */
 10519              		.loc 1 3703 6 is_stmt 1 view .LVU3583
3703:Core/Src/ff.c **** 						dir = djn.dir;					/* Copy object information except name */
 10520              		.loc 1 3703 9 is_stmt 0 view .LVU3584
 10521 0072 0446     		mov	r4, r0
 10522 0074 0028     		cmp	r0, #0
 10523 0076 55D1     		bne	.L782
3704:Core/Src/ff.c **** 						mem_cpy(dir+13, buf+2, 19);
 10524              		.loc 1 3704 7 is_stmt 1 view .LVU3585
3704:Core/Src/ff.c **** 						mem_cpy(dir+13, buf+2, 19);
 10525              		.loc 1 3704 11 is_stmt 0 view .LVU3586
 10526 0078 119E     		ldr	r6, [sp, #68]
 10527              	.LVL1224:
3705:Core/Src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 10528              		.loc 1 3705 7 is_stmt 1 view .LVU3587
 10529 007a 1322     		movs	r2, #19
 10530 007c 0DF11A01 		add	r1, sp, #26
 10531 0080 06F10D00 		add	r0, r6, #13
 10532              	.LVL1225:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 316


3705:Core/Src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 10533              		.loc 1 3705 7 is_stmt 0 view .LVU3588
 10534 0084 FFF7FEFF 		bl	mem_cpy
 10535              	.LVL1226:
3706:Core/Src/ff.c **** 						djo.fs->wflag = 1;
 10536              		.loc 1 3706 7 is_stmt 1 view .LVU3589
3706:Core/Src/ff.c **** 						djo.fs->wflag = 1;
 10537              		.loc 1 3706 26 is_stmt 0 view .LVU3590
 10538 0088 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
3706:Core/Src/ff.c **** 						djo.fs->wflag = 1;
 10539              		.loc 1 3706 21 view .LVU3591
 10540 008c 43F02003 		orr	r3, r3, #32
 10541 0090 F372     		strb	r3, [r6, #11]
3707:Core/Src/ff.c **** 						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the direct
 10542              		.loc 1 3707 7 is_stmt 1 view .LVU3592
3707:Core/Src/ff.c **** 						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the direct
 10543              		.loc 1 3707 10 is_stmt 0 view .LVU3593
 10544 0092 159F     		ldr	r7, [sp, #84]
3707:Core/Src/ff.c **** 						if (djo.sclust != djn.sclust && (dir[DIR_Attr] & AM_DIR)) {		/* Update .. entry in the direct
 10545              		.loc 1 3707 21 view .LVU3594
 10546 0094 0123     		movs	r3, #1
 10547 0096 3B71     		strb	r3, [r7, #4]
3708:Core/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 10548              		.loc 1 3708 7 is_stmt 1 view .LVU3595
3708:Core/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 10549              		.loc 1 3708 10 is_stmt 0 view .LVU3596
 10550 0098 179A     		ldr	r2, [sp, #92]
 10551 009a 0E9B     		ldr	r3, [sp, #56]
 10552 009c 9A42     		cmp	r2, r3
 10553 009e 25D0     		beq	.L784
3708:Core/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 10554              		.loc 1 3708 43 discriminator 1 view .LVU3597
 10555 00a0 F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
3708:Core/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 10556              		.loc 1 3708 36 discriminator 1 view .LVU3598
 10557 00a2 13F0100F 		tst	r3, #16
 10558 00a6 21D0     		beq	.L784
3709:Core/Src/ff.c **** 							if (!dw) {
 10559              		.loc 1 3709 8 is_stmt 1 view .LVU3599
3709:Core/Src/ff.c **** 							if (!dw) {
 10560              		.loc 1 3709 13 is_stmt 0 view .LVU3600
 10561 00a8 3146     		mov	r1, r6
 10562 00aa 3846     		mov	r0, r7
 10563 00ac FFF7FEFF 		bl	ld_clust
 10564              	.LVL1227:
 10565 00b0 0146     		mov	r1, r0
 10566 00b2 3846     		mov	r0, r7
 10567 00b4 FFF7FEFF 		bl	clust2sect
 10568              	.LVL1228:
3710:Core/Src/ff.c **** 								res = FR_INT_ERR;
 10569              		.loc 1 3710 8 is_stmt 1 view .LVU3601
3710:Core/Src/ff.c **** 								res = FR_INT_ERR;
 10570              		.loc 1 3710 11 is_stmt 0 view .LVU3602
 10571 00b8 0146     		mov	r1, r0
 10572 00ba 50B9     		cbnz	r0, .L796
3711:Core/Src/ff.c **** 							} else {
 10573              		.loc 1 3711 13 view .LVU3603
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 317


 10574 00bc 0224     		movs	r4, #2
 10575 00be 31E0     		b	.L782
 10576              	.LVL1229:
 10577              	.L795:
3696:Core/Src/ff.c **** 				else
 10578              		.loc 1 3696 6 is_stmt 1 view .LVU3604
3696:Core/Src/ff.c **** 				else
 10579              		.loc 1 3696 12 is_stmt 0 view .LVU3605
 10580 00c0 0099     		ldr	r1, [sp]
 10581 00c2 0CA8     		add	r0, sp, #48
 10582 00c4 FFF7FEFF 		bl	follow_path
 10583              	.LVL1230:
3699:Core/Src/ff.c **** 				if (res == FR_NO_FILE) { 				/* Is it a valid path and no name collision? */
 10584              		.loc 1 3699 5 is_stmt 1 view .LVU3606
3699:Core/Src/ff.c **** 				if (res == FR_NO_FILE) { 				/* Is it a valid path and no name collision? */
 10585              		.loc 1 3699 8 is_stmt 0 view .LVU3607
 10586 00c8 0446     		mov	r4, r0
 10587 00ca 0028     		cmp	r0, #0
 10588 00cc CCD1     		bne	.L783
3699:Core/Src/ff.c **** 				if (res == FR_NO_FILE) { 				/* Is it a valid path and no name collision? */
 10589              		.loc 1 3699 27 view .LVU3608
 10590 00ce 0824     		movs	r4, #8
 10591 00d0 28E0     		b	.L782
 10592              	.LVL1231:
 10593              	.L796:
3713:Core/Src/ff.c **** 								dir = djo.fs->win+SZ_DIR;	/* .. entry */
 10594              		.loc 1 3713 9 is_stmt 1 view .LVU3609
3713:Core/Src/ff.c **** 								dir = djo.fs->win+SZ_DIR;	/* .. entry */
 10595              		.loc 1 3713 15 is_stmt 0 view .LVU3610
 10596 00d2 3846     		mov	r0, r7
 10597              	.LVL1232:
3713:Core/Src/ff.c **** 								dir = djo.fs->win+SZ_DIR;	/* .. entry */
 10598              		.loc 1 3713 15 view .LVU3611
 10599 00d4 FFF7FEFF 		bl	move_window
 10600              	.LVL1233:
3713:Core/Src/ff.c **** 								dir = djo.fs->win+SZ_DIR;	/* .. entry */
 10601              		.loc 1 3713 15 view .LVU3612
 10602 00d8 0246     		mov	r2, r0
 10603              	.LVL1234:
3714:Core/Src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 10604              		.loc 1 3714 9 is_stmt 1 view .LVU3613
3714:Core/Src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 10605              		.loc 1 3714 18 is_stmt 0 view .LVU3614
 10606 00da 159B     		ldr	r3, [sp, #84]
3714:Core/Src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 10607              		.loc 1 3714 13 view .LVU3615
 10608 00dc 03F15000 		add	r0, r3, #80
 10609              	.LVL1235:
3715:Core/Src/ff.c **** 									dw = (djo.fs->fs_type == FS_FAT32 && djn.sclust == djo.fs->dirbase) ? 0 : djn.sclust;
 10610              		.loc 1 3715 9 is_stmt 1 view .LVU3616
3715:Core/Src/ff.c **** 									dw = (djo.fs->fs_type == FS_FAT32 && djn.sclust == djo.fs->dirbase) ? 0 : djn.sclust;
 10611              		.loc 1 3715 12 is_stmt 0 view .LVU3617
 10612 00e0 1446     		mov	r4, r2
 10613 00e2 1AB9     		cbnz	r2, .L784
3715:Core/Src/ff.c **** 									dw = (djo.fs->fs_type == FS_FAT32 && djn.sclust == djo.fs->dirbase) ? 0 : djn.sclust;
 10614              		.loc 1 3715 32 discriminator 1 view .LVU3618
 10615 00e4 93F85120 		ldrb	r2, [r3, #81]	@ zero_extendqisi2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 318


 10616              	.LVL1236:
3715:Core/Src/ff.c **** 									dw = (djo.fs->fs_type == FS_FAT32 && djn.sclust == djo.fs->dirbase) ? 0 : djn.sclust;
 10617              		.loc 1 3715 26 discriminator 1 view .LVU3619
 10618 00e8 2E2A     		cmp	r2, #46
 10619 00ea 0AD0     		beq	.L797
 10620              	.LVL1237:
 10621              	.L784:
3722:Core/Src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
 10622              		.loc 1 3722 7 is_stmt 1 view .LVU3620
3722:Core/Src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
 10623              		.loc 1 3722 10 is_stmt 0 view .LVU3621
 10624 00ec D4B9     		cbnz	r4, .L782
3723:Core/Src/ff.c **** 							if (res == FR_OK)
 10625              		.loc 1 3723 8 is_stmt 1 view .LVU3622
3723:Core/Src/ff.c **** 							if (res == FR_OK)
 10626              		.loc 1 3723 14 is_stmt 0 view .LVU3623
 10627 00ee 15A8     		add	r0, sp, #84
 10628 00f0 FFF7FEFF 		bl	dir_remove
 10629              	.LVL1238:
3724:Core/Src/ff.c **** 								res = sync_fs(djo.fs);
 10630              		.loc 1 3724 8 is_stmt 1 view .LVU3624
3724:Core/Src/ff.c **** 								res = sync_fs(djo.fs);
 10631              		.loc 1 3724 11 is_stmt 0 view .LVU3625
 10632 00f4 0446     		mov	r4, r0
 10633 00f6 A8B9     		cbnz	r0, .L782
3725:Core/Src/ff.c **** 						}
 10634              		.loc 1 3725 9 is_stmt 1 view .LVU3626
3725:Core/Src/ff.c **** 						}
 10635              		.loc 1 3725 15 is_stmt 0 view .LVU3627
 10636 00f8 1598     		ldr	r0, [sp, #84]
 10637              	.LVL1239:
3725:Core/Src/ff.c **** 						}
 10638              		.loc 1 3725 15 view .LVU3628
 10639 00fa FFF7FEFF 		bl	sync_fs
 10640              	.LVL1240:
 10641 00fe 0446     		mov	r4, r0
 10642              	.LVL1241:
3725:Core/Src/ff.c **** 						}
 10643              		.loc 1 3725 15 view .LVU3629
 10644 0100 10E0     		b	.L782
 10645              	.LVL1242:
 10646              	.L797:
3716:Core/Src/ff.c **** 									st_clust(dir, dw);
 10647              		.loc 1 3716 10 is_stmt 1 view .LVU3630
3716:Core/Src/ff.c **** 									st_clust(dir, dw);
 10648              		.loc 1 3716 22 is_stmt 0 view .LVU3631
 10649 0102 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
3716:Core/Src/ff.c **** 									st_clust(dir, dw);
 10650              		.loc 1 3716 82 view .LVU3632
 10651 0104 032A     		cmp	r2, #3
 10652 0106 06D0     		beq	.L798
 10653              	.L785:
3716:Core/Src/ff.c **** 									st_clust(dir, dw);
 10654              		.loc 1 3716 82 discriminator 3 view .LVU3633
 10655 0108 0E99     		ldr	r1, [sp, #56]
 10656              	.L786:
 10657              	.LVL1243:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 319


3717:Core/Src/ff.c **** 									djo.fs->wflag = 1;
 10658              		.loc 1 3717 10 is_stmt 1 discriminator 6 view .LVU3634
 10659 010a FFF7FEFF 		bl	st_clust
 10660              	.LVL1244:
3718:Core/Src/ff.c **** 								}
 10661              		.loc 1 3718 10 discriminator 6 view .LVU3635
3718:Core/Src/ff.c **** 								}
 10662              		.loc 1 3718 24 is_stmt 0 discriminator 6 view .LVU3636
 10663 010e 159B     		ldr	r3, [sp, #84]
 10664 0110 0122     		movs	r2, #1
 10665 0112 1A71     		strb	r2, [r3, #4]
 10666 0114 EAE7     		b	.L784
 10667              	.LVL1245:
 10668              	.L798:
3716:Core/Src/ff.c **** 									st_clust(dir, dw);
 10669              		.loc 1 3716 67 discriminator 2 view .LVU3637
 10670 0116 5B6A     		ldr	r3, [r3, #36]
3716:Core/Src/ff.c **** 									st_clust(dir, dw);
 10671              		.loc 1 3716 44 discriminator 2 view .LVU3638
 10672 0118 0E9A     		ldr	r2, [sp, #56]
 10673 011a 9A42     		cmp	r2, r3
 10674 011c F4D1     		bne	.L785
3716:Core/Src/ff.c **** 									st_clust(dir, dw);
 10675              		.loc 1 3716 82 view .LVU3639
 10676 011e 0021     		movs	r1, #0
 10677 0120 F3E7     		b	.L786
 10678              	.LVL1246:
 10679              	.L788:
3691:Core/Src/ff.c **** 			} else {
 10680              		.loc 1 3691 9 view .LVU3640
 10681 0122 0424     		movs	r4, #4
 10682              	.LVL1247:
 10683              	.L782:
3732:Core/Src/ff.c **** 	}
 10684              		.loc 1 3732 3 is_stmt 1 view .LVU3641
 10685 0124 2846     		mov	r0, r5
 10686 0126 FFF7FEFF 		bl	ff_memfree
 10687              	.LVL1248:
 10688 012a 74E7     		b	.L781
 10689              	.LVL1249:
 10690              	.L787:
3682:Core/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 10691              		.loc 1 3682 3 is_stmt 0 view .LVU3642
 10692 012c 1124     		movs	r4, #17
 10693 012e 72E7     		b	.L781
 10694              		.cfi_endproc
 10695              	.LFE51:
 10697              		.section	.text.f_getlabel,"ax",%progbits
 10698              		.align	1
 10699              		.global	f_getlabel
 10700              		.syntax unified
 10701              		.thumb
 10702              		.thumb_func
 10703              		.fpu fpv4-sp-d16
 10705              	f_getlabel:
 10706              	.LVL1250:
 10707              	.LFB52:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 320


3755:Core/Src/ff.c **** 	FRESULT res;
 10708              		.loc 1 3755 1 is_stmt 1 view -0
 10709              		.cfi_startproc
 10710              		@ args = 0, pretend = 0, frame = 48
 10711              		@ frame_needed = 0, uses_anonymous_args = 0
3755:Core/Src/ff.c **** 	FRESULT res;
 10712              		.loc 1 3755 1 is_stmt 0 view .LVU3644
 10713 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 10714              	.LCFI108:
 10715              		.cfi_def_cfa_offset 20
 10716              		.cfi_offset 4, -20
 10717              		.cfi_offset 5, -16
 10718              		.cfi_offset 6, -12
 10719              		.cfi_offset 7, -8
 10720              		.cfi_offset 14, -4
 10721 0002 8DB0     		sub	sp, sp, #52
 10722              	.LCFI109:
 10723              		.cfi_def_cfa_offset 72
 10724 0004 0190     		str	r0, [sp, #4]
 10725 0006 0C46     		mov	r4, r1
 10726 0008 1546     		mov	r5, r2
3756:Core/Src/ff.c **** 	DIR dj;
 10727              		.loc 1 3756 2 is_stmt 1 view .LVU3645
3757:Core/Src/ff.c **** 	UINT i, j;
 10728              		.loc 1 3757 2 view .LVU3646
3758:Core/Src/ff.c **** 
 10729              		.loc 1 3758 2 view .LVU3647
3762:Core/Src/ff.c **** 
 10730              		.loc 1 3762 2 view .LVU3648
3762:Core/Src/ff.c **** 
 10731              		.loc 1 3762 8 is_stmt 0 view .LVU3649
 10732 000a 0022     		movs	r2, #0
 10733              	.LVL1251:
3762:Core/Src/ff.c **** 
 10734              		.loc 1 3762 8 view .LVU3650
 10735 000c 01A9     		add	r1, sp, #4
 10736              	.LVL1252:
3762:Core/Src/ff.c **** 
 10737              		.loc 1 3762 8 view .LVU3651
 10738 000e 03A8     		add	r0, sp, #12
 10739              	.LVL1253:
3762:Core/Src/ff.c **** 
 10740              		.loc 1 3762 8 view .LVU3652
 10741 0010 FFF7FEFF 		bl	find_volume
 10742              	.LVL1254:
3765:Core/Src/ff.c **** 		dj.sclust = 0;					/* Open root directory */
 10743              		.loc 1 3765 2 is_stmt 1 view .LVU3653
3765:Core/Src/ff.c **** 		dj.sclust = 0;					/* Open root directory */
 10744              		.loc 1 3765 5 is_stmt 0 view .LVU3654
 10745 0014 0646     		mov	r6, r0
 10746 0016 38B9     		cbnz	r0, .L800
3765:Core/Src/ff.c **** 		dj.sclust = 0;					/* Open root directory */
 10747              		.loc 1 3765 19 discriminator 1 view .LVU3655
 10748 0018 34B1     		cbz	r4, .L800
3766:Core/Src/ff.c **** 		res = dir_sdi(&dj, 0);
 10749              		.loc 1 3766 3 is_stmt 1 view .LVU3656
3766:Core/Src/ff.c **** 		res = dir_sdi(&dj, 0);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 321


 10750              		.loc 1 3766 13 is_stmt 0 view .LVU3657
 10751 001a 0021     		movs	r1, #0
 10752 001c 0591     		str	r1, [sp, #20]
3767:Core/Src/ff.c **** 		if (res == FR_OK) {
 10753              		.loc 1 3767 3 is_stmt 1 view .LVU3658
3767:Core/Src/ff.c **** 		if (res == FR_OK) {
 10754              		.loc 1 3767 9 is_stmt 0 view .LVU3659
 10755 001e 03A8     		add	r0, sp, #12
 10756              	.LVL1255:
3767:Core/Src/ff.c **** 		if (res == FR_OK) {
 10757              		.loc 1 3767 9 view .LVU3660
 10758 0020 FFF7FEFF 		bl	dir_sdi
 10759              	.LVL1256:
3768:Core/Src/ff.c **** 			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
 10760              		.loc 1 3768 3 is_stmt 1 view .LVU3661
3768:Core/Src/ff.c **** 			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
 10761              		.loc 1 3768 6 is_stmt 0 view .LVU3662
 10762 0024 0646     		mov	r6, r0
 10763 0026 F8B1     		cbz	r0, .L809
 10764              	.LVL1257:
 10765              	.L800:
3797:Core/Src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
 10766              		.loc 1 3797 2 is_stmt 1 view .LVU3663
3797:Core/Src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
 10767              		.loc 1 3797 5 is_stmt 0 view .LVU3664
 10768 0028 DEB9     		cbnz	r6, .L804
 10769              	.LVL1258:
 10770              	.L803:
3797:Core/Src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
 10771              		.loc 1 3797 19 discriminator 1 view .LVU3665
 10772 002a D5B1     		cbz	r5, .L804
3798:Core/Src/ff.c **** 		if (res == FR_OK) {
 10773              		.loc 1 3798 3 is_stmt 1 view .LVU3666
3798:Core/Src/ff.c **** 		if (res == FR_OK) {
 10774              		.loc 1 3798 9 is_stmt 0 view .LVU3667
 10775 002c 0398     		ldr	r0, [sp, #12]
 10776 002e C169     		ldr	r1, [r0, #28]
 10777 0030 FFF7FEFF 		bl	move_window
 10778              	.LVL1259:
3799:Core/Src/ff.c **** 			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
 10779              		.loc 1 3799 3 is_stmt 1 view .LVU3668
3799:Core/Src/ff.c **** 			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
 10780              		.loc 1 3799 6 is_stmt 0 view .LVU3669
 10781 0034 0646     		mov	r6, r0
 10782 0036 A0B9     		cbnz	r0, .L804
3800:Core/Src/ff.c **** 			*sn = LD_DWORD(&dj.fs->win[i]);
 10783              		.loc 1 3800 4 is_stmt 1 view .LVU3670
3800:Core/Src/ff.c **** 			*sn = LD_DWORD(&dj.fs->win[i]);
 10784              		.loc 1 3800 10 is_stmt 0 view .LVU3671
 10785 0038 039A     		ldr	r2, [sp, #12]
3800:Core/Src/ff.c **** 			*sn = LD_DWORD(&dj.fs->win[i]);
 10786              		.loc 1 3800 13 view .LVU3672
 10787 003a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
3800:Core/Src/ff.c **** 			*sn = LD_DWORD(&dj.fs->win[i]);
 10788              		.loc 1 3800 48 view .LVU3673
 10789 003c 032B     		cmp	r3, #3
 10790 003e 2FD0     		beq	.L810
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 322


 10791 0040 2720     		movs	r0, #39
 10792              	.LVL1260:
 10793              	.L805:
3801:Core/Src/ff.c **** 		}
 10794              		.loc 1 3801 4 is_stmt 1 discriminator 4 view .LVU3674
3801:Core/Src/ff.c **** 		}
 10795              		.loc 1 3801 10 is_stmt 0 discriminator 4 view .LVU3675
 10796 0042 00F13001 		add	r1, r0, #48
 10797 0046 1144     		add	r1, r1, r2
 10798 0048 CC78     		ldrb	r4, [r1, #3]	@ zero_extendqisi2
 10799              	.LVL1261:
3801:Core/Src/ff.c **** 		}
 10800              		.loc 1 3801 10 discriminator 4 view .LVU3676
 10801 004a 8B78     		ldrb	r3, [r1, #2]	@ zero_extendqisi2
 10802 004c 1B04     		lsls	r3, r3, #16
 10803 004e 43EA0463 		orr	r3, r3, r4, lsl #24
 10804 0052 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 10805 0054 43EA0123 		orr	r3, r3, r1, lsl #8
 10806 0058 0244     		add	r2, r2, r0
 10807 005a 92F83020 		ldrb	r2, [r2, #48]	@ zero_extendqisi2
 10808 005e 1343     		orrs	r3, r3, r2
3801:Core/Src/ff.c **** 		}
 10809              		.loc 1 3801 8 discriminator 4 view .LVU3677
 10810 0060 2B60     		str	r3, [r5]
 10811              	.LVL1262:
 10812              	.L804:
3805:Core/Src/ff.c **** }
 10813              		.loc 1 3805 2 is_stmt 1 view .LVU3678
3806:Core/Src/ff.c **** 
 10814              		.loc 1 3806 1 is_stmt 0 view .LVU3679
 10815 0062 3046     		mov	r0, r6
 10816 0064 0DB0     		add	sp, sp, #52
 10817              	.LCFI110:
 10818              		.cfi_remember_state
 10819              		.cfi_def_cfa_offset 20
 10820              		@ sp needed
 10821 0066 F0BD     		pop	{r4, r5, r6, r7, pc}
 10822              	.LVL1263:
 10823              	.L809:
 10824              	.LCFI111:
 10825              		.cfi_restore_state
3769:Core/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
 10826              		.loc 1 3769 4 is_stmt 1 view .LVU3680
3769:Core/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
 10827              		.loc 1 3769 10 is_stmt 0 view .LVU3681
 10828 0068 0121     		movs	r1, #1
 10829 006a 03A8     		add	r0, sp, #12
 10830              	.LVL1264:
3769:Core/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
 10831              		.loc 1 3769 10 view .LVU3682
 10832 006c FFF7FEFF 		bl	dir_read
 10833              	.LVL1265:
3770:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 10834              		.loc 1 3770 4 is_stmt 1 view .LVU3683
3770:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 10835              		.loc 1 3770 7 is_stmt 0 view .LVU3684
 10836 0070 0746     		mov	r7, r0
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 323


 10837 0072 18B1     		cbz	r0, .L811
 10838              	.LVL1266:
 10839              	.L801:
3789:Core/Src/ff.c **** 				label[0] = 0;
 10840              		.loc 1 3789 4 is_stmt 1 view .LVU3685
3789:Core/Src/ff.c **** 				label[0] = 0;
 10841              		.loc 1 3789 7 is_stmt 0 view .LVU3686
 10842 0074 042F     		cmp	r7, #4
 10843 0076 10D0     		beq	.L812
3769:Core/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
 10844              		.loc 1 3769 10 view .LVU3687
 10845 0078 3E46     		mov	r6, r7
 10846 007a D5E7     		b	.L800
 10847              	.LVL1267:
 10848              	.L811:
3781:Core/Src/ff.c **** #endif
 10849              		.loc 1 3781 5 is_stmt 1 view .LVU3688
 10850 007c 0B22     		movs	r2, #11
 10851 007e 0899     		ldr	r1, [sp, #32]
 10852 0080 2046     		mov	r0, r4
 10853              	.LVL1268:
3781:Core/Src/ff.c **** #endif
 10854              		.loc 1 3781 5 is_stmt 0 view .LVU3689
 10855 0082 FFF7FEFF 		bl	mem_cpy
 10856              	.LVL1269:
3783:Core/Src/ff.c **** 				do {
 10857              		.loc 1 3783 5 is_stmt 1 view .LVU3690
3783:Core/Src/ff.c **** 				do {
 10858              		.loc 1 3783 7 is_stmt 0 view .LVU3691
 10859 0086 0B23     		movs	r3, #11
 10860              	.LVL1270:
 10861              	.L802:
3784:Core/Src/ff.c **** 					label[j] = 0;
 10862              		.loc 1 3784 5 is_stmt 1 view .LVU3692
3785:Core/Src/ff.c **** 					if (!j) break;
 10863              		.loc 1 3785 6 view .LVU3693
3785:Core/Src/ff.c **** 					if (!j) break;
 10864              		.loc 1 3785 15 is_stmt 0 view .LVU3694
 10865 0088 0022     		movs	r2, #0
 10866 008a E254     		strb	r2, [r4, r3]
3786:Core/Src/ff.c **** 				} while (label[--j] == ' ');
 10867              		.loc 1 3786 6 is_stmt 1 view .LVU3695
3786:Core/Src/ff.c **** 				} while (label[--j] == ' ');
 10868              		.loc 1 3786 9 is_stmt 0 view .LVU3696
 10869 008c 002B     		cmp	r3, #0
 10870 008e F1D0     		beq	.L801
3787:Core/Src/ff.c **** 			}
 10871              		.loc 1 3787 13 is_stmt 1 view .LVU3697
3787:Core/Src/ff.c **** 			}
 10872              		.loc 1 3787 5 is_stmt 0 view .LVU3698
 10873 0090 013B     		subs	r3, r3, #1
 10874              	.LVL1271:
3787:Core/Src/ff.c **** 			}
 10875              		.loc 1 3787 19 view .LVU3699
 10876 0092 E25C     		ldrb	r2, [r4, r3]	@ zero_extendqisi2
3787:Core/Src/ff.c **** 			}
 10877              		.loc 1 3787 5 view .LVU3700
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 324


 10878 0094 202A     		cmp	r2, #32
 10879 0096 F7D0     		beq	.L802
 10880 0098 ECE7     		b	.L801
 10881              	.LVL1272:
 10882              	.L812:
3790:Core/Src/ff.c **** 				res = FR_OK;
 10883              		.loc 1 3790 5 is_stmt 1 view .LVU3701
3790:Core/Src/ff.c **** 				res = FR_OK;
 10884              		.loc 1 3790 14 is_stmt 0 view .LVU3702
 10885 009a 0023     		movs	r3, #0
 10886 009c 2370     		strb	r3, [r4]
3791:Core/Src/ff.c **** 			}
 10887              		.loc 1 3791 5 is_stmt 1 view .LVU3703
 10888              	.LVL1273:
3797:Core/Src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
 10889              		.loc 1 3797 2 view .LVU3704
 10890 009e C4E7     		b	.L803
 10891              	.LVL1274:
 10892              	.L810:
3800:Core/Src/ff.c **** 			*sn = LD_DWORD(&dj.fs->win[i]);
 10893              		.loc 1 3800 48 is_stmt 0 view .LVU3705
 10894 00a0 4320     		movs	r0, #67
 10895              	.LVL1275:
3800:Core/Src/ff.c **** 			*sn = LD_DWORD(&dj.fs->win[i]);
 10896              		.loc 1 3800 48 view .LVU3706
 10897 00a2 CEE7     		b	.L805
 10898              		.cfi_endproc
 10899              	.LFE52:
 10901              		.section	.rodata.f_setlabel.str1.4,"aMS",%progbits,1
 10902              		.align	2
 10903              	.LC2:
 10904 0000 222A2B2C 		.ascii	"\"*+,.:;<=>?[]|\177\000"
 10904      2E3A3B3C 
 10904      3D3E3F5B 
 10904      5D7C7F00 
 10905              		.section	.text.f_setlabel,"ax",%progbits
 10906              		.align	1
 10907              		.global	f_setlabel
 10908              		.syntax unified
 10909              		.thumb
 10910              		.thumb_func
 10911              		.fpu fpv4-sp-d16
 10913              	f_setlabel:
 10914              	.LVL1276:
 10915              	.LFB53:
3818:Core/Src/ff.c **** 	FRESULT res;
 10916              		.loc 1 3818 1 is_stmt 1 view -0
 10917              		.cfi_startproc
 10918              		@ args = 0, pretend = 0, frame = 56
 10919              		@ frame_needed = 0, uses_anonymous_args = 0
3818:Core/Src/ff.c **** 	FRESULT res;
 10920              		.loc 1 3818 1 is_stmt 0 view .LVU3708
 10921 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 10922              	.LCFI112:
 10923              		.cfi_def_cfa_offset 20
 10924              		.cfi_offset 4, -20
 10925              		.cfi_offset 5, -16
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 325


 10926              		.cfi_offset 6, -12
 10927              		.cfi_offset 7, -8
 10928              		.cfi_offset 14, -4
 10929 0002 8FB0     		sub	sp, sp, #60
 10930              	.LCFI113:
 10931              		.cfi_def_cfa_offset 80
 10932 0004 0190     		str	r0, [sp, #4]
3819:Core/Src/ff.c **** 	DIR dj;
 10933              		.loc 1 3819 2 is_stmt 1 view .LVU3709
3820:Core/Src/ff.c **** 	BYTE vn[11];
 10934              		.loc 1 3820 2 view .LVU3710
3821:Core/Src/ff.c **** 	UINT i, j, sl;
 10935              		.loc 1 3821 2 view .LVU3711
3822:Core/Src/ff.c **** 	WCHAR w;
 10936              		.loc 1 3822 2 view .LVU3712
3823:Core/Src/ff.c **** 	DWORD tm;
 10937              		.loc 1 3823 2 view .LVU3713
3824:Core/Src/ff.c **** 
 10938              		.loc 1 3824 2 view .LVU3714
3828:Core/Src/ff.c **** 	if (res) LEAVE_FF(dj.fs, res);
 10939              		.loc 1 3828 2 view .LVU3715
3828:Core/Src/ff.c **** 	if (res) LEAVE_FF(dj.fs, res);
 10940              		.loc 1 3828 8 is_stmt 0 view .LVU3716
 10941 0006 0122     		movs	r2, #1
 10942 0008 01A9     		add	r1, sp, #4
 10943 000a 05A8     		add	r0, sp, #20
 10944              	.LVL1277:
3828:Core/Src/ff.c **** 	if (res) LEAVE_FF(dj.fs, res);
 10945              		.loc 1 3828 8 view .LVU3717
 10946 000c FFF7FEFF 		bl	find_volume
 10947              	.LVL1278:
3829:Core/Src/ff.c **** 
 10948              		.loc 1 3829 2 is_stmt 1 view .LVU3718
3829:Core/Src/ff.c **** 
 10949              		.loc 1 3829 5 is_stmt 0 view .LVU3719
 10950 0010 0346     		mov	r3, r0
 10951 0012 0028     		cmp	r0, #0
 10952 0014 71D1     		bne	.L814
3832:Core/Src/ff.c **** 	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
 10953              		.loc 1 3832 2 is_stmt 1 view .LVU3720
3832:Core/Src/ff.c **** 	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
 10954              		.loc 1 3832 8 is_stmt 0 view .LVU3721
 10955 0016 0024     		movs	r4, #0
 10956 0018 8DF80840 		strb	r4, [sp, #8]
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
 10957              		.loc 1 3833 2 is_stmt 1 view .LVU3722
 10958              	.LVL1279:
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
 10959              		.loc 1 3833 2 is_stmt 0 view .LVU3723
 10960 001c 00E0     		b	.L815
 10961              	.LVL1280:
 10962              	.L816:
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
 10963              		.loc 1 3833 32 is_stmt 1 discriminator 3 view .LVU3724
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
 10964              		.loc 1 3833 26 discriminator 3 view .LVU3725
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 326


 10965              		.loc 1 3833 28 is_stmt 0 discriminator 3 view .LVU3726
 10966 001e 0134     		adds	r4, r4, #1
 10967              	.LVL1281:
 10968              	.L815:
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
 10969              		.loc 1 3833 15 is_stmt 1 discriminator 1 view .LVU3727
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
 10970              		.loc 1 3833 20 is_stmt 0 discriminator 1 view .LVU3728
 10971 0020 019B     		ldr	r3, [sp, #4]
 10972 0022 1A5D     		ldrb	r2, [r3, r4]	@ zero_extendqisi2
3833:Core/Src/ff.c **** 	for ( ; sl && label[sl-1] == ' '; sl--) ;	/* Remove trailing spaces */
 10973              		.loc 1 3833 2 discriminator 1 view .LVU3729
 10974 0024 002A     		cmp	r2, #0
 10975 0026 FAD1     		bne	.L816
 10976 0028 00E0     		b	.L818
 10977              	.L830:
3834:Core/Src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
 10978              		.loc 1 3834 38 view .LVU3730
 10979 002a 1446     		mov	r4, r2
 10980              	.LVL1282:
 10981              	.L818:
3834:Core/Src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
 10982              		.loc 1 3834 10 is_stmt 1 discriminator 1 view .LVU3731
3834:Core/Src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
 10983              		.loc 1 3834 2 is_stmt 0 discriminator 1 view .LVU3732
 10984 002c 1CB1     		cbz	r4, .L817
3834:Core/Src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
 10985              		.loc 1 3834 21 discriminator 2 view .LVU3733
 10986 002e 621E     		subs	r2, r4, #1
 10987 0030 995C     		ldrb	r1, [r3, r2]	@ zero_extendqisi2
3834:Core/Src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
 10988              		.loc 1 3834 13 discriminator 2 view .LVU3734
 10989 0032 2029     		cmp	r1, #32
 10990 0034 F9D0     		beq	.L830
 10991              	.L817:
3835:Core/Src/ff.c **** 		i = j = 0;
 10992              		.loc 1 3835 2 is_stmt 1 view .LVU3735
3835:Core/Src/ff.c **** 		i = j = 0;
 10993              		.loc 1 3835 5 is_stmt 0 view .LVU3736
 10994 0036 002C     		cmp	r4, #0
 10995 0038 58D0     		beq	.L819
3836:Core/Src/ff.c **** 		do {
 10996              		.loc 1 3836 9 view .LVU3737
 10997 003a 0025     		movs	r5, #0
3836:Core/Src/ff.c **** 		do {
 10998              		.loc 1 3836 5 view .LVU3738
 10999 003c 2946     		mov	r1, r5
 11000 003e 32E0     		b	.L824
 11001              	.LVL1283:
 11002              	.L831:
3843:Core/Src/ff.c **** #if _USE_LFN
 11003              		.loc 1 3843 7 view .LVU3739
 11004 0040 0020     		movs	r0, #0
 11005              	.LVL1284:
 11006              	.L820:
3845:Core/Src/ff.c **** #else
 11007              		.loc 1 3845 4 is_stmt 1 view .LVU3740
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 327


3845:Core/Src/ff.c **** #else
 11008              		.loc 1 3845 8 is_stmt 0 view .LVU3741
 11009 0042 0121     		movs	r1, #1
 11010 0044 FFF7FEFF 		bl	ff_convert
 11011              	.LVL1285:
3845:Core/Src/ff.c **** #else
 11012              		.loc 1 3845 8 view .LVU3742
 11013 0048 FFF7FEFF 		bl	ff_wtoupper
 11014              	.LVL1286:
 11015 004c 0021     		movs	r1, #0
 11016 004e FFF7FEFF 		bl	ff_convert
 11017              	.LVL1287:
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11018              		.loc 1 3855 4 is_stmt 1 view .LVU3743
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11019              		.loc 1 3855 7 is_stmt 0 view .LVU3744
 11020 0052 0646     		mov	r6, r0
 11021 0054 0028     		cmp	r0, #0
 11022 0056 00F0A980 		beq	.L834
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11023              		.loc 1 3855 14 discriminator 1 view .LVU3745
 11024 005a 0146     		mov	r1, r0
 11025 005c 5648     		ldr	r0, .L843
 11026              	.LVL1288:
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11027              		.loc 1 3855 14 discriminator 1 view .LVU3746
 11028 005e FFF7FEFF 		bl	chk_chr
 11029              	.LVL1289:
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11030              		.loc 1 3855 11 discriminator 1 view .LVU3747
 11031 0062 0028     		cmp	r0, #0
 11032 0064 40F0A480 		bne	.L835
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11033              		.loc 1 3855 57 discriminator 2 view .LVU3748
 11034 0068 FF2E     		cmp	r6, #255
 11035 006a 11D9     		bls	.L836
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11036              		.loc 1 3855 57 view .LVU3749
 11037 006c 0A23     		movs	r3, #10
 11038              	.L822:
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11039              		.loc 1 3855 49 discriminator 6 view .LVU3750
 11040 006e 9D42     		cmp	r5, r3
 11041 0070 80F0A080 		bcs	.L837
3857:Core/Src/ff.c **** 			vn[j++] = (BYTE)w;
 11042              		.loc 1 3857 4 is_stmt 1 view .LVU3751
3857:Core/Src/ff.c **** 			vn[j++] = (BYTE)w;
 11043              		.loc 1 3857 7 is_stmt 0 view .LVU3752
 11044 0074 FF2E     		cmp	r6, #255
 11045 0076 0DD9     		bls	.L838
3857:Core/Src/ff.c **** 			vn[j++] = (BYTE)w;
 11046              		.loc 1 3857 20 is_stmt 1 discriminator 1 view .LVU3753
3857:Core/Src/ff.c **** 			vn[j++] = (BYTE)w;
 11047              		.loc 1 3857 24 is_stmt 0 discriminator 1 view .LVU3754
 11048 0078 6B1C     		adds	r3, r5, #1
 11049              	.LVL1290:
3857:Core/Src/ff.c **** 			vn[j++] = (BYTE)w;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 328


 11050              		.loc 1 3857 30 discriminator 1 view .LVU3755
 11051 007a C6F30722 		ubfx	r2, r6, #8, #8
3857:Core/Src/ff.c **** 			vn[j++] = (BYTE)w;
 11052              		.loc 1 3857 28 discriminator 1 view .LVU3756
 11053 007e 0EA9     		add	r1, sp, #56
 11054 0080 0D44     		add	r5, r5, r1
 11055 0082 05F8302C 		strb	r2, [r5, #-48]
 11056 0086 06E0     		b	.L823
 11057              	.LVL1291:
 11058              	.L832:
3843:Core/Src/ff.c **** #if _USE_LFN
 11059              		.loc 1 3843 7 view .LVU3757
 11060 0088 0020     		movs	r0, #0
 11061              	.LVL1292:
3843:Core/Src/ff.c **** #if _USE_LFN
 11062              		.loc 1 3843 7 view .LVU3758
 11063 008a DAE7     		b	.L820
 11064              	.L833:
 11065 008c 0020     		movs	r0, #0
 11066 008e D8E7     		b	.L820
 11067              	.LVL1293:
 11068              	.L836:
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11069              		.loc 1 3855 57 view .LVU3759
 11070 0090 0B23     		movs	r3, #11
 11071 0092 ECE7     		b	.L822
 11072              	.L838:
3855:Core/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 11073              		.loc 1 3855 57 view .LVU3760
 11074 0094 2B46     		mov	r3, r5
 11075              	.LVL1294:
 11076              	.L823:
3858:Core/Src/ff.c **** 		} while (i < sl);
 11077              		.loc 1 3858 4 is_stmt 1 view .LVU3761
3858:Core/Src/ff.c **** 		} while (i < sl);
 11078              		.loc 1 3858 8 is_stmt 0 view .LVU3762
 11079 0096 5D1C     		adds	r5, r3, #1
 11080              	.LVL1295:
3858:Core/Src/ff.c **** 		} while (i < sl);
 11081              		.loc 1 3858 12 view .LVU3763
 11082 0098 0EAA     		add	r2, sp, #56
 11083 009a 1344     		add	r3, r3, r2
 11084 009c 03F8306C 		strb	r6, [r3, #-48]
3859:Core/Src/ff.c **** 		while (j < 11) vn[j++] = ' ';
 11085              		.loc 1 3859 11 is_stmt 1 view .LVU3764
3859:Core/Src/ff.c **** 		while (j < 11) vn[j++] = ' ';
 11086              		.loc 1 3859 3 is_stmt 0 view .LVU3765
 11087 00a0 A742     		cmp	r7, r4
 11088 00a2 21D2     		bcs	.L825
 11089 00a4 3946     		mov	r1, r7
 11090              	.LVL1296:
 11091              	.L824:
3837:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 11092              		.loc 1 3837 3 is_stmt 1 view .LVU3766
3841:Core/Src/ff.c **** 			if (IsDBCS1(w))
 11093              		.loc 1 3841 4 view .LVU3767
3841:Core/Src/ff.c **** 			if (IsDBCS1(w))
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 329


 11094              		.loc 1 3841 19 is_stmt 0 view .LVU3768
 11095 00a6 019E     		ldr	r6, [sp, #4]
3841:Core/Src/ff.c **** 			if (IsDBCS1(w))
 11096              		.loc 1 3841 21 view .LVU3769
 11097 00a8 4F1C     		adds	r7, r1, #1
 11098              	.LVL1297:
3841:Core/Src/ff.c **** 			if (IsDBCS1(w))
 11099              		.loc 1 3841 19 view .LVU3770
 11100 00aa 725C     		ldrb	r2, [r6, r1]	@ zero_extendqisi2
3841:Core/Src/ff.c **** 			if (IsDBCS1(w))
 11101              		.loc 1 3841 6 view .LVU3771
 11102 00ac 90B2     		uxth	r0, r2
 11103              	.LVL1298:
3842:Core/Src/ff.c **** 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
 11104              		.loc 1 3842 4 is_stmt 1 view .LVU3772
3842:Core/Src/ff.c **** 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
 11105              		.loc 1 3842 8 is_stmt 0 view .LVU3773
 11106 00ae 02F17F03 		add	r3, r2, #127
 11107 00b2 DBB2     		uxtb	r3, r3
3842:Core/Src/ff.c **** 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
 11108              		.loc 1 3842 7 view .LVU3774
 11109 00b4 7D2B     		cmp	r3, #125
 11110 00b6 C4D8     		bhi	.L820
3843:Core/Src/ff.c **** #if _USE_LFN
 11111              		.loc 1 3843 5 is_stmt 1 view .LVU3775
3843:Core/Src/ff.c **** #if _USE_LFN
 11112              		.loc 1 3843 7 is_stmt 0 view .LVU3776
 11113 00b8 092D     		cmp	r5, #9
 11114 00ba C1D8     		bhi	.L831
3843:Core/Src/ff.c **** #if _USE_LFN
 11115              		.loc 1 3843 17 discriminator 1 view .LVU3777
 11116 00bc BC42     		cmp	r4, r7
 11117 00be E3D9     		bls	.L832
3843:Core/Src/ff.c **** #if _USE_LFN
 11118              		.loc 1 3843 30 discriminator 3 view .LVU3778
 11119 00c0 F05D     		ldrb	r0, [r6, r7]	@ zero_extendqisi2
 11120              	.LVL1299:
3843:Core/Src/ff.c **** #if _USE_LFN
 11121              		.loc 1 3843 30 discriminator 3 view .LVU3779
 11122 00c2 A0F14003 		sub	r3, r0, #64
 11123 00c6 DBB2     		uxtb	r3, r3
3843:Core/Src/ff.c **** #if _USE_LFN
 11124              		.loc 1 3843 27 discriminator 3 view .LVU3780
 11125 00c8 3E2B     		cmp	r3, #62
 11126 00ca 03D9     		bls	.L821
3843:Core/Src/ff.c **** #if _USE_LFN
 11127              		.loc 1 3843 30 discriminator 6 view .LVU3781
 11128 00cc 80F08003 		eor	r3, r0, #128
 11129 00d0 7E2B     		cmp	r3, #126
 11130 00d2 DBD8     		bhi	.L833
 11131              	.L821:
3843:Core/Src/ff.c **** #if _USE_LFN
 11132              		.loc 1 3843 73 discriminator 7 view .LVU3782
 11133 00d4 8F1C     		adds	r7, r1, #2
 11134              	.LVL1300:
3843:Core/Src/ff.c **** #if _USE_LFN
 11135              		.loc 1 3843 7 discriminator 7 view .LVU3783
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 330


 11136 00d6 40EA0220 		orr	r0, r0, r2, lsl #8
 11137 00da B2E7     		b	.L820
 11138              	.LVL1301:
 11139              	.L826:
3860:Core/Src/ff.c **** 	}
 11140              		.loc 1 3860 18 is_stmt 1 discriminator 2 view .LVU3784
3860:Core/Src/ff.c **** 	}
 11141              		.loc 1 3860 26 is_stmt 0 discriminator 2 view .LVU3785
 11142 00dc 0EAB     		add	r3, sp, #56
 11143 00de 2B44     		add	r3, r3, r5
 11144 00e0 2022     		movs	r2, #32
 11145 00e2 03F8302C 		strb	r2, [r3, #-48]
3860:Core/Src/ff.c **** 	}
 11146              		.loc 1 3860 22 discriminator 2 view .LVU3786
 11147 00e6 0135     		adds	r5, r5, #1
 11148              	.LVL1302:
 11149              	.L825:
3860:Core/Src/ff.c **** 	}
 11150              		.loc 1 3860 9 is_stmt 1 discriminator 1 view .LVU3787
 11151 00e8 0A2D     		cmp	r5, #10
 11152 00ea F7D9     		bls	.L826
 11153              	.LVL1303:
 11154              	.L819:
3864:Core/Src/ff.c **** 	res = dir_sdi(&dj, 0);
 11155              		.loc 1 3864 2 view .LVU3788
3864:Core/Src/ff.c **** 	res = dir_sdi(&dj, 0);
 11156              		.loc 1 3864 12 is_stmt 0 view .LVU3789
 11157 00ec 0021     		movs	r1, #0
 11158 00ee 0791     		str	r1, [sp, #28]
3865:Core/Src/ff.c **** 	if (res == FR_OK) {
 11159              		.loc 1 3865 2 is_stmt 1 view .LVU3790
3865:Core/Src/ff.c **** 	if (res == FR_OK) {
 11160              		.loc 1 3865 8 is_stmt 0 view .LVU3791
 11161 00f0 05A8     		add	r0, sp, #20
 11162 00f2 FFF7FEFF 		bl	dir_sdi
 11163              	.LVL1304:
3866:Core/Src/ff.c **** 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
 11164              		.loc 1 3866 2 is_stmt 1 view .LVU3792
3866:Core/Src/ff.c **** 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
 11165              		.loc 1 3866 5 is_stmt 0 view .LVU3793
 11166 00f6 0346     		mov	r3, r0
 11167 00f8 10B1     		cbz	r0, .L841
 11168              	.LVL1305:
 11169              	.L814:
3898:Core/Src/ff.c **** 
 11170              		.loc 1 3898 1 view .LVU3794
 11171 00fa 1846     		mov	r0, r3
 11172 00fc 0FB0     		add	sp, sp, #60
 11173              	.LCFI114:
 11174              		.cfi_remember_state
 11175              		.cfi_def_cfa_offset 20
 11176              		@ sp needed
 11177 00fe F0BD     		pop	{r4, r5, r6, r7, pc}
 11178              	.LVL1306:
 11179              	.L841:
 11180              	.LCFI115:
 11181              		.cfi_restore_state
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 331


3867:Core/Src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
 11182              		.loc 1 3867 3 is_stmt 1 view .LVU3795
3867:Core/Src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
 11183              		.loc 1 3867 9 is_stmt 0 view .LVU3796
 11184 0100 0121     		movs	r1, #1
 11185 0102 05A8     		add	r0, sp, #20
 11186              	.LVL1307:
3867:Core/Src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
 11187              		.loc 1 3867 9 view .LVU3797
 11188 0104 FFF7FEFF 		bl	dir_read
 11189              	.LVL1308:
3868:Core/Src/ff.c **** 			if (vn[0]) {
 11190              		.loc 1 3868 3 is_stmt 1 view .LVU3798
3868:Core/Src/ff.c **** 			if (vn[0]) {
 11191              		.loc 1 3868 6 is_stmt 0 view .LVU3799
 11192 0108 0346     		mov	r3, r0
 11193 010a 00BB     		cbnz	r0, .L827
3869:Core/Src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
 11194              		.loc 1 3869 4 is_stmt 1 view .LVU3800
3869:Core/Src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
 11195              		.loc 1 3869 10 is_stmt 0 view .LVU3801
 11196 010c 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
3869:Core/Src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
 11197              		.loc 1 3869 7 view .LVU3802
 11198 0110 4BB9     		cbnz	r3, .L842
3874:Core/Src/ff.c **** 			}
 11199              		.loc 1 3874 5 is_stmt 1 view .LVU3803
3874:Core/Src/ff.c **** 			}
 11200              		.loc 1 3874 15 is_stmt 0 view .LVU3804
 11201 0112 0A9B     		ldr	r3, [sp, #40]
 11202 0114 E522     		movs	r2, #229
 11203 0116 1A70     		strb	r2, [r3]
 11204              	.LVL1309:
 11205              	.L829:
3876:Core/Src/ff.c **** 			res = sync_fs(dj.fs);
 11206              		.loc 1 3876 4 is_stmt 1 view .LVU3805
3876:Core/Src/ff.c **** 			res = sync_fs(dj.fs);
 11207              		.loc 1 3876 6 is_stmt 0 view .LVU3806
 11208 0118 0598     		ldr	r0, [sp, #20]
3876:Core/Src/ff.c **** 			res = sync_fs(dj.fs);
 11209              		.loc 1 3876 17 view .LVU3807
 11210 011a 0123     		movs	r3, #1
 11211 011c 0371     		strb	r3, [r0, #4]
3877:Core/Src/ff.c **** 		} else {					/* No volume label is found or error */
 11212              		.loc 1 3877 4 is_stmt 1 view .LVU3808
3877:Core/Src/ff.c **** 		} else {					/* No volume label is found or error */
 11213              		.loc 1 3877 10 is_stmt 0 view .LVU3809
 11214 011e FFF7FEFF 		bl	sync_fs
 11215              	.LVL1310:
 11216 0122 0346     		mov	r3, r0
 11217              	.LVL1311:
3877:Core/Src/ff.c **** 		} else {					/* No volume label is found or error */
 11218              		.loc 1 3877 10 view .LVU3810
 11219 0124 E9E7     		b	.L814
 11220              	.LVL1312:
 11221              	.L842:
3870:Core/Src/ff.c **** 				tm = get_fattime();
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 332


 11222              		.loc 1 3870 5 is_stmt 1 view .LVU3811
 11223 0126 0B22     		movs	r2, #11
 11224 0128 02A9     		add	r1, sp, #8
 11225 012a 0A98     		ldr	r0, [sp, #40]
 11226              	.LVL1313:
3870:Core/Src/ff.c **** 				tm = get_fattime();
 11227              		.loc 1 3870 5 is_stmt 0 view .LVU3812
 11228 012c FFF7FEFF 		bl	mem_cpy
 11229              	.LVL1314:
3871:Core/Src/ff.c **** 				ST_DWORD(dj.dir+DIR_WrtTime, tm);
 11230              		.loc 1 3871 5 is_stmt 1 view .LVU3813
3871:Core/Src/ff.c **** 				ST_DWORD(dj.dir+DIR_WrtTime, tm);
 11231              		.loc 1 3871 10 is_stmt 0 view .LVU3814
 11232 0130 FFF7FEFF 		bl	get_fattime
 11233              	.LVL1315:
3872:Core/Src/ff.c **** 			} else {
 11234              		.loc 1 3872 5 is_stmt 1 view .LVU3815
 11235 0134 0A9B     		ldr	r3, [sp, #40]
 11236 0136 9875     		strb	r0, [r3, #22]
3872:Core/Src/ff.c **** 			} else {
 11237              		.loc 1 3872 5 view .LVU3816
 11238 0138 C0F30722 		ubfx	r2, r0, #8, #8
 11239 013c 0A9B     		ldr	r3, [sp, #40]
 11240 013e DA75     		strb	r2, [r3, #23]
3872:Core/Src/ff.c **** 			} else {
 11241              		.loc 1 3872 5 view .LVU3817
 11242 0140 0A9B     		ldr	r3, [sp, #40]
 11243 0142 C0F30742 		ubfx	r2, r0, #16, #8
 11244 0146 1A76     		strb	r2, [r3, #24]
3872:Core/Src/ff.c **** 			} else {
 11245              		.loc 1 3872 5 view .LVU3818
 11246 0148 000E     		lsrs	r0, r0, #24
 11247              	.LVL1316:
3872:Core/Src/ff.c **** 			} else {
 11248              		.loc 1 3872 5 is_stmt 0 view .LVU3819
 11249 014a 5876     		strb	r0, [r3, #25]
 11250 014c E4E7     		b	.L829
 11251              	.LVL1317:
 11252              	.L827:
3879:Core/Src/ff.c **** 				res = FR_OK;
 11253              		.loc 1 3879 4 is_stmt 1 view .LVU3820
3879:Core/Src/ff.c **** 				res = FR_OK;
 11254              		.loc 1 3879 7 is_stmt 0 view .LVU3821
 11255 014e 0428     		cmp	r0, #4
 11256 0150 D3D1     		bne	.L814
3880:Core/Src/ff.c **** 				if (vn[0]) {				/* Create volume label as new */
 11257              		.loc 1 3880 5 is_stmt 1 view .LVU3822
 11258              	.LVL1318:
3881:Core/Src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
 11259              		.loc 1 3881 5 view .LVU3823
3881:Core/Src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
 11260              		.loc 1 3881 11 is_stmt 0 view .LVU3824
 11261 0152 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
3881:Core/Src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
 11262              		.loc 1 3881 8 view .LVU3825
 11263 0156 002B     		cmp	r3, #0
 11264 0158 CFD0     		beq	.L814
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 333


3882:Core/Src/ff.c **** 					if (res == FR_OK) {
 11265              		.loc 1 3882 6 is_stmt 1 view .LVU3826
3882:Core/Src/ff.c **** 					if (res == FR_OK) {
 11266              		.loc 1 3882 12 is_stmt 0 view .LVU3827
 11267 015a 0121     		movs	r1, #1
 11268 015c 05A8     		add	r0, sp, #20
 11269 015e FFF7FEFF 		bl	dir_alloc
 11270              	.LVL1319:
3883:Core/Src/ff.c **** 						mem_set(dj.dir, 0, SZ_DIR);	/* Set volume label */
 11271              		.loc 1 3883 6 is_stmt 1 view .LVU3828
3883:Core/Src/ff.c **** 						mem_set(dj.dir, 0, SZ_DIR);	/* Set volume label */
 11272              		.loc 1 3883 9 is_stmt 0 view .LVU3829
 11273 0162 0346     		mov	r3, r0
 11274 0164 0028     		cmp	r0, #0
 11275 0166 C8D1     		bne	.L814
3884:Core/Src/ff.c **** 						mem_cpy(dj.dir, vn, 11);
 11276              		.loc 1 3884 7 is_stmt 1 view .LVU3830
 11277 0168 2022     		movs	r2, #32
 11278 016a 0021     		movs	r1, #0
 11279 016c 0A98     		ldr	r0, [sp, #40]
 11280              	.LVL1320:
3884:Core/Src/ff.c **** 						mem_cpy(dj.dir, vn, 11);
 11281              		.loc 1 3884 7 is_stmt 0 view .LVU3831
 11282 016e FFF7FEFF 		bl	mem_set
 11283              	.LVL1321:
3885:Core/Src/ff.c **** 						dj.dir[DIR_Attr] = AM_VOL;
 11284              		.loc 1 3885 7 is_stmt 1 view .LVU3832
 11285 0172 0B22     		movs	r2, #11
 11286 0174 02A9     		add	r1, sp, #8
 11287 0176 0A98     		ldr	r0, [sp, #40]
 11288 0178 FFF7FEFF 		bl	mem_cpy
 11289              	.LVL1322:
3886:Core/Src/ff.c **** 						tm = get_fattime();
 11290              		.loc 1 3886 7 view .LVU3833
3886:Core/Src/ff.c **** 						tm = get_fattime();
 11291              		.loc 1 3886 24 is_stmt 0 view .LVU3834
 11292 017c 0A9B     		ldr	r3, [sp, #40]
 11293 017e 0822     		movs	r2, #8
 11294 0180 DA72     		strb	r2, [r3, #11]
3887:Core/Src/ff.c **** 						ST_DWORD(dj.dir+DIR_WrtTime, tm);
 11295              		.loc 1 3887 7 is_stmt 1 view .LVU3835
3887:Core/Src/ff.c **** 						ST_DWORD(dj.dir+DIR_WrtTime, tm);
 11296              		.loc 1 3887 12 is_stmt 0 view .LVU3836
 11297 0182 FFF7FEFF 		bl	get_fattime
 11298              	.LVL1323:
3888:Core/Src/ff.c **** 						dj.fs->wflag = 1;
 11299              		.loc 1 3888 7 is_stmt 1 view .LVU3837
 11300 0186 0A9A     		ldr	r2, [sp, #40]
 11301 0188 9075     		strb	r0, [r2, #22]
3888:Core/Src/ff.c **** 						dj.fs->wflag = 1;
 11302              		.loc 1 3888 7 view .LVU3838
 11303 018a C0F30721 		ubfx	r1, r0, #8, #8
 11304 018e 0A9A     		ldr	r2, [sp, #40]
 11305 0190 D175     		strb	r1, [r2, #23]
3888:Core/Src/ff.c **** 						dj.fs->wflag = 1;
 11306              		.loc 1 3888 7 view .LVU3839
 11307 0192 0A9A     		ldr	r2, [sp, #40]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 334


 11308 0194 C0F30741 		ubfx	r1, r0, #16, #8
 11309 0198 1176     		strb	r1, [r2, #24]
3888:Core/Src/ff.c **** 						dj.fs->wflag = 1;
 11310              		.loc 1 3888 7 view .LVU3840
 11311 019a 030E     		lsrs	r3, r0, #24
 11312 019c 5376     		strb	r3, [r2, #25]
3889:Core/Src/ff.c **** 						res = sync_fs(dj.fs);
 11313              		.loc 1 3889 7 view .LVU3841
3889:Core/Src/ff.c **** 						res = sync_fs(dj.fs);
 11314              		.loc 1 3889 9 is_stmt 0 view .LVU3842
 11315 019e 0598     		ldr	r0, [sp, #20]
 11316              	.LVL1324:
3889:Core/Src/ff.c **** 						res = sync_fs(dj.fs);
 11317              		.loc 1 3889 20 view .LVU3843
 11318 01a0 0123     		movs	r3, #1
 11319 01a2 0371     		strb	r3, [r0, #4]
3890:Core/Src/ff.c **** 					}
 11320              		.loc 1 3890 7 is_stmt 1 view .LVU3844
3890:Core/Src/ff.c **** 					}
 11321              		.loc 1 3890 13 is_stmt 0 view .LVU3845
 11322 01a4 FFF7FEFF 		bl	sync_fs
 11323              	.LVL1325:
 11324 01a8 0346     		mov	r3, r0
 11325              	.LVL1326:
3890:Core/Src/ff.c **** 					}
 11326              		.loc 1 3890 13 view .LVU3846
 11327 01aa A6E7     		b	.L814
 11328              	.LVL1327:
 11329              	.L834:
3856:Core/Src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
 11330              		.loc 1 3856 5 view .LVU3847
 11331 01ac 0623     		movs	r3, #6
 11332 01ae A4E7     		b	.L814
 11333              	.LVL1328:
 11334              	.L835:
3856:Core/Src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
 11335              		.loc 1 3856 5 view .LVU3848
 11336 01b0 0623     		movs	r3, #6
 11337 01b2 A2E7     		b	.L814
 11338              	.L837:
3856:Core/Src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
 11339              		.loc 1 3856 5 view .LVU3849
 11340 01b4 0623     		movs	r3, #6
 11341 01b6 A0E7     		b	.L814
 11342              	.L844:
 11343              		.align	2
 11344              	.L843:
 11345 01b8 00000000 		.word	.LC2
 11346              		.cfi_endproc
 11347              	.LFE53:
 11349              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 11350              		.align	2
 11351              	.LC3:
 11352 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 11352      53444F53 
 11352      352E3000 
 11353              		.align	2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 335


 11354              	.LC4:
 11355 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 11355      414D4520 
 11355      20202046 
 11355      41543332 
 11355      20202000 
 11356              		.align	2
 11357              	.LC5:
 11358 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 11358      414D4520 
 11358      20202046 
 11358      41542020 
 11358      20202000 
 11359              		.section	.text.f_mkfs,"ax",%progbits
 11360              		.align	1
 11361              		.global	f_mkfs
 11362              		.syntax unified
 11363              		.thumb
 11364              		.thumb_func
 11365              		.fpu fpv4-sp-d16
 11367              	f_mkfs:
 11368              	.LVL1329:
 11369              	.LFB54:
3978:Core/Src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
 11370              		.loc 1 3978 1 is_stmt 1 view -0
 11371              		.cfi_startproc
 11372              		@ args = 0, pretend = 0, frame = 40
 11373              		@ frame_needed = 0, uses_anonymous_args = 0
3978:Core/Src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
 11374              		.loc 1 3978 1 is_stmt 0 view .LVU3851
 11375 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 11376              	.LCFI116:
 11377              		.cfi_def_cfa_offset 36
 11378              		.cfi_offset 4, -36
 11379              		.cfi_offset 5, -32
 11380              		.cfi_offset 6, -28
 11381              		.cfi_offset 7, -24
 11382              		.cfi_offset 8, -20
 11383              		.cfi_offset 9, -16
 11384              		.cfi_offset 10, -12
 11385              		.cfi_offset 11, -8
 11386              		.cfi_offset 14, -4
 11387 0004 8BB0     		sub	sp, sp, #44
 11388              	.LCFI117:
 11389              		.cfi_def_cfa_offset 80
 11390 0006 0790     		str	r0, [sp, #28]
 11391 0008 8846     		mov	r8, r1
 11392 000a 1746     		mov	r7, r2
3979:Core/Src/ff.c **** 	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
 11393              		.loc 1 3979 2 is_stmt 1 view .LVU3852
3980:Core/Src/ff.c **** 	int vol;
 11394              		.loc 1 3980 2 view .LVU3853
3981:Core/Src/ff.c **** 	BYTE fmt, md, sys, *tbl, pdrv, part;
 11395              		.loc 1 3981 2 view .LVU3854
3982:Core/Src/ff.c **** 	DWORD n_clst, vs, n, wsect;
 11396              		.loc 1 3982 2 view .LVU3855
3983:Core/Src/ff.c **** 	UINT i;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 336


 11397              		.loc 1 3983 2 view .LVU3856
3984:Core/Src/ff.c **** 	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
 11398              		.loc 1 3984 2 view .LVU3857
3985:Core/Src/ff.c **** 	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
 11399              		.loc 1 3985 2 view .LVU3858
3986:Core/Src/ff.c **** 	FATFS *fs;
 11400              		.loc 1 3986 2 view .LVU3859
3987:Core/Src/ff.c **** 	DSTATUS stat;
 11401              		.loc 1 3987 2 view .LVU3860
3988:Core/Src/ff.c **** 
 11402              		.loc 1 3988 2 view .LVU3861
3992:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 11403              		.loc 1 3992 2 view .LVU3862
3992:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 11404              		.loc 1 3992 8 is_stmt 0 view .LVU3863
 11405 000c 07A8     		add	r0, sp, #28
 11406              	.LVL1330:
3992:Core/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 11407              		.loc 1 3992 8 view .LVU3864
 11408 000e FFF7FEFF 		bl	get_ldnumber
 11409              	.LVL1331:
3993:Core/Src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
 11410              		.loc 1 3993 2 is_stmt 1 view .LVU3865
3993:Core/Src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
 11411              		.loc 1 3993 5 is_stmt 0 view .LVU3866
 11412 0012 0028     		cmp	r0, #0
3993:Core/Src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
 11413              		.loc 1 3993 5 view .LVU3867
 11414 0014 C0F2F482 		blt	.L883
3994:Core/Src/ff.c **** 	if (au & (au - 1)) return FR_INVALID_PARAMETER;
 11415              		.loc 1 3994 2 is_stmt 1 view .LVU3868
3994:Core/Src/ff.c **** 	if (au & (au - 1)) return FR_INVALID_PARAMETER;
 11416              		.loc 1 3994 5 is_stmt 0 view .LVU3869
 11417 0018 B8F1010F 		cmp	r8, #1
 11418 001c 00F2F282 		bhi	.L884
3995:Core/Src/ff.c **** 	fs = FatFs[vol];
 11419              		.loc 1 3995 2 is_stmt 1 view .LVU3870
3995:Core/Src/ff.c **** 	fs = FatFs[vol];
 11420              		.loc 1 3995 15 is_stmt 0 view .LVU3871
 11421 0020 7E1E     		subs	r6, r7, #1
3995:Core/Src/ff.c **** 	fs = FatFs[vol];
 11422              		.loc 1 3995 5 view .LVU3872
 11423 0022 3E40     		ands	r6, r6, r7
 11424 0024 40F0F282 		bne	.L885
3996:Core/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
 11425              		.loc 1 3996 2 is_stmt 1 view .LVU3873
3996:Core/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
 11426              		.loc 1 3996 5 is_stmt 0 view .LVU3874
 11427 0028 964B     		ldr	r3, .L927
 11428 002a 53F82050 		ldr	r5, [r3, r0, lsl #2]
 11429              	.LVL1332:
3997:Core/Src/ff.c **** 	fs->fs_type = 0;
 11430              		.loc 1 3997 2 is_stmt 1 view .LVU3875
3997:Core/Src/ff.c **** 	fs->fs_type = 0;
 11431              		.loc 1 3997 5 is_stmt 0 view .LVU3876
 11432 002e 002D     		cmp	r5, #0
 11433 0030 00F0EE82 		beq	.L886
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 337


3998:Core/Src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 11434              		.loc 1 3998 2 is_stmt 1 view .LVU3877
3998:Core/Src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 11435              		.loc 1 3998 14 is_stmt 0 view .LVU3878
 11436 0034 0023     		movs	r3, #0
 11437 0036 2B70     		strb	r3, [r5]
3999:Core/Src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
 11438              		.loc 1 3999 2 is_stmt 1 view .LVU3879
3999:Core/Src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
 11439              		.loc 1 3999 7 is_stmt 0 view .LVU3880
 11440 0038 C4B2     		uxtb	r4, r0
 11441              	.LVL1333:
4000:Core/Src/ff.c **** 
 11442              		.loc 1 4000 2 is_stmt 1 view .LVU3881
4003:Core/Src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 11443              		.loc 1 4003 2 view .LVU3882
4003:Core/Src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 11444              		.loc 1 4003 9 is_stmt 0 view .LVU3883
 11445 003a 2046     		mov	r0, r4
 11446              	.LVL1334:
4003:Core/Src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 11447              		.loc 1 4003 9 view .LVU3884
 11448 003c FFF7FEFF 		bl	disk_initialize
 11449              	.LVL1335:
4004:Core/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 11450              		.loc 1 4004 2 is_stmt 1 view .LVU3885
4004:Core/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 11451              		.loc 1 4004 5 is_stmt 0 view .LVU3886
 11452 0040 10F0010F 		tst	r0, #1
 11453 0044 40F0EE82 		bne	.L887
4005:Core/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 11454              		.loc 1 4005 2 is_stmt 1 view .LVU3887
4005:Core/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 11455              		.loc 1 4005 5 is_stmt 0 view .LVU3888
 11456 0048 10F0040F 		tst	r0, #4
 11457 004c 40F0EC82 		bne	.L888
4010:Core/Src/ff.c **** 		/* Get partition information from partition table in the MBR */
 11458              		.loc 1 4010 2 is_stmt 1 view .LVU3889
4020:Core/Src/ff.c **** 			return FR_DISK_ERR;
 11459              		.loc 1 4020 3 view .LVU3890
4020:Core/Src/ff.c **** 			return FR_DISK_ERR;
 11460              		.loc 1 4020 7 is_stmt 0 view .LVU3891
 11461 0050 08AA     		add	r2, sp, #32
 11462 0052 0121     		movs	r1, #1
 11463 0054 2046     		mov	r0, r4
 11464              	.LVL1336:
4020:Core/Src/ff.c **** 			return FR_DISK_ERR;
 11465              		.loc 1 4020 7 view .LVU3892
 11466 0056 FFF7FEFF 		bl	disk_ioctl
 11467              	.LVL1337:
4020:Core/Src/ff.c **** 			return FR_DISK_ERR;
 11468              		.loc 1 4020 6 view .LVU3893
 11469 005a 0028     		cmp	r0, #0
 11470 005c 40F0E682 		bne	.L889
4020:Core/Src/ff.c **** 			return FR_DISK_ERR;
 11471              		.loc 1 4020 69 discriminator 1 view .LVU3894
 11472 0060 089A     		ldr	r2, [sp, #32]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 338


4020:Core/Src/ff.c **** 			return FR_DISK_ERR;
 11473              		.loc 1 4020 60 discriminator 1 view .LVU3895
 11474 0062 7F2A     		cmp	r2, #127
 11475 0064 40F2E482 		bls	.L890
4022:Core/Src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 11476              		.loc 1 4022 3 is_stmt 1 view .LVU3896
4022:Core/Src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 11477              		.loc 1 4022 21 is_stmt 0 view .LVU3897
 11478 0068 B8F1000F 		cmp	r8, #0
 11479 006c 09D0     		beq	.L891
 11480 006e 0196     		str	r6, [sp, #4]
 11481              	.L847:
 11482              	.LVL1338:
4023:Core/Src/ff.c **** 	}
 11483              		.loc 1 4023 3 is_stmt 1 discriminator 4 view .LVU3898
4023:Core/Src/ff.c **** 	}
 11484              		.loc 1 4023 9 is_stmt 0 discriminator 4 view .LVU3899
 11485 0070 019B     		ldr	r3, [sp, #4]
 11486 0072 D21A     		subs	r2, r2, r3
 11487 0074 0892     		str	r2, [sp, #32]
4026:Core/Src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
 11488              		.loc 1 4026 2 is_stmt 1 discriminator 4 view .LVU3900
4026:Core/Src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
 11489              		.loc 1 4026 5 is_stmt 0 discriminator 4 view .LVU3901
 11490 0076 87B9     		cbnz	r7, .L848
4027:Core/Src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 11491              		.loc 1 4027 3 is_stmt 1 view .LVU3902
4027:Core/Src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 11492              		.loc 1 4027 6 is_stmt 0 view .LVU3903
 11493 0078 8349     		ldr	r1, .L927+4
 11494 007a A1FB0231 		umull	r3, r1, r1, r2
 11495 007e C909     		lsrs	r1, r1, #7
 11496              	.LVL1339:
4028:Core/Src/ff.c **** 		au = cst[i];
 11497              		.loc 1 4028 3 is_stmt 1 view .LVU3904
4028:Core/Src/ff.c **** 		au = cst[i];
 11498              		.loc 1 4028 3 is_stmt 0 view .LVU3905
 11499 0080 03E0     		b	.L849
 11500              	.LVL1340:
 11501              	.L891:
4022:Core/Src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 11502              		.loc 1 4022 21 view .LVU3906
 11503 0082 3F23     		movs	r3, #63
 11504 0084 0193     		str	r3, [sp, #4]
 11505 0086 F3E7     		b	.L847
 11506              	.LVL1341:
 11507              	.L850:
4028:Core/Src/ff.c **** 		au = cst[i];
 11508              		.loc 1 4028 33 is_stmt 1 discriminator 3 view .LVU3907
4028:Core/Src/ff.c **** 		au = cst[i];
 11509              		.loc 1 4028 28 discriminator 3 view .LVU3908
4028:Core/Src/ff.c **** 		au = cst[i];
 11510              		.loc 1 4028 29 is_stmt 0 discriminator 3 view .LVU3909
 11511 0088 0137     		adds	r7, r7, #1
 11512              	.LVL1342:
 11513              	.L849:
4028:Core/Src/ff.c **** 		au = cst[i];
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 339


 11514              		.loc 1 4028 15 is_stmt 1 discriminator 1 view .LVU3910
4028:Core/Src/ff.c **** 		au = cst[i];
 11515              		.loc 1 4028 23 is_stmt 0 discriminator 1 view .LVU3911
 11516 008a 804B     		ldr	r3, .L927+8
 11517 008c 33F81730 		ldrh	r3, [r3, r7, lsl #1]
4028:Core/Src/ff.c **** 		au = cst[i];
 11518              		.loc 1 4028 3 discriminator 1 view .LVU3912
 11519 0090 9942     		cmp	r1, r3
 11520 0092 F9D3     		bcc	.L850
4029:Core/Src/ff.c **** 	}
 11521              		.loc 1 4029 3 is_stmt 1 view .LVU3913
4029:Core/Src/ff.c **** 	}
 11522              		.loc 1 4029 11 is_stmt 0 view .LVU3914
 11523 0094 7E4B     		ldr	r3, .L927+12
 11524 0096 33F81770 		ldrh	r7, [r3, r7, lsl #1]
 11525              	.LVL1343:
 11526              	.L848:
4031:Core/Src/ff.c **** 	if (au == 0) au = 1;
 11527              		.loc 1 4031 2 is_stmt 1 view .LVU3915
4031:Core/Src/ff.c **** 	if (au == 0) au = 1;
 11528              		.loc 1 4031 5 is_stmt 0 view .LVU3916
 11529 009a 7B0A     		lsrs	r3, r7, #9
 11530 009c 0093     		str	r3, [sp]
 11531              	.LVL1344:
4032:Core/Src/ff.c **** 	if (au > 128) au = 128;
 11532              		.loc 1 4032 2 is_stmt 1 view .LVU3917
4032:Core/Src/ff.c **** 	if (au > 128) au = 128;
 11533              		.loc 1 4032 5 is_stmt 0 view .LVU3918
 11534 009e B7F5007F 		cmp	r7, #512
 11535 00a2 04D3     		bcc	.L892
4033:Core/Src/ff.c **** 
 11536              		.loc 1 4033 2 is_stmt 1 view .LVU3919
4033:Core/Src/ff.c **** 
 11537              		.loc 1 4033 5 is_stmt 0 view .LVU3920
 11538 00a4 802B     		cmp	r3, #128
 11539 00a6 04D9     		bls	.L851
4033:Core/Src/ff.c **** 
 11540              		.loc 1 4033 19 view .LVU3921
 11541 00a8 8023     		movs	r3, #128
 11542              	.LVL1345:
4033:Core/Src/ff.c **** 
 11543              		.loc 1 4033 19 view .LVU3922
 11544 00aa 0093     		str	r3, [sp]
 11545              	.LVL1346:
4033:Core/Src/ff.c **** 
 11546              		.loc 1 4033 19 view .LVU3923
 11547 00ac 01E0     		b	.L851
 11548              	.LVL1347:
 11549              	.L892:
4032:Core/Src/ff.c **** 	if (au > 128) au = 128;
 11550              		.loc 1 4032 18 view .LVU3924
 11551 00ae 0123     		movs	r3, #1
 11552              	.LVL1348:
4032:Core/Src/ff.c **** 	if (au > 128) au = 128;
 11553              		.loc 1 4032 18 view .LVU3925
 11554 00b0 0093     		str	r3, [sp]
 11555              	.LVL1349:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 340


 11556              	.L851:
4036:Core/Src/ff.c **** 	fmt = FS_FAT12;
 11557              		.loc 1 4036 2 is_stmt 1 view .LVU3926
4036:Core/Src/ff.c **** 	fmt = FS_FAT12;
 11558              		.loc 1 4036 9 is_stmt 0 view .LVU3927
 11559 00b2 009B     		ldr	r3, [sp]
 11560 00b4 B2FBF3F3 		udiv	r3, r2, r3
 11561              	.LVL1350:
4037:Core/Src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
 11562              		.loc 1 4037 2 is_stmt 1 view .LVU3928
4038:Core/Src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 11563              		.loc 1 4038 2 view .LVU3929
4038:Core/Src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 11564              		.loc 1 4038 5 is_stmt 0 view .LVU3930
 11565 00b8 40F6F571 		movw	r1, #4085
 11566 00bc 8B42     		cmp	r3, r1
 11567 00be 15D8     		bhi	.L894
4037:Core/Src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
 11568              		.loc 1 4037 6 view .LVU3931
 11569 00c0 4FF0010B 		mov	fp, #1
 11570              	.L852:
 11571              	.LVL1351:
4039:Core/Src/ff.c **** 
 11572              		.loc 1 4039 2 is_stmt 1 view .LVU3932
4039:Core/Src/ff.c **** 
 11573              		.loc 1 4039 5 is_stmt 0 view .LVU3933
 11574 00c4 4FF6F571 		movw	r1, #65525
 11575 00c8 8B42     		cmp	r3, r1
 11576 00ca 12D8     		bhi	.L895
4042:Core/Src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
 11577              		.loc 1 4042 2 is_stmt 1 view .LVU3934
4042:Core/Src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
 11578              		.loc 1 4042 5 is_stmt 0 view .LVU3935
 11579 00cc BBF1030F 		cmp	fp, #3
 11580 00d0 11D0     		beq	.L853
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11581              		.loc 1 4047 3 is_stmt 1 view .LVU3936
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11582              		.loc 1 4047 56 is_stmt 0 view .LVU3937
 11583 00d2 BBF1010F 		cmp	fp, #1
 11584 00d6 5BD0     		beq	.L913
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11585              		.loc 1 4047 71 discriminator 2 view .LVU3938
 11586 00d8 9F1C     		adds	r7, r3, #2
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11587              		.loc 1 4047 56 discriminator 2 view .LVU3939
 11588 00da 7F00     		lsls	r7, r7, #1
 11589              	.LVL1352:
 11590              	.L857:
4048:Core/Src/ff.c **** 		n_rsv = 1;
 11591              		.loc 1 4048 3 is_stmt 1 discriminator 4 view .LVU3940
4048:Core/Src/ff.c **** 		n_rsv = 1;
 11592              		.loc 1 4048 27 is_stmt 0 discriminator 4 view .LVU3941
 11593 00dc 07F2FF17 		addw	r7, r7, #511
 11594              	.LVL1353:
4048:Core/Src/ff.c **** 		n_rsv = 1;
 11595              		.loc 1 4048 9 discriminator 4 view .LVU3942
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 341


 11596 00e0 7F0A     		lsrs	r7, r7, #9
 11597              	.LVL1354:
4049:Core/Src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
 11598              		.loc 1 4049 3 is_stmt 1 discriminator 4 view .LVU3943
4050:Core/Src/ff.c **** 	}
 11599              		.loc 1 4050 3 discriminator 4 view .LVU3944
4050:Core/Src/ff.c **** 	}
 11600              		.loc 1 4050 9 is_stmt 0 discriminator 4 view .LVU3945
 11601 00e2 2023     		movs	r3, #32
 11602 00e4 0393     		str	r3, [sp, #12]
4049:Core/Src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIR / SS(fs);
 11603              		.loc 1 4049 9 discriminator 4 view .LVU3946
 11604 00e6 0123     		movs	r3, #1
 11605 00e8 0293     		str	r3, [sp, #8]
 11606 00ea 0CE0     		b	.L855
 11607              	.LVL1355:
 11608              	.L894:
4038:Core/Src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 11609              		.loc 1 4038 31 view .LVU3947
 11610 00ec 4FF0020B 		mov	fp, #2
 11611 00f0 E8E7     		b	.L852
 11612              	.LVL1356:
 11613              	.L895:
4039:Core/Src/ff.c **** 
 11614              		.loc 1 4039 31 view .LVU3948
 11615 00f2 4FF0030B 		mov	fp, #3
 11616              	.LVL1357:
 11617              	.L853:
4043:Core/Src/ff.c **** 		n_rsv = 32;
 11618              		.loc 1 4043 3 is_stmt 1 view .LVU3949
4043:Core/Src/ff.c **** 		n_rsv = 32;
 11619              		.loc 1 4043 29 is_stmt 0 view .LVU3950
 11620 00f6 03F18207 		add	r7, r3, #130
 11621 00fa BF00     		lsls	r7, r7, #2
4043:Core/Src/ff.c **** 		n_rsv = 32;
 11622              		.loc 1 4043 38 view .LVU3951
 11623 00fc 013F     		subs	r7, r7, #1
4043:Core/Src/ff.c **** 		n_rsv = 32;
 11624              		.loc 1 4043 9 view .LVU3952
 11625 00fe 7F0A     		lsrs	r7, r7, #9
 11626              	.LVL1358:
4044:Core/Src/ff.c **** 		n_dir = 0;
 11627              		.loc 1 4044 3 is_stmt 1 view .LVU3953
4045:Core/Src/ff.c **** 	} else {
 11628              		.loc 1 4045 3 view .LVU3954
4045:Core/Src/ff.c **** 	} else {
 11629              		.loc 1 4045 9 is_stmt 0 view .LVU3955
 11630 0100 0396     		str	r6, [sp, #12]
4044:Core/Src/ff.c **** 		n_dir = 0;
 11631              		.loc 1 4044 9 view .LVU3956
 11632 0102 2023     		movs	r3, #32
 11633              	.LVL1359:
4044:Core/Src/ff.c **** 		n_dir = 0;
 11634              		.loc 1 4044 9 view .LVU3957
 11635 0104 0293     		str	r3, [sp, #8]
 11636              	.LVL1360:
 11637              	.L855:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 342


4052:Core/Src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
 11638              		.loc 1 4052 2 is_stmt 1 view .LVU3958
4052:Core/Src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
 11639              		.loc 1 4052 8 is_stmt 0 view .LVU3959
 11640 0106 029B     		ldr	r3, [sp, #8]
 11641 0108 0199     		ldr	r1, [sp, #4]
 11642 010a 0B44     		add	r3, r3, r1
 11643 010c 0493     		str	r3, [sp, #16]
 11644              	.LVL1361:
4053:Core/Src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
 11645              		.loc 1 4053 2 is_stmt 1 view .LVU3960
4053:Core/Src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
 11646              		.loc 1 4053 8 is_stmt 0 view .LVU3961
 11647 010e 07EB0309 		add	r9, r7, r3
 11648              	.LVL1362:
4054:Core/Src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 11649              		.loc 1 4054 2 is_stmt 1 view .LVU3962
4054:Core/Src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 11650              		.loc 1 4054 9 is_stmt 0 view .LVU3963
 11651 0112 039B     		ldr	r3, [sp, #12]
 11652              	.LVL1363:
4054:Core/Src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 11653              		.loc 1 4054 9 view .LVU3964
 11654 0114 9944     		add	r9, r9, r3
 11655              	.LVL1364:
4055:Core/Src/ff.c **** 
 11656              		.loc 1 4055 2 is_stmt 1 view .LVU3965
4055:Core/Src/ff.c **** 
 11657              		.loc 1 4055 21 is_stmt 0 view .LVU3966
 11658 0116 009B     		ldr	r3, [sp]
 11659 0118 4B44     		add	r3, r3, r9
4055:Core/Src/ff.c **** 
 11660              		.loc 1 4055 26 view .LVU3967
 11661 011a 5B1A     		subs	r3, r3, r1
4055:Core/Src/ff.c **** 
 11662              		.loc 1 4055 5 view .LVU3968
 11663 011c 9A42     		cmp	r2, r3
 11664 011e C0F08982 		bcc	.L896
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11665              		.loc 1 4058 2 is_stmt 1 view .LVU3969
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11666              		.loc 1 4058 6 is_stmt 0 view .LVU3970
 11667 0122 09AA     		add	r2, sp, #36
 11668              	.LVL1365:
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11669              		.loc 1 4058 6 view .LVU3971
 11670 0124 0321     		movs	r1, #3
 11671 0126 2046     		mov	r0, r4
 11672 0128 FFF7FEFF 		bl	disk_ioctl
 11673              	.LVL1366:
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11674              		.loc 1 4058 5 view .LVU3972
 11675 012c 20B9     		cbnz	r0, .L858
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11676              		.loc 1 4058 56 discriminator 2 view .LVU3973
 11677 012e 099B     		ldr	r3, [sp, #36]
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 343


 11678              		.loc 1 4058 53 discriminator 2 view .LVU3974
 11679 0130 13B1     		cbz	r3, .L858
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11680              		.loc 1 4058 59 discriminator 4 view .LVU3975
 11681 0132 B3F5004F 		cmp	r3, #32768
 11682 0136 01D9     		bls	.L859
 11683              	.L858:
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11684              		.loc 1 4058 73 is_stmt 1 discriminator 5 view .LVU3976
4058:Core/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 11685              		.loc 1 4058 75 is_stmt 0 discriminator 5 view .LVU3977
 11686 0138 0123     		movs	r3, #1
 11687 013a 0993     		str	r3, [sp, #36]
 11688              	.L859:
4059:Core/Src/ff.c **** 	n = (n - b_data) / N_FATS;
 11689              		.loc 1 4059 2 is_stmt 1 view .LVU3978
4059:Core/Src/ff.c **** 	n = (n - b_data) / N_FATS;
 11690              		.loc 1 4059 14 is_stmt 0 view .LVU3979
 11691 013c 099A     		ldr	r2, [sp, #36]
 11692 013e 02EB0903 		add	r3, r2, r9
4059:Core/Src/ff.c **** 	n = (n - b_data) / N_FATS;
 11693              		.loc 1 4059 18 view .LVU3980
 11694 0142 013B     		subs	r3, r3, #1
4059:Core/Src/ff.c **** 	n = (n - b_data) / N_FATS;
 11695              		.loc 1 4059 25 view .LVU3981
 11696 0144 5242     		rsbs	r2, r2, #0
4059:Core/Src/ff.c **** 	n = (n - b_data) / N_FATS;
 11697              		.loc 1 4059 23 view .LVU3982
 11698 0146 1340     		ands	r3, r3, r2
4059:Core/Src/ff.c **** 	n = (n - b_data) / N_FATS;
 11699              		.loc 1 4059 4 view .LVU3983
 11700 0148 0993     		str	r3, [sp, #36]
4060:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 11701              		.loc 1 4060 2 is_stmt 1 view .LVU3984
4060:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 11702              		.loc 1 4060 9 is_stmt 0 view .LVU3985
 11703 014a A3EB0903 		sub	r3, r3, r9
4060:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 11704              		.loc 1 4060 4 view .LVU3986
 11705 014e 0993     		str	r3, [sp, #36]
4061:Core/Src/ff.c **** 		n_rsv += n;
 11706              		.loc 1 4061 2 is_stmt 1 view .LVU3987
4061:Core/Src/ff.c **** 		n_rsv += n;
 11707              		.loc 1 4061 5 is_stmt 0 view .LVU3988
 11708 0150 BBF1030F 		cmp	fp, #3
 11709 0154 22D0     		beq	.L914
4065:Core/Src/ff.c **** 	}
 11710              		.loc 1 4065 3 is_stmt 1 view .LVU3989
4065:Core/Src/ff.c **** 	}
 11711              		.loc 1 4065 9 is_stmt 0 view .LVU3990
 11712 0156 1F44     		add	r7, r7, r3
 11713              	.LVL1367:
 11714              	.L861:
4069:Core/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 11715              		.loc 1 4069 2 is_stmt 1 view .LVU3991
4069:Core/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 11716              		.loc 1 4069 18 is_stmt 0 view .LVU3992
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 344


 11717 0158 089A     		ldr	r2, [sp, #32]
 11718 015a 029B     		ldr	r3, [sp, #8]
 11719 015c D31A     		subs	r3, r2, r3
4069:Core/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 11720              		.loc 1 4069 26 view .LVU3993
 11721 015e DB1B     		subs	r3, r3, r7
4069:Core/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 11722              		.loc 1 4069 43 view .LVU3994
 11723 0160 0399     		ldr	r1, [sp, #12]
 11724 0162 5B1A     		subs	r3, r3, r1
4069:Core/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 11725              		.loc 1 4069 9 view .LVU3995
 11726 0164 0099     		ldr	r1, [sp]
 11727 0166 B3FBF1F3 		udiv	r3, r3, r1
 11728 016a 0693     		str	r3, [sp, #24]
 11729              	.LVL1368:
4070:Core/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 11730              		.loc 1 4070 2 is_stmt 1 view .LVU3996
4070:Core/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 11731              		.loc 1 4070 5 is_stmt 0 view .LVU3997
 11732 016c BBF1020F 		cmp	fp, #2
 11733 0170 1BD0     		beq	.L915
 11734              	.LVL1369:
 11735              	.L862:
4071:Core/Src/ff.c **** 		return FR_MKFS_ABORTED;
 11736              		.loc 1 4071 3 view .LVU3998
 11737 0172 BBF1030F 		cmp	fp, #3
 11738 0176 1FD0     		beq	.L916
 11739              	.L863:
4075:Core/Src/ff.c **** 		sys = 0x0C;		/* FAT32X */
 11740              		.loc 1 4075 2 is_stmt 1 view .LVU3999
4075:Core/Src/ff.c **** 		sys = 0x0C;		/* FAT32X */
 11741              		.loc 1 4075 5 is_stmt 0 view .LVU4000
 11742 0178 BBF1030F 		cmp	fp, #3
 11743 017c 28D0     		beq	.L899
4078:Core/Src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
 11744              		.loc 1 4078 3 is_stmt 1 view .LVU4001
4078:Core/Src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
 11745              		.loc 1 4078 6 is_stmt 0 view .LVU4002
 11746 017e BBF1010F 		cmp	fp, #1
 11747 0182 20D0     		beq	.L917
 11748              	.L865:
4081:Core/Src/ff.c **** 		}
 11749              		.loc 1 4081 4 is_stmt 1 view .LVU4003
4081:Core/Src/ff.c **** 		}
 11750              		.loc 1 4081 8 is_stmt 0 view .LVU4004
 11751 0184 B2F5803F 		cmp	r2, #65536
 11752 0188 78D2     		bcs	.L901
 11753 018a 4FF00409 		mov	r9, #4
 11754              	.LVL1370:
4081:Core/Src/ff.c **** 		}
 11755              		.loc 1 4081 8 view .LVU4005
 11756 018e 21E0     		b	.L864
 11757              	.LVL1371:
 11758              	.L913:
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11759              		.loc 1 4047 39 discriminator 1 view .LVU4006
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 345


 11760 0190 03EB4303 		add	r3, r3, r3, lsl #1
 11761              	.LVL1372:
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11762              		.loc 1 4047 43 discriminator 1 view .LVU4007
 11763 0194 5F1C     		adds	r7, r3, #1
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11764              		.loc 1 4047 48 discriminator 1 view .LVU4008
 11765 0196 7F08     		lsrs	r7, r7, #1
4047:Core/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 11766              		.loc 1 4047 56 discriminator 1 view .LVU4009
 11767 0198 0337     		adds	r7, r7, #3
 11768 019a 9FE7     		b	.L857
 11769              	.LVL1373:
 11770              	.L914:
4062:Core/Src/ff.c **** 		b_fat += n;
 11771              		.loc 1 4062 3 is_stmt 1 view .LVU4010
4062:Core/Src/ff.c **** 		b_fat += n;
 11772              		.loc 1 4062 9 is_stmt 0 view .LVU4011
 11773 019c 029A     		ldr	r2, [sp, #8]
 11774 019e 1A44     		add	r2, r2, r3
 11775 01a0 0292     		str	r2, [sp, #8]
 11776              	.LVL1374:
4063:Core/Src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 11777              		.loc 1 4063 3 is_stmt 1 view .LVU4012
4063:Core/Src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 11778              		.loc 1 4063 9 is_stmt 0 view .LVU4013
 11779 01a2 049A     		ldr	r2, [sp, #16]
 11780              	.LVL1375:
4063:Core/Src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 11781              		.loc 1 4063 9 view .LVU4014
 11782 01a4 1A44     		add	r2, r2, r3
 11783 01a6 0492     		str	r2, [sp, #16]
 11784              	.LVL1376:
4063:Core/Src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 11785              		.loc 1 4063 9 view .LVU4015
 11786 01a8 D6E7     		b	.L861
 11787              	.LVL1377:
 11788              	.L915:
4070:Core/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 11789              		.loc 1 4070 26 discriminator 1 view .LVU4016
 11790 01aa 40F6F573 		movw	r3, #4085
 11791              	.LVL1378:
4070:Core/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 11792              		.loc 1 4070 26 discriminator 1 view .LVU4017
 11793 01ae 0699     		ldr	r1, [sp, #24]
 11794 01b0 9942     		cmp	r1, r3
 11795 01b2 DED8     		bhi	.L862
4072:Core/Src/ff.c **** 
 11796              		.loc 1 4072 10 view .LVU4018
 11797 01b4 0E20     		movs	r0, #14
 11798 01b6 26E2     		b	.L846
 11799              	.L916:
4071:Core/Src/ff.c **** 		return FR_MKFS_ABORTED;
 11800              		.loc 1 4071 23 discriminator 1 view .LVU4019
 11801 01b8 4FF6F573 		movw	r3, #65525
 11802 01bc 0699     		ldr	r1, [sp, #24]
 11803 01be 9942     		cmp	r1, r3
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 346


 11804 01c0 DAD8     		bhi	.L863
4072:Core/Src/ff.c **** 
 11805              		.loc 1 4072 10 view .LVU4020
 11806 01c2 0E20     		movs	r0, #14
 11807 01c4 1FE2     		b	.L846
 11808              	.L917:
4078:Core/Src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
 11809              		.loc 1 4078 23 discriminator 1 view .LVU4021
 11810 01c6 B2F5803F 		cmp	r2, #65536
 11811 01ca DBD2     		bcs	.L865
4079:Core/Src/ff.c **** 		} else {
 11812              		.loc 1 4079 8 view .LVU4022
 11813 01cc D946     		mov	r9, fp
 11814              	.LVL1379:
4079:Core/Src/ff.c **** 		} else {
 11815              		.loc 1 4079 8 view .LVU4023
 11816 01ce 01E0     		b	.L864
 11817              	.LVL1380:
 11818              	.L899:
4076:Core/Src/ff.c **** 	} else {
 11819              		.loc 1 4076 7 view .LVU4024
 11820 01d0 4FF00C09 		mov	r9, #12
 11821              	.LVL1381:
 11822              	.L864:
4085:Core/Src/ff.c **** 		/* Update system ID in the partition table */
 11823              		.loc 1 4085 2 is_stmt 1 view .LVU4025
4093:Core/Src/ff.c **** 			md = 0xF0;
 11824              		.loc 1 4093 3 view .LVU4026
4093:Core/Src/ff.c **** 			md = 0xF0;
 11825              		.loc 1 4093 6 is_stmt 0 view .LVU4027
 11826 01d4 B8F1000F 		cmp	r8, #0
 11827 01d8 5ED1     		bne	.L902
4096:Core/Src/ff.c **** 			tbl = fs->win+MBR_Table;	/* Create partition table for single partition in the drive */
 11828              		.loc 1 4096 4 is_stmt 1 view .LVU4028
4096:Core/Src/ff.c **** 			tbl = fs->win+MBR_Table;	/* Create partition table for single partition in the drive */
 11829              		.loc 1 4096 14 is_stmt 0 view .LVU4029
 11830 01da 05F13008 		add	r8, r5, #48
4096:Core/Src/ff.c **** 			tbl = fs->win+MBR_Table;	/* Create partition table for single partition in the drive */
 11831              		.loc 1 4096 4 view .LVU4030
 11832 01de 4FF40072 		mov	r2, #512
 11833 01e2 0021     		movs	r1, #0
 11834 01e4 4046     		mov	r0, r8
 11835 01e6 FFF7FEFF 		bl	mem_set
 11836              	.LVL1382:
4097:Core/Src/ff.c **** 			tbl[1] = 1;						/* Partition start head */
 11837              		.loc 1 4097 4 is_stmt 1 view .LVU4031
4098:Core/Src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
 11838              		.loc 1 4098 4 view .LVU4032
4098:Core/Src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
 11839              		.loc 1 4098 11 is_stmt 0 view .LVU4033
 11840 01ea 0123     		movs	r3, #1
 11841 01ec 85F8EF31 		strb	r3, [r5, #495]
4099:Core/Src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
 11842              		.loc 1 4099 4 is_stmt 1 view .LVU4034
4099:Core/Src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
 11843              		.loc 1 4099 11 is_stmt 0 view .LVU4035
 11844 01f0 85F8F031 		strb	r3, [r5, #496]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 347


4100:Core/Src/ff.c **** 			tbl[4] = sys;					/* System type */
 11845              		.loc 1 4100 4 is_stmt 1 view .LVU4036
4100:Core/Src/ff.c **** 			tbl[4] = sys;					/* System type */
 11846              		.loc 1 4100 11 is_stmt 0 view .LVU4037
 11847 01f4 0022     		movs	r2, #0
 11848 01f6 85F8F121 		strb	r2, [r5, #497]
4101:Core/Src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
 11849              		.loc 1 4101 4 is_stmt 1 view .LVU4038
4101:Core/Src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
 11850              		.loc 1 4101 11 is_stmt 0 view .LVU4039
 11851 01fa 85F8F291 		strb	r9, [r5, #498]
4102:Core/Src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 11852              		.loc 1 4102 4 is_stmt 1 view .LVU4040
4102:Core/Src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 11853              		.loc 1 4102 11 is_stmt 0 view .LVU4041
 11854 01fe FE21     		movs	r1, #254
 11855 0200 85F8F311 		strb	r1, [r5, #499]
4103:Core/Src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 11856              		.loc 1 4103 4 is_stmt 1 view .LVU4042
4103:Core/Src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 11857              		.loc 1 4103 15 is_stmt 0 view .LVU4043
 11858 0204 0898     		ldr	r0, [sp, #32]
 11859 0206 0199     		ldr	r1, [sp, #4]
 11860 0208 01EB000C 		add	ip, r1, r0
4103:Core/Src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 11861              		.loc 1 4103 29 view .LVU4044
 11862 020c 2149     		ldr	r1, .L927+16
 11863 020e A1FB0CE1 		umull	lr, r1, r1, ip
 11864 0212 ACEB010C 		sub	ip, ip, r1
 11865 0216 01EB5C01 		add	r1, r1, ip, lsr #1
 11866 021a 4FEA513C 		lsr	ip, r1, #13
4103:Core/Src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 11867              		.loc 1 4103 6 view .LVU4045
 11868 021e CDF824C0 		str	ip, [sp, #36]
4104:Core/Src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 11869              		.loc 1 4104 4 is_stmt 1 view .LVU4046
4104:Core/Src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 11870              		.loc 1 4104 22 is_stmt 0 view .LVU4047
 11871 0222 C90B     		lsrs	r1, r1, #15
4104:Core/Src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 11872              		.loc 1 4104 13 view .LVU4048
 11873 0224 41F03F01 		orr	r1, r1, #63
4104:Core/Src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 11874              		.loc 1 4104 11 view .LVU4049
 11875 0228 85F8F411 		strb	r1, [r5, #500]
4105:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
 11876              		.loc 1 4105 4 is_stmt 1 view .LVU4050
4105:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 63);			/* Partition start in LBA */
 11877              		.loc 1 4105 11 is_stmt 0 view .LVU4051
 11878 022c 85F8F5C1 		strb	ip, [r5, #501]
4106:Core/Src/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 11879              		.loc 1 4106 4 is_stmt 1 view .LVU4052
 11880 0230 3F21     		movs	r1, #63
 11881 0232 85F8F611 		strb	r1, [r5, #502]
4106:Core/Src/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 11882              		.loc 1 4106 4 view .LVU4053
 11883 0236 85F8F721 		strb	r2, [r5, #503]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 348


4106:Core/Src/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 11884              		.loc 1 4106 4 view .LVU4054
 11885 023a 85F8F821 		strb	r2, [r5, #504]
4106:Core/Src/ff.c **** 			ST_DWORD(tbl+12, n_vol);		/* Partition size in LBA */
 11886              		.loc 1 4106 4 view .LVU4055
 11887 023e 85F8F921 		strb	r2, [r5, #505]
4107:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
 11888              		.loc 1 4107 4 view .LVU4056
 11889 0242 85F8FA01 		strb	r0, [r5, #506]
4107:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
 11890              		.loc 1 4107 4 view .LVU4057
 11891 0246 C0F30721 		ubfx	r1, r0, #8, #8
 11892 024a 85F8FB11 		strb	r1, [r5, #507]
4107:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
 11893              		.loc 1 4107 4 view .LVU4058
 11894 024e C0F30741 		ubfx	r1, r0, #16, #8
 11895 0252 85F8FC11 		strb	r1, [r5, #508]
4107:Core/Src/ff.c **** 			ST_WORD(fs->win+BS_55AA, 0xAA55);	/* MBR signature */
 11896              		.loc 1 4107 4 view .LVU4059
 11897 0256 000E     		lsrs	r0, r0, #24
 11898 0258 85F8FD01 		strb	r0, [r5, #509]
4108:Core/Src/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1))	/* Write it to the MBR */
 11899              		.loc 1 4108 4 view .LVU4060
 11900 025c 5521     		movs	r1, #85
 11901 025e 85F82E12 		strb	r1, [r5, #558]
4108:Core/Src/ff.c **** 			if (disk_write(pdrv, fs->win, 0, 1))	/* Write it to the MBR */
 11902              		.loc 1 4108 4 view .LVU4061
 11903 0262 AA21     		movs	r1, #170
 11904 0264 85F82F12 		strb	r1, [r5, #559]
4109:Core/Src/ff.c **** 				return FR_DISK_ERR;
 11905              		.loc 1 4109 4 view .LVU4062
4109:Core/Src/ff.c **** 				return FR_DISK_ERR;
 11906              		.loc 1 4109 8 is_stmt 0 view .LVU4063
 11907 0268 4146     		mov	r1, r8
 11908 026a 2046     		mov	r0, r4
 11909 026c FFF7FEFF 		bl	disk_write
 11910              	.LVL1383:
4109:Core/Src/ff.c **** 				return FR_DISK_ERR;
 11911              		.loc 1 4109 7 view .LVU4064
 11912 0270 0028     		cmp	r0, #0
 11913 0272 40F0E181 		bne	.L903
4111:Core/Src/ff.c **** 		}
 11914              		.loc 1 4111 7 view .LVU4065
 11915 0276 F823     		movs	r3, #248
 11916 0278 0593     		str	r3, [sp, #20]
 11917 027a 0FE0     		b	.L866
 11918              	.LVL1384:
 11919              	.L901:
4081:Core/Src/ff.c **** 		}
 11920              		.loc 1 4081 8 view .LVU4066
 11921 027c 4FF00609 		mov	r9, #6
 11922              	.LVL1385:
4081:Core/Src/ff.c **** 		}
 11923              		.loc 1 4081 8 view .LVU4067
 11924 0280 A8E7     		b	.L864
 11925              	.L928:
 11926 0282 00BF     		.align	2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 349


 11927              	.L927:
 11928 0284 00000000 		.word	.LANCHOR1
 11929 0288 D34D6210 		.word	274877907
 11930 028c 00000000 		.word	.LANCHOR3
 11931 0290 00000000 		.word	.LANCHOR4
 11932 0294 5B561505 		.word	85284443
 11933              	.LVL1386:
 11934              	.L902:
4094:Core/Src/ff.c **** 		} else {	/* Create partition table (FDISK) */
 11935              		.loc 1 4094 7 view .LVU4068
 11936 0298 F023     		movs	r3, #240
 11937 029a 0593     		str	r3, [sp, #20]
 11938              	.L866:
 11939              	.LVL1387:
4116:Core/Src/ff.c **** 	mem_set(tbl, 0, SS(fs));
 11940              		.loc 1 4116 2 is_stmt 1 view .LVU4069
4116:Core/Src/ff.c **** 	mem_set(tbl, 0, SS(fs));
 11941              		.loc 1 4116 6 is_stmt 0 view .LVU4070
 11942 029c 05F1300A 		add	r10, r5, #48
 11943              	.LVL1388:
4117:Core/Src/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
 11944              		.loc 1 4117 2 is_stmt 1 view .LVU4071
 11945 02a0 4FF40072 		mov	r2, #512
 11946 02a4 0021     		movs	r1, #0
 11947 02a6 5046     		mov	r0, r10
 11948 02a8 FFF7FEFF 		bl	mem_set
 11949              	.LVL1389:
4118:Core/Src/ff.c **** 	i = SS(fs);								/* Sector size */
 11950              		.loc 1 4118 2 view .LVU4072
 11951 02ac 0B22     		movs	r2, #11
 11952 02ae D949     		ldr	r1, .L929
 11953 02b0 5046     		mov	r0, r10
 11954 02b2 FFF7FEFF 		bl	mem_cpy
 11955              	.LVL1390:
4119:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_BytsPerSec, i);
 11956              		.loc 1 4119 2 view .LVU4073
4120:Core/Src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 11957              		.loc 1 4120 2 view .LVU4074
 11958 02b6 0023     		movs	r3, #0
 11959 02b8 85F83B30 		strb	r3, [r5, #59]
4120:Core/Src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 11960              		.loc 1 4120 2 view .LVU4075
 11961 02bc 0223     		movs	r3, #2
 11962 02be 85F83C30 		strb	r3, [r5, #60]
4121:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
 11963              		.loc 1 4121 2 view .LVU4076
4121:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_RsvdSecCnt, n_rsv);		/* Reserved sectors */
 11964              		.loc 1 4121 22 is_stmt 0 view .LVU4077
 11965 02c2 009B     		ldr	r3, [sp]
 11966 02c4 85F83D30 		strb	r3, [r5, #61]
4122:Core/Src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 11967              		.loc 1 4122 2 is_stmt 1 view .LVU4078
 11968 02c8 029B     		ldr	r3, [sp, #8]
 11969 02ca 85F83E30 		strb	r3, [r5, #62]
4122:Core/Src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 11970              		.loc 1 4122 2 view .LVU4079
 11971 02ce C3F30723 		ubfx	r3, r3, #8, #8
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 350


 11972 02d2 85F83F30 		strb	r3, [r5, #63]
4123:Core/Src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
 11973              		.loc 1 4123 2 view .LVU4080
4123:Core/Src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
 11974              		.loc 1 4123 19 is_stmt 0 view .LVU4081
 11975 02d6 0123     		movs	r3, #1
 11976 02d8 85F84030 		strb	r3, [r5, #64]
4124:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_RootEntCnt, i);
 11977              		.loc 1 4124 2 is_stmt 1 view .LVU4082
4124:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_RootEntCnt, i);
 11978              		.loc 1 4124 28 is_stmt 0 view .LVU4083
 11979 02dc BBF1030F 		cmp	fp, #3
 11980 02e0 67D0     		beq	.L918
 11981 02e2 4FF40073 		mov	r3, #512
 11982              	.L867:
 11983              	.LVL1391:
4125:Core/Src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 11984              		.loc 1 4125 2 is_stmt 1 discriminator 4 view .LVU4084
 11985 02e6 85F84130 		strb	r3, [r5, #65]
4125:Core/Src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 11986              		.loc 1 4125 2 discriminator 4 view .LVU4085
 11987 02ea C3F30723 		ubfx	r3, r3, #8, #8
 11988              	.LVL1392:
4125:Core/Src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 11989              		.loc 1 4125 2 is_stmt 0 discriminator 4 view .LVU4086
 11990 02ee 85F84230 		strb	r3, [r5, #66]
4126:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_TotSec16, n_vol);
 11991              		.loc 1 4126 2 is_stmt 1 discriminator 4 view .LVU4087
4126:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_TotSec16, n_vol);
 11992              		.loc 1 4126 12 is_stmt 0 discriminator 4 view .LVU4088
 11993 02f2 089B     		ldr	r3, [sp, #32]
4126:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_TotSec16, n_vol);
 11994              		.loc 1 4126 5 discriminator 4 view .LVU4089
 11995 02f4 B3F5803F 		cmp	r3, #65536
 11996 02f8 5DD2     		bcs	.L868
4127:Core/Src/ff.c **** 	} else {
 11997              		.loc 1 4127 3 is_stmt 1 view .LVU4090
 11998 02fa 85F84330 		strb	r3, [r5, #67]
4127:Core/Src/ff.c **** 	} else {
 11999              		.loc 1 4127 3 view .LVU4091
 12000 02fe C3F30723 		ubfx	r3, r3, #8, #8
 12001 0302 85F84430 		strb	r3, [r5, #68]
 12002              	.L869:
4131:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
 12003              		.loc 1 4131 2 view .LVU4092
4131:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_SecPerTrk, 63);			/* Number of sectors per track */
 12004              		.loc 1 4131 17 is_stmt 0 view .LVU4093
 12005 0306 059B     		ldr	r3, [sp, #20]
 12006 0308 85F84530 		strb	r3, [r5, #69]
4132:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
 12007              		.loc 1 4132 2 is_stmt 1 view .LVU4094
 12008 030c 3F23     		movs	r3, #63
 12009 030e 85F84830 		strb	r3, [r5, #72]
4132:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_NumHeads, 255);			/* Number of heads */
 12010              		.loc 1 4132 2 view .LVU4095
 12011 0312 0023     		movs	r3, #0
 12012 0314 85F84930 		strb	r3, [r5, #73]
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 351


4133:Core/Src/ff.c **** 	ST_DWORD(tbl+BPB_HiddSec, b_vol);		/* Hidden sectors */
 12013              		.loc 1 4133 2 view .LVU4096
 12014 0318 FF22     		movs	r2, #255
 12015 031a 85F84A20 		strb	r2, [r5, #74]
4133:Core/Src/ff.c **** 	ST_DWORD(tbl+BPB_HiddSec, b_vol);		/* Hidden sectors */
 12016              		.loc 1 4133 2 view .LVU4097
 12017 031e 85F84B30 		strb	r3, [r5, #75]
4134:Core/Src/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
 12018              		.loc 1 4134 2 view .LVU4098
 12019 0322 019A     		ldr	r2, [sp, #4]
 12020 0324 85F84C20 		strb	r2, [r5, #76]
4134:Core/Src/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
 12021              		.loc 1 4134 2 view .LVU4099
 12022 0328 C2F30723 		ubfx	r3, r2, #8, #8
 12023 032c 85F84D30 		strb	r3, [r5, #77]
4134:Core/Src/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
 12024              		.loc 1 4134 2 view .LVU4100
 12025 0330 C2F30743 		ubfx	r3, r2, #16, #8
 12026 0334 85F84E30 		strb	r3, [r5, #78]
4134:Core/Src/ff.c **** 	n = get_fattime();						/* Use current time as VSN */
 12027              		.loc 1 4134 2 view .LVU4101
 12028 0338 130E     		lsrs	r3, r2, #24
 12029 033a 85F84F30 		strb	r3, [r5, #79]
4135:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
 12030              		.loc 1 4135 2 view .LVU4102
4135:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
 12031              		.loc 1 4135 6 is_stmt 0 view .LVU4103
 12032 033e FFF7FEFF 		bl	get_fattime
 12033              	.LVL1393:
4135:Core/Src/ff.c **** 	if (fmt == FS_FAT32) {
 12034              		.loc 1 4135 4 view .LVU4104
 12035 0342 0990     		str	r0, [sp, #36]
4136:Core/Src/ff.c **** 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
 12036              		.loc 1 4136 2 is_stmt 1 view .LVU4105
4136:Core/Src/ff.c **** 		ST_DWORD(tbl+BS_VolID32, n);		/* VSN */
 12037              		.loc 1 4136 5 is_stmt 0 view .LVU4106
 12038 0344 BBF1030F 		cmp	fp, #3
 12039 0348 43D0     		beq	.L919
4146:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 12040              		.loc 1 4146 3 is_stmt 1 view .LVU4107
 12041 034a 85F85700 		strb	r0, [r5, #87]
4146:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 12042              		.loc 1 4146 3 view .LVU4108
 12043 034e C0F30723 		ubfx	r3, r0, #8, #8
 12044 0352 85F85830 		strb	r3, [r5, #88]
4146:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 12045              		.loc 1 4146 3 view .LVU4109
 12046 0356 C0F30743 		ubfx	r3, r0, #16, #8
 12047 035a 85F85930 		strb	r3, [r5, #89]
4146:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 12048              		.loc 1 4146 3 view .LVU4110
 12049 035e 000E     		lsrs	r0, r0, #24
 12050 0360 85F85A00 		strb	r0, [r5, #90]
4147:Core/Src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
 12051              		.loc 1 4147 3 view .LVU4111
 12052 0364 85F84670 		strb	r7, [r5, #70]
4147:Core/Src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 352


 12053              		.loc 1 4147 3 view .LVU4112
 12054 0368 C7F30723 		ubfx	r3, r7, #8, #8
 12055 036c 85F84730 		strb	r3, [r5, #71]
4148:Core/Src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 12056              		.loc 1 4148 3 view .LVU4113
4148:Core/Src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 12057              		.loc 1 4148 18 is_stmt 0 view .LVU4114
 12058 0370 8023     		movs	r3, #128
 12059 0372 85F85430 		strb	r3, [r5, #84]
4149:Core/Src/ff.c **** 		mem_cpy(tbl+BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 12060              		.loc 1 4149 3 is_stmt 1 view .LVU4115
4149:Core/Src/ff.c **** 		mem_cpy(tbl+BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 12061              		.loc 1 4149 19 is_stmt 0 view .LVU4116
 12062 0376 2923     		movs	r3, #41
 12063 0378 85F85630 		strb	r3, [r5, #86]
4150:Core/Src/ff.c **** 	}
 12064              		.loc 1 4150 3 is_stmt 1 view .LVU4117
 12065 037c 1322     		movs	r2, #19
 12066 037e A649     		ldr	r1, .L929+4
 12067 0380 05F15B00 		add	r0, r5, #91
 12068 0384 FFF7FEFF 		bl	mem_cpy
 12069              	.LVL1394:
 12070              	.L871:
4152:Core/Src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1))	/* Write it to the VBR sector */
 12071              		.loc 1 4152 2 view .LVU4118
 12072 0388 5523     		movs	r3, #85
 12073 038a 85F82E32 		strb	r3, [r5, #558]
4152:Core/Src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1))	/* Write it to the VBR sector */
 12074              		.loc 1 4152 2 view .LVU4119
 12075 038e AA23     		movs	r3, #170
 12076 0390 85F82F32 		strb	r3, [r5, #559]
4153:Core/Src/ff.c **** 		return FR_DISK_ERR;
 12077              		.loc 1 4153 2 view .LVU4120
4153:Core/Src/ff.c **** 		return FR_DISK_ERR;
 12078              		.loc 1 4153 6 is_stmt 0 view .LVU4121
 12079 0394 0123     		movs	r3, #1
 12080 0396 019A     		ldr	r2, [sp, #4]
 12081 0398 5146     		mov	r1, r10
 12082 039a 2046     		mov	r0, r4
 12083 039c FFF7FEFF 		bl	disk_write
 12084              	.LVL1395:
4153:Core/Src/ff.c **** 		return FR_DISK_ERR;
 12085              		.loc 1 4153 5 view .LVU4122
 12086 03a0 0028     		cmp	r0, #0
 12087 03a2 40F04B81 		bne	.L905
4155:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
 12088              		.loc 1 4155 2 is_stmt 1 view .LVU4123
4155:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
 12089              		.loc 1 4155 5 is_stmt 0 view .LVU4124
 12090 03a6 BBF1030F 		cmp	fp, #3
 12091 03aa 4DD0     		beq	.L920
 12092 03ac DDF81090 		ldr	r9, [sp, #16]
 12093              	.LVL1396:
4155:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
 12094              		.loc 1 4155 5 view .LVU4125
 12095 03b0 8AE0     		b	.L878
 12096              	.LVL1397:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 353


 12097              	.L918:
4124:Core/Src/ff.c **** 	ST_WORD(tbl+BPB_RootEntCnt, i);
 12098              		.loc 1 4124 28 view .LVU4126
 12099 03b2 3346     		mov	r3, r6
 12100 03b4 97E7     		b	.L867
 12101              	.LVL1398:
 12102              	.L868:
4129:Core/Src/ff.c **** 	}
 12103              		.loc 1 4129 3 is_stmt 1 view .LVU4127
 12104 03b6 85F85030 		strb	r3, [r5, #80]
4129:Core/Src/ff.c **** 	}
 12105              		.loc 1 4129 3 view .LVU4128
 12106 03ba C3F30722 		ubfx	r2, r3, #8, #8
 12107 03be 85F85120 		strb	r2, [r5, #81]
4129:Core/Src/ff.c **** 	}
 12108              		.loc 1 4129 3 view .LVU4129
 12109 03c2 C3F30742 		ubfx	r2, r3, #16, #8
 12110 03c6 85F85220 		strb	r2, [r5, #82]
4129:Core/Src/ff.c **** 	}
 12111              		.loc 1 4129 3 view .LVU4130
 12112 03ca 1B0E     		lsrs	r3, r3, #24
 12113 03cc 85F85330 		strb	r3, [r5, #83]
 12114 03d0 99E7     		b	.L869
 12115              	.L919:
4137:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 12116              		.loc 1 4137 3 view .LVU4131
 12117 03d2 85F87300 		strb	r0, [r5, #115]
4137:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 12118              		.loc 1 4137 3 view .LVU4132
 12119 03d6 C0F30723 		ubfx	r3, r0, #8, #8
 12120 03da 85F87430 		strb	r3, [r5, #116]
4137:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 12121              		.loc 1 4137 3 view .LVU4133
 12122 03de C0F30743 		ubfx	r3, r0, #16, #8
 12123 03e2 85F87530 		strb	r3, [r5, #117]
4137:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 12124              		.loc 1 4137 3 view .LVU4134
 12125 03e6 000E     		lsrs	r0, r0, #24
 12126 03e8 85F87600 		strb	r0, [r5, #118]
4138:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
 12127              		.loc 1 4138 3 view .LVU4135
 12128 03ec 85F85470 		strb	r7, [r5, #84]
4138:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
 12129              		.loc 1 4138 3 view .LVU4136
 12130 03f0 C7F30723 		ubfx	r3, r7, #8, #8
 12131 03f4 85F85530 		strb	r3, [r5, #85]
4138:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
 12132              		.loc 1 4138 3 view .LVU4137
 12133 03f8 C7F30743 		ubfx	r3, r7, #16, #8
 12134 03fc 85F85630 		strb	r3, [r5, #86]
4138:Core/Src/ff.c **** 		ST_DWORD(tbl+BPB_RootClus, 2);		/* Root directory start cluster (2) */
 12135              		.loc 1 4138 3 view .LVU4138
 12136 0400 3B0E     		lsrs	r3, r7, #24
 12137 0402 85F85730 		strb	r3, [r5, #87]
4139:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSINFO record offset (VBR+1) */
 12138              		.loc 1 4139 3 view .LVU4139
 12139 0406 0223     		movs	r3, #2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 354


 12140 0408 85F85C30 		strb	r3, [r5, #92]
4139:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSINFO record offset (VBR+1) */
 12141              		.loc 1 4139 3 view .LVU4140
 12142 040c 0023     		movs	r3, #0
 12143 040e 85F85D30 		strb	r3, [r5, #93]
4139:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSINFO record offset (VBR+1) */
 12144              		.loc 1 4139 3 view .LVU4141
 12145 0412 85F85E30 		strb	r3, [r5, #94]
4139:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_FSInfo, 1);			/* FSINFO record offset (VBR+1) */
 12146              		.loc 1 4139 3 view .LVU4142
 12147 0416 85F85F30 		strb	r3, [r5, #95]
4140:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
 12148              		.loc 1 4140 3 view .LVU4143
 12149 041a 0122     		movs	r2, #1
 12150 041c 85F86020 		strb	r2, [r5, #96]
4140:Core/Src/ff.c **** 		ST_WORD(tbl+BPB_BkBootSec, 6);		/* Backup boot record offset (VBR+6) */
 12151              		.loc 1 4140 3 view .LVU4144
 12152 0420 85F86130 		strb	r3, [r5, #97]
4141:Core/Src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 12153              		.loc 1 4141 3 view .LVU4145
 12154 0424 0622     		movs	r2, #6
 12155 0426 85F86220 		strb	r2, [r5, #98]
4141:Core/Src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 12156              		.loc 1 4141 3 view .LVU4146
 12157 042a 85F86330 		strb	r3, [r5, #99]
4142:Core/Src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 12158              		.loc 1 4142 3 view .LVU4147
4142:Core/Src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 12159              		.loc 1 4142 20 is_stmt 0 view .LVU4148
 12160 042e 8023     		movs	r3, #128
 12161 0430 85F87030 		strb	r3, [r5, #112]
4143:Core/Src/ff.c **** 		mem_cpy(tbl+BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 12162              		.loc 1 4143 3 is_stmt 1 view .LVU4149
4143:Core/Src/ff.c **** 		mem_cpy(tbl+BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 12163              		.loc 1 4143 21 is_stmt 0 view .LVU4150
 12164 0434 2923     		movs	r3, #41
 12165 0436 85F87230 		strb	r3, [r5, #114]
4144:Core/Src/ff.c **** 	} else {
 12166              		.loc 1 4144 3 is_stmt 1 view .LVU4151
 12167 043a 1322     		movs	r2, #19
 12168 043c 7749     		ldr	r1, .L929+8
 12169 043e 05F17700 		add	r0, r5, #119
 12170 0442 FFF7FEFF 		bl	mem_cpy
 12171              	.LVL1399:
 12172 0446 9FE7     		b	.L871
 12173              	.L920:
4156:Core/Src/ff.c **** 
 12174              		.loc 1 4156 3 view .LVU4152
 12175 0448 0123     		movs	r3, #1
 12176 044a 019A     		ldr	r2, [sp, #4]
 12177 044c 0632     		adds	r2, r2, #6
 12178 044e 5146     		mov	r1, r10
 12179 0450 2046     		mov	r0, r4
 12180 0452 FFF7FEFF 		bl	disk_write
 12181              	.LVL1400:
 12182 0456 DDF81090 		ldr	r9, [sp, #16]
 12183              	.LVL1401:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 355


4156:Core/Src/ff.c **** 
 12184              		.loc 1 4156 3 is_stmt 0 view .LVU4153
 12185 045a 35E0     		b	.L878
 12186              	.LVL1402:
 12187              	.L924:
4164:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
 12188              		.loc 1 4164 40 view .LVU4154
 12189 045c 704B     		ldr	r3, .L929+12
 12190 045e 45E0     		b	.L874
 12191              	.L873:
4167:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
 12192              		.loc 1 4167 4 is_stmt 1 view .LVU4155
4167:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT32) */
 12193              		.loc 1 4167 6 is_stmt 0 view .LVU4156
 12194 0460 059B     		ldr	r3, [sp, #20]
 12195 0462 63F0FF03 		orn	r3, r3, #255
 12196 0466 0993     		str	r3, [sp, #36]
4168:Core/Src/ff.c **** 			ST_DWORD(tbl+4, 0xFFFFFFFF);
 12197              		.loc 1 4168 4 is_stmt 1 view .LVU4157
 12198 0468 85F83030 		strb	r3, [r5, #48]
4168:Core/Src/ff.c **** 			ST_DWORD(tbl+4, 0xFFFFFFFF);
 12199              		.loc 1 4168 4 view .LVU4158
 12200 046c 1A0E     		lsrs	r2, r3, #24
 12201 046e 85F83120 		strb	r2, [r5, #49]
4168:Core/Src/ff.c **** 			ST_DWORD(tbl+4, 0xFFFFFFFF);
 12202              		.loc 1 4168 4 view .LVU4159
 12203 0472 85F83220 		strb	r2, [r5, #50]
4168:Core/Src/ff.c **** 			ST_DWORD(tbl+4, 0xFFFFFFFF);
 12204              		.loc 1 4168 4 view .LVU4160
 12205 0476 85F83320 		strb	r2, [r5, #51]
4169:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
 12206              		.loc 1 4169 4 view .LVU4161
 12207 047a FF23     		movs	r3, #255
 12208 047c 85F83430 		strb	r3, [r5, #52]
4169:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
 12209              		.loc 1 4169 4 view .LVU4162
 12210 0480 85F83530 		strb	r3, [r5, #53]
4169:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
 12211              		.loc 1 4169 4 view .LVU4163
 12212 0484 85F83630 		strb	r3, [r5, #54]
4169:Core/Src/ff.c **** 			ST_DWORD(tbl+8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
 12213              		.loc 1 4169 4 view .LVU4164
 12214 0488 85F83730 		strb	r3, [r5, #55]
4170:Core/Src/ff.c **** 		}
 12215              		.loc 1 4170 4 view .LVU4165
 12216 048c 85F83830 		strb	r3, [r5, #56]
4170:Core/Src/ff.c **** 		}
 12217              		.loc 1 4170 4 view .LVU4166
 12218 0490 85F83930 		strb	r3, [r5, #57]
4170:Core/Src/ff.c **** 		}
 12219              		.loc 1 4170 4 view .LVU4167
 12220 0494 85F83A30 		strb	r3, [r5, #58]
4170:Core/Src/ff.c **** 		}
 12221              		.loc 1 4170 4 view .LVU4168
 12222 0498 0F23     		movs	r3, #15
 12223 049a 85F83B30 		strb	r3, [r5, #59]
 12224 049e 34E0     		b	.L875
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 356


 12225              	.L922:
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12226              		.loc 1 4175 26 discriminator 2 view .LVU4169
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12227              		.loc 1 4175 27 is_stmt 0 discriminator 2 view .LVU4170
 12228 04a0 099B     		ldr	r3, [sp, #36]
 12229 04a2 0133     		adds	r3, r3, #1
 12230 04a4 0993     		str	r3, [sp, #36]
4176:Core/Src/ff.c **** 				return FR_DISK_ERR;
 12231              		.loc 1 4176 8 discriminator 2 view .LVU4171
 12232 04a6 4A46     		mov	r2, r9
 12233              	.LVL1403:
 12234              	.L876:
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12235              		.loc 1 4175 15 is_stmt 1 discriminator 1 view .LVU4172
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12236              		.loc 1 4175 17 is_stmt 0 discriminator 1 view .LVU4173
 12237 04a8 099B     		ldr	r3, [sp, #36]
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12238              		.loc 1 4175 3 discriminator 1 view .LVU4174
 12239 04aa 9F42     		cmp	r7, r3
 12240 04ac 0AD9     		bls	.L921
4176:Core/Src/ff.c **** 				return FR_DISK_ERR;
 12241              		.loc 1 4176 4 is_stmt 1 view .LVU4175
4176:Core/Src/ff.c **** 				return FR_DISK_ERR;
 12242              		.loc 1 4176 8 is_stmt 0 view .LVU4176
 12243 04ae 02F10109 		add	r9, r2, #1
 12244              	.LVL1404:
4176:Core/Src/ff.c **** 				return FR_DISK_ERR;
 12245              		.loc 1 4176 8 view .LVU4177
 12246 04b2 0123     		movs	r3, #1
 12247 04b4 5146     		mov	r1, r10
 12248 04b6 2046     		mov	r0, r4
 12249 04b8 FFF7FEFF 		bl	disk_write
 12250              	.LVL1405:
4176:Core/Src/ff.c **** 				return FR_DISK_ERR;
 12251              		.loc 1 4176 7 view .LVU4178
 12252 04bc 0028     		cmp	r0, #0
 12253 04be EFD0     		beq	.L922
4177:Core/Src/ff.c **** 		}
 12254              		.loc 1 4177 12 view .LVU4179
 12255 04c0 0120     		movs	r0, #1
 12256 04c2 A0E0     		b	.L846
 12257              	.LVL1406:
 12258              	.L921:
4160:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 12259              		.loc 1 4160 26 is_stmt 1 discriminator 2 view .LVU4180
4160:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 12260              		.loc 1 4160 27 is_stmt 0 discriminator 2 view .LVU4181
 12261 04c4 0136     		adds	r6, r6, #1
 12262              	.LVL1407:
4160:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 12263              		.loc 1 4160 27 discriminator 2 view .LVU4182
 12264 04c6 9146     		mov	r9, r2
 12265              	.LVL1408:
 12266              	.L878:
4160:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 357


 12267              		.loc 1 4160 14 is_stmt 1 discriminator 1 view .LVU4183
4160:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 12268              		.loc 1 4160 2 is_stmt 0 discriminator 1 view .LVU4184
 12269 04c8 A6BB     		cbnz	r6, .L923
4161:Core/Src/ff.c **** 		n = md;								/* Media descriptor byte */
 12270              		.loc 1 4161 3 is_stmt 1 view .LVU4185
 12271 04ca 4FF40072 		mov	r2, #512
 12272 04ce 0021     		movs	r1, #0
 12273 04d0 5046     		mov	r0, r10
 12274 04d2 FFF7FEFF 		bl	mem_set
 12275              	.LVL1409:
4162:Core/Src/ff.c **** 		if (fmt != FS_FAT32) {
 12276              		.loc 1 4162 3 view .LVU4186
4162:Core/Src/ff.c **** 		if (fmt != FS_FAT32) {
 12277              		.loc 1 4162 5 is_stmt 0 view .LVU4187
 12278 04d6 059B     		ldr	r3, [sp, #20]
 12279 04d8 1A46     		mov	r2, r3
 12280 04da 0993     		str	r3, [sp, #36]
4163:Core/Src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
 12281              		.loc 1 4163 3 is_stmt 1 view .LVU4188
4163:Core/Src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
 12282              		.loc 1 4163 6 is_stmt 0 view .LVU4189
 12283 04dc BBF1030F 		cmp	fp, #3
 12284 04e0 BED0     		beq	.L873
4164:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
 12285              		.loc 1 4164 4 is_stmt 1 view .LVU4190
4164:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
 12286              		.loc 1 4164 40 is_stmt 0 view .LVU4191
 12287 04e2 BBF1010F 		cmp	fp, #1
 12288 04e6 B9D0     		beq	.L924
 12289 04e8 6FF0FF03 		mvn	r3, #255
 12290              	.L874:
4164:Core/Src/ff.c **** 			ST_DWORD(tbl+0, n);				/* Reserve cluster #0-1 (FAT12/16) */
 12291              		.loc 1 4164 6 discriminator 4 view .LVU4192
 12292 04ec 1343     		orrs	r3, r3, r2
 12293 04ee 0993     		str	r3, [sp, #36]
4165:Core/Src/ff.c **** 		} else {
 12294              		.loc 1 4165 4 is_stmt 1 discriminator 4 view .LVU4193
 12295 04f0 85F83030 		strb	r3, [r5, #48]
4165:Core/Src/ff.c **** 		} else {
 12296              		.loc 1 4165 4 discriminator 4 view .LVU4194
 12297 04f4 C3F30722 		ubfx	r2, r3, #8, #8
 12298 04f8 85F83120 		strb	r2, [r5, #49]
4165:Core/Src/ff.c **** 		} else {
 12299              		.loc 1 4165 4 discriminator 4 view .LVU4195
 12300 04fc C3F30742 		ubfx	r2, r3, #16, #8
 12301 0500 85F83220 		strb	r2, [r5, #50]
4165:Core/Src/ff.c **** 		} else {
 12302              		.loc 1 4165 4 discriminator 4 view .LVU4196
 12303 0504 1B0E     		lsrs	r3, r3, #24
 12304 0506 85F83330 		strb	r3, [r5, #51]
 12305              	.L875:
4172:Core/Src/ff.c **** 			return FR_DISK_ERR;
 12306              		.loc 1 4172 3 view .LVU4197
4172:Core/Src/ff.c **** 			return FR_DISK_ERR;
 12307              		.loc 1 4172 7 is_stmt 0 view .LVU4198
 12308 050a 09F10108 		add	r8, r9, #1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 358


 12309              	.LVL1410:
4172:Core/Src/ff.c **** 			return FR_DISK_ERR;
 12310              		.loc 1 4172 7 view .LVU4199
 12311 050e 0123     		movs	r3, #1
 12312 0510 4A46     		mov	r2, r9
 12313 0512 5146     		mov	r1, r10
 12314 0514 2046     		mov	r0, r4
 12315 0516 FFF7FEFF 		bl	disk_write
 12316              	.LVL1411:
4172:Core/Src/ff.c **** 			return FR_DISK_ERR;
 12317              		.loc 1 4172 6 view .LVU4200
 12318 051a 0028     		cmp	r0, #0
 12319 051c 40F09080 		bne	.L907
4174:Core/Src/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
 12320              		.loc 1 4174 3 is_stmt 1 view .LVU4201
 12321 0520 4FF40072 		mov	r2, #512
 12322 0524 0021     		movs	r1, #0
 12323 0526 5046     		mov	r0, r10
 12324 0528 FFF7FEFF 		bl	mem_set
 12325              	.LVL1412:
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12326              		.loc 1 4175 3 view .LVU4202
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12327              		.loc 1 4175 10 is_stmt 0 view .LVU4203
 12328 052c 0123     		movs	r3, #1
 12329 052e 0993     		str	r3, [sp, #36]
 12330 0530 4246     		mov	r2, r8
4175:Core/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1))
 12331              		.loc 1 4175 3 view .LVU4204
 12332 0532 B9E7     		b	.L876
 12333              	.LVL1413:
 12334              	.L923:
4182:Core/Src/ff.c **** 	do {
 12335              		.loc 1 4182 29 view .LVU4205
 12336 0534 CDF81090 		str	r9, [sp, #16]
 12337              	.LVL1414:
4182:Core/Src/ff.c **** 	do {
 12338              		.loc 1 4182 2 is_stmt 1 view .LVU4206
4182:Core/Src/ff.c **** 	do {
 12339              		.loc 1 4182 29 is_stmt 0 view .LVU4207
 12340 0538 BBF1030F 		cmp	fp, #3
 12341 053c 18D0     		beq	.L925
4182:Core/Src/ff.c **** 	do {
 12342              		.loc 1 4182 29 view .LVU4208
 12343 053e 039F     		ldr	r7, [sp, #12]
 12344              	.LVL1415:
4182:Core/Src/ff.c **** 	do {
 12345              		.loc 1 4182 29 view .LVU4209
 12346 0540 049E     		ldr	r6, [sp, #16]
 12347              	.LVL1416:
 12348              	.L881:
4183:Core/Src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1))
 12349              		.loc 1 4183 2 is_stmt 1 view .LVU4210
4184:Core/Src/ff.c **** 			return FR_DISK_ERR;
 12350              		.loc 1 4184 3 view .LVU4211
 12351 0542 3246     		mov	r2, r6
4184:Core/Src/ff.c **** 			return FR_DISK_ERR;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 359


 12352              		.loc 1 4184 7 is_stmt 0 view .LVU4212
 12353 0544 0123     		movs	r3, #1
 12354 0546 1E44     		add	r6, r6, r3
 12355              	.LVL1417:
4184:Core/Src/ff.c **** 			return FR_DISK_ERR;
 12356              		.loc 1 4184 7 view .LVU4213
 12357 0548 5146     		mov	r1, r10
 12358 054a 2046     		mov	r0, r4
 12359 054c FFF7FEFF 		bl	disk_write
 12360              	.LVL1418:
4184:Core/Src/ff.c **** 			return FR_DISK_ERR;
 12361              		.loc 1 4184 6 view .LVU4214
 12362 0550 0028     		cmp	r0, #0
 12363 0552 77D1     		bne	.L909
4186:Core/Src/ff.c **** 
 12364              		.loc 1 4186 10 is_stmt 1 view .LVU4215
 12365              	.LVL1419:
4186:Core/Src/ff.c **** 
 12366              		.loc 1 4186 2 is_stmt 0 view .LVU4216
 12367 0554 013F     		subs	r7, r7, #1
 12368              	.LVL1420:
4186:Core/Src/ff.c **** 
 12369              		.loc 1 4186 2 view .LVU4217
 12370 0556 F4D1     		bne	.L881
4198:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 12371              		.loc 1 4198 2 is_stmt 1 view .LVU4218
4198:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_LeadSig, 0x41615252);
 12372              		.loc 1 4198 5 is_stmt 0 view .LVU4219
 12373 0558 BBF1030F 		cmp	fp, #3
 12374 055c 0BD0     		beq	.L926
 12375              	.LVL1421:
 12376              	.L882:
4208:Core/Src/ff.c **** }
 12377              		.loc 1 4208 2 is_stmt 1 view .LVU4220
4208:Core/Src/ff.c **** }
 12378              		.loc 1 4208 10 is_stmt 0 view .LVU4221
 12379 055e 0022     		movs	r2, #0
 12380 0560 1146     		mov	r1, r2
 12381 0562 2046     		mov	r0, r4
 12382 0564 FFF7FEFF 		bl	disk_ioctl
 12383              	.LVL1422:
4208:Core/Src/ff.c **** }
 12384              		.loc 1 4208 60 view .LVU4222
 12385 0568 0038     		subs	r0, r0, #0
 12386 056a 18BF     		it	ne
 12387 056c 0120     		movne	r0, #1
 12388 056e 4AE0     		b	.L846
 12389              	.LVL1423:
 12390              	.L925:
4182:Core/Src/ff.c **** 	do {
 12391              		.loc 1 4182 29 view .LVU4223
 12392 0570 009F     		ldr	r7, [sp]
 12393              	.LVL1424:
4182:Core/Src/ff.c **** 	do {
 12394              		.loc 1 4182 29 view .LVU4224
 12395 0572 4E46     		mov	r6, r9
 12396              	.LVL1425:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 360


4182:Core/Src/ff.c **** 	do {
 12397              		.loc 1 4182 29 view .LVU4225
 12398 0574 E5E7     		b	.L881
 12399              	.LVL1426:
 12400              	.L926:
4199:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
 12401              		.loc 1 4199 3 is_stmt 1 view .LVU4226
 12402 0576 5223     		movs	r3, #82
 12403 0578 85F83030 		strb	r3, [r5, #48]
4199:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
 12404              		.loc 1 4199 3 view .LVU4227
 12405 057c 85F83130 		strb	r3, [r5, #49]
4199:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
 12406              		.loc 1 4199 3 view .LVU4228
 12407 0580 6123     		movs	r3, #97
 12408 0582 85F83230 		strb	r3, [r5, #50]
4199:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_StrucSig, 0x61417272);
 12409              		.loc 1 4199 3 view .LVU4229
 12410 0586 4122     		movs	r2, #65
 12411 0588 85F83320 		strb	r2, [r5, #51]
4200:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 12412              		.loc 1 4200 3 view .LVU4230
 12413 058c 7221     		movs	r1, #114
 12414 058e 85F81412 		strb	r1, [r5, #532]
4200:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 12415              		.loc 1 4200 3 view .LVU4231
 12416 0592 85F81512 		strb	r1, [r5, #533]
4200:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 12417              		.loc 1 4200 3 view .LVU4232
 12418 0596 85F81622 		strb	r2, [r5, #534]
4200:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 12419              		.loc 1 4200 3 view .LVU4233
 12420 059a 85F81732 		strb	r3, [r5, #535]
4201:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 12421              		.loc 1 4201 3 view .LVU4234
 12422 059e 069A     		ldr	r2, [sp, #24]
 12423 05a0 531E     		subs	r3, r2, #1
 12424 05a2 85F81832 		strb	r3, [r5, #536]
4201:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 12425              		.loc 1 4201 3 view .LVU4235
 12426 05a6 531E     		subs	r3, r2, #1
 12427 05a8 C3F30723 		ubfx	r3, r3, #8, #8
 12428 05ac 85F81932 		strb	r3, [r5, #537]
4201:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 12429              		.loc 1 4201 3 view .LVU4236
 12430 05b0 531E     		subs	r3, r2, #1
 12431 05b2 C3F30742 		ubfx	r2, r3, #16, #8
 12432 05b6 85F81A22 		strb	r2, [r5, #538]
4201:Core/Src/ff.c **** 		ST_DWORD(tbl+FSI_Nxt_Free, 2);				/* Last allocated cluster# */
 12433              		.loc 1 4201 3 view .LVU4237
 12434 05ba 1B0E     		lsrs	r3, r3, #24
 12435 05bc 85F81B32 		strb	r3, [r5, #539]
4202:Core/Src/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
 12436              		.loc 1 4202 3 view .LVU4238
 12437 05c0 0223     		movs	r3, #2
 12438 05c2 85F81C32 		strb	r3, [r5, #540]
4202:Core/Src/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 361


 12439              		.loc 1 4202 3 view .LVU4239
 12440 05c6 0023     		movs	r3, #0
 12441 05c8 85F81D32 		strb	r3, [r5, #541]
4202:Core/Src/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
 12442              		.loc 1 4202 3 view .LVU4240
 12443 05cc 85F81E32 		strb	r3, [r5, #542]
4202:Core/Src/ff.c **** 		ST_WORD(tbl+BS_55AA, 0xAA55);
 12444              		.loc 1 4202 3 view .LVU4241
 12445 05d0 85F81F32 		strb	r3, [r5, #543]
4203:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
 12446              		.loc 1 4203 3 view .LVU4242
 12447 05d4 5523     		movs	r3, #85
 12448 05d6 85F82E32 		strb	r3, [r5, #558]
4203:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR+1) */
 12449              		.loc 1 4203 3 view .LVU4243
 12450 05da AA23     		movs	r3, #170
 12451 05dc 85F82F32 		strb	r3, [r5, #559]
4204:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR+7) */
 12452              		.loc 1 4204 3 view .LVU4244
 12453 05e0 0123     		movs	r3, #1
 12454 05e2 019D     		ldr	r5, [sp, #4]
 12455              	.LVL1427:
4204:Core/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR+7) */
 12456              		.loc 1 4204 3 is_stmt 0 view .LVU4245
 12457 05e4 2A46     		mov	r2, r5
 12458 05e6 1A44     		add	r2, r2, r3
 12459 05e8 5146     		mov	r1, r10
 12460 05ea 2046     		mov	r0, r4
 12461 05ec FFF7FEFF 		bl	disk_write
 12462              	.LVL1428:
4205:Core/Src/ff.c **** 	}
 12463              		.loc 1 4205 3 is_stmt 1 view .LVU4246
 12464 05f0 0123     		movs	r3, #1
 12465 05f2 2A46     		mov	r2, r5
 12466 05f4 0732     		adds	r2, r2, #7
 12467 05f6 5146     		mov	r1, r10
 12468 05f8 2046     		mov	r0, r4
 12469 05fa FFF7FEFF 		bl	disk_write
 12470              	.LVL1429:
 12471 05fe AEE7     		b	.L882
 12472              	.LVL1430:
 12473              	.L883:
3993:Core/Src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
 12474              		.loc 1 3993 22 is_stmt 0 view .LVU4247
 12475 0600 0B20     		movs	r0, #11
 12476              	.LVL1431:
3993:Core/Src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
 12477              		.loc 1 3993 22 view .LVU4248
 12478 0602 00E0     		b	.L846
 12479              	.LVL1432:
 12480              	.L884:
3994:Core/Src/ff.c **** 	if (au & (au - 1)) return FR_INVALID_PARAMETER;
 12481              		.loc 1 3994 22 view .LVU4249
 12482 0604 1320     		movs	r0, #19
 12483              	.LVL1433:
 12484              	.L846:
4209:Core/Src/ff.c **** 
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 362


 12485              		.loc 1 4209 1 view .LVU4250
 12486 0606 0BB0     		add	sp, sp, #44
 12487              	.LCFI118:
 12488              		.cfi_remember_state
 12489              		.cfi_def_cfa_offset 36
 12490              		@ sp needed
 12491 0608 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 12492              	.LVL1434:
 12493              	.L885:
 12494              	.LCFI119:
 12495              		.cfi_restore_state
3995:Core/Src/ff.c **** 	fs = FatFs[vol];
 12496              		.loc 1 3995 28 view .LVU4251
 12497 060c 1320     		movs	r0, #19
 12498              	.LVL1435:
3995:Core/Src/ff.c **** 	fs = FatFs[vol];
 12499              		.loc 1 3995 28 view .LVU4252
 12500 060e FAE7     		b	.L846
 12501              	.LVL1436:
 12502              	.L886:
3997:Core/Src/ff.c **** 	fs->fs_type = 0;
 12503              		.loc 1 3997 18 view .LVU4253
 12504 0610 0C20     		movs	r0, #12
 12505              	.LVL1437:
3997:Core/Src/ff.c **** 	fs->fs_type = 0;
 12506              		.loc 1 3997 18 view .LVU4254
 12507 0612 F8E7     		b	.L846
 12508              	.L930:
 12509              		.align	2
 12510              	.L929:
 12511 0614 00000000 		.word	.LC3
 12512 0618 20000000 		.word	.LC5
 12513 061c 0C000000 		.word	.LC4
 12514 0620 00FFFF00 		.word	16776960
 12515              	.LVL1438:
 12516              	.L887:
4004:Core/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 12517              		.loc 1 4004 32 view .LVU4255
 12518 0624 0320     		movs	r0, #3
 12519              	.LVL1439:
4004:Core/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 12520              		.loc 1 4004 32 view .LVU4256
 12521 0626 EEE7     		b	.L846
 12522              	.LVL1440:
 12523              	.L888:
4005:Core/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 12524              		.loc 1 4005 33 view .LVU4257
 12525 0628 0A20     		movs	r0, #10
 12526              	.LVL1441:
4005:Core/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 12527              		.loc 1 4005 33 view .LVU4258
 12528 062a ECE7     		b	.L846
 12529              	.L889:
4021:Core/Src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
 12530              		.loc 1 4021 11 view .LVU4259
 12531 062c 0120     		movs	r0, #1
 12532 062e EAE7     		b	.L846
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 363


 12533              	.L890:
 12534 0630 0120     		movs	r0, #1
 12535 0632 E8E7     		b	.L846
 12536              	.LVL1442:
 12537              	.L896:
4055:Core/Src/ff.c **** 
 12538              		.loc 1 4055 42 view .LVU4260
 12539 0634 0E20     		movs	r0, #14
 12540 0636 E6E7     		b	.L846
 12541              	.LVL1443:
 12542              	.L903:
4110:Core/Src/ff.c **** 			md = 0xF8;
 12543              		.loc 1 4110 12 view .LVU4261
 12544 0638 0120     		movs	r0, #1
 12545 063a E4E7     		b	.L846
 12546              	.LVL1444:
 12547              	.L905:
4154:Core/Src/ff.c **** 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR+6) */
 12548              		.loc 1 4154 10 view .LVU4262
 12549 063c 0120     		movs	r0, #1
 12550 063e E2E7     		b	.L846
 12551              	.LVL1445:
 12552              	.L907:
4173:Core/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
 12553              		.loc 1 4173 11 view .LVU4263
 12554 0640 0120     		movs	r0, #1
 12555 0642 E0E7     		b	.L846
 12556              	.LVL1446:
 12557              	.L909:
4185:Core/Src/ff.c **** 	} while (--i);
 12558              		.loc 1 4185 11 view .LVU4264
 12559 0644 0120     		movs	r0, #1
 12560 0646 DEE7     		b	.L846
 12561              		.cfi_endproc
 12562              	.LFE54:
 12564              		.section	.text.f_gets,"ax",%progbits
 12565              		.align	1
 12566              		.global	f_gets
 12567              		.syntax unified
 12568              		.thumb
 12569              		.thumb_func
 12570              		.fpu fpv4-sp-d16
 12572              	f_gets:
 12573              	.LVL1447:
 12574              	.LFB55:
4296:Core/Src/ff.c **** 	int n = 0;
 12575              		.loc 1 4296 1 is_stmt 1 view -0
 12576              		.cfi_startproc
 12577              		@ args = 0, pretend = 0, frame = 8
 12578              		@ frame_needed = 0, uses_anonymous_args = 0
4296:Core/Src/ff.c **** 	int n = 0;
 12579              		.loc 1 4296 1 is_stmt 0 view .LVU4266
 12580 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 12581              	.LCFI120:
 12582              		.cfi_def_cfa_offset 24
 12583              		.cfi_offset 4, -24
 12584              		.cfi_offset 5, -20
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 364


 12585              		.cfi_offset 6, -16
 12586              		.cfi_offset 7, -12
 12587              		.cfi_offset 8, -8
 12588              		.cfi_offset 14, -4
 12589 0004 82B0     		sub	sp, sp, #8
 12590              	.LCFI121:
 12591              		.cfi_def_cfa_offset 32
 12592 0006 8046     		mov	r8, r0
 12593 0008 0E46     		mov	r6, r1
 12594 000a 1746     		mov	r7, r2
4297:Core/Src/ff.c **** 	TCHAR c, *p = buff;
 12595              		.loc 1 4297 2 is_stmt 1 view .LVU4267
 12596              	.LVL1448:
4298:Core/Src/ff.c **** 	BYTE s[2];
 12597              		.loc 1 4298 2 view .LVU4268
4299:Core/Src/ff.c **** 	UINT rc;
 12598              		.loc 1 4299 2 view .LVU4269
4300:Core/Src/ff.c **** 
 12599              		.loc 1 4300 2 view .LVU4270
4303:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 12600              		.loc 1 4303 2 view .LVU4271
4298:Core/Src/ff.c **** 	BYTE s[2];
 12601              		.loc 1 4298 12 is_stmt 0 view .LVU4272
 12602 000c 0446     		mov	r4, r0
4297:Core/Src/ff.c **** 	TCHAR c, *p = buff;
 12603              		.loc 1 4297 6 view .LVU4273
 12604 000e 0025     		movs	r5, #0
 12605              	.LVL1449:
 12606              	.L932:
4303:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 12607              		.loc 1 4303 8 is_stmt 1 view .LVU4274
4303:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 12608              		.loc 1 4303 17 is_stmt 0 view .LVU4275
 12609 0010 731E     		subs	r3, r6, #1
4303:Core/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 12610              		.loc 1 4303 8 view .LVU4276
 12611 0012 AB42     		cmp	r3, r5
 12612 0014 14DD     		ble	.L933
4348:Core/Src/ff.c **** 		if (rc != 1) break;
 12613              		.loc 1 4348 3 is_stmt 1 view .LVU4277
 12614 0016 6B46     		mov	r3, sp
 12615 0018 0122     		movs	r2, #1
 12616 001a 01A9     		add	r1, sp, #4
 12617 001c 3846     		mov	r0, r7
 12618 001e FFF7FEFF 		bl	f_read
 12619              	.LVL1450:
4349:Core/Src/ff.c **** 		c = s[0];
 12620              		.loc 1 4349 3 view .LVU4278
4349:Core/Src/ff.c **** 		c = s[0];
 12621              		.loc 1 4349 10 is_stmt 0 view .LVU4279
 12622 0022 009B     		ldr	r3, [sp]
4349:Core/Src/ff.c **** 		c = s[0];
 12623              		.loc 1 4349 6 view .LVU4280
 12624 0024 012B     		cmp	r3, #1
 12625 0026 0BD1     		bne	.L933
4350:Core/Src/ff.c **** #endif
 12626              		.loc 1 4350 3 is_stmt 1 view .LVU4281
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 365


4350:Core/Src/ff.c **** #endif
 12627              		.loc 1 4350 5 is_stmt 0 view .LVU4282
 12628 0028 9DF804C0 		ldrb	ip, [sp, #4]	@ zero_extendqisi2
 12629              	.LVL1451:
4352:Core/Src/ff.c **** 		*p++ = c;
 12630              		.loc 1 4352 3 is_stmt 1 view .LVU4283
4353:Core/Src/ff.c **** 		n++;
 12631              		.loc 1 4353 3 view .LVU4284
4353:Core/Src/ff.c **** 		n++;
 12632              		.loc 1 4353 5 is_stmt 0 view .LVU4285
 12633 002c 2346     		mov	r3, r4
 12634              	.LVL1452:
4353:Core/Src/ff.c **** 		n++;
 12635              		.loc 1 4353 8 view .LVU4286
 12636 002e 03F801CB 		strb	ip, [r3], #1
 12637              	.LVL1453:
4354:Core/Src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 12638              		.loc 1 4354 3 is_stmt 1 view .LVU4287
4354:Core/Src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 12639              		.loc 1 4354 4 is_stmt 0 view .LVU4288
 12640 0032 0135     		adds	r5, r5, #1
 12641              	.LVL1454:
4355:Core/Src/ff.c **** 	}
 12642              		.loc 1 4355 3 is_stmt 1 view .LVU4289
4355:Core/Src/ff.c **** 	}
 12643              		.loc 1 4355 6 is_stmt 0 view .LVU4290
 12644 0034 BCF10A0F 		cmp	ip, #10
 12645 0038 01D0     		beq	.L936
4353:Core/Src/ff.c **** 		n++;
 12646              		.loc 1 4353 5 view .LVU4291
 12647 003a 1C46     		mov	r4, r3
 12648 003c E8E7     		b	.L932
 12649              	.L936:
4353:Core/Src/ff.c **** 		n++;
 12650              		.loc 1 4353 5 view .LVU4292
 12651 003e 1C46     		mov	r4, r3
 12652              	.LVL1455:
 12653              	.L933:
4357:Core/Src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 12654              		.loc 1 4357 2 is_stmt 1 view .LVU4293
4357:Core/Src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 12655              		.loc 1 4357 5 is_stmt 0 view .LVU4294
 12656 0040 0023     		movs	r3, #0
 12657 0042 2370     		strb	r3, [r4]
4358:Core/Src/ff.c **** }
 12658              		.loc 1 4358 2 is_stmt 1 view .LVU4295
4358:Core/Src/ff.c **** }
 12659              		.loc 1 4358 18 is_stmt 0 view .LVU4296
 12660 0044 1DB1     		cbz	r5, .L937
4358:Core/Src/ff.c **** }
 12661              		.loc 1 4358 18 view .LVU4297
 12662 0046 4046     		mov	r0, r8
 12663              	.L931:
4359:Core/Src/ff.c **** 
 12664              		.loc 1 4359 1 view .LVU4298
 12665 0048 02B0     		add	sp, sp, #8
 12666              	.LCFI122:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 366


 12667              		.cfi_remember_state
 12668              		.cfi_def_cfa_offset 24
 12669              		@ sp needed
 12670 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 12671              	.LVL1456:
 12672              	.L937:
 12673              	.LCFI123:
 12674              		.cfi_restore_state
4358:Core/Src/ff.c **** }
 12675              		.loc 1 4358 18 view .LVU4299
 12676 004e 0020     		movs	r0, #0
 12677 0050 FAE7     		b	.L931
 12678              		.cfi_endproc
 12679              	.LFE55:
 12681              		.section	.text.f_putc,"ax",%progbits
 12682              		.align	1
 12683              		.global	f_putc
 12684              		.syntax unified
 12685              		.thumb
 12686              		.thumb_func
 12687              		.fpu fpv4-sp-d16
 12689              	f_putc:
 12690              	.LVL1457:
 12691              	.LFB57:
4429:Core/Src/ff.c **** 
4430:Core/Src/ff.c **** 
4431:Core/Src/ff.c **** 
4432:Core/Src/ff.c **** int f_putc (
4433:Core/Src/ff.c **** 	TCHAR c,	/* A character to be output */
4434:Core/Src/ff.c **** 	FIL* fp		/* Pointer to the file object */
4435:Core/Src/ff.c **** )
4436:Core/Src/ff.c **** {
 12692              		.loc 1 4436 1 is_stmt 1 view -0
 12693              		.cfi_startproc
 12694              		@ args = 0, pretend = 0, frame = 80
 12695              		@ frame_needed = 0, uses_anonymous_args = 0
 12696              		.loc 1 4436 1 is_stmt 0 view .LVU4301
 12697 0000 00B5     		push	{lr}
 12698              	.LCFI124:
 12699              		.cfi_def_cfa_offset 4
 12700              		.cfi_offset 14, -4
 12701 0002 95B0     		sub	sp, sp, #84
 12702              	.LCFI125:
 12703              		.cfi_def_cfa_offset 88
4437:Core/Src/ff.c **** 	putbuff pb;
 12704              		.loc 1 4437 2 is_stmt 1 view .LVU4302
4438:Core/Src/ff.c **** 	UINT nw;
 12705              		.loc 1 4438 2 view .LVU4303
4439:Core/Src/ff.c **** 
4440:Core/Src/ff.c **** 
4441:Core/Src/ff.c **** 	pb.fp = fp;			/* Initialize output buffer */
 12706              		.loc 1 4441 2 view .LVU4304
 12707              		.loc 1 4441 8 is_stmt 0 view .LVU4305
 12708 0004 0191     		str	r1, [sp, #4]
4442:Core/Src/ff.c **** 	pb.nchr = pb.idx = 0;
 12709              		.loc 1 4442 2 is_stmt 1 view .LVU4306
 12710              		.loc 1 4442 19 is_stmt 0 view .LVU4307
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 367


 12711 0006 0023     		movs	r3, #0
 12712 0008 0293     		str	r3, [sp, #8]
 12713              		.loc 1 4442 10 view .LVU4308
 12714 000a 0393     		str	r3, [sp, #12]
4443:Core/Src/ff.c **** 
4444:Core/Src/ff.c **** 	putc_bfd(&pb, c);	/* Put a character */
 12715              		.loc 1 4444 2 is_stmt 1 view .LVU4309
 12716 000c 0146     		mov	r1, r0
 12717              	.LVL1458:
 12718              		.loc 1 4444 2 is_stmt 0 view .LVU4310
 12719 000e 01A8     		add	r0, sp, #4
 12720              	.LVL1459:
 12721              		.loc 1 4444 2 view .LVU4311
 12722 0010 FFF7FEFF 		bl	putc_bfd
 12723              	.LVL1460:
4445:Core/Src/ff.c **** 
4446:Core/Src/ff.c **** 	if (   pb.idx >= 0	/* Flush buffered characters to the file */
 12724              		.loc 1 4446 2 is_stmt 1 view .LVU4312
 12725              		.loc 1 4446 11 is_stmt 0 view .LVU4313
 12726 0014 029A     		ldr	r2, [sp, #8]
 12727              		.loc 1 4446 5 view .LVU4314
 12728 0016 002A     		cmp	r2, #0
 12729 0018 0DDB     		blt	.L941
4447:Core/Src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 12730              		.loc 1 4447 6 view .LVU4315
 12731 001a 6B46     		mov	r3, sp
 12732 001c 04A9     		add	r1, sp, #16
 12733 001e 0198     		ldr	r0, [sp, #4]
 12734 0020 FFF7FEFF 		bl	f_write
 12735              	.LVL1461:
 12736              		.loc 1 4447 3 view .LVU4316
 12737 0024 50B9     		cbnz	r0, .L942
4448:Core/Src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 12738              		.loc 1 4448 3 view .LVU4317
 12739 0026 029A     		ldr	r2, [sp, #8]
 12740 0028 009B     		ldr	r3, [sp]
 12741 002a 9A42     		cmp	r2, r3
 12742 002c 09D1     		bne	.L943
 12743              		.loc 1 4448 26 is_stmt 1 discriminator 1 view .LVU4318
 12744              		.loc 1 4448 35 is_stmt 0 discriminator 1 view .LVU4319
 12745 002e 0398     		ldr	r0, [sp, #12]
 12746              	.L939:
4449:Core/Src/ff.c **** 	return EOF;
4450:Core/Src/ff.c **** }
 12747              		.loc 1 4450 1 view .LVU4320
 12748 0030 15B0     		add	sp, sp, #84
 12749              	.LCFI126:
 12750              		.cfi_remember_state
 12751              		.cfi_def_cfa_offset 4
 12752              		@ sp needed
 12753 0032 5DF804FB 		ldr	pc, [sp], #4
 12754              	.L941:
 12755              	.LCFI127:
 12756              		.cfi_restore_state
4449:Core/Src/ff.c **** 	return EOF;
 12757              		.loc 1 4449 9 view .LVU4321
 12758 0036 4FF0FF30 		mov	r0, #-1
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 368


 12759 003a F9E7     		b	.L939
 12760              	.L942:
 12761 003c 4FF0FF30 		mov	r0, #-1
 12762 0040 F6E7     		b	.L939
 12763              	.L943:
 12764 0042 4FF0FF30 		mov	r0, #-1
 12765 0046 F3E7     		b	.L939
 12766              		.cfi_endproc
 12767              	.LFE57:
 12769              		.section	.text.f_puts,"ax",%progbits
 12770              		.align	1
 12771              		.global	f_puts
 12772              		.syntax unified
 12773              		.thumb
 12774              		.thumb_func
 12775              		.fpu fpv4-sp-d16
 12777              	f_puts:
 12778              	.LVL1462:
 12779              	.LFB58:
4451:Core/Src/ff.c **** 
4452:Core/Src/ff.c **** 
4453:Core/Src/ff.c **** 
4454:Core/Src/ff.c **** 
4455:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4456:Core/Src/ff.c **** /* Put a string to the file                                              */
4457:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4458:Core/Src/ff.c **** 
4459:Core/Src/ff.c **** int f_puts (
4460:Core/Src/ff.c **** 	const TCHAR* str,	/* Pointer to the string to be output */
4461:Core/Src/ff.c **** 	FIL* fp				/* Pointer to the file object */
4462:Core/Src/ff.c **** )
4463:Core/Src/ff.c **** {
 12780              		.loc 1 4463 1 is_stmt 1 view -0
 12781              		.cfi_startproc
 12782              		@ args = 0, pretend = 0, frame = 80
 12783              		@ frame_needed = 0, uses_anonymous_args = 0
 12784              		.loc 1 4463 1 is_stmt 0 view .LVU4323
 12785 0000 10B5     		push	{r4, lr}
 12786              	.LCFI128:
 12787              		.cfi_def_cfa_offset 8
 12788              		.cfi_offset 4, -8
 12789              		.cfi_offset 14, -4
 12790 0002 94B0     		sub	sp, sp, #80
 12791              	.LCFI129:
 12792              		.cfi_def_cfa_offset 88
 12793 0004 0446     		mov	r4, r0
4464:Core/Src/ff.c **** 	putbuff pb;
 12794              		.loc 1 4464 2 is_stmt 1 view .LVU4324
4465:Core/Src/ff.c **** 	UINT nw;
 12795              		.loc 1 4465 2 view .LVU4325
4466:Core/Src/ff.c **** 
4467:Core/Src/ff.c **** 
4468:Core/Src/ff.c **** 	pb.fp = fp;				/* Initialize output buffer */
 12796              		.loc 1 4468 2 view .LVU4326
 12797              		.loc 1 4468 8 is_stmt 0 view .LVU4327
 12798 0006 0191     		str	r1, [sp, #4]
4469:Core/Src/ff.c **** 	pb.nchr = pb.idx = 0;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 369


 12799              		.loc 1 4469 2 is_stmt 1 view .LVU4328
 12800              		.loc 1 4469 19 is_stmt 0 view .LVU4329
 12801 0008 0023     		movs	r3, #0
 12802 000a 0293     		str	r3, [sp, #8]
 12803              		.loc 1 4469 10 view .LVU4330
 12804 000c 0393     		str	r3, [sp, #12]
4470:Core/Src/ff.c **** 
4471:Core/Src/ff.c **** 	while (*str)			/* Put the string */
 12805              		.loc 1 4471 2 is_stmt 1 view .LVU4331
 12806              		.loc 1 4471 8 is_stmt 0 view .LVU4332
 12807 000e 03E0     		b	.L946
 12808              	.LVL1463:
 12809              	.L947:
4472:Core/Src/ff.c **** 		putc_bfd(&pb, *str++);
 12810              		.loc 1 4472 3 is_stmt 1 view .LVU4333
 12811              		.loc 1 4472 21 is_stmt 0 view .LVU4334
 12812 0010 0134     		adds	r4, r4, #1
 12813              	.LVL1464:
 12814              		.loc 1 4472 3 view .LVU4335
 12815 0012 01A8     		add	r0, sp, #4
 12816 0014 FFF7FEFF 		bl	putc_bfd
 12817              	.LVL1465:
 12818              	.L946:
4471:Core/Src/ff.c **** 		putc_bfd(&pb, *str++);
 12819              		.loc 1 4471 8 is_stmt 1 view .LVU4336
4471:Core/Src/ff.c **** 		putc_bfd(&pb, *str++);
 12820              		.loc 1 4471 9 is_stmt 0 view .LVU4337
 12821 0018 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
4471:Core/Src/ff.c **** 		putc_bfd(&pb, *str++);
 12822              		.loc 1 4471 8 view .LVU4338
 12823 001a 0029     		cmp	r1, #0
 12824 001c F8D1     		bne	.L947
4473:Core/Src/ff.c **** 
4474:Core/Src/ff.c **** 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
 12825              		.loc 1 4474 2 is_stmt 1 view .LVU4339
 12826              		.loc 1 4474 11 is_stmt 0 view .LVU4340
 12827 001e 029A     		ldr	r2, [sp, #8]
 12828              		.loc 1 4474 5 view .LVU4341
 12829 0020 002A     		cmp	r2, #0
 12830 0022 0CDB     		blt	.L949
4475:Core/Src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 12831              		.loc 1 4475 6 view .LVU4342
 12832 0024 6B46     		mov	r3, sp
 12833 0026 04A9     		add	r1, sp, #16
 12834 0028 0198     		ldr	r0, [sp, #4]
 12835 002a FFF7FEFF 		bl	f_write
 12836              	.LVL1466:
 12837              		.loc 1 4475 3 view .LVU4343
 12838 002e 48B9     		cbnz	r0, .L950
4476:Core/Src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 12839              		.loc 1 4476 3 view .LVU4344
 12840 0030 029A     		ldr	r2, [sp, #8]
 12841 0032 009B     		ldr	r3, [sp]
 12842 0034 9A42     		cmp	r2, r3
 12843 0036 08D1     		bne	.L951
 12844              		.loc 1 4476 26 is_stmt 1 discriminator 1 view .LVU4345
 12845              		.loc 1 4476 35 is_stmt 0 discriminator 1 view .LVU4346
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 370


 12846 0038 0398     		ldr	r0, [sp, #12]
 12847              	.L945:
4477:Core/Src/ff.c **** 	return EOF;
4478:Core/Src/ff.c **** }
 12848              		.loc 1 4478 1 view .LVU4347
 12849 003a 14B0     		add	sp, sp, #80
 12850              	.LCFI130:
 12851              		.cfi_remember_state
 12852              		.cfi_def_cfa_offset 8
 12853              		@ sp needed
 12854 003c 10BD     		pop	{r4, pc}
 12855              	.LVL1467:
 12856              	.L949:
 12857              	.LCFI131:
 12858              		.cfi_restore_state
4477:Core/Src/ff.c **** 	return EOF;
 12859              		.loc 1 4477 9 view .LVU4348
 12860 003e 4FF0FF30 		mov	r0, #-1
 12861 0042 FAE7     		b	.L945
 12862              	.L950:
 12863 0044 4FF0FF30 		mov	r0, #-1
 12864 0048 F7E7     		b	.L945
 12865              	.L951:
 12866 004a 4FF0FF30 		mov	r0, #-1
 12867 004e F4E7     		b	.L945
 12868              		.cfi_endproc
 12869              	.LFE58:
 12871              		.section	.text.f_printf,"ax",%progbits
 12872              		.align	1
 12873              		.global	f_printf
 12874              		.syntax unified
 12875              		.thumb
 12876              		.thumb_func
 12877              		.fpu fpv4-sp-d16
 12879              	f_printf:
 12880              	.LVL1468:
 12881              	.LFB59:
4479:Core/Src/ff.c **** 
4480:Core/Src/ff.c **** 
4481:Core/Src/ff.c **** 
4482:Core/Src/ff.c **** 
4483:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4484:Core/Src/ff.c **** /* Put a formatted string to the file                                    */
4485:Core/Src/ff.c **** /*-----------------------------------------------------------------------*/
4486:Core/Src/ff.c **** 
4487:Core/Src/ff.c **** int f_printf (
4488:Core/Src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
4489:Core/Src/ff.c **** 	const TCHAR* fmt,	/* Pointer to the format string */
4490:Core/Src/ff.c **** 	...					/* Optional arguments... */
4491:Core/Src/ff.c **** )
4492:Core/Src/ff.c **** {
 12882              		.loc 1 4492 1 is_stmt 1 view -0
 12883              		.cfi_startproc
 12884              		@ args = 4, pretend = 12, frame = 104
 12885              		@ frame_needed = 0, uses_anonymous_args = 1
 12886              		.loc 1 4492 1 is_stmt 0 view .LVU4350
 12887 0000 0EB4     		push	{r1, r2, r3}
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 371


 12888              	.LCFI132:
 12889              		.cfi_def_cfa_offset 12
 12890              		.cfi_offset 1, -12
 12891              		.cfi_offset 2, -8
 12892              		.cfi_offset 3, -4
 12893 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 12894              	.LCFI133:
 12895              		.cfi_def_cfa_offset 44
 12896              		.cfi_offset 4, -44
 12897              		.cfi_offset 5, -40
 12898              		.cfi_offset 6, -36
 12899              		.cfi_offset 7, -32
 12900              		.cfi_offset 8, -28
 12901              		.cfi_offset 9, -24
 12902              		.cfi_offset 10, -20
 12903              		.cfi_offset 14, -16
 12904 0006 9BB0     		sub	sp, sp, #108
 12905              	.LCFI134:
 12906              		.cfi_def_cfa_offset 152
 12907 0008 23AB     		add	r3, sp, #140
 12908 000a 53F8045B 		ldr	r5, [r3], #4
4493:Core/Src/ff.c **** 	va_list arp;
 12909              		.loc 1 4493 2 is_stmt 1 view .LVU4351
4494:Core/Src/ff.c **** 	BYTE f, r;
 12910              		.loc 1 4494 2 view .LVU4352
4495:Core/Src/ff.c **** 	UINT nw, i, j, w;
 12911              		.loc 1 4495 2 view .LVU4353
4496:Core/Src/ff.c **** 	DWORD v;
 12912              		.loc 1 4496 2 view .LVU4354
4497:Core/Src/ff.c **** 	TCHAR c, d, s[16], *p;
 12913              		.loc 1 4497 2 view .LVU4355
4498:Core/Src/ff.c **** 	putbuff pb;
 12914              		.loc 1 4498 2 view .LVU4356
4499:Core/Src/ff.c **** 
4500:Core/Src/ff.c **** 
4501:Core/Src/ff.c **** 	pb.fp = fp;				/* Initialize output buffer */
 12915              		.loc 1 4501 2 view .LVU4357
 12916              		.loc 1 4501 8 is_stmt 0 view .LVU4358
 12917 000e 0190     		str	r0, [sp, #4]
4502:Core/Src/ff.c **** 	pb.nchr = pb.idx = 0;
 12918              		.loc 1 4502 2 is_stmt 1 view .LVU4359
 12919              		.loc 1 4502 19 is_stmt 0 view .LVU4360
 12920 0010 0022     		movs	r2, #0
 12921 0012 0292     		str	r2, [sp, #8]
 12922              		.loc 1 4502 10 view .LVU4361
 12923 0014 0392     		str	r2, [sp, #12]
4503:Core/Src/ff.c **** 
4504:Core/Src/ff.c **** 	va_start(arp, fmt);
 12924              		.loc 1 4504 2 is_stmt 1 view .LVU4362
 12925 0016 1993     		str	r3, [sp, #100]
 12926 0018 F4E0     		b	.L954
 12927              	.LVL1469:
 12928              	.L956:
4505:Core/Src/ff.c **** 
4506:Core/Src/ff.c **** 	for (;;) {
4507:Core/Src/ff.c **** 		c = *fmt++;
4508:Core/Src/ff.c **** 		if (c == 0) break;			/* End of string */
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 372


4509:Core/Src/ff.c **** 		if (c != '%') {				/* Non escape character */
4510:Core/Src/ff.c **** 			putc_bfd(&pb, c);
4511:Core/Src/ff.c **** 			continue;
4512:Core/Src/ff.c **** 		}
4513:Core/Src/ff.c **** 		w = f = 0;
 12929              		.loc 1 4513 3 view .LVU4363
4514:Core/Src/ff.c **** 		c = *fmt++;
 12930              		.loc 1 4514 3 view .LVU4364
 12931              		.loc 1 4514 11 is_stmt 0 view .LVU4365
 12932 001a 0235     		adds	r5, r5, #2
 12933              	.LVL1470:
 12934              		.loc 1 4514 5 view .LVU4366
 12935 001c 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 12936              	.LVL1471:
4515:Core/Src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 12937              		.loc 1 4515 3 is_stmt 1 view .LVU4367
 12938              		.loc 1 4515 6 is_stmt 0 view .LVU4368
 12939 001e 3029     		cmp	r1, #48
 12940 0020 04D0     		beq	.L1009
4516:Core/Src/ff.c **** 			f = 1; c = *fmt++;
4517:Core/Src/ff.c **** 		} else {
4518:Core/Src/ff.c **** 			if (c == '-') {			/* Flag: left justified */
 12941              		.loc 1 4518 4 is_stmt 1 view .LVU4369
 12942              		.loc 1 4518 7 is_stmt 0 view .LVU4370
 12943 0022 2D29     		cmp	r1, #45
 12944 0024 06D0     		beq	.L1010
4513:Core/Src/ff.c **** 		c = *fmt++;
 12945              		.loc 1 4513 9 view .LVU4371
 12946 0026 0026     		movs	r6, #0
 12947              	.LVL1472:
 12948              	.L959:
4513:Core/Src/ff.c **** 		c = *fmt++;
 12949              		.loc 1 4513 9 view .LVU4372
 12950 0028 0024     		movs	r4, #0
 12951 002a 0EE0     		b	.L960
 12952              	.LVL1473:
 12953              	.L1009:
4516:Core/Src/ff.c **** 			f = 1; c = *fmt++;
 12954              		.loc 1 4516 4 is_stmt 1 view .LVU4373
4516:Core/Src/ff.c **** 			f = 1; c = *fmt++;
 12955              		.loc 1 4516 11 view .LVU4374
4516:Core/Src/ff.c **** 			f = 1; c = *fmt++;
 12956              		.loc 1 4516 19 is_stmt 0 view .LVU4375
 12957 002c A51C     		adds	r5, r4, #2
 12958              	.LVL1474:
4516:Core/Src/ff.c **** 			f = 1; c = *fmt++;
 12959              		.loc 1 4516 13 view .LVU4376
 12960 002e 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 12961              	.LVL1475:
4516:Core/Src/ff.c **** 			f = 1; c = *fmt++;
 12962              		.loc 1 4516 6 view .LVU4377
 12963 0030 0126     		movs	r6, #1
 12964 0032 F9E7     		b	.L959
 12965              	.LVL1476:
 12966              	.L1010:
4519:Core/Src/ff.c **** 				f = 2; c = *fmt++;
 12967              		.loc 1 4519 5 is_stmt 1 view .LVU4378
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 373


 12968              		.loc 1 4519 12 view .LVU4379
 12969              		.loc 1 4519 20 is_stmt 0 view .LVU4380
 12970 0034 A51C     		adds	r5, r4, #2
 12971              	.LVL1477:
 12972              		.loc 1 4519 14 view .LVU4381
 12973 0036 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 12974              	.LVL1478:
 12975              		.loc 1 4519 7 view .LVU4382
 12976 0038 0226     		movs	r6, #2
 12977 003a F5E7     		b	.L959
 12978              	.LVL1479:
 12979              	.L961:
4520:Core/Src/ff.c **** 			}
4521:Core/Src/ff.c **** 		}
4522:Core/Src/ff.c **** 		while (IsDigit(c)) {		/* Precision */
4523:Core/Src/ff.c **** 			w = w * 10 + c - '0';
 12980              		.loc 1 4523 4 is_stmt 1 view .LVU4383
 12981              		.loc 1 4523 10 is_stmt 0 view .LVU4384
 12982 003c 04EB8404 		add	r4, r4, r4, lsl #2
 12983              	.LVL1480:
 12984              		.loc 1 4523 15 view .LVU4385
 12985 0040 01EB4404 		add	r4, r1, r4, lsl #1
 12986              		.loc 1 4523 6 view .LVU4386
 12987 0044 303C     		subs	r4, r4, #48
 12988              	.LVL1481:
4524:Core/Src/ff.c **** 			c = *fmt++;
 12989              		.loc 1 4524 4 is_stmt 1 view .LVU4387
 12990              		.loc 1 4524 6 is_stmt 0 view .LVU4388
 12991 0046 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 12992              	.LVL1482:
 12993              	.L960:
4522:Core/Src/ff.c **** 			w = w * 10 + c - '0';
 12994              		.loc 1 4522 9 is_stmt 1 view .LVU4389
4522:Core/Src/ff.c **** 			w = w * 10 + c - '0';
 12995              		.loc 1 4522 10 is_stmt 0 view .LVU4390
 12996 004a A1F13003 		sub	r3, r1, #48
 12997 004e DBB2     		uxtb	r3, r3
4522:Core/Src/ff.c **** 			w = w * 10 + c - '0';
 12998              		.loc 1 4522 9 view .LVU4391
 12999 0050 092B     		cmp	r3, #9
 13000 0052 F3D9     		bls	.L961
4525:Core/Src/ff.c **** 		}
4526:Core/Src/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 13001              		.loc 1 4526 3 is_stmt 1 view .LVU4392
 13002              		.loc 1 4526 6 is_stmt 0 view .LVU4393
 13003 0054 6C29     		cmp	r1, #108
 13004 0056 01D0     		beq	.L962
 13005              		.loc 1 4526 16 discriminator 1 view .LVU4394
 13006 0058 4C29     		cmp	r1, #76
 13007 005a 03D1     		bne	.L963
 13008              	.L962:
4527:Core/Src/ff.c **** 			f |= 4; c = *fmt++;
 13009              		.loc 1 4527 4 is_stmt 1 view .LVU4395
 13010              		.loc 1 4527 6 is_stmt 0 view .LVU4396
 13011 005c 46F00406 		orr	r6, r6, #4
 13012              	.LVL1483:
 13013              		.loc 1 4527 12 is_stmt 1 view .LVU4397
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 374


 13014              		.loc 1 4527 14 is_stmt 0 view .LVU4398
 13015 0060 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 13016              	.LVL1484:
 13017              	.L963:
4528:Core/Src/ff.c **** 		}
4529:Core/Src/ff.c **** 		if (!c) break;
 13018              		.loc 1 4529 3 is_stmt 1 view .LVU4399
 13019              		.loc 1 4529 6 is_stmt 0 view .LVU4400
 13020 0064 0029     		cmp	r1, #0
 13021 0066 00F0D980 		beq	.L955
4530:Core/Src/ff.c **** 		d = c;
 13022              		.loc 1 4530 3 is_stmt 1 view .LVU4401
 13023              	.LVL1485:
4531:Core/Src/ff.c **** 		if (IsLower(d)) d -= 0x20;
 13024              		.loc 1 4531 3 view .LVU4402
 13025              		.loc 1 4531 7 is_stmt 0 view .LVU4403
 13026 006a A1F16103 		sub	r3, r1, #97
 13027 006e DBB2     		uxtb	r3, r3
 13028              		.loc 1 4531 6 view .LVU4404
 13029 0070 192B     		cmp	r3, #25
 13030 0072 14D8     		bhi	.L1000
 13031              		.loc 1 4531 19 is_stmt 1 discriminator 1 view .LVU4405
 13032              		.loc 1 4531 21 is_stmt 0 discriminator 1 view .LVU4406
 13033 0074 A1F12003 		sub	r3, r1, #32
 13034 0078 DBB2     		uxtb	r3, r3
 13035              	.LVL1486:
 13036              	.L964:
4532:Core/Src/ff.c **** 		switch (d) {				/* Type is... */
 13037              		.loc 1 4532 3 is_stmt 1 view .LVU4407
 13038 007a A3F14202 		sub	r2, r3, #66
 13039 007e 162A     		cmp	r2, #22
 13040 0080 53D8     		bhi	.L965
 13041 0082 DFE802F0 		tbb	[pc, r2]
 13042              	.L967:
 13043 0086 56       		.byte	(.L972-.L967)/2
 13044 0087 3B       		.byte	(.L971-.L967)/2
 13045 0088 43       		.byte	(.L968-.L967)/2
 13046 0089 52       		.byte	(.L965-.L967)/2
 13047 008a 52       		.byte	(.L965-.L967)/2
 13048 008b 52       		.byte	(.L965-.L967)/2
 13049 008c 52       		.byte	(.L965-.L967)/2
 13050 008d 52       		.byte	(.L965-.L967)/2
 13051 008e 52       		.byte	(.L965-.L967)/2
 13052 008f 52       		.byte	(.L965-.L967)/2
 13053 0090 52       		.byte	(.L965-.L967)/2
 13054 0091 52       		.byte	(.L965-.L967)/2
 13055 0092 52       		.byte	(.L965-.L967)/2
 13056 0093 58       		.byte	(.L1001-.L967)/2
 13057 0094 52       		.byte	(.L965-.L967)/2
 13058 0095 52       		.byte	(.L965-.L967)/2
 13059 0096 52       		.byte	(.L965-.L967)/2
 13060 0097 0E       		.byte	(.L969-.L967)/2
 13061 0098 52       		.byte	(.L965-.L967)/2
 13062 0099 43       		.byte	(.L968-.L967)/2
 13063 009a 52       		.byte	(.L965-.L967)/2
 13064 009b 52       		.byte	(.L965-.L967)/2
 13065 009c 50       		.byte	(.L966-.L967)/2
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 375


 13066              	.LVL1487:
 13067 009d 00       		.p2align 1
 13068              	.L1000:
4530:Core/Src/ff.c **** 		d = c;
 13069              		.loc 1 4530 5 is_stmt 0 view .LVU4408
 13070 009e 0B46     		mov	r3, r1
 13071 00a0 EBE7     		b	.L964
 13072              	.LVL1488:
 13073              	.L969:
4533:Core/Src/ff.c **** 		case 'S' :					/* String */
4534:Core/Src/ff.c **** 			p = va_arg(arp, TCHAR*);
 13074              		.loc 1 4534 4 is_stmt 1 view .LVU4409
 13075              		.loc 1 4534 6 is_stmt 0 view .LVU4410
 13076 00a2 199B     		ldr	r3, [sp, #100]
 13077              	.LVL1489:
 13078              		.loc 1 4534 6 view .LVU4411
 13079 00a4 1A1D     		adds	r2, r3, #4
 13080 00a6 1992     		str	r2, [sp, #100]
 13081 00a8 D3F80080 		ldr	r8, [r3]
4535:Core/Src/ff.c **** 			for (j = 0; p[j]; j++) ;
 13082              		.loc 1 4535 4 is_stmt 1 view .LVU4412
 13083              	.LVL1490:
 13084              		.loc 1 4535 11 is_stmt 0 view .LVU4413
 13085 00ac 0027     		movs	r7, #0
 13086              		.loc 1 4535 4 view .LVU4414
 13087 00ae 00E0     		b	.L973
 13088              	.LVL1491:
 13089              	.L974:
 13090              		.loc 1 4535 27 is_stmt 1 discriminator 3 view .LVU4415
 13091              		.loc 1 4535 22 discriminator 3 view .LVU4416
 13092              		.loc 1 4535 23 is_stmt 0 discriminator 3 view .LVU4417
 13093 00b0 0137     		adds	r7, r7, #1
 13094              	.LVL1492:
 13095              	.L973:
 13096              		.loc 1 4535 16 is_stmt 1 discriminator 1 view .LVU4418
 13097              		.loc 1 4535 17 is_stmt 0 discriminator 1 view .LVU4419
 13098 00b2 18F80730 		ldrb	r3, [r8, r7]	@ zero_extendqisi2
 13099              		.loc 1 4535 4 discriminator 1 view .LVU4420
 13100 00b6 002B     		cmp	r3, #0
 13101 00b8 FAD1     		bne	.L974
4536:Core/Src/ff.c **** 			if (!(f & 2)) {
 13102              		.loc 1 4536 4 is_stmt 1 view .LVU4421
 13103              		.loc 1 4536 7 is_stmt 0 view .LVU4422
 13104 00ba 16F0020F 		tst	r6, #2
 13105 00be 0FD1     		bne	.L978
 13106 00c0 04E0     		b	.L975
 13107              	.LVL1493:
 13108              	.L977:
4537:Core/Src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 13109              		.loc 1 4537 21 is_stmt 1 discriminator 2 view .LVU4423
 13110 00c2 2021     		movs	r1, #32
 13111 00c4 01A8     		add	r0, sp, #4
 13112 00c6 FFF7FEFF 		bl	putc_bfd
 13113              	.LVL1494:
 13114              		.loc 1 4537 13 is_stmt 0 discriminator 2 view .LVU4424
 13115 00ca 3746     		mov	r7, r6
 13116              	.LVL1495:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 376


 13117              	.L975:
 13118              		.loc 1 4537 11 is_stmt 1 discriminator 1 view .LVU4425
 13119              		.loc 1 4537 13 is_stmt 0 discriminator 1 view .LVU4426
 13120 00cc 7E1C     		adds	r6, r7, #1
 13121              	.LVL1496:
 13122              		.loc 1 4537 11 discriminator 1 view .LVU4427
 13123 00ce A742     		cmp	r7, r4
 13124 00d0 F7D3     		bcc	.L977
 13125              		.loc 1 4537 13 view .LVU4428
 13126 00d2 3746     		mov	r7, r6
 13127 00d4 04E0     		b	.L978
 13128              	.LVL1497:
 13129              	.L979:
4538:Core/Src/ff.c **** 			}
4539:Core/Src/ff.c **** 			while (*p) putc_bfd(&pb, *p++);
 13130              		.loc 1 4539 15 is_stmt 1 discriminator 2 view .LVU4429
 13131              		.loc 1 4539 31 is_stmt 0 discriminator 2 view .LVU4430
 13132 00d6 08F10108 		add	r8, r8, #1
 13133              	.LVL1498:
 13134              		.loc 1 4539 15 discriminator 2 view .LVU4431
 13135 00da 01A8     		add	r0, sp, #4
 13136 00dc FFF7FEFF 		bl	putc_bfd
 13137              	.LVL1499:
 13138              	.L978:
 13139              		.loc 1 4539 10 is_stmt 1 discriminator 1 view .LVU4432
 13140              		.loc 1 4539 11 is_stmt 0 discriminator 1 view .LVU4433
 13141 00e0 98F80010 		ldrb	r1, [r8]	@ zero_extendqisi2
 13142              		.loc 1 4539 10 discriminator 1 view .LVU4434
 13143 00e4 0029     		cmp	r1, #0
 13144 00e6 F6D1     		bne	.L979
 13145              		.loc 1 4539 10 discriminator 1 view .LVU4435
 13146 00e8 04E0     		b	.L980
 13147              	.LVL1500:
 13148              	.L981:
4540:Core/Src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
 13149              		.loc 1 4540 20 is_stmt 1 discriminator 2 view .LVU4436
 13150 00ea 2021     		movs	r1, #32
 13151 00ec 01A8     		add	r0, sp, #4
 13152 00ee FFF7FEFF 		bl	putc_bfd
 13153              	.LVL1501:
 13154              		.loc 1 4540 12 is_stmt 0 discriminator 2 view .LVU4437
 13155 00f2 3746     		mov	r7, r6
 13156              	.LVL1502:
 13157              	.L980:
 13158              		.loc 1 4540 10 is_stmt 1 discriminator 1 view .LVU4438
 13159              		.loc 1 4540 12 is_stmt 0 discriminator 1 view .LVU4439
 13160 00f4 7E1C     		adds	r6, r7, #1
 13161              	.LVL1503:
 13162              		.loc 1 4540 10 discriminator 1 view .LVU4440
 13163 00f6 A742     		cmp	r7, r4
 13164 00f8 F7D3     		bcc	.L981
 13165 00fa 83E0     		b	.L954
 13166              	.LVL1504:
 13167              	.L971:
4541:Core/Src/ff.c **** 			continue;
4542:Core/Src/ff.c **** 		case 'C' :					/* Character */
4543:Core/Src/ff.c **** 			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 377


 13168              		.loc 1 4543 4 is_stmt 1 view .LVU4441
 13169              		.loc 1 4543 25 is_stmt 0 view .LVU4442
 13170 00fc 199B     		ldr	r3, [sp, #100]
 13171              	.LVL1505:
 13172              		.loc 1 4543 25 view .LVU4443
 13173 00fe 1A1D     		adds	r2, r3, #4
 13174 0100 1992     		str	r2, [sp, #100]
 13175              		.loc 1 4543 4 view .LVU4444
 13176 0102 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 13177              	.LVL1506:
 13178              		.loc 1 4543 4 view .LVU4445
 13179 0104 01A8     		add	r0, sp, #4
 13180 0106 FFF7FEFF 		bl	putc_bfd
 13181              	.LVL1507:
 13182              		.loc 1 4543 44 is_stmt 1 view .LVU4446
 13183              		.loc 1 4543 4 is_stmt 0 view .LVU4447
 13184 010a 7BE0     		b	.L954
 13185              	.LVL1508:
 13186              	.L968:
4544:Core/Src/ff.c **** 		case 'B' :					/* Binary */
4545:Core/Src/ff.c **** 			r = 2; break;
4546:Core/Src/ff.c **** 		case 'O' :					/* Octal */
4547:Core/Src/ff.c **** 			r = 8; break;
4548:Core/Src/ff.c **** 		case 'D' :					/* Signed decimal */
4549:Core/Src/ff.c **** 		case 'U' :					/* Unsigned decimal */
4550:Core/Src/ff.c **** 			r = 10; break;
 13187              		.loc 1 4550 4 is_stmt 1 view .LVU4448
 13188              		.loc 1 4550 12 view .LVU4449
 13189              		.loc 1 4550 6 is_stmt 0 view .LVU4450
 13190 010c 0A20     		movs	r0, #10
 13191              	.LVL1509:
 13192              	.L970:
4551:Core/Src/ff.c **** 		case 'X' :					/* Hexdecimal */
4552:Core/Src/ff.c **** 			r = 16; break;
4553:Core/Src/ff.c **** 		default:					/* Unknown type (pass-through) */
4554:Core/Src/ff.c **** 			putc_bfd(&pb, c); continue;
4555:Core/Src/ff.c **** 		}
4556:Core/Src/ff.c **** 
4557:Core/Src/ff.c **** 		/* Get an argument and put it in numeral */
4558:Core/Src/ff.c **** 		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_
 13193              		.loc 1 4558 3 is_stmt 1 view .LVU4451
 13194              		.loc 1 4558 42 is_stmt 0 view .LVU4452
 13195 010e 16F0040F 		tst	r6, #4
 13196 0112 12D0     		beq	.L982
 13197              		.loc 1 4558 24 view .LVU4453
 13198 0114 199A     		ldr	r2, [sp, #100]
 13199 0116 171D     		adds	r7, r2, #4
 13200 0118 1997     		str	r7, [sp, #100]
 13201 011a 1268     		ldr	r2, [r2]
 13202              	.L983:
 13203              	.LVL1510:
4559:Core/Src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 13204              		.loc 1 4559 3 is_stmt 1 discriminator 8 view .LVU4454
 13205              		.loc 1 4559 6 is_stmt 0 discriminator 8 view .LVU4455
 13206 011c 442B     		cmp	r3, #68
 13207 011e 18D0     		beq	.L1011
 13208              	.L985:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 378


4560:Core/Src/ff.c **** 			v = 0 - v;
4561:Core/Src/ff.c **** 			f |= 8;
4562:Core/Src/ff.c **** 		}
4563:Core/Src/ff.c **** 		i = 0;
 13209              		.loc 1 4563 3 is_stmt 1 view .LVU4456
 13210              	.LVL1511:
 13211              		.loc 1 4563 5 is_stmt 0 view .LVU4457
 13212 0120 4FF0000C 		mov	ip, #0
 13213 0124 2BE0     		b	.L989
 13214              	.LVL1512:
 13215              	.L966:
4552:Core/Src/ff.c **** 		default:					/* Unknown type (pass-through) */
 13216              		.loc 1 4552 4 is_stmt 1 view .LVU4458
4552:Core/Src/ff.c **** 		default:					/* Unknown type (pass-through) */
 13217              		.loc 1 4552 12 view .LVU4459
4552:Core/Src/ff.c **** 		default:					/* Unknown type (pass-through) */
 13218              		.loc 1 4552 6 is_stmt 0 view .LVU4460
 13219 0126 1020     		movs	r0, #16
4552:Core/Src/ff.c **** 		default:					/* Unknown type (pass-through) */
 13220              		.loc 1 4552 4 view .LVU4461
 13221 0128 F1E7     		b	.L970
 13222              	.LVL1513:
 13223              	.L965:
4554:Core/Src/ff.c **** 		}
 13224              		.loc 1 4554 4 is_stmt 1 view .LVU4462
 13225 012a 01A8     		add	r0, sp, #4
 13226 012c FFF7FEFF 		bl	putc_bfd
 13227              	.LVL1514:
4554:Core/Src/ff.c **** 		}
 13228              		.loc 1 4554 22 view .LVU4463
4554:Core/Src/ff.c **** 		}
 13229              		.loc 1 4554 4 is_stmt 0 view .LVU4464
 13230 0130 68E0     		b	.L954
 13231              	.LVL1515:
 13232              	.L972:
4550:Core/Src/ff.c **** 		case 'X' :					/* Hexdecimal */
 13233              		.loc 1 4550 6 view .LVU4465
 13234 0132 0220     		movs	r0, #2
 13235 0134 EBE7     		b	.L970
 13236              	.L1001:
4547:Core/Src/ff.c **** 		case 'D' :					/* Signed decimal */
 13237              		.loc 1 4547 6 view .LVU4466
 13238 0136 0820     		movs	r0, #8
 13239 0138 E9E7     		b	.L970
 13240              	.LVL1516:
 13241              	.L982:
4558:Core/Src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 13242              		.loc 1 4558 88 discriminator 2 view .LVU4467
 13243 013a 442B     		cmp	r3, #68
 13244 013c 04D0     		beq	.L1012
4558:Core/Src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 13245              		.loc 1 4558 88 view .LVU4468
 13246 013e 199A     		ldr	r2, [sp, #100]
 13247 0140 171D     		adds	r7, r2, #4
 13248 0142 1997     		str	r7, [sp, #100]
 13249 0144 1268     		ldr	r2, [r2]
 13250 0146 E9E7     		b	.L983
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 379


 13251              	.L1012:
4558:Core/Src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 13252              		.loc 1 4558 71 view .LVU4469
 13253 0148 199A     		ldr	r2, [sp, #100]
 13254 014a 171D     		adds	r7, r2, #4
 13255 014c 1997     		str	r7, [sp, #100]
 13256 014e 1268     		ldr	r2, [r2]
 13257 0150 E4E7     		b	.L983
 13258              	.LVL1517:
 13259              	.L1011:
4559:Core/Src/ff.c **** 			v = 0 - v;
 13260              		.loc 1 4559 16 discriminator 1 view .LVU4470
 13261 0152 002A     		cmp	r2, #0
 13262 0154 E4DA     		bge	.L985
4560:Core/Src/ff.c **** 			f |= 8;
 13263              		.loc 1 4560 4 is_stmt 1 view .LVU4471
4560:Core/Src/ff.c **** 			f |= 8;
 13264              		.loc 1 4560 6 is_stmt 0 view .LVU4472
 13265 0156 5242     		rsbs	r2, r2, #0
 13266              	.LVL1518:
4561:Core/Src/ff.c **** 		}
 13267              		.loc 1 4561 4 is_stmt 1 view .LVU4473
4561:Core/Src/ff.c **** 		}
 13268              		.loc 1 4561 6 is_stmt 0 view .LVU4474
 13269 0158 46F00806 		orr	r6, r6, #8
 13270              	.LVL1519:
4561:Core/Src/ff.c **** 		}
 13271              		.loc 1 4561 6 view .LVU4475
 13272 015c E0E7     		b	.L985
 13273              	.LVL1520:
 13274              	.L1013:
4564:Core/Src/ff.c **** 		do {
4565:Core/Src/ff.c **** 			d = (TCHAR)(v % r); v /= r;
4566:Core/Src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 13275              		.loc 1 4566 17 view .LVU4476
 13276 015e 2727     		movs	r7, #39
 13277              	.L987:
 13278              		.loc 1 4566 17 discriminator 5 view .LVU4477
 13279 0160 3B44     		add	r3, r3, r7
 13280              	.LVL1521:
 13281              		.loc 1 4566 17 discriminator 5 view .LVU4478
 13282 0162 DBB2     		uxtb	r3, r3
 13283              	.LVL1522:
 13284              	.L986:
4567:Core/Src/ff.c **** 			s[i++] = d + '0';
 13285              		.loc 1 4567 4 is_stmt 1 view .LVU4479
 13286              		.loc 1 4567 7 is_stmt 0 view .LVU4480
 13287 0164 0CF10107 		add	r7, ip, #1
 13288              	.LVL1523:
 13289              		.loc 1 4567 15 view .LVU4481
 13290 0168 3033     		adds	r3, r3, #48
 13291              	.LVL1524:
 13292              		.loc 1 4567 11 view .LVU4482
 13293 016a 0DF16809 		add	r9, sp, #104
 13294 016e E144     		add	r9, r9, ip
 13295 0170 09F8183C 		strb	r3, [r9, #-24]
4568:Core/Src/ff.c **** 		} while (v && i < sizeof s / sizeof s[0]);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 380


 13296              		.loc 1 4568 11 is_stmt 1 view .LVU4483
 13297              		.loc 1 4568 3 is_stmt 0 view .LVU4484
 13298 0174 C645     		cmp	lr, r8
 13299 0176 10D8     		bhi	.L988
 13300              		.loc 1 4568 14 discriminator 1 view .LVU4485
 13301 0178 0F2F     		cmp	r7, #15
 13302 017a 0ED8     		bhi	.L988
4567:Core/Src/ff.c **** 			s[i++] = d + '0';
 13303              		.loc 1 4567 7 view .LVU4486
 13304 017c BC46     		mov	ip, r7
 13305              	.LVL1525:
 13306              	.L989:
4564:Core/Src/ff.c **** 		do {
 13307              		.loc 1 4564 3 is_stmt 1 view .LVU4487
4565:Core/Src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 13308              		.loc 1 4565 4 view .LVU4488
4565:Core/Src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 13309              		.loc 1 4565 18 is_stmt 0 view .LVU4489
 13310 017e 8646     		mov	lr, r0
 13311 0180 B2FBF0F7 		udiv	r7, r2, r0
 13312 0184 00FB1723 		mls	r3, r0, r7, r2
4565:Core/Src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 13313              		.loc 1 4565 6 view .LVU4490
 13314 0188 DBB2     		uxtb	r3, r3
 13315              	.LVL1526:
4565:Core/Src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 13316              		.loc 1 4565 24 is_stmt 1 view .LVU4491
 13317 018a 9046     		mov	r8, r2
4565:Core/Src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 13318              		.loc 1 4565 26 is_stmt 0 view .LVU4492
 13319 018c 3A46     		mov	r2, r7
 13320              	.LVL1527:
4566:Core/Src/ff.c **** 			s[i++] = d + '0';
 13321              		.loc 1 4566 4 is_stmt 1 view .LVU4493
4566:Core/Src/ff.c **** 			s[i++] = d + '0';
 13322              		.loc 1 4566 7 is_stmt 0 view .LVU4494
 13323 018e 092B     		cmp	r3, #9
 13324 0190 E8D9     		bls	.L986
4566:Core/Src/ff.c **** 			s[i++] = d + '0';
 13325              		.loc 1 4566 15 is_stmt 1 discriminator 1 view .LVU4495
4566:Core/Src/ff.c **** 			s[i++] = d + '0';
 13326              		.loc 1 4566 17 is_stmt 0 discriminator 1 view .LVU4496
 13327 0192 7829     		cmp	r1, #120
 13328 0194 E3D0     		beq	.L1013
4566:Core/Src/ff.c **** 			s[i++] = d + '0';
 13329              		.loc 1 4566 17 view .LVU4497
 13330 0196 0727     		movs	r7, #7
 13331 0198 E2E7     		b	.L987
 13332              	.LVL1528:
 13333              	.L988:
4569:Core/Src/ff.c **** 		if (f & 8) s[i++] = '-';
 13334              		.loc 1 4569 3 is_stmt 1 view .LVU4498
 13335              		.loc 1 4569 6 is_stmt 0 view .LVU4499
 13336 019a 16F0080F 		tst	r6, #8
 13337 019e 06D0     		beq	.L990
 13338              		.loc 1 4569 14 is_stmt 1 discriminator 1 view .LVU4500
 13339              	.LVL1529:
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 381


 13340              		.loc 1 4569 21 is_stmt 0 discriminator 1 view .LVU4501
 13341 01a0 1AAB     		add	r3, sp, #104
 13342 01a2 1F44     		add	r7, r7, r3
 13343 01a4 2D23     		movs	r3, #45
 13344 01a6 07F8183C 		strb	r3, [r7, #-24]
 13345              		.loc 1 4569 17 discriminator 1 view .LVU4502
 13346 01aa 0CF10207 		add	r7, ip, #2
 13347              	.LVL1530:
 13348              	.L990:
4570:Core/Src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 13349              		.loc 1 4570 3 is_stmt 1 view .LVU4503
 13350              		.loc 1 4570 10 view .LVU4504
 13351              		.loc 1 4570 12 is_stmt 0 view .LVU4505
 13352 01ae 16F0010F 		tst	r6, #1
 13353 01b2 0FD0     		beq	.L1004
 13354              		.loc 1 4570 12 view .LVU4506
 13355 01b4 4FF0300A 		mov	r10, #48
 13356              	.L991:
 13357              	.LVL1531:
4571:Core/Src/ff.c **** 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
 13358              		.loc 1 4571 3 is_stmt 1 discriminator 4 view .LVU4507
4570:Core/Src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 13359              		.loc 1 4570 5 is_stmt 0 discriminator 4 view .LVU4508
 13360 01b8 B846     		mov	r8, r7
 13361              	.LVL1532:
 13362              	.L992:
 13363              		.loc 1 4571 9 is_stmt 1 discriminator 1 view .LVU4509
 13364 01ba 16F0020F 		tst	r6, #2
 13365 01be 0DD1     		bne	.L995
 13366              		.loc 1 4571 23 is_stmt 0 discriminator 2 view .LVU4510
 13367 01c0 08F10109 		add	r9, r8, #1
 13368              	.LVL1533:
 13369              		.loc 1 4571 19 discriminator 2 view .LVU4511
 13370 01c4 A045     		cmp	r8, r4
 13371 01c6 08D2     		bcs	.L1014
 13372              		.loc 1 4571 31 is_stmt 1 discriminator 3 view .LVU4512
 13373 01c8 5146     		mov	r1, r10
 13374 01ca 01A8     		add	r0, sp, #4
 13375 01cc FFF7FEFF 		bl	putc_bfd
 13376              	.LVL1534:
 13377              		.loc 1 4571 23 is_stmt 0 discriminator 3 view .LVU4513
 13378 01d0 C846     		mov	r8, r9
 13379 01d2 F2E7     		b	.L992
 13380              	.LVL1535:
 13381              	.L1004:
4570:Core/Src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 13382              		.loc 1 4570 12 view .LVU4514
 13383 01d4 4FF0200A 		mov	r10, #32
 13384 01d8 EEE7     		b	.L991
 13385              	.LVL1536:
 13386              	.L1014:
 13387              		.loc 1 4571 23 view .LVU4515
 13388 01da C846     		mov	r8, r9
 13389              	.LVL1537:
 13390              	.L995:
4572:Core/Src/ff.c **** 		do putc_bfd(&pb, s[--i]); while (i);
 13391              		.loc 1 4572 3 is_stmt 1 discriminator 1 view .LVU4516
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 382


 13392              		.loc 1 4572 6 discriminator 1 view .LVU4517
 13393 01dc 013F     		subs	r7, r7, #1
 13394              	.LVL1538:
 13395              		.loc 1 4572 6 is_stmt 0 discriminator 1 view .LVU4518
 13396 01de 1AAB     		add	r3, sp, #104
 13397 01e0 3B44     		add	r3, r3, r7
 13398 01e2 13F8181C 		ldrb	r1, [r3, #-24]	@ zero_extendqisi2
 13399 01e6 01A8     		add	r0, sp, #4
 13400 01e8 FFF7FEFF 		bl	putc_bfd
 13401              	.LVL1539:
 13402              		.loc 1 4572 35 is_stmt 1 discriminator 1 view .LVU4519
 13403              		.loc 1 4572 3 is_stmt 0 discriminator 1 view .LVU4520
 13404 01ec 002F     		cmp	r7, #0
 13405 01ee F5D1     		bne	.L995
 13406              		.loc 1 4572 3 discriminator 1 view .LVU4521
 13407 01f0 04E0     		b	.L996
 13408              	.LVL1540:
 13409              	.L997:
4573:Core/Src/ff.c **** 		while (j++ < w) putc_bfd(&pb, d);
 13410              		.loc 1 4573 19 is_stmt 1 discriminator 2 view .LVU4522
 13411 01f2 5146     		mov	r1, r10
 13412 01f4 01A8     		add	r0, sp, #4
 13413 01f6 FFF7FEFF 		bl	putc_bfd
 13414              	.LVL1541:
 13415              		.loc 1 4573 11 is_stmt 0 discriminator 2 view .LVU4523
 13416 01fa B046     		mov	r8, r6
 13417              	.LVL1542:
 13418              	.L996:
 13419              		.loc 1 4573 9 is_stmt 1 discriminator 1 view .LVU4524
 13420              		.loc 1 4573 11 is_stmt 0 discriminator 1 view .LVU4525
 13421 01fc 08F10106 		add	r6, r8, #1
 13422              	.LVL1543:
 13423              		.loc 1 4573 9 discriminator 1 view .LVU4526
 13424 0200 A045     		cmp	r8, r4
 13425 0202 F6D3     		bcc	.L997
 13426              	.LVL1544:
 13427              	.L954:
4506:Core/Src/ff.c **** 		c = *fmt++;
 13428              		.loc 1 4506 2 is_stmt 1 view .LVU4527
4507:Core/Src/ff.c **** 		if (c == 0) break;			/* End of string */
 13429              		.loc 1 4507 3 view .LVU4528
4507:Core/Src/ff.c **** 		if (c == 0) break;			/* End of string */
 13430              		.loc 1 4507 11 is_stmt 0 view .LVU4529
 13431 0204 2C46     		mov	r4, r5
 13432              	.LVL1545:
4507:Core/Src/ff.c **** 		if (c == 0) break;			/* End of string */
 13433              		.loc 1 4507 5 view .LVU4530
 13434 0206 14F8011B 		ldrb	r1, [r4], #1	@ zero_extendqisi2
 13435              	.LVL1546:
4508:Core/Src/ff.c **** 		if (c != '%') {				/* Non escape character */
 13436              		.loc 1 4508 3 is_stmt 1 view .LVU4531
4508:Core/Src/ff.c **** 		if (c != '%') {				/* Non escape character */
 13437              		.loc 1 4508 6 is_stmt 0 view .LVU4532
 13438 020a 39B1     		cbz	r1, .L955
4509:Core/Src/ff.c **** 			putc_bfd(&pb, c);
 13439              		.loc 1 4509 3 is_stmt 1 view .LVU4533
4509:Core/Src/ff.c **** 			putc_bfd(&pb, c);
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 383


 13440              		.loc 1 4509 6 is_stmt 0 view .LVU4534
 13441 020c 2529     		cmp	r1, #37
 13442 020e 3FF404AF 		beq	.L956
4510:Core/Src/ff.c **** 			continue;
 13443              		.loc 1 4510 4 is_stmt 1 view .LVU4535
 13444 0212 01A8     		add	r0, sp, #4
 13445 0214 FFF7FEFF 		bl	putc_bfd
 13446              	.LVL1547:
4511:Core/Src/ff.c **** 		}
 13447              		.loc 1 4511 4 view .LVU4536
4507:Core/Src/ff.c **** 		if (c == 0) break;			/* End of string */
 13448              		.loc 1 4507 11 is_stmt 0 view .LVU4537
 13449 0218 2546     		mov	r5, r4
4511:Core/Src/ff.c **** 		}
 13450              		.loc 1 4511 4 view .LVU4538
 13451 021a F3E7     		b	.L954
 13452              	.LVL1548:
 13453              	.L955:
4574:Core/Src/ff.c **** 	}
4575:Core/Src/ff.c **** 
4576:Core/Src/ff.c **** 	va_end(arp);
 13454              		.loc 1 4576 2 is_stmt 1 view .LVU4539
4577:Core/Src/ff.c **** 
4578:Core/Src/ff.c **** 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
 13455              		.loc 1 4578 2 view .LVU4540
 13456              		.loc 1 4578 11 is_stmt 0 view .LVU4541
 13457 021c 029A     		ldr	r2, [sp, #8]
 13458              		.loc 1 4578 5 view .LVU4542
 13459 021e 002A     		cmp	r2, #0
 13460 0220 0FDB     		blt	.L1005
4579:Core/Src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 13461              		.loc 1 4579 6 view .LVU4543
 13462 0222 18AB     		add	r3, sp, #96
 13463 0224 04A9     		add	r1, sp, #16
 13464 0226 0198     		ldr	r0, [sp, #4]
 13465 0228 FFF7FEFF 		bl	f_write
 13466              	.LVL1549:
 13467              		.loc 1 4579 3 view .LVU4544
 13468 022c 60B9     		cbnz	r0, .L1006
4580:Core/Src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 13469              		.loc 1 4580 3 view .LVU4545
 13470 022e 029A     		ldr	r2, [sp, #8]
 13471 0230 189B     		ldr	r3, [sp, #96]
 13472 0232 9A42     		cmp	r2, r3
 13473 0234 0BD1     		bne	.L1007
 13474              		.loc 1 4580 26 is_stmt 1 discriminator 1 view .LVU4546
 13475              		.loc 1 4580 35 is_stmt 0 discriminator 1 view .LVU4547
 13476 0236 0398     		ldr	r0, [sp, #12]
 13477              	.L953:
4581:Core/Src/ff.c **** 	return EOF;
4582:Core/Src/ff.c **** }
 13478              		.loc 1 4582 1 view .LVU4548
 13479 0238 1BB0     		add	sp, sp, #108
 13480              	.LCFI135:
 13481              		.cfi_remember_state
 13482              		.cfi_def_cfa_offset 44
 13483              		@ sp needed
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 384


 13484 023a BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 13485              	.LCFI136:
 13486              		.cfi_restore 14
 13487              		.cfi_restore 10
 13488              		.cfi_restore 9
 13489              		.cfi_restore 8
 13490              		.cfi_restore 7
 13491              		.cfi_restore 6
 13492              		.cfi_restore 5
 13493              		.cfi_restore 4
 13494              		.cfi_def_cfa_offset 12
 13495 023e 03B0     		add	sp, sp, #12
 13496              	.LCFI137:
 13497              		.cfi_restore 3
 13498              		.cfi_restore 2
 13499              		.cfi_restore 1
 13500              		.cfi_def_cfa_offset 0
 13501 0240 7047     		bx	lr
 13502              	.LVL1550:
 13503              	.L1005:
 13504              	.LCFI138:
 13505              		.cfi_restore_state
4581:Core/Src/ff.c **** 	return EOF;
 13506              		.loc 1 4581 9 view .LVU4549
 13507 0242 4FF0FF30 		mov	r0, #-1
 13508 0246 F7E7     		b	.L953
 13509              	.LVL1551:
 13510              	.L1006:
4581:Core/Src/ff.c **** 	return EOF;
 13511              		.loc 1 4581 9 view .LVU4550
 13512 0248 4FF0FF30 		mov	r0, #-1
 13513 024c F4E7     		b	.L953
 13514              	.L1007:
 13515 024e 4FF0FF30 		mov	r0, #-1
 13516 0252 F1E7     		b	.L953
 13517              		.cfi_endproc
 13518              	.LFE59:
 13520              		.section	.bss.FatFs,"aw",%nobits
 13521              		.align	2
 13522              		.set	.LANCHOR1,. + 0
 13525              	FatFs:
 13526 0000 00000000 		.space	8
 13526      00000000 
 13527              		.section	.bss.Fsid,"aw",%nobits
 13528              		.align	1
 13529              		.set	.LANCHOR2,. + 0
 13532              	Fsid:
 13533 0000 0000     		.space	2
 13534              		.section	.rodata.LfnOfs,"a"
 13535              		.align	2
 13536              		.set	.LANCHOR0,. + 0
 13539              	LfnOfs:
 13540 0000 01030507 		.ascii	"\001\003\005\007\011\016\020\022\024\026\030\034\036"
 13540      090E1012 
 13540      1416181C 
 13540      1E
 13541              		.section	.rodata.cst.0,"a"
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 385


 13542              		.align	2
 13543              		.set	.LANCHOR4,. + 0
 13546              	cst.0:
 13547 0000 0080     		.short	-32768
 13548 0002 0040     		.short	16384
 13549 0004 0020     		.short	8192
 13550 0006 0010     		.short	4096
 13551 0008 0008     		.short	2048
 13552 000a 0040     		.short	16384
 13553 000c 0020     		.short	8192
 13554 000e 0010     		.short	4096
 13555 0010 0008     		.short	2048
 13556 0012 0004     		.short	1024
 13557 0014 0002     		.short	512
 13558              		.section	.rodata.vst.1,"a"
 13559              		.align	2
 13560              		.set	.LANCHOR3,. + 0
 13563              	vst.1:
 13564 0000 0004     		.short	1024
 13565 0002 0002     		.short	512
 13566 0004 0001     		.short	256
 13567 0006 8000     		.short	128
 13568 0008 4000     		.short	64
 13569 000a 2000     		.short	32
 13570 000c 1000     		.short	16
 13571 000e 0800     		.short	8
 13572 0010 0400     		.short	4
 13573 0012 0200     		.short	2
 13574 0014 0000     		.short	0
 13575              		.text
 13576              	.Letext0:
 13577              		.file 2 "Core/Inc/integer.h"
 13578              		.file 3 "Core/Inc/ff.h"
 13579              		.file 4 "Core/Inc/diskio.h"
 13580              		.file 5 "d:\\install\\gnu arm embedded toolchain\\10 2020-q4-major\\lib\\gcc\\arm-none-eabi\\10.2.
 13581              		.file 6 "<built-in>"
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 386


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:18     .text.mem_cpy:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:25     .text.mem_cpy:00000000 mem_cpy
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:65     .text.mem_set:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:71     .text.mem_set:00000000 mem_set
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:106    .text.mem_cmp:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:112    .text.mem_cmp:00000000 mem_cmp
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:166    .text.chk_chr:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:172    .text.chk_chr:00000000 chk_chr
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:208    .text.clmt_clust:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:214    .text.clmt_clust:00000000 clmt_clust
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:279    .text.ld_clust:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:285    .text.ld_clust:00000000 ld_clust
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:330    .text.st_clust:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:336    .text.st_clust:00000000 st_clust
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:363    .text.pick_lfn:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:369    .text.pick_lfn:00000000 pick_lfn
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:506    .text.pick_lfn:0000007c $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:511    .text.fit_lfn:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:517    .text.fit_lfn:00000000 fit_lfn
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:633    .text.fit_lfn:00000074 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:638    .text.gen_numname:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:644    .text.gen_numname:00000000 gen_numname
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:877    .text.sum_sfn:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:883    .text.sum_sfn:00000000 sum_sfn
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:930    .text.get_ldnumber:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:936    .text.get_ldnumber:00000000 get_ldnumber
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1051   .text.sync_window:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1057   .text.sync_window:00000000 sync_window
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1163   .text.move_window:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1169   .text.move_window:00000000 move_window
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1233   .text.check_fs:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1239   .text.check_fs:00000000 check_fs
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1328   .text.check_fs:00000084 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1334   .text.validate:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1340   .text.validate:00000000 validate
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1427   .text.find_volume:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:1433   .text.find_volume:00000000 find_volume
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:2040   .text.find_volume:0000033c $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:2048   .text.find_volume:00000350 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:2165   .text.get_fileinfo:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:2171   .text.get_fileinfo:00000000 get_fileinfo
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:2455   .rodata.create_name.str1.4:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:2462   .text.create_name:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:2468   .text.create_name:00000000 create_name
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3111   .text.create_name:00000268 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3117   .text.cmp_lfn:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3123   .text.cmp_lfn:00000000 cmp_lfn
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3268   .text.cmp_lfn:00000084 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3273   .text.sync_fs:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3279   .text.sync_fs:00000000 sync_fs
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3419   .text.clust2sect:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3426   .text.clust2sect:00000000 clust2sect
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3466   .text.get_fat:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3473   .text.get_fat:00000000 get_fat
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3710   .text.put_fat:00000000 $t
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 387


C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3717   .text.put_fat:00000000 put_fat
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:3996   .text.create_chain:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4002   .text.create_chain:00000000 create_chain
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4226   .text.dir_next:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4232   .text.dir_next:00000000 dir_next
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4541   .text.dir_read:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4547   .text.dir_read:00000000 dir_read
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4772   .text.remove_chain:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4778   .text.remove_chain:00000000 remove_chain
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4903   .text.dir_sdi:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:4910   .text.dir_sdi:00000000 dir_sdi
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5114   .text.dir_find:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5120   .text.dir_find:00000000 dir_find
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5357   .text.follow_path:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5363   .text.follow_path:00000000 follow_path
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5520   .text.dir_alloc:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5526   .text.dir_alloc:00000000 dir_alloc
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5636   .text.dir_register:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5642   .text.dir_register:00000000 dir_register
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5953   .text.dir_register:00000128 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5958   .text.dir_remove:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:5964   .text.dir_remove:00000000 dir_remove
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:6083   .text.f_mount:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:6090   .text.f_mount:00000000 f_mount
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:6208   .text.f_mount:00000054 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:6213   .text.f_open:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:6220   .text.f_open:00000000 f_open
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:6616   .text.f_read:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:6623   .text.f_read:00000000 f_read
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7017   .text.f_write:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7024   .text.f_write:00000000 f_write
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7467   .text.putc_bfd:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7473   .text.putc_bfd:00000000 putc_bfd
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7579   .text.f_sync:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7586   .text.f_sync:00000000 f_sync
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7734   .text.f_close:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7741   .text.f_close:00000000 f_close
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7787   .text.f_lseek:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:7794   .text.f_lseek:00000000 f_lseek
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8456   .text.f_opendir:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8463   .text.f_opendir:00000000 f_opendir
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8623   .text.f_closedir:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8630   .text.f_closedir:00000000 f_closedir
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8664   .text.f_readdir:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8671   .text.f_readdir:00000000 f_readdir
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8816   .text.f_stat:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8823   .text.f_stat:00000000 f_stat
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8938   .text.f_getfree:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:8945   .text.f_getfree:00000000 f_getfree
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:9223   .text.f_truncate:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:9230   .text.f_truncate:00000000 f_truncate
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:9432   .text.f_unlink:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:9439   .text.f_unlink:00000000 f_unlink
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:9678   .text.f_mkdir:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:9685   .text.f_mkdir:00000000 f_mkdir
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10081  .text.f_chmod:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10088  .text.f_chmod:00000000 f_chmod
ARM GAS  C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s 			page 388


C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10232  .text.f_utime:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10239  .text.f_utime:00000000 f_utime
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10380  .text.f_rename:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10387  .text.f_rename:00000000 f_rename
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10698  .text.f_getlabel:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10705  .text.f_getlabel:00000000 f_getlabel
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10902  .rodata.f_setlabel.str1.4:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10906  .text.f_setlabel:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:10913  .text.f_setlabel:00000000 f_setlabel
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:11345  .text.f_setlabel:000001b8 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:11350  .rodata.f_mkfs.str1.4:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:11360  .text.f_mkfs:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:11367  .text.f_mkfs:00000000 f_mkfs
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:11928  .text.f_mkfs:00000284 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:11936  .text.f_mkfs:00000298 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12511  .text.f_mkfs:00000614 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12518  .text.f_mkfs:00000624 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12565  .text.f_gets:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12572  .text.f_gets:00000000 f_gets
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12682  .text.f_putc:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12689  .text.f_putc:00000000 f_putc
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12770  .text.f_puts:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12777  .text.f_puts:00000000 f_puts
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12872  .text.f_printf:00000000 $t
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:12879  .text.f_printf:00000000 f_printf
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13043  .text.f_printf:00000086 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13521  .bss.FatFs:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13525  .bss.FatFs:00000000 FatFs
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13528  .bss.Fsid:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13532  .bss.Fsid:00000000 Fsid
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13535  .rodata.LfnOfs:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13539  .rodata.LfnOfs:00000000 LfnOfs
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13542  .rodata.cst.0:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13546  .rodata.cst.0:00000000 cst.0
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13559  .rodata.vst.1:00000000 $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13563  .rodata.vst.1:00000000 vst.1
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13067  .text.f_printf:0000009d $d
C:\Users\ADMIN\AppData\Local\Temp\cch3sYvM.s:13067  .text.f_printf:0000009e $t

UNDEFINED SYMBOLS
disk_write
disk_read
disk_status
disk_initialize
ff_convert
ff_wtoupper
disk_ioctl
ff_memalloc
ff_memfree
get_fattime
